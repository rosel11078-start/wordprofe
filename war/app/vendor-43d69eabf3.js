!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(x,e){var t=[],C=x.document,c=t.slice,g=t.concat,s=t.push,i=t.indexOf,n={},r=n.toString,h=n.hasOwnProperty,m={},a="2.2.4",E=function(e,t){return new E.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,l=/^-ms-/,u=/-([\da-z])/gi,d=function(e,t){return t.toUpperCase()};function f(e){var t=!!e&&"length"in e&&e.length,n=E.type(e);return"function"!==n&&!E.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}E.fn=E.prototype={jquery:a,constructor:E,selector:"",length:0,toArray:function(){return c.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:c.call(this)},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return E.each(this,e)},map:function(n){return this.pushStack(E.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:t.sort,splice:t.splice},E.extend=E.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||E.isFunction(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],o!==(r=e[t])&&(u&&r&&(E.isPlainObject(r)||(i=E.isArray(r)))?(a=i?(i=!1,n&&E.isArray(n)?n:[]):n&&E.isPlainObject(n)?n:{},o[t]=E.extend(u,a,r)):void 0!==r&&(o[t]=r));return o},E.extend({expando:"jQuery"+(a+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===E.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!E.isArray(e)&&0<=t-parseFloat(t)+1},isPlainObject:function(e){var t;if("object"!==E.type(e)||e.nodeType||E.isWindow(e))return!1;if(e.constructor&&!h.call(e,"constructor")&&!h.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||h.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[r.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=E.trim(e))&&(1===e.indexOf("use strict")?((t=C.createElement("script")).text=e,C.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(l,"ms-").replace(u,d)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(f(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(f(Object(e))?E.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,o=[];if(f(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return g.apply([],o)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),E.isFunction(e))return r=c.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(c.call(arguments)))}).guid=e.guid=e.guid||E.guid++,i},now:Date.now,support:m}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=t[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var p=function(n){var e,h,$,a,i,g,d,m,w,l,u,S,x,o,C,v,s,c,y,E="sizzle"+1*new Date,b=n.document,T=0,r=0,f=ie(),p=ie(),D=ie(),k=function(e,t){return e===t&&(u=!0),0},R={}.hasOwnProperty,t=[],M=t.pop,A=t.push,N=t.push,O=t.slice,I=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},_="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",L="\\["+P+"*("+H+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+P+"*\\]",F=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",z=new RegExp(P+"+","g"),U=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),B=new RegExp("^"+P+"*,"+P+"*"),j=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=new RegExp("="+P+"*([^\\]'\"]*?)"+P+"*\\]","g"),W=new RegExp(F),q=new RegExp("^"+H+"$"),G={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+_+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Q=/'|\\/g,ee=new RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),te=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ne=function(){S()};try{N.apply(t=O.call(b.childNodes),b.childNodes),t[b.childNodes.length].nodeType}catch(e){N={apply:t.length?function(e,t){A.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function re(e,t,n,r){var i,a,o,s,l,u,c,d,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&((t?t.ownerDocument||t:b)!==x&&S(t),t=t||x,C)){if(11!==p&&(u=Z.exec(e)))if(i=u[1]){if(9===p){if(!(o=t.getElementById(i)))return n;if(o.id===i)return n.push(o),n}else if(f&&(o=f.getElementById(i))&&y(t,o)&&o.id===i)return n.push(o),n}else{if(u[2])return N.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&h.getElementsByClassName&&t.getElementsByClassName)return N.apply(n,t.getElementsByClassName(i)),n}if(h.qsa&&!D[e+" "]&&(!v||!v.test(e))){if(1!==p)f=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(Q,"\\$&"):t.setAttribute("id",s=E),a=(c=g(e)).length,l=q.test(s)?"#"+s:"[id='"+s+"']";a--;)c[a]=l+" "+he(c[a]);d=c.join(","),f=J.test(e)&&fe(t.parentNode)||t}if(d)try{return N.apply(n,f.querySelectorAll(d)),n}catch(e){}finally{s===E&&t.removeAttribute("id")}}}return m(e.replace(U,"$1"),t,n,r)}function ie(){var r=[];return function e(t,n){return r.push(t+" ")>$.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function ae(e){return e[E]=!0,e}function oe(e){var t=x.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var n=e.split("|"),r=n.length;r--;)$.attrHandle[n[r]]=t}function le(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ue(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ce(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function de(o){return ae(function(a){return a=+a,ae(function(e,t){for(var n,r=o([],e.length,a),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=re.support={},i=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},S=re.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:b;return r!==x&&9===r.nodeType&&r.documentElement&&(o=(x=r).documentElement,C=!i(x),(n=x.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ne,!1):n.attachEvent&&n.attachEvent("onunload",ne)),h.attributes=oe(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=oe(function(e){return e.appendChild(x.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=X.test(x.getElementsByClassName),h.getById=oe(function(e){return o.appendChild(e).id=E,!x.getElementsByName||!x.getElementsByName(E).length}),h.getById?($.find.ID=function(e,t){if(void 0!==t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}},$.filter.ID=function(e){var t=e.replace(ee,te);return function(e){return e.getAttribute("id")===t}}):(delete $.find.ID,$.filter.ID=function(e){var n=e.replace(ee,te);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),$.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"!==e)return a;for(;n=a[i++];)1===n.nodeType&&r.push(n);return r},$.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&C)return t.getElementsByClassName(e)},s=[],v=[],(h.qsa=X.test(x.querySelectorAll))&&(oe(function(e){o.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+P+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+P+"*(?:value|"+_+")"),e.querySelectorAll("[id~="+E+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||v.push(".#.+[+~]")}),oe(function(e){var t=x.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+P+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(h.matchesSelector=X.test(c=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&oe(function(e){h.disconnectedMatch=c.call(e,"div"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=X.test(o.compareDocumentPosition),y=t||X.test(o.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===n?e===x||e.ownerDocument===b&&y(b,e)?-1:t===x||t.ownerDocument===b&&y(b,t)?1:l?I(l,e)-I(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e===x?-1:t===x?1:i?-1:a?1:l?I(l,e)-I(l,t):0;if(i===a)return le(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?le(o[r],s[r]):o[r]===b?-1:s[r]===b?1:0}),x},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==x&&S(e),t=t.replace(V,"='$1']"),h.matchesSelector&&C&&!D[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,x,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==x&&S(e),y(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==x&&S(e);var n=$.attrHandle[t.toLowerCase()],r=n&&R.call($.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:h.attributes||!C?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],r=0,i=0;if(u=!h.detectDuplicates,l=!h.sortStable&&e.slice(0),e.sort(k),u){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return l=null,e},a=re.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},($=re.selectors={cacheLength:50,createPseudo:ae,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ee,te),e[3]=(e[3]||e[4]||e[5]||"").replace(ee,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=g(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ee,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=f[e+" "];return t||(t=new RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&f(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=re.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(z," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,m){var v="nth"!==h.slice(0,3),y="last"!==h.slice(-4),b="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var r,i,a,o,s,l,u=v!==y?"nextSibling":"previousSibling",c=e.parentNode,d=b&&e.nodeName.toLowerCase(),f=!n&&!b,p=!1;if(c){if(v){for(;u;){for(o=e;o=o[u];)if(b?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;l=u="only"===h&&!l&&"nextSibling"}return!0}if(l=[y?c.firstChild:c.lastChild],y&&f){for(p=(s=(r=(i=(a=(o=c)[E]||(o[E]={}))[o.uniqueID]||(a[o.uniqueID]={}))[h]||[])[0]===T&&r[1])&&r[2],o=s&&c.childNodes[s];o=++s&&o&&o[u]||(p=s=0)||l.pop();)if(1===o.nodeType&&++p&&o===e){i[h]=[T,s,p];break}}else if(f&&(p=s=(r=(i=(a=(o=e)[E]||(o[E]={}))[o.uniqueID]||(a[o.uniqueID]={}))[h]||[])[0]===T&&r[1]),!1===p)for(;(o=++s&&o&&o[u]||(p=s=0)||l.pop())&&((b?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++p||(f&&((i=(a=o[E]||(o[E]={}))[o.uniqueID]||(a[o.uniqueID]={}))[h]=[T,p]),o!==e)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,a){var t,o=$.pseudos[e]||$.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return o[E]?o(a):1<o.length?(t=[e,e,"",a],$.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,t){for(var n,r=o(e,a),i=r.length;i--;)e[n=I(e,r[i])]=!(t[n]=r[i])}):function(e){return o(e,0,t)}):o}},pseudos:{not:ae(function(e){var r=[],i=[],s=d(e.replace(U,"$1"));return s[E]?ae(function(e,t,n,r){for(var i,a=s(e,null,r,[]),o=e.length;o--;)(i=a[o])&&(e[o]=!(t[o]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:ae(function(t){return function(e){return 0<re(t,e).length}}),contains:ae(function(t){return t=t.replace(ee,te),function(e){return-1<(e.textContent||e.innerText||a(e)).indexOf(t)}}),lang:ae(function(n){return q.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(ee,te).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===o},focus:function(e){return e===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!$.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:de(function(){return[0]}),last:de(function(e,t){return[t-1]}),eq:de(function(e,t,n){return[n<0?n+t:n]}),even:de(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:de(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:de(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:de(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=$.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$.pseudos[e]=ue(e);for(e in{submit:!0,reset:!0})$.pseudos[e]=ce(e);function pe(){}function he(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ge(s,e,t){var l=e.dir,u=t&&"parentNode"===l,c=r++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||u)return s(e,t,n)}:function(e,t,n){var r,i,a,o=[T,c];if(n){for(;e=e[l];)if((1===e.nodeType||u)&&s(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||u){if((r=(i=(a=e[E]||(e[E]={}))[e.uniqueID]||(a[e.uniqueID]={}))[l])&&r[0]===T&&r[1]===c)return o[2]=r[2];if((i[l]=o)[2]=s(e,t,n))return!0}}}function me(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function ve(e,t,n,r,i){for(var a,o=[],s=0,l=e.length,u=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),u&&t.push(s)));return o}function ye(p,h,g,m,v,e){return m&&!m[E]&&(m=ye(m)),v&&!v[E]&&(v=ye(v,e)),ae(function(e,t,n,r){var i,a,o,s=[],l=[],u=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)re(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),d=!p||!e&&h?c:ve(c,s,p,n,r),f=g?v||(e?p:u||m)?[]:t:d;if(g&&g(d,f,n,r),m)for(i=ve(f,l),m(i,[],n,r),a=i.length;a--;)(o=i[a])&&(f[l[a]]=!(d[l[a]]=o));if(e){if(v||p){if(v){for(i=[],a=f.length;a--;)(o=f[a])&&i.push(d[a]=o);v(null,f=[],i,r)}for(a=f.length;a--;)(o=f[a])&&-1<(i=v?I(e,o):s[a])&&(e[i]=!(t[i]=o))}}else f=ve(f===t?f.splice(u,f.length):f),v?v(null,t,f,r):N.apply(t,f)})}function be(e){for(var i,t,n,r=e.length,a=$.relative[e[0].type],o=a||$.relative[" "],s=a?1:0,l=ge(function(e){return e===i},o,!0),u=ge(function(e){return-1<I(i,e)},o,!0),c=[function(e,t,n){var r=!a&&(n||t!==w)||((i=t).nodeType?l(e,t,n):u(e,t,n));return i=null,r}];s<r;s++)if(t=$.relative[e[s].type])c=[ge(me(c),t)];else{if((t=$.filter[e[s].type].apply(null,e[s].matches))[E]){for(n=++s;n<r&&!$.relative[e[n].type];n++);return ye(1<s&&me(c),1<s&&he(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(U,"$1"),t,s<n&&be(e.slice(s,n)),n<r&&be(e=e.slice(n)),n<r&&he(e))}c.push(t)}return me(c)}return pe.prototype=$.filters=$.pseudos,$.setFilters=new pe,g=re.tokenize=function(e,t){var n,r,i,a,o,s,l,u=p[e+" "];if(u)return t?0:u.slice(0);for(o=e,s=[],l=$.preFilter;o;){for(a in n&&!(r=B.exec(o))||(r&&(o=o.slice(r[0].length)||o),s.push(i=[])),n=!1,(r=j.exec(o))&&(n=r.shift(),i.push({value:n,type:r[0].replace(U," ")}),o=o.slice(n.length)),$.filter)!(r=G[a].exec(o))||l[a]&&!(r=l[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?re.error(e):p(e,s).slice(0)},d=re.compile=function(e,t){var n,m,v,y,b,r,i=[],a=[],o=D[e+" "];if(!o){for(t||(t=g(e)),n=t.length;n--;)(o=be(t[n]))[E]?i.push(o):a.push(o);(o=D(e,(m=a,y=0<(v=i).length,b=0<m.length,r=function(e,t,n,r,i){var a,o,s,l=0,u="0",c=e&&[],d=[],f=w,p=e||b&&$.find.TAG("*",i),h=T+=null==f?1:Math.random()||.1,g=p.length;for(i&&(w=t===x||t||i);u!==g&&null!=(a=p[u]);u++){if(b&&a){for(o=0,t||a.ownerDocument===x||(S(a),n=!C);s=m[o++];)if(s(a,t||x,n)){r.push(a);break}i&&(T=h)}y&&((a=!s&&a)&&l--,e&&c.push(a))}if(l+=u,y&&u!==l){for(o=0;s=v[o++];)s(c,d,t,n);if(e){if(0<l)for(;u--;)c[u]||d[u]||(d[u]=M.call(r));d=ve(d)}N.apply(r,d),i&&!e&&0<d.length&&1<l+v.length&&re.uniqueSort(r)}return i&&(T=h,w=f),c},y?ae(r):r))).selector=e}return o},m=re.select=function(e,t,n,r){var i,a,o,s,l,u="function"==typeof e&&e,c=!r&&g(e=u.selector||e);if(n=n||[],1===c.length){if(2<(a=c[0]=c[0].slice(0)).length&&"ID"===(o=a[0]).type&&h.getById&&9===t.nodeType&&C&&$.relative[a[1].type]){if(!(t=($.find.ID(o.matches[0].replace(ee,te),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(i=G.needsContext.test(e)?0:a.length;i--&&(o=a[i],!$.relative[s=o.type]);)if((l=$.find[s])&&(r=l(o.matches[0].replace(ee,te),J.test(a[0].type)&&fe(t.parentNode)||t))){if(a.splice(i,1),!(e=r.length&&he(a)))return N.apply(n,r),n;break}}return(u||d(e,c))(r,t,!C,n,!t||J.test(e)&&fe(t.parentNode)||t),n},h.sortStable=E.split("").sort(k).join("")===E,h.detectDuplicates=!!u,S(),h.sortDetached=oe(function(e){return 1&e.compareDocumentPosition(x.createElement("div"))}),oe(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||se("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&oe(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||se("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),oe(function(e){return null==e.getAttribute("disabled")})||se(_,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),re}(x);E.find=p,E.expr=p.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=p.uniqueSort,E.text=p.getText,E.isXMLDoc=p.isXML,E.contains=p.contains;var v=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&E(e).is(n))break;r.push(e)}return r},y=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=E.expr.match.needsContext,$=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function S(e,n,r){if(E.isFunction(n))return E.grep(e,function(e,t){return!!n.call(e,t,e)!==r});if(n.nodeType)return E.grep(e,function(e){return e===n!==r});if("string"==typeof n){if(w.test(n))return E.filter(n,e,r);n=E.filter(n,e)}return E.grep(e,function(e){return-1<i.call(n,e)!==r})}E.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?E.find.matchesSelector(r,e)?[r]:[]:E.find.matches(e,E.grep(t,function(e){return 1===e.nodeType}))},E.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(E(e).filter(function(){for(t=0;t<n;t++)if(E.contains(i[t],this))return!0}));for(t=0;t<n;t++)E.find(e,i[t],r);return(r=this.pushStack(1<n?E.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(S(this,e||[],!1))},not:function(e){return this.pushStack(S(this,e||[],!0))},is:function(e){return!!S(this,"string"==typeof e&&b.test(e)?E(e):e||[],!1).length}});var T,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(E.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||T,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):E.isFunction(e)?void 0!==n.ready?n.ready(e):e(E):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),E.makeArray(e,this));if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:D.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),$.test(r[1])&&E.isPlainObject(t))for(r in t)E.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=C,this.selector=e,this}).prototype=E.fn,T=E(C);var k=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function M(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,a=[],o=b.test(e)||"string"!=typeof e?E(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&E.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(1<a.length?E.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?i.call(E(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return v(e,"parentNode")},parentsUntil:function(e,t,n){return v(e,"parentNode",n)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return v(e,"nextSibling")},prevAll:function(e){return v(e,"previousSibling")},nextUntil:function(e,t,n){return v(e,"nextSibling",n)},prevUntil:function(e,t,n){return v(e,"previousSibling",n)},siblings:function(e){return y((e.parentNode||{}).firstChild,e)},children:function(e){return y(e.firstChild)},contents:function(e){return e.contentDocument||E.merge([],e.childNodes)}},function(r,i){E.fn[r]=function(e,t){var n=E.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=E.filter(t,n)),1<this.length&&(R[r]||E.uniqueSort(n),k.test(r)&&n.reverse()),this.pushStack(n)}});var A,N=/\S+/g;function O(){C.removeEventListener("DOMContentLoaded",O),x.removeEventListener("load",O),E.ready()}E.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},E.each(e.match(N)||[],function(e,t){n[t]=!0}),n):E.extend({},r);var i,t,a,o,s=[],l=[],u=-1,c=function(){for(o=r.once,a=i=!0;l.length;u=-1)for(t=l.shift();++u<s.length;)!1===s[u].apply(t[0],t[1])&&r.stopOnFalse&&(u=s.length,t=!1);r.memory||(t=!1),i=!1,o&&(s=t?[]:"")},d={add:function(){return s&&(t&&!i&&(u=s.length-1,l.push(t)),function n(e){E.each(e,function(e,t){E.isFunction(t)?r.unique&&d.has(t)||s.push(t):t&&t.length&&"string"!==E.type(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return E.each(arguments,function(e,t){for(var n;-1<(n=E.inArray(t,s,n));)s.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<E.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return o=l=[],s=t="",this},disabled:function(){return!s},lock:function(){return o=l=[],t||(s=t=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),i||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},E.extend({Deferred:function(e){var a=[["resolve","done",E.Callbacks("once memory"),"resolved"],["reject","fail",E.Callbacks("once memory"),"rejected"],["notify","progress",E.Callbacks("memory")]],i="pending",o={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var i=arguments;return E.Deferred(function(r){E.each(a,function(e,t){var n=E.isFunction(i[e])&&i[e];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&E.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this===o?r.promise():this,n?[e]:arguments)})}),i=null}).promise()},promise:function(e){return null!=e?E.extend(e,o):o}},s={};return o.pipe=o.then,E.each(a,function(e,t){var n=t[2],r=t[3];o[t[1]]=n.add,r&&n.add(function(){i=r},a[1^e][2].disable,a[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?o:this,arguments),this},s[t[0]+"With"]=n.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){var i,t,n,r=0,a=c.call(arguments),o=a.length,s=1!==o||e&&E.isFunction(e.promise)?o:0,l=1===s?e:E.Deferred(),u=function(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?c.call(arguments):e,r===i?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(1<o)for(i=new Array(o),t=new Array(o),n=new Array(o);r<o;r++)a[r]&&E.isFunction(a[r].promise)?a[r].promise().progress(u(r,t,i)).done(u(r,n,a)).fail(l.reject):--s;return s||l.resolveWith(n,a),l.promise()}}),E.fn.ready=function(e){return E.ready.promise().done(e),this},E.extend({isReady:!1,readyWait:1,holdReady:function(e){e?E.readyWait++:E.ready(!0)},ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0)!==e&&0<--E.readyWait||(A.resolveWith(C,[E]),E.fn.triggerHandler&&(E(C).triggerHandler("ready"),E(C).off("ready")))}}),E.ready.promise=function(e){return A||(A=E.Deferred(),"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?x.setTimeout(E.ready):(C.addEventListener("DOMContentLoaded",O),x.addEventListener("load",O))),A.promise(e)},E.ready.promise();var I=function(e,t,n,r,i,a,o){var s=0,l=e.length,u=null==n;if("object"===E.type(n))for(s in i=!0,n)I(e,t,s,n[s],!0,a,o);else if(void 0!==r&&(i=!0,E.isFunction(r)||(o=!0),u&&(t=o?(t.call(e,r),null):(u=t,function(e,t,n){return u.call(E(e),n)})),t))for(;s<l;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):a},_=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function P(){this.expando=E.expando+P.uid++}P.uid=1,P.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!_(e))return{};var t=e[this.expando];return t||(t={},_(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(r=this.get(e,t))?r:this.get(e,E.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,a=e[this.expando];if(void 0!==a){if(void 0===t)this.register(e);else{n=(r=E.isArray(t)?t.concat(t.map(E.camelCase)):(i=E.camelCase(t),t in a?[t,i]:(r=i)in a?[r]:r.match(N)||[])).length;for(;n--;)delete a[r[n]]}(void 0===t||E.isEmptyObject(a))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var H=new P,L=new P,F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,z=/[A-Z]/g;function U(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:F.test(n)?E.parseJSON(n):n)}catch(e){}L.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return L.hasData(e)||H.hasData(e)},data:function(e,t,n){return L.access(e,t,n)},removeData:function(e,t){L.remove(e,t)},_data:function(e,t,n){return H.access(e,t,n)},_removeData:function(e,t){H.remove(e,t)}}),E.fn.extend({data:function(r,e){var t,n,i,a=this[0],o=a&&a.attributes;if(void 0!==r)return"object"==typeof r?this.each(function(){L.set(this,r)}):I(this,function(t){var e,n;if(a&&void 0===t)return void 0!==(e=L.get(a,r)||L.get(a,r.replace(z,"-$&").toLowerCase()))?e:(n=E.camelCase(r),void 0!==(e=L.get(a,n))?e:void 0!==(e=U(a,n,void 0))?e:void 0);n=E.camelCase(r),this.each(function(){var e=L.get(this,n);L.set(this,n,t),-1<r.indexOf("-")&&void 0!==e&&L.set(this,r,t)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=L.get(a),1===a.nodeType&&!H.get(a,"hasDataAttrs"))){for(t=o.length;t--;)o[t]&&0===(n=o[t].name).indexOf("data-")&&(n=E.camelCase(n.slice(5)),U(a,n,i[n]));H.set(a,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){L.remove(this,e)})}}),E.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=H.get(e,t),n&&(!r||E.isArray(n)?r=H.access(e,t,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),r=n.length,i=n.shift(),a=E._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,function(){E.dequeue(e,t)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return H.get(e,n)||H.access(e,n,{empty:E.Callbacks("once memory").add(function(){H.remove(e,[t+"queue",n])})})}}),E.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?E.queue(this[0],t):void 0===n?this:this.each(function(){var e=E.queue(this,t,n);E._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&E.dequeue(this,t)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=E.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=H.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var B=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,j=new RegExp("^(?:([+-])=|)("+B+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],W=function(e,t){return e=t||e,"none"===E.css(e,"display")||!E.contains(e.ownerDocument,e)};function q(e,t,n,r){var i,a=1,o=20,s=r?function(){return r.cur()}:function(){return E.css(e,t,"")},l=s(),u=n&&n[3]||(E.cssNumber[t]?"":"px"),c=(E.cssNumber[t]||"px"!==u&&+l)&&j.exec(E.css(e,t));if(c&&c[3]!==u)for(u=u||c[3],n=n||[],c=+l||1;c/=a=a||".5",E.style(e,t,c+u),a!==(a=s()/l)&&1!==a&&--o;);return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var G=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,K=/^$|\/(?:java|ecma)script/i,X={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Z(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&E.nodeName(e,t)?E.merge([e],n):n}function J(e,t){for(var n=0,r=e.length;n<r;n++)H.set(e[n],"globalEval",!t||H.get(t[n],"globalEval"))}X.optgroup=X.option,X.tbody=X.tfoot=X.colgroup=X.caption=X.thead,X.th=X.td;var Q,ee,te=/<|&#?\w+;/;function ne(e,t,n,r,i){for(var a,o,s,l,u,c,d=t.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((a=e[p])||0===a)if("object"===E.type(a))E.merge(f,a.nodeType?[a]:a);else if(te.test(a)){for(o=o||d.appendChild(t.createElement("div")),s=(Y.exec(a)||["",""])[1].toLowerCase(),l=X[s]||X._default,o.innerHTML=l[1]+E.htmlPrefilter(a)+l[2],c=l[0];c--;)o=o.lastChild;E.merge(f,o.childNodes),(o=d.firstChild).textContent=""}else f.push(t.createTextNode(a));for(d.textContent="",p=0;a=f[p++];)if(r&&-1<E.inArray(a,r))i&&i.push(a);else if(u=E.contains(a.ownerDocument,a),o=Z(d.appendChild(a),"script"),u&&J(o),n)for(c=0;a=o[c++];)K.test(a.type||"")&&n.push(a);return d}Q=C.createDocumentFragment().appendChild(C.createElement("div")),(ee=C.createElement("input")).setAttribute("type","radio"),ee.setAttribute("checked","checked"),ee.setAttribute("name","t"),Q.appendChild(ee),m.checkClone=Q.cloneNode(!0).cloneNode(!0).lastChild.checked,Q.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!Q.cloneNode(!0).lastChild.defaultValue;var re=/^key/,ie=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ae=/^([^.]*)(?:\.(.+)|)/;function oe(){return!0}function se(){return!1}function le(){try{return C.activeElement}catch(e){}}function ue(e,t,n,r,i,a){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)ue(e,s,n,r,t[s],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=se;else if(!i)return e;return 1===a&&(o=i,(i=function(e){return E().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=E.guid++)),e.each(function(){E.event.add(this,t,i,r,n)})}E.event={global:{},add:function(t,e,n,r,i){var a,o,s,l,u,c,d,f,p,h,g,m=H.get(t);if(m)for(n.handler&&(n=(a=n).handler,i=a.selector),n.guid||(n.guid=E.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(N)||[""]).length;u--;)p=g=(s=ae.exec(e[u])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=E.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=E.event.special[p]||{},c=E.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:h.join(".")},a),(f=l[p])||((f=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,r,h,o)||t.addEventListener&&t.addEventListener(p,o)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),E.event.global[p]=!0)},remove:function(e,t,n,r,i){var a,o,s,l,u,c,d,f,p,h,g,m=H.hasData(e)&&H.get(e);if(m&&(l=m.events)){for(u=(t=(t||"").match(N)||[""]).length;u--;)if(p=g=(s=ae.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=E.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=f.length;a--;)c=f[a],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(a,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(e,c));o&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,m.handle)||E.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)E.event.remove(e,p+t[u],n,r,!0);E.isEmptyObject(l)&&H.remove(e,"handle events")}},dispatch:function(e){e=E.event.fix(e);var t,n,r,i,a,o,s=c.call(arguments),l=(H.get(this,"events")||{})[e.type]||[],u=E.event.special[e.type]||{};if((s[0]=e).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(o=E.event.handlers.call(this,e,l),t=0;(i=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(a.namespace)||(e.handleObj=a,e.data=a.data,void 0!==(r=((E.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,s))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,a,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],n=0;n<s;n++)void 0===r[i=(a=t[n]).selector+" "]&&(r[i]=a.needsContext?-1<E(i,this).index(l):E.find(i,this,null,[l]).length),r[i]&&r.push(a);r.length&&o.push({elem:l,handlers:r})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,a=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||C).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[E.expando])return e;var t,n,r,i=e.type,a=e,o=this.fixHooks[i];for(o||(this.fixHooks[i]=o=ie.test(i)?this.mouseHooks:re.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new E.Event(a),t=r.length;t--;)e[n=r[t]]=a[n];return e.target||(e.target=C),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==le()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===le()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&E.nodeName(this,"input"))return this.click(),!1},_default:function(e){return E.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?oe:se):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||E.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:se,isPropagationStopped:se,isImmediatePropagationStopped:se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){E.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||E.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),E.fn.extend({on:function(e,t,n,r){return ue(this,e,t,n,r)},one:function(e,t,n,r){return ue(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,E(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=se),this.each(function(){E.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this}});var ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,de=/<script|<style|<link/i,fe=/checked\s*(?:[^=]|=\s*.checked.)/i,pe=/^true\/(.*)/,he=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ge(e,t){return E.nodeName(e,"table")&&E.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ve(e){var t=pe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ye(e,t){var n,r,i,a,o,s,l,u;if(1===t.nodeType){if(H.hasData(e)&&(a=H.access(e),o=H.set(t,a),u=a.events))for(i in delete o.handle,o.events={},u)for(n=0,r=u[i].length;n<r;n++)E.event.add(t,i,u[i][n]);L.hasData(e)&&(s=L.access(e),l=E.extend({},s),L.set(t,l))}}function be(n,r,i,a){r=g.apply([],r);var e,t,o,s,l,u,c=0,d=n.length,f=d-1,p=r[0],h=E.isFunction(p);if(h||1<d&&"string"==typeof p&&!m.checkClone&&fe.test(p))return n.each(function(e){var t=n.eq(e);h&&(r[0]=p.call(this,e,t.html())),be(t,r,i,a)});if(d&&(t=(e=ne(r,n[0].ownerDocument,!1,n,a)).firstChild,1===e.childNodes.length&&(e=t),t||a)){for(s=(o=E.map(Z(e,"script"),me)).length;c<d;c++)l=e,c!==f&&(l=E.clone(l,!0,!0),s&&E.merge(o,Z(l,"script"))),i.call(n[c],l,c);if(s)for(u=o[o.length-1].ownerDocument,E.map(o,ve),c=0;c<s;c++)l=o[c],K.test(l.type||"")&&!H.access(l,"globalEval")&&E.contains(u,l)&&(l.src?E._evalUrl&&E._evalUrl(l.src):E.globalEval(l.textContent.replace(he,"")))}return n}function $e(e,t,n){for(var r,i=t?E.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||E.cleanData(Z(r)),r.parentNode&&(n&&E.contains(r.ownerDocument,r)&&J(Z(r,"script")),r.parentNode.removeChild(r));return e}E.extend({htmlPrefilter:function(e){return e.replace(ce,"<$1></$2>")},clone:function(e,t,n){var r,i,a,o,s,l,u,c=e.cloneNode(!0),d=E.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(o=Z(c),r=0,i=(a=Z(e)).length;r<i;r++)s=a[r],l=o[r],void 0,"input"===(u=l.nodeName.toLowerCase())&&G.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(t)if(n)for(a=a||Z(e),o=o||Z(c),r=0,i=a.length;r<i;r++)ye(a[r],o[r]);else ye(e,c);return 0<(o=Z(c,"script")).length&&J(o,!d&&Z(e,"script")),c},cleanData:function(e){for(var t,n,r,i=E.event.special,a=0;void 0!==(n=e[a]);a++)if(_(n)){if(t=n[H.expando]){if(t.events)for(r in t.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,t.handle);n[H.expando]=void 0}n[L.expando]&&(n[L.expando]=void 0)}}}),E.fn.extend({domManip:be,detach:function(e){return $e(this,e,!0)},remove:function(e){return $e(this,e)},text:function(e){return I(this,function(e){return void 0===e?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return be(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ge(this,e).appendChild(e)})},prepend:function(){return be(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ge(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(Z(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return I(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!de.test(e)&&!X[(Y.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(Z(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return be(this,arguments,function(e){var t=this.parentNode;E.inArray(this,n)<0&&(E.cleanData(Z(this)),t&&t.replaceChild(e,this))},n)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){E.fn[e]=function(e){for(var t,n=[],r=E(e),i=r.length-1,a=0;a<=i;a++)t=a===i?this:this.clone(!0),E(r[a])[o](t),s.apply(n,t.get());return this.pushStack(n)}});var we,Se={HTML:"block",BODY:"block"};function xe(e,t){var n=E(t.createElement(e)).appendTo(t.body),r=E.css(n[0],"display");return n.detach(),r}function Ce(e){var t=C,n=Se[e];return n||("none"!==(n=xe(e,t))&&n||((t=(we=(we||E("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=xe(e,t),we.detach()),Se[e]=n),n}var Ee=/^margin/,Te=new RegExp("^("+B+")(?!px)[a-z%]+$","i"),De=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=x),t.getComputedStyle(e)},ke=function(e,t,n,r){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in i=n.apply(e,r||[]),t)e.style[a]=o[a];return i},Re=C.documentElement;function Me(e,t,n){var r,i,a,o,s=e.style;return""!==(o=(n=n||De(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==o||E.contains(e.ownerDocument,e)||(o=E.style(e,t)),n&&!m.pixelMarginRight()&&Te.test(o)&&Ee.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a),void 0!==o?o+"":o}function Ae(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var t,n,r,i,a=C.createElement("div"),o=C.createElement("div");function e(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",o.innerHTML="",Re.appendChild(a);var e=x.getComputedStyle(o);t="1%"!==e.top,i="2px"===e.marginLeft,n="4px"===e.width,o.style.marginRight="50%",r="4px"===e.marginRight,Re.removeChild(a)}o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===o.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(o),E.extend(m,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return null==n&&e(),n},pixelMarginRight:function(){return null==n&&e(),r},reliableMarginLeft:function(){return null==n&&e(),i},reliableMarginRight:function(){var e,t=o.appendChild(C.createElement("div"));return t.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",o.style.width="1px",Re.appendChild(a),e=!parseFloat(x.getComputedStyle(t).marginRight),Re.removeChild(a),o.removeChild(t),e}}))}();var Ne=/^(none|table(?!-c[ea]).+)/,Oe={position:"absolute",visibility:"hidden",display:"block"},Ie={letterSpacing:"0",fontWeight:"400"},_e=["Webkit","O","Moz","ms"],Pe=C.createElement("div").style;function He(e){if(e in Pe)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=_e.length;n--;)if((e=_e[n]+t)in Pe)return e}function Le(e,t,n){var r=j.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Fe(e,t,n,r,i){for(var a=n===(r?"border":"content")?4:"width"===t?1:0,o=0;a<4;a+=2)"margin"===n&&(o+=E.css(e,n+V[a],!0,i)),r?("content"===n&&(o-=E.css(e,"padding"+V[a],!0,i)),"margin"!==n&&(o-=E.css(e,"border"+V[a]+"Width",!0,i))):(o+=E.css(e,"padding"+V[a],!0,i),"padding"!==n&&(o+=E.css(e,"border"+V[a]+"Width",!0,i)));return o}function ze(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,a=De(e),o="border-box"===E.css(e,"boxSizing",!1,a);if(i<=0||null==i){if(((i=Me(e,t,a))<0||null==i)&&(i=e.style[t]),Te.test(i))return i;r=o&&(m.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Fe(e,t,n||(o?"border":"content"),r,a)+"px"}function Ue(e,t){for(var n,r,i,a=[],o=0,s=e.length;o<s;o++)(r=e[o]).style&&(a[o]=H.get(r,"olddisplay"),n=r.style.display,t?(a[o]||"none"!==n||(r.style.display=""),""===r.style.display&&W(r)&&(a[o]=H.access(r,"olddisplay",Ce(r.nodeName)))):(i=W(r),"none"===n&&i||H.set(r,"olddisplay",i?n:E.css(r,"display"))));for(o=0;o<s;o++)(r=e[o]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?a[o]||"":"none"));return e}function Be(e,t,n,r,i){return new Be.prototype.init(e,t,n,r,i)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Me(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=E.camelCase(t),l=e.style;if(t=E.cssProps[s]||(E.cssProps[s]=He(s)||s),o=E.cssHooks[t]||E.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:l[t];"string"===(a=typeof n)&&(i=j.exec(n))&&i[1]&&(n=q(e,t,i),a="number"),null!=n&&n==n&&("number"===a&&(n+=i&&i[3]||(E.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l[t]=n))}},css:function(e,t,n,r){var i,a,o,s=E.camelCase(t);return t=E.cssProps[s]||(E.cssProps[s]=He(s)||s),(o=E.cssHooks[t]||E.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=Me(e,t,r)),"normal"===i&&t in Ie&&(i=Ie[t]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),E.each(["height","width"],function(e,o){E.cssHooks[o]={get:function(e,t,n){if(t)return Ne.test(E.css(e,"display"))&&0===e.offsetWidth?ke(e,Oe,function(){return ze(e,o,n)}):ze(e,o,n)},set:function(e,t,n){var r,i=n&&De(e),a=n&&Fe(e,o,n,"border-box"===E.css(e,"boxSizing",!1,i),i);return a&&(r=j.exec(t))&&"px"!==(r[3]||"px")&&(e.style[o]=t,t=E.css(e,o)),Le(0,t,a)}}}),E.cssHooks.marginLeft=Ae(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Me(e,"marginLeft"))||e.getBoundingClientRect().left-ke(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),E.cssHooks.marginRight=Ae(m.reliableMarginRight,function(e,t){if(t)return ke(e,{display:"inline-block"},Me,[e,"marginRight"])}),E.each({margin:"",padding:"",border:"Width"},function(i,a){E.cssHooks[i+a]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+V[t]+a]=r[t]||r[t-2]||r[0];return n}},Ee.test(i)||(E.cssHooks[i+a].set=Le)}),E.fn.extend({css:function(e,t){return I(this,function(e,t,n){var r,i,a={},o=0;if(E.isArray(t)){for(r=De(e),i=t.length;o<i;o++)a[t[o]]=E.css(e,t[o],!1,r);return a}return void 0!==n?E.style(e,t,n):E.css(e,t)},e,t,1<arguments.length)},show:function(){return Ue(this,!0)},hide:function(){return Ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){W(this)?E(this).show():E(this).hide()})}}),((E.Tween=Be).prototype={constructor:Be,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(E.cssNumber[n]?"":"px")},cur:function(){var e=Be.propHooks[this.prop];return e&&e.get?e.get(this):Be.propHooks._default.get(this)},run:function(e){var t,n=Be.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Be.propHooks._default.set(this),this}}).init.prototype=Be.prototype,(Be.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[E.cssProps[e.prop]]&&!E.cssHooks[e.prop]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Be.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=Be.prototype.init,E.fx.step={};var je,Ve,We,qe,Ge,Ye=/^(?:toggle|show|hide)$/,Ke=/queueHooks$/;function Xe(){return x.setTimeout(function(){je=void 0}),je=E.now()}function Ze(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=V[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Je(e,t,n){for(var r,i=(Qe.tweeners[t]||[]).concat(Qe.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function Qe(a,e,t){var n,o,r=0,i=Qe.prefilters.length,s=E.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=je||Xe(),t=Math.max(0,u.startTime+u.duration-e),n=1-(t/u.duration||0),r=0,i=u.tweens.length;r<i;r++)u.tweens[r].run(n);return s.notifyWith(a,[u,n,t]),n<1&&i?t:(s.resolveWith(a,[u]),!1)},u=s.promise({elem:a,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},t),originalProperties:e,originalOptions:t,startTime:je||Xe(),duration:t.duration,tweens:[],createTween:function(e,t){var n=E.Tween(a,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var t=0,n=e?u.tweens.length:0;if(o)return this;for(o=!0;t<n;t++)u.tweens[t].run(1);return e?(s.notifyWith(a,[u,1,0]),s.resolveWith(a,[u,e])):s.rejectWith(a,[u,e]),this}}),c=u.props;for(!function(e,t){var n,r,i,a,o;for(n in e)if(i=t[r=E.camelCase(n)],a=e[n],E.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=E.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);r<i;r++)if(n=Qe.prefilters[r].call(u,a,c,u.opts))return E.isFunction(n.stop)&&(E._queueHooks(u.elem,u.opts.queue).stop=E.proxy(n.stop,n)),n;return E.map(c,Je,u),E.isFunction(u.opts.start)&&u.opts.start.call(a,u),E.fx.timer(E.extend(l,{elem:a,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}E.Animation=E.extend(Qe,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return q(n.elem,e,j.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=E.isFunction(e)?(t=e,["*"]):e.match(N)).length;r<i;r++)n=e[r],Qe.tweeners[n]=Qe.tweeners[n]||[],Qe.tweeners[n].unshift(t)},prefilters:[function(t,e,n){var r,i,a,o,s,l,u,c=this,d={},f=t.style,p=t.nodeType&&W(t),h=H.get(t,"fxshow");for(r in n.queue||(null==(s=E._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,E.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(u=E.css(t,"display"))?H.get(t,"olddisplay")||Ce(t.nodeName):u)&&"none"===E.css(t,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),e)if(i=e[r],Ye.exec(i)){if(delete e[r],a=a||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!h||void 0===h[r])continue;p=!0}d[r]=h&&h[r]||E.style(t,r)}else u=void 0;if(E.isEmptyObject(d))"inline"===("none"===u?Ce(t.nodeName):u)&&(f.display=u);else for(r in h?"hidden"in h&&(p=h.hidden):h=H.access(t,"fxshow",{}),a&&(h.hidden=!p),p?E(t).show():c.done(function(){E(t).hide()}),c.done(function(){var e;for(e in H.remove(t,"fxshow"),d)E.style(t,e,d[e])}),d)o=Je(p?h[r]:0,r,c),r in h||(h[r]=o.start,p&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}],prefilter:function(e,t){t?Qe.prefilters.unshift(e):Qe.prefilters.push(e)}}),E.speed=function(e,t,n){var r=e&&"object"==typeof e?E.extend({},e):{complete:n||!n&&t||E.isFunction(e)&&e,duration:e,easing:n&&t||t&&!E.isFunction(t)&&t};return r.duration=E.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in E.fx.speeds?E.fx.speeds[r.duration]:E.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){E.isFunction(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(e,t,n,r){return this.filter(W).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=E.isEmptyObject(t),a=E.speed(e,n,r),o=function(){var e=Qe(this,E.extend({},t),a);(i||H.get(this,"finish"))&&e.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(i,e,a){var o=function(e){var t=e.stop;delete e.stop,t(a)};return"string"!=typeof i&&(a=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=E.timers,r=H.get(this);if(t)r[t]&&r[t].stop&&o(r[t]);else for(t in r)r[t]&&r[t].stop&&Ke.test(t)&&o(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(a),e=!1,n.splice(t,1));!e&&a||E.dequeue(this,i)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var e,t=H.get(this),n=t[o+"queue"],r=t[o+"queueHooks"],i=E.timers,a=n?n.length:0;for(t.finish=!0,E.queue(this,o,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===o&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<a;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),E.each(["toggle","show","hide"],function(e,r){var i=E.fn[r];E.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(Ze(r,!0),e,t,n)}}),E.each({slideDown:Ze("show"),slideUp:Ze("hide"),slideToggle:Ze("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){E.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(je=E.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),je=void 0},E.fx.timer=function(e){E.timers.push(e),e()?E.fx.start():E.timers.pop()},E.fx.interval=13,E.fx.start=function(){Ve||(Ve=x.setInterval(E.fx.tick,E.fx.interval))},E.fx.stop=function(){x.clearInterval(Ve),Ve=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(r,e){return r=E.fx&&E.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=x.setTimeout(e,r);t.stop=function(){x.clearTimeout(n)}})},We=C.createElement("input"),qe=C.createElement("select"),Ge=qe.appendChild(C.createElement("option")),We.type="checkbox",m.checkOn=""!==We.value,m.optSelected=Ge.selected,qe.disabled=!0,m.optDisabled=!Ge.disabled,(We=C.createElement("input")).value="t",We.type="radio",m.radioValue="t"===We.value;var et,tt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return I(this,E.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})}}),E.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?E.prop(e,t,n):(1===a&&E.isXMLDoc(e)||(t=t.toLowerCase(),i=E.attrHooks[t]||(E.expr.match.bool.test(t)?et:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=E.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&E.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,a=t&&t.match(N);if(a&&1===e.nodeType)for(;n=a[i++];)r=E.propFix[n]||n,E.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),et={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(e,t){var a=tt[t]||E.find.attr;tt[t]=function(e,t,n){var r,i;return n||(i=tt[t],tt[t]=r,r=null!=a(e,t,n)?t.toLowerCase():null,tt[t]=i),r}});var nt=/^(?:input|select|textarea|button)$/i,rt=/^(?:a|area)$/i;E.fn.extend({prop:function(e,t){return I(this,E.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[E.propFix[e]||e]})}}),E.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&E.isXMLDoc(e)||(t=E.propFix[t]||t,i=E.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):nt.test(e.nodeName)||rt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this});var it=/[\t\r\n\f]/g;function at(e){return e.getAttribute&&e.getAttribute("class")||""}E.fn.extend({addClass:function(t){var e,n,r,i,a,o,s,l=0;if(E.isFunction(t))return this.each(function(e){E(this).addClass(t.call(this,e,at(this)))});if("string"==typeof t&&t)for(e=t.match(N)||[];n=this[l++];)if(i=at(n),r=1===n.nodeType&&(" "+i+" ").replace(it," ")){for(o=0;a=e[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(s=E.trim(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,a,o,s,l=0;if(E.isFunction(t))return this.each(function(e){E(this).removeClass(t.call(this,e,at(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(N)||[];n=this[l++];)if(i=at(n),r=1===n.nodeType&&(" "+i+" ").replace(it," ")){for(o=0;a=e[o++];)for(;-1<r.indexOf(" "+a+" ");)r=r.replace(" "+a+" "," ");i!==(s=E.trim(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var a=typeof i;return"boolean"==typeof t&&"string"===a?t?this.addClass(i):this.removeClass(i):E.isFunction(i)?this.each(function(e){E(this).toggleClass(i.call(this,e,at(this),t),t)}):this.each(function(){var e,t,n,r;if("string"===a)for(t=0,n=E(this),r=i.match(N)||[];e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!==a||((e=at(this))&&H.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":H.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+at(n)+" ").replace(it," ").indexOf(t))return!0;return!1}});var ot=/\r/g,st=/[\x20\t\r\n\f]+/g;E.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=E.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,E(this).val()):n)?t="":"number"==typeof t?t+="":E.isArray(t)&&(t=E.map(t,function(e){return null==e?"":e+""})),(r=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=E.valHooks[t.type]||E.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ot,""):null==e?"":e:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:E.trim(E.text(e)).replace(st," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,a="select-one"===e.type||i<0,o=a?null:[],s=a?i+1:r.length,l=i<0?s:a?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(m.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!E.nodeName(n.parentNode,"optgroup"))){if(t=E(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,a=E.makeArray(t),o=i.length;o--;)((r=i[o]).selected=-1<E.inArray(E.valHooks.option.get(r),a))&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(e,t){if(E.isArray(t))return e.checked=-1<E.inArray(E(e).val(),t)}},m.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var lt=/^(?:focusinfocus|focusoutblur)$/;E.extend(E.event,{trigger:function(e,t,n,r){var i,a,o,s,l,u,c,d=[n||C],f=h.call(e,"type")?e.type:e,p=h.call(e,"namespace")?e.namespace.split("."):[];if(a=o=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!lt.test(f+E.event.triggered)&&(-1<f.indexOf(".")&&(f=(p=f.split(".")).shift(),p.sort()),l=f.indexOf(":")<0&&"on"+f,(e=e[E.expando]?e:new E.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),c=E.event.special[f]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!E.isWindow(n)){for(s=c.delegateType||f,lt.test(s+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),o=a;o===(n.ownerDocument||C)&&d.push(o.defaultView||o.parentWindow||x)}for(i=0;(a=d[i++])&&!e.isPropagationStopped();)e.type=1<i?s:c.bindType||f,(u=(H.get(a,"events")||{})[e.type]&&H.get(a,"handle"))&&u.apply(a,t),(u=l&&a[l])&&u.apply&&_(a)&&(e.result=u.apply(a,t),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!_(n)||l&&E.isFunction(n[f])&&!E.isWindow(n)&&((o=n[l])&&(n[l]=null),n[E.event.triggered=f](),E.event.triggered=void 0,o&&(n[l]=o)),e.result}},simulate:function(e,t,n){var r=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(r,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}}),E.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){E.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),E.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),m.focusin="onfocusin"in x,m.focusin||E.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){E.event.simulate(r,e.target,E.event.fix(e))};E.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=H.access(e,r);t||e.addEventListener(n,i,!0),H.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=H.access(e,r)-1;t?H.access(e,r,t):(e.removeEventListener(n,i,!0),H.remove(e,r))}}});var ut=x.location,ct=E.now(),dt=/\?/;E.parseJSON=function(e){return JSON.parse(e+"")},E.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new x.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+e),t};var ft=/#.*$/,pt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,gt=/^(?:GET|HEAD)$/,mt=/^\/\//,vt={},yt={},bt="*/".concat("*"),$t=C.createElement("a");function wt(a){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(N)||[];if(E.isFunction(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(a[n]=a[n]||[]).unshift(t)):(a[n]=a[n]||[]).push(t)}}function St(t,i,a,o){var s={},l=t===yt;function u(e){var r;return s[e]=!0,E.each(t[e]||[],function(e,t){var n=t(i,a,o);return"string"!=typeof n||l||s[n]?l?!(r=n):void 0:(i.dataTypes.unshift(n),u(n),!1)}),r}return u(i.dataTypes[0])||!s["*"]&&u("*")}function xt(e,t){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&E.extend(!0,e,r),e}$t.href=ut.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ut.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ut.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":E.parseJSON,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?xt(xt(e,E.ajaxSettings),t):xt(E.ajaxSettings,e)},ajaxPrefilter:wt(vt),ajaxTransport:wt(yt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,d,f,n,p,r,h,i,g=E.ajaxSetup({},t),m=g.context||g,v=g.context&&(m.nodeType||m.jquery)?E(m):E.event,y=E.Deferred(),b=E.Callbacks("once memory"),$=g.statusCode||{},a={},o={},w=0,s="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!n)for(n={};t=ht.exec(f);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?f:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=o[n]=o[n]||e,a[e]=t),this},overrideMimeType:function(e){return w||(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)$[t]=[$[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||s;return c&&c.abort(t),l(0,t),this}};if(y.promise(S).complete=b.add,S.success=S.done,S.error=S.fail,g.url=((e||g.url||ut.href)+"").replace(ft,"").replace(mt,ut.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=E.trim(g.dataType||"*").toLowerCase().match(N)||[""],null==g.crossDomain){r=C.createElement("a");try{r.href=g.url,r.href=r.href,g.crossDomain=$t.protocol+"//"+$t.host!=r.protocol+"//"+r.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=E.param(g.data,g.traditional)),St(vt,g,t,S),2===w)return S;for(i in(h=E.event&&g.global)&&0==E.active++&&E.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!gt.test(g.type),d=g.url,g.hasContent||(g.data&&(d=g.url+=(dt.test(d)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=pt.test(d)?d.replace(pt,"$1_="+ct++):d+(dt.test(d)?"&":"?")+"_="+ct++)),g.ifModified&&(E.lastModified[d]&&S.setRequestHeader("If-Modified-Since",E.lastModified[d]),E.etag[d]&&S.setRequestHeader("If-None-Match",E.etag[d])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&S.setRequestHeader("Content-Type",g.contentType),S.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+bt+"; q=0.01":""):g.accepts["*"]),g.headers)S.setRequestHeader(i,g.headers[i]);if(g.beforeSend&&(!1===g.beforeSend.call(m,S,g)||2===w))return S.abort();for(i in s="abort",{success:1,error:1,complete:1})S[i](g[i]);if(c=St(yt,g,t,S)){if(S.readyState=1,h&&v.trigger("ajaxSend",[S,g]),2===w)return S;g.async&&0<g.timeout&&(p=x.setTimeout(function(){S.abort("timeout")},g.timeout));try{w=1,c.send(a,l)}catch(e){if(!(w<2))throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,a,o,s,l,u=t;2!==w&&(w=2,p&&x.clearTimeout(p),c=void 0,f=r||"",S.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){for(var r,i,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)a=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),n[a]}(g,S,n)),s=function(e,t,n,r){var i,a,o,s,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=u[l+" "+a]||u["* "+a]))for(i in u)if((s=i.split(" "))[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[i]:!0!==u[i]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(g,s,S,i),i?(g.ifModified&&((l=S.getResponseHeader("Last-Modified"))&&(E.lastModified[d]=l),(l=S.getResponseHeader("etag"))&&(E.etag[d]=l)),204===e||"HEAD"===g.type?u="nocontent":304===e?u="notmodified":(u=s.state,a=s.data,i=!(o=s.error))):(o=u,!e&&u||(u="error",e<0&&(e=0))),S.status=e,S.statusText=(t||u)+"",i?y.resolveWith(m,[a,u,S]):y.rejectWith(m,[S,u,o]),S.statusCode($),$=void 0,h&&v.trigger(i?"ajaxSuccess":"ajaxError",[S,g,i?a:o]),b.fireWith(m,[S,u]),h&&(v.trigger("ajaxComplete",[S,g]),--E.active||E.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],function(e,i){E[i]=function(e,t,n,r){return E.isFunction(t)&&(r=r||n,n=t,t=void 0),E.ajax(E.extend({url:e,type:i,dataType:r,data:t,success:n},E.isPlainObject(e)&&e))}}),E._evalUrl=function(e){return E.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(t){var e;return E.isFunction(t)?this.each(function(e){E(this).wrapAll(t.call(this,e))}):(this[0]&&(e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(n){return E.isFunction(n)?this.each(function(e){E(this).wrapInner(n.call(this,e))}):this.each(function(){var e=E(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=E.isFunction(t);return this.each(function(e){E(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){E.nodeName(this,"body")||E(this).replaceWith(this.childNodes)}).end()}}),E.expr.filters.hidden=function(e){return!E.expr.filters.visible(e)},E.expr.filters.visible=function(e){return 0<e.offsetWidth||0<e.offsetHeight||0<e.getClientRects().length};var Ct=/%20/g,Et=/\[\]$/,Tt=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function Rt(n,e,r,i){var t;if(E.isArray(e))E.each(e,function(e,t){r||Et.test(n)?i(n,t):Rt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==E.type(e))i(n,e);else for(t in e)Rt(n+"["+t+"]",e[t],r,i)}E.param=function(e,t){var n,r=[],i=function(e,t){t=E.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=E.ajaxSettings&&E.ajaxSettings.traditional),E.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){i(this.name,this.value)});else for(n in e)Rt(n,e[n],t,i);return r.join("&").replace(Ct,"+")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&kt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!G.test(e))}).map(function(e,t){var n=E(this).val();return null==n?null:E.isArray(n)?E.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}}),E.ajaxSettings.xhr=function(){try{return new x.XMLHttpRequest}catch(e){}};var Mt={0:200,1223:204},At=E.ajaxSettings.xhr();m.cors=!!At&&"withCredentials"in At,m.ajax=At=!!At,E.ajaxTransport(function(i){var a,o;if(m.cors||At&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);a=function(e){return function(){a&&(a=o=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Mt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=a(),o=r.onerror=a("error"),void 0!==r.onabort?r.onabort=o:r.onreadystatechange=function(){4===r.readyState&&x.setTimeout(function(){a&&o()})},a=a("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(a)throw e}},abort:function(){a&&a()}}}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),E.ajaxTransport("script",function(n){var r,i;if(n.crossDomain)return{send:function(e,t){r=E("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Nt=[],Ot=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nt.pop()||E.expando+"_"+ct++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,a,o=!1!==e.jsonp&&(Ot.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ot.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=E.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Ot,"$1"+r):!1!==e.jsonp&&(e.url+=(dt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||E.error(r+" was not called"),a[0]},e.dataTypes[0]="json",i=x[r],x[r]=function(){a=arguments},n.always(function(){void 0===i?E(x).removeProp(r):x[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Nt.push(r)),a&&E.isFunction(i)&&i(a[0]),a=i=void 0}),"script"}),E.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||C;var r=$.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ne([e],t,i),i&&i.length&&E(i).remove(),E.merge([],r.childNodes))};var It=E.fn.load;function _t(e){return E.isWindow(e)?e:9===e.nodeType&&e.defaultView}E.fn.load=function(e,t,n){if("string"!=typeof e&&It)return It.apply(this,arguments);var r,i,a,o=this,s=e.indexOf(" ");return-1<s&&(r=E.trim(e.slice(s)),e=e.slice(0,s)),E.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<o.length&&E.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){a=arguments,o.html(r?E("<div>").append(E.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.expr.filters.animated=function(t){return E.grep(E.timers,function(e){return t===e.elem}).length},E.offset={setOffset:function(e,t,n){var r,i,a,o,s,l,u=E.css(e,"position"),c=E(e),d={};"static"===u&&(e.style.position="relative"),s=c.offset(),a=E.css(e,"top"),l=E.css(e,"left"),i=("absolute"===u||"fixed"===u)&&-1<(a+l).indexOf("auto")?(o=(r=c.position()).top,r.left):(o=parseFloat(a)||0,parseFloat(l)||0),E.isFunction(t)&&(t=t.call(e,n,E.extend({},s))),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):c.css(d)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){E.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},a=r&&r.ownerDocument;return a?(e=a.documentElement,E.contains(e,r)?(i=r.getBoundingClientRect(),n=_t(a),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===E.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),E.nodeName(e[0],"html")||(r=e.offset()),r.top+=E.css(e[0],"borderTopWidth",!0),r.left+=E.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-E.css(n,"marginTop",!0),left:t.left-r.left-E.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||Re})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var a="pageYOffset"===i;E.fn[t]=function(e){return I(this,function(e,t,n){var r=_t(e);if(void 0===n)return r?r[i]:e[t];r?r.scrollTo(a?r.pageXOffset:n,a?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),E.each(["top","left"],function(e,n){E.cssHooks[n]=Ae(m.pixelPosition,function(e,t){if(t)return t=Me(e,n),Te.test(t)?E(e).position()[n]+"px":t})}),E.each({Height:"height",Width:"width"},function(a,o){E.each({padding:"inner"+a,content:o,"":"outer"+a},function(r,e){E.fn[e]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return I(this,function(e,t,n){var r;return E.isWindow(e)?e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?E.css(e,t,i):E.style(e,t,n,i)},o,n?e:void 0,n,null)}})}),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),E.fn.andSelf=E.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return E});var Pt=x.jQuery,Ht=x.$;return E.noConflict=function(e){return x.$===E&&(x.$=Ht),e&&x.jQuery===E&&(x.jQuery=Pt),E},e||(x.jQuery=x.$=E),E}),function(B){"use strict";var l={objectMaxDepth:5};function e(e){if(!we(e))return l;$e(e.objectMaxDepth)&&(l.objectMaxDepth=u(e.objectMaxDepth)?e.objectMaxDepth:NaN)}function u(e){return x(e)&&0<e}function D(o,s){return s=s||Error,function(){var e,t,n=arguments[0],r=arguments[1],i="["+(o?o+":":"")+n+"] ",a=Oe(arguments,2).map(function(e){return Ye(e,l.objectMaxDepth)});for(i+=r.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t<a.length?a[t]:e}),i+="\nhttp://errors.angularjs.org/1.6.9/"+(o?o+"/":"")+n,t=0,e="?";t<a.length;t++,e="&")i+=e+"p"+t+"="+encodeURIComponent(a[t]);return new s(i)}}var a=/^\/(.+)\/([a-z]*)$/,d="validity",j=Object.prototype.hasOwnProperty,ce=function(e){return Se(e)?e.toLowerCase():e},c=function(e){return Se(e)?e.toUpperCase():e};"i"!=="I".toLowerCase()&&(ce=function(e){return Se(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},c=function(e){return Se(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e});var de,fe,o,v,s=[].slice,r=[].splice,t=[].push,pe=Object.prototype.toString,f=Object.getPrototypeOf,p=D("ng"),b=B.angular||(B.angular={}),n=0;function I(e){if(null==e||M(e))return!1;if(xe(e)||Se(e)||fe&&e instanceof fe)return!0;var t="length"in Object(e)&&e.length;return x(t)&&(0<=t&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function he(e,t,n){var r,i;if(e)if(Ee(e))for(r in e)"prototype"!==r&&"length"!==r&&"name"!==r&&e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else if(xe(e)||I(e)){var a="object"!=typeof e;for(r=0,i=e.length;r<i;r++)(a||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==he)e.forEach(t,n,e);else if(S(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)j.call(e,r)&&t.call(n,e[r],r,e);return e}function h(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function y(n){return function(e,t){n(t,e)}}function k(){return++n}function g(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function m(e,t,n){for(var r=e.$$hashKey,i=0,a=t.length;i<a;++i){var o=t[i];if(we(o)||Ee(o))for(var s=Object.keys(o),l=0,u=s.length;l<u;l++){var c=s[l],d=o[c];n&&we(d)?C(d)?e[c]=new Date(d.valueOf()):E(d)?e[c]=new RegExp(d):d.nodeName?e[c]=d.cloneNode(!0):_(d)?e[c]=d.clone():(we(e[c])||(e[c]=xe(d)?[]:{}),m(e[c],[d],!0)):e[c]=d}}return g(e,r),e}function ge(e){return m(e,s.call(arguments,1),!1)}function i(e){return m(e,s.call(arguments,1),!0)}function $(e){return parseInt(e,10)}de=B.document.documentMode;var R=Number.isNaN||function(e){return e!=e};function me(e,t){return ge(Object.create(e),t)}function ve(){}function ye(e){return e}function T(e){return function(){return e}}function w(e){return Ee(e.toString)&&e.toString!==pe}function be(e){return void 0===e}function $e(e){return void 0!==e}function we(e){return null!==e&&"object"==typeof e}function S(e){return null!==e&&"object"==typeof e&&!f(e)}function Se(e){return"string"==typeof e}function x(e){return"number"==typeof e}function C(e){return"[object Date]"===pe.call(e)}ve.$inject=[],ye.$inject=[];var xe=Array.isArray;function Ce(e){switch(pe.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function Ee(e){return"function"==typeof e}function E(e){return"[object RegExp]"===pe.call(e)}function M(e){return e&&e.window===e}function Te(e){return e&&e.$evalAsync&&e.$watch}function De(e){return"boolean"==typeof e}function A(e){return e&&Ee(e.then)}var N=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var ke=function(e){return Se(e)?e.trim():e},O=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function _(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function Re(e){return ce(e.nodeName||e[0]&&e[0].nodeName)}function P(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function Me(e,t){var n=e.indexOf(t);return 0<=n&&e.splice(n,1),n}function H(e,n,t){var r,i,a=[],o=[];if(t=u(t)?t:NaN,n){if((i=n)&&x(i.length)&&N.test(pe.call(i))||(r=n,"[object ArrayBuffer]"===pe.call(r)))throw p("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===n)throw p("cpi","Can't copy! Source and destination are identical.");return xe(n)?n.length=0:he(n,function(e,t){"$$hashKey"!==t&&delete n[t]}),a.push(e),o.push(n),s(e,n,t)}return l(e,t);function s(e,t,n){if(--n<0)return"...";var r,i=t.$$hashKey;if(xe(e))for(var a=0,o=e.length;a<o;a++)t.push(l(e[a],n));else if(S(e))for(r in e)t[r]=l(e[r],n);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=l(e[r],n));else for(r in e)j.call(e,r)&&(t[r]=l(e[r],n));return g(t,i),t}function l(e,t){if(!we(e))return e;var n=a.indexOf(e);if(-1!==n)return o[n];if(M(e)||Te(e))throw p("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=function(e){switch(pe.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(l(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t;case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(Ee(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===i&&(i=xe(e)?[]:Object.create(f(e)),r=!0),a.push(e),o.push(i),r?s(e,i,t):i}}function Ae(e,t){return e===t||e!=e&&t!=t}function Ne(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,r,i,a=typeof e;if(a===typeof t&&"object"===a){if(!xe(e)){if(C(e))return!!C(t)&&Ae(e.getTime(),t.getTime());if(E(e))return!!E(t)&&e.toString()===t.toString();if(Te(e)||Te(t)||M(e)||M(t)||xe(t)||C(t)||E(t))return!1;for(r in i=ze(),e)if("$"!==r.charAt(0)&&!Ee(e[r])){if(!Ne(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&$e(t[r])&&!Ee(t[r]))return!1;return!0}if(!xe(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!Ne(e[r],t[r]))return!1;return!0}}return!1}var L=function(){if(!$e(L.rules)){var e=B.document.querySelector("[ng-csp]")||B.document.querySelector("[data-ng-csp]");if(e){var t=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");L.rules={noUnsafeEval:!t||-1!==t.indexOf("no-unsafe-eval"),noInlineStyle:!t||-1!==t.indexOf("no-inline-style")}}else L.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return L.rules},F=function(){if($e(F.name_))return F.name_;var e,t,n,r,i=ee.length;for(t=0;t<i;++t)if(n=ee[t],e=B.document.querySelector("["+n.replace(":","\\:")+"jq]")){r=e.getAttribute(n+"jq");break}return F.name_=r};function z(e,t,n){return e.concat(s.call(t,n))}function Oe(e,t){return s.call(e,t||0)}function Ie(e,t){var n=2<arguments.length?Oe(arguments,2):[];return!Ee(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,z(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function U(e,t){var n=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?n=void 0:M(t)?n="$WINDOW":t&&B.document===t?n="$DOCUMENT":Te(t)&&(n="$SCOPE"),n}function V(e,t){if(!be(e))return x(t)||(t=t?2:null),JSON.stringify(e,U,t)}function W(e){return Se(e)?JSON.parse(e):e}var q=/:/g;function G(e,t){e=e.replace(q,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return R(n)?t:n}function Y(e,t,n){n=n?-1:1;var r,i,a=e.getTimezoneOffset(),o=G(t,a);return r=e,i=n*(o-a),(r=new Date(r.getTime())).setMinutes(r.getMinutes()+i),r}function _e(e){e=fe(e).clone().empty();var t=fe("<div>").append(e).html();try{return e[0].nodeType===je?ce(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+ce(t)})}catch(e){return ce(t)}}function K(e){try{return decodeURIComponent(e)}catch(e){}}function X(e){var i={};return he((e||"").split("&"),function(e){var t,n,r;e&&(n=e=e.replace(/\+/g,"%20"),-1!==(t=e.indexOf("="))&&(n=e.substring(0,t),r=e.substring(t+1)),$e(n=K(n))&&(r=!$e(r)||K(r),j.call(i,n)?xe(i[n])?i[n].push(r):i[n]=[i[n],r]:i[n]=r))}),i}function Z(e){var n=[];return he(e,function(e,t){xe(e)?he(e,function(e){n.push(Q(t,!0)+(!0===e?"":"="+Q(e,!0)))}):n.push(Q(t,!0)+(!0===e?"":"="+Q(e,!0)))}),n.length?n.join("&"):""}function J(e){return Q(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Q(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var ee=["ng-","data-ng-","ng:","x-ng-"];var te=function(n){var e=n.currentScript;if(!e)return!0;if(!(e instanceof B.HTMLScriptElement||e instanceof B.SVGScriptElement))return!1;var t=e.attributes;return[t.getNamedItem("src"),t.getNamedItem("href"),t.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var t=n.createElement("a");if(t.href=e.value,n.location.origin===t.origin)return!0;switch(t.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(B.document);function ne(r,e){var i,a,t={};if(he(ee,function(e){var t=e+"app";!i&&r.hasAttribute&&r.hasAttribute(t)&&(a=(i=r).getAttribute(t))}),he(ee,function(e){var t,n=e+"app";!i&&(t=r.querySelector("["+n.replace(":","\\:")+"]"))&&(a=(i=t).getAttribute(n))}),i){if(!te)return void B.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");t.strictDi=null!==function(e,t){var n,r,i=ee.length;for(r=0;r<i;++r)if(n=ee[r]+t,Se(n=e.getAttribute(n)))return n;return null}(i,"strict-di"),e(i,a?[a]:[],t)}}function re(n,r,i){we(i)||(i={});i=ge({strictDi:!1},i);var t=function(){if((n=fe(n)).injector()){var e=n[0]===B.document?"document":_e(n);throw p("btstrpd","App already bootstrapped with this element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}(r=r||[]).unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var t=Xt(r,i.strictDi);return t.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),t},e=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(B&&e.test(B.name)&&(i.debugInfoEnabled=!0,B.name=B.name.replace(e,"")),B&&!a.test(B.name))return t();B.name=B.name.replace(a,""),b.resumeBootstrap=function(e){return he(e,function(e){r.push(e)}),t()},Ee(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function ie(){B.name="NG_ENABLE_DEBUG_INFO!"+B.name,B.location.reload()}function ae(e){var t=b.element(e).injector();if(!t)throw p("test","no injector found for element argument to getTestability");return t.get("$$testability")}var oe=/[A-Z]/g;function Pe(e,n){return n=n||"_",e.replace(oe,function(e,t){return(t?n:"")+e.toLowerCase()})}var se=!1;function He(e,t,n){if(!e)throw p("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function le(e,t,n){return n&&xe(e)&&(e=e[e.length-1]),He(Ee(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function Le(e,t){if("hasOwnProperty"===e)throw p("badname","hasOwnProperty is not a valid {0} name",t)}function ue(e,t,n){if(!t)return e;for(var r,i=t.split("."),a=e,o=i.length,s=0;s<o;s++)r=i[s],e&&(e=(a=e)[r]);return!n&&Ee(e)?Ie(a,e):e}function Fe(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=fe(s.call(e,0,i))),t.push(n));return t||e}function ze(){return Object.create(null)}function Ue(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!w(e)||xe(e)||C(e)?V(e):e.toString()}return e}var Be=1,je=3,Ve=8,We=9,qe=11;function Ge(e,t){if(xe(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(we(e))for(var i in t=t||{},e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i]);return t||e}function Ye(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):be(e)?"undefined":"string"!=typeof e?(n=e,i=[],u(r=t)&&(n=b.copy(n,null,r)),JSON.stringify(n,function(e,t){if(we(t=U(e,t))){if(0<=i.indexOf(t))return"...";i.push(t)}return t})):e;var n,r,i}var Ke={full:"1.6.9",major:1,minor:6,dot:9,codeName:"fiery-basilisk"};pt.expando="ng339";var Xe=pt.cache={},Ze=1;pt._data=function(e){return this.cache[e[this.expando]]||{}};var Je=/-([a-z])/g,Qe=/^-ms-/,et={mouseleave:"mouseout",mouseenter:"mouseover"},tt=D("jqLite");function nt(e,t){return t.toUpperCase()}function rt(e){return e.replace(Je,nt)}var it=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,at=/<|&#?\w+;/,ot=/<([\w:-]+)/,st=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,lt={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ut(e){return!at.test(e)}function ct(e){var t=e.nodeType;return t===Be||!t||t===We}function dt(e,t){var n,r,i,a,o=t.createDocumentFragment(),s=[];if(ut(e))s.push(t.createTextNode(e));else{for(n=o.appendChild(t.createElement("div")),r=(ot.exec(e)||["",""])[1].toLowerCase(),i=lt[r]||lt._default,n.innerHTML=i[1]+e.replace(st,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;s=z(s,n.childNodes),(n=o.firstChild).textContent=""}return o.textContent="",o.innerHTML="",he(s,function(e){o.appendChild(e)}),o}lt.optgroup=lt.option,lt.tbody=lt.tfoot=lt.colgroup=lt.caption=lt.thead,lt.th=lt.td;var ft=B.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};function pt(e){if(e instanceof pt)return e;var t,n,r,i;if(Se(e)&&(e=ke(e),t=!0),!(this instanceof pt)){if(t&&"<"!==e.charAt(0))throw tt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new pt(e)}t?xt(this,(n=e,r=r||B.document,(i=it.exec(n))?[r.createElement(i[1])]:(i=dt(n,r))?i.childNodes:[])):Ee(e)?kt(e):xt(this,e)}function ht(e){return e.cloneNode(!0)}function gt(e,t){!t&&ct(e)&&fe.cleanData([e]),e.querySelectorAll&&fe.cleanData(e.querySelectorAll("*"))}function mt(n,e,r,t){if($e(t))throw tt("offargs","jqLite#off() does not support the `selector` argument");var i=yt(n),a=i&&i.events,o=i&&i.handle;if(o)if(e){var s=function(e){var t=a[e];$e(r)&&Me(t||[],r),$e(r)&&t&&0<t.length||(n.removeEventListener(e,o),delete a[e])};he(e.split(" "),function(e){s(e),et[e]&&s(et[e])})}else for(e in a)"$destroy"!==e&&n.removeEventListener(e,o),delete a[e]}function vt(e,t){var n=e.ng339,r=n&&Xe[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),mt(e)),delete Xe[n],e.ng339=void 0}}function yt(e,t){var n=e.ng339,r=n&&Xe[n];return t&&!r&&(e.ng339=n=++Ze,r=Xe[n]={events:{},data:{},handle:void 0}),r}function bt(e,t,n){if(ct(e)){var r,i=$e(n),a=!i&&t&&!we(t),o=!t,s=yt(e,!a),l=s&&s.data;if(i)l[rt(t)]=n;else{if(o)return l;if(a)return l&&l[rt(t)];for(r in t)l[rt(r)]=t[r]}}}function $t(e,t){return!!e.getAttribute&&-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")}function wt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;he(t.split(" "),function(e){e=ke(e),r=r.replace(" "+e+" "," ")}),r!==n&&e.setAttribute("class",ke(r))}}function St(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;he(t.split(" "),function(e){e=ke(e),-1===r.indexOf(" "+e+" ")&&(r+=e+" ")}),r!==n&&e.setAttribute("class",ke(r))}}function xt(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Ct(e,t){return Et(e,"$"+(t||"ngController")+"Controller")}function Et(e,t,n){e.nodeType===We&&(e=e.documentElement);for(var r=xe(t)?t:[t];e;){for(var i=0,a=r.length;i<a;i++)if($e(n=fe.data(e,r[i])))return n;e=e.parentNode||e.nodeType===qe&&e.host}}function Tt(e){for(gt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Dt(e,t){t||gt(e);var n=e.parentNode;n&&n.removeChild(e)}function kt(e){function t(){B.document.removeEventListener("DOMContentLoaded",t),B.removeEventListener("load",t),e()}"complete"===B.document.readyState?B.setTimeout(e):(B.document.addEventListener("DOMContentLoaded",t),B.addEventListener("load",t))}var Rt=pt.prototype={ready:kt,toString:function(){var t=[];return he(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(e){return fe(0<=e?this[e]:this[this.length+e])},length:0,push:t,sort:[].sort,splice:[].splice},Mt={};he("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Mt[ce(e)]=e});var At={};he("input,select,option,textarea,button,form,details".split(","),function(e){At[e]=!0});var Nt={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Ot(e,t){var n=Mt[t.toLowerCase()];return n&&At[Re(e)]&&n}function It(e,t,n){n.call(e,t)}function _t(e,t,n){var r=t.relatedTarget;r&&(r===e||ft.call(e,r))||n.call(e,t)}function Pt(){this.$get=function(){return ge(pt,{hasClass:function(e,t){return e.attr&&(e=e[0]),$t(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),St(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),wt(e,t)}})}}function Ht(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||k)():r+":"+e}he({data:bt,removeData:vt,hasData:function(e){for(var t in Xe[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,n=e.length;t<n;t++)vt(e[t])}},function(e,t){pt[t]=e}),he({data:bt,inheritedData:Et,scope:function(e){return fe.data(e,"$scope")||Et(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return fe.data(e,"$isolateScope")||fe.data(e,"$isolateScopeNoTemplate")},controller:Ct,injector:function(e){return Et(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:$t,css:function(e,t,n){if(t=rt(t.replace(Qe,"ms-")),!$e(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var r,i=e.nodeType;if(i!==je&&2!==i&&i!==Ve&&e.getAttribute){var a=ce(t),o=Mt[a];if(!$e(n))return r=e.getAttribute(t),o&&null!==r&&(r=a),null===r?void 0:r;null===n||!1===n&&o?e.removeAttribute(t):e.setAttribute(t,o?a:n)}},prop:function(e,t,n){if(!$e(n))return e[t];e[t]=n},text:function(){return e.$dv="",e;function e(e,t){if(be(t)){var n=e.nodeType;return n===Be||n===je?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(be(t)){if(e.multiple&&"select"===Re(e)){var n=[];return he(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(be(t))return e.innerHTML;gt(e,!0),e.innerHTML=t},empty:Tt},function(u,e){pt.prototype[e]=function(e,t){var n,r,i=this.length;if(u!==Tt&&be(2===u.length&&u!==$t&&u!==Ct?e:t)){if(we(e)){for(n=0;n<i;n++)if(u===bt)u(this[n],e);else for(r in e)u(this[n],r,e[r]);return this}for(var a=u.$dv,o=be(a)?Math.min(i,1):i,s=0;s<o;s++){var l=u(this[s],e,t);a=a?a+l:l}return a}for(n=0;n<i;n++)u(this[n],e,t);return this}}),he({removeData:vt,on:function(i,e,a,t){if($e(t))throw tt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ct(i)){var s,l,n,r=yt(i,!0),o=r.events,u=r.handle;u||(u=r.handle=(l=o,(n=function(e,t){e.isDefaultPrevented=function(){return e.defaultPrevented};var n=l[t||e.type],r=n?n.length:0;if(r){if(be(e.immediatePropagationStopped)){var i=e.stopImmediatePropagation;e.stopImmediatePropagation=function(){e.immediatePropagationStopped=!0,e.stopPropagation&&e.stopPropagation(),i&&i.call(e)}}e.isImmediatePropagationStopped=function(){return!0===e.immediatePropagationStopped};var a=n.specialHandlerWrapper||It;1<r&&(n=Ge(n));for(var o=0;o<r;o++)e.isImmediatePropagationStopped()||a(s,e,n[o])}}).elem=s=i,n));for(var c=0<=e.indexOf(" ")?e.split(" "):[e],d=c.length,f=function(e,t,n){var r=o[e];r||((r=o[e]=[]).specialHandlerWrapper=t,"$destroy"===e||n||i.addEventListener(e,u)),r.push(a)};d--;)e=c[d],et[e]?(f(et[e],_t),f(e,void 0,!0)):f(e)}},off:mt,one:function(t,n,r){(t=fe(t)).on(n,function e(){t.off(n,r),t.off(n,e)}),t.on(n,r)},replaceWith:function(t,e){var n,r=t.parentNode;gt(t),he(new pt(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(e){var t=[];return he(e.childNodes,function(e){e.nodeType===Be&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Be||n===qe)for(var r=0,i=(t=new pt(t)).length;r<i;r++){var a=t[r];e.appendChild(a)}},prepend:function(t,e){if(t.nodeType===Be){var n=t.firstChild;he(new pt(e),function(e){t.insertBefore(e,n)})}},wrap:function(e,t){var n,r,i;n=e,r=fe(t).eq(0).clone()[0],(i=n.parentNode)&&i.replaceChild(r,n),r.appendChild(n)},remove:Dt,detach:function(e){Dt(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r)for(var i=0,a=(t=new pt(t)).length;i<a;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:St,removeClass:wt,toggleClass:function(n,e,r){e&&he(e.split(" "),function(e){var t=r;be(t)&&(t=!$t(n,e)),(t?St:wt)(n,e)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==qe?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:ht,triggerHandler:function(t,e,n){var r,i,a,o=e.type||e,s=yt(t),l=s&&s.events,u=l&&l[o];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:ve,type:o,target:t},e.type&&(r=ge(r,e)),i=Ge(u),a=n?[r].concat(n):[r],he(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,a)}))}},function(o,e){pt.prototype[e]=function(e,t,n){for(var r,i=0,a=this.length;i<a;i++)be(r)?$e(r=o(this[i],e,t,n))&&(r=fe(r)):xt(r,o(this[i],e,t,n));return $e(r)?r:this}}),pt.prototype.bind=pt.prototype.on,pt.prototype.unbind=pt.prototype.off;var Lt=Object.create(null);function Ft(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Ft.prototype={_idx:function(e){return e===this._lastKey||(this._lastKey=e,this._lastIndex=this._keys.indexOf(e)),this._lastIndex},_transformKey:function(e){return R(e)?Lt:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var zt=Ft,Ut=[function(){this.$get=[function(){return zt}]}],Bt=/^([^(]+?)=>/,jt=/^[^(]*\(\s*([^)]*)\)/m,Vt=/,/,Wt=/^\s*(_?)(\S+?)\1\s*$/,qt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Gt=D("$injector");function Yt(e){return Function.prototype.toString.call(e)}function Kt(e){var t=Yt(e).replace(qt,"");return t.match(Bt)||t.match(jt)}function Xt(e,u){u=!0===u;var i={},o="Provider",s=[],a=new zt,c={$provide:{provider:f(p),factory:f(h),service:f(function(e,t){return h(e,["$injector",function(e){return e.instantiate(t)}])}),value:f(function(e,t){return h(e,T(t),!1)}),constant:f(function(e,t){Le(e,"constant"),c[e]=t,n[e]=t}),decorator:function(e,t){var n=l.get(e+o),r=n.$get;n.$get=function(){var e=d.invoke(r,n);return d.invoke(t,null,{$delegate:e})}}}},l=c.$injector=m(c,function(e,t){throw b.isString(t)&&s.push(t),Gt("unpr","Unknown provider: {0}",s.join(" <- "))}),n={},t=m(n,function(e,t){var n=l.get(e+o,t);return d.invoke(n.$get,n,void 0,e)}),d=t;c["$injector"+o]={$get:T(t)},d.modules=l.modules=ze();var r=g(e);return(d=t.get("$injector")).strictDi=u,he(r,function(e){e&&d.invoke(e)}),d.loadNewModules=function(e){he(g(e),function(e){e&&d.invoke(e)})},d;function f(n){return function(e,t){if(!we(e))return n(e,t);he(e,y(n))}}function p(e,t){if(Le(e,"service"),(Ee(t)||xe(t))&&(t=l.instantiate(t)),!t.$get)throw Gt("pget","Provider '{0}' must define $get factory method.",e);return c[e+o]=t}function h(e,t,n){return p(e,{$get:!1!==n?(r=e,i=t,function(){var e=d.invoke(i,this);if(be(e))throw Gt("undef","Provider '{0}' must return a value from $get factory method.",r);return e}):t});var r,i}function g(e){He(be(e)||xe(e),"modulesToLoad","not an array");var n,r=[];return he(e,function(t){if(!a.get(t)){a.set(t,!0);try{Se(t)?(n=v(t),d.modules[t]=n,r=r.concat(g(n.requires)).concat(n._runBlocks),e(n._invokeQueue),e(n._configBlocks)):Ee(t)?r.push(l.invoke(t)):xe(t)?r.push(l.invoke(t)):le(t,"module")}catch(e){throw xe(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Gt("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function e(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=l.get(r[0]);i[r[1]].apply(i,r[2])}}}),r}function m(n,r){function l(t,e){if(n.hasOwnProperty(t)){if(n[t]===i)throw Gt("cdep","Circular dependency found: {0}",t+" <- "+s.join(" <- "));return n[t]}try{return s.unshift(t),n[t]=i,n[t]=r(t,e),n[t]}catch(e){throw n[t]===i&&delete n[t],e}finally{s.shift()}}function a(e,t,n){for(var r=[],i=Xt.$$annotate(e,u,n),a=0,o=i.length;a<o;a++){var s=i[a];if("string"!=typeof s)throw Gt("itkn","Incorrect injection token! Expected service name as string, got {0}",s);r.push(t&&t.hasOwnProperty(s)?t[s]:l(s,n))}return r}return{invoke:function(e,t,n,r){"string"==typeof n&&(r=n,n=null);var i=a(e,n,r);return xe(e)&&(e=e[e.length-1]),function(e){if(de||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return De(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(Yt(e))),t}(e)?(i.unshift(null),new(Function.prototype.bind.apply(e,i))):e.apply(t,i)},instantiate:function(e,t,n){var r=xe(e)?e[e.length-1]:e,i=a(e,t,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:l,annotate:Xt.$$annotate,has:function(e){return c.hasOwnProperty(e+o)||n.hasOwnProperty(e)}}}}function Zt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(r,i,a){var o=r.document;function s(e){if(e){e.scrollIntoView();var t=function(){var e=l.yOffset;if(Ee(e))e=e();else if(_(e)){var t=e[0];e="fixed"!==r.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom}else x(e)||(e=0);return e}();if(t){var n=e.getBoundingClientRect().top;r.scrollBy(0,n-t)}}else r.scrollTo(0,0)}function l(e){var t,n,r;(e=Se(e)?e:x(e)?e.toString():i.hash())?(t=o.getElementById(e))?s(t):(n=o.getElementsByName(e),r=null,Array.prototype.some.call(n,function(e){if("a"===Re(e))return r=e,!0}),(t=r)?s(t):"top"===e&&s(null)):s(null)}return e&&a.$watch(function(){return i.hash()},function(e,t){var n,r;e===t&&""===e||(n=function(){a.$evalAsync(l)},"complete"===(r=r||B).document.readyState?r.setTimeout(n):fe(r).on("load",n))}),l}]}Xt.$$annotate=function(e,t,n){var r,i,a;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw Se(n)&&n||(n=e.name||((a=Kt(e))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Gt("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);he(Kt(e)[1].split(Vt),function(e){e.replace(Wt,function(e,t,n){r.push(n)})})}e.$inject=r}}else xe(e)?(le(e[i=e.length-1],"fn"),r=e.slice(0,i)):le(e,"fn",!0);return r};var Jt=D("$animate"),Qt=1,en="ng-animate";function tn(e,t){return e||t?e?t?(xe(e)&&(e=e.join(" ")),xe(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function nn(e){return we(e)?e:{}}var rn=function(){this.$get=ve},an=function(){var g=new zt,m=[];this.$get=["$$AnimateRunner","$rootScope",function(d,f){return{enabled:ve,on:ve,off:ve,pin:ve,push:function(e,t,n,r){var i,a,o,s,l,u;r&&r(),(n=n||{}).from&&e.css(n.from),n.to&&e.css(n.to),(n.addClass||n.removeClass)&&(i=e,a=n.addClass,o=n.removeClass,s=g.get(i)||{},l=p(s,a,!0),u=p(s,o,!1),(l||u)&&(g.set(i,s),m.push(i),1===m.length&&f.$$postDigest(h)));var c=new d;return c.complete(),c}};function p(t,e,n){var r=!1;return e&&he(e=Se(e)?e.split(" "):xe(e)?e:[],function(e){e&&(r=!0,t[e]=n)}),r}function h(){he(m,function(e){var t=g.get(e);if(t){var n=function(e){Se(e)&&(e=e.split(" "));var t=ze();return he(e,function(e){e.length&&(t[e]=!0)}),t}(e.attr("class")),r="",i="";he(t,function(e,t){e!==!!n[t]&&(e?r+=(r.length?" ":"")+t:i+=(i.length?" ":"")+t)}),he(e,function(e){r&&St(e,r),i&&wt(e,i)}),g.delete(e)}}),m.length=0}}]},on=["$provide",function(r){var i=this,t=null,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(e,t){if(e&&"."!==e.charAt(0))throw Jt("notcsel","Expecting class selector starting with '.' got '{0}'.",e);var n=e+"-animation";i.$$registeredAnimations[e.substr(1)]=n,r.factory(n,t)},this.customFilter=function(e){return 1===arguments.length&&(n=Ee(e)?e:null),n},this.classNameFilter=function(e){if(1===arguments.length&&((t=e instanceof RegExp?e:null)&&new RegExp("[(\\s|\\/)]"+en+"[(\\s|\\/)]").test(t.toString())))throw t=null,Jt("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',en);return t},this.$get=["$$animateQueue",function(a){function i(e,t,n){if(n){var r=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Qt)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(e){e.end&&e.end()},enter:function(e,t,n,r){return t=t&&fe(t),n=n&&fe(n),i(e,t=t||n.parent(),n),a.push(e,"enter",nn(r))},move:function(e,t,n,r){return t=t&&fe(t),n=n&&fe(n),i(e,t=t||n.parent(),n),a.push(e,"move",nn(r))},leave:function(e,t){return a.push(e,"leave",nn(t),function(){e.remove()})},addClass:function(e,t,n){return(n=nn(n)).addClass=tn(n.addclass,t),a.push(e,"addClass",n)},removeClass:function(e,t,n){return(n=nn(n)).removeClass=tn(n.removeClass,t),a.push(e,"removeClass",n)},setClass:function(e,t,n,r){return(r=nn(r)).addClass=tn(r.addClass,t),r.removeClass=tn(r.removeClass,n),a.push(e,"setClass",r)},animate:function(e,t,n,r,i){return(i=nn(i)).from=i.from?ge(i.from,t):t,i.to=i.to?ge(i.to,n):n,r=r||"ng-inline-animate",i.tempClasses=tn(i.tempClasses,r),a.push(e,"animate",i)}}}]}],sn=function(){this.$get=["$$rAF",function(t){var n=[];function r(e){n.push(e),1<n.length||t(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}return function(){var t=!1;return r(function(){t=!0}),function(e){t?e():r(e)}}}]},ln=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function a(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){r()?i(e,0,!1):t(e)},this._state=0}return a.chain=function(e,n){var r=0;!function t(){if(r===e.length)return void n(!0);e[r](function(e){!1!==e?(r++,t()):n(!1)})}()},a.all=function(t,n){var r=0,i=!0;function a(e){i=i&&e,++r===t.length&&n(i)}he(t,function(e){e.done(a)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:ve,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(t){2!==this._state&&(he(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},a}]},un=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(o,e,s){return function(e,t){var n=t||{};n.$$prepared||(n=H(n)),n.cleanupStyles&&(n.from=n.to=null),n.from&&(e.css(n.from),n.from=null);var r,i=new s;return{start:a,end:a};function a(){return o(function(){!function(){n.addClass&&(e.addClass(n.addClass),n.addClass=null);n.removeClass&&(e.removeClass(n.removeClass),n.removeClass=null);n.to&&(e.css(n.to),n.to=null)}(),r||i.complete(),r=!0}),i}}}]};function cn(s,e,t,l){var u=this,c=s.location,d=s.history,r=s.setTimeout,n=s.clearTimeout,i={};u.isMock=!1;var a=0,o=[];function f(e){try{e.apply(null,Oe(arguments,1))}finally{if(0===--a)for(;o.length;)try{o.pop()()}catch(e){t.error(e)}}}u.$$completeOutstandingRequest=f,u.$$incOutstandingRequestCount=function(){a++},u.notifyWhenNoOutstandingRequests=function(e){0===a?e():o.push(e)};var p,h,g=c.href,m=e.find("base"),v=null,y=l.history?function(){try{return d.state}catch(e){}}:ve;x(),u.url=function(e,t,n){if(be(n)&&(n=null),c!==s.location&&(c=s.location),d!==s.history&&(d=s.history),e){var r=h===n;if(g===e&&(!l.history||r))return u;var i=g&&or(g)===or(e);return g=e,h=n,!l.history||i&&r?(i||(v=e),t?c.replace(e):i?c.hash=-1===(o=(a=e).indexOf("#"))?"":a.substr(o):c.href=e,c.href!==e&&(v=e)):(d[t?"replaceState":"pushState"](n,"",e),x()),v&&(v=e),u}return v||c.href.replace(/%27/g,"'");var a,o},u.state=function(){return p};var b=[],$=!1;function w(){v=null,C()}var S=null;function x(){Ne(p=be(p=y())?null:p,S)&&(p=S),h=S=p}function C(){var e=h;x(),g===u.url()&&e===p||(g=u.url(),h=p,he(b,function(e){e(u.url(),p)}))}u.onUrlChange=function(e){return $||(l.history&&fe(s).on("popstate",w),fe(s).on("hashchange",w),$=!0),b.push(e),e},u.$$applicationDestroyed=function(){fe(s).off("hashchange popstate",w)},u.$$checkUrlChange=C,u.baseHref=function(){var e=m.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},u.defer=function(e,t){var n;return a++,n=r(function(){delete i[n],f(e)},t||0),i[n]=!0,n},u.defer.cancel=function(e){return!!i[e]&&(delete i[e],n(e),f(ve),!0)}}function dn(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new cn(e,r,t,n)}]}function fn(){this.$get=function(){var d={};function e(e,t){if(e in d)throw D("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var n=0,r=ge({},t,{id:e}),i=ze(),a=t&&t.capacity||Number.MAX_VALUE,o=ze(),s=null,l=null;return d[e]={put:function(e,t){if(!be(t)){if(a<Number.MAX_VALUE)u(o[e]||(o[e]={key:e}));return e in i||n++,i[e]=t,a<n&&this.remove(l.key),t}},get:function(e){if(a<Number.MAX_VALUE){var t=o[e];if(!t)return;u(t)}return i[e]},remove:function(e){if(a<Number.MAX_VALUE){var t=o[e];if(!t)return;t===s&&(s=t.p),t===l&&(l=t.n),c(t.n,t.p),delete o[e]}e in i&&(delete i[e],n--)},removeAll:function(){i=ze(),n=0,o=ze(),s=l=null},destroy:function(){o=r=i=null,delete d[e]},info:function(){return ge({},r,{size:n})}};function u(e){e!==s&&(l?l===e&&(l=e.n):l=e,c(e.n,e.p),c(e,s),(s=e).n=null)}function c(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}}return e.info=function(){var n={};return he(d,function(e,t){n[t]=e.info()}),n},e.get=function(e){return d[e]},e}}function pn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var hn=D("$compile");var gn=new function(){};function mn(n,t){var h={},g="Directive",L=/^\s*directive:\s*([\w-]+)\s+(.*)$/,F=/(([\w-]+)(?::([^;]+))?;?)/,c=function(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),f=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,d=/^(on[a-z]+|formaction)$/,s=ze();function r(e,r,i){var a=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,o=ze();return he(e,function(e,t){if(e in s)o[t]=s[e];else{var n=e.match(a);if(!n)throw hn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",r,t,e,i?"controller bindings definition":"isolate scope definition");o[t]={mode:n[1][0],collection:"*"===n[2],optional:"?"===n[3],attrName:n[4]||t},n[4]&&(s[e]=o[t])}}),o}function m(e,t){var n={isolateScope:null,bindToController:null};if(we(e.scope)&&(!0===e.bindToController?(n.bindToController=r(e.scope,t,!0),n.isolateScope={}):n.isolateScope=r(e.scope,t,!1)),we(e.bindToController)&&(n.bindToController=r(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw hn("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}this.directive=function e(l,t){return He(l,"name"),Le(l,"directive"),Se(l)?(!function(e){var t=e.charAt(0);if(!t||t!==ce(t))throw hn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw hn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}(l),He(t,"directiveFactory"),h.hasOwnProperty(l)||(h[l]=[],n.factory(l+g,["$injector","$exceptionHandler",function(a,o){var s=[];return he(h[l],function(e,t){try{var n=a.invoke(e);Ee(n)?n={compile:T(n)}:!n.compile&&n.link&&(n.compile=T(n.link)),n.priority=n.priority||0,n.index=t,n.name=n.name||l,n.require=(i=(r=n).require||r.controller&&r.name,!xe(i)&&we(i)&&he(i,function(e,t){var n=e.match(f);e.substring(n[0].length)||(i[t]=n[0]+t)}),i),n.restrict=function(e,t){if(e&&(!Se(e)||!/[EACM]/.test(e)))throw hn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}(n.restrict,l),n.$$moduleName=e.$$moduleName,s.push(n)}catch(e){o(e)}var r,i}),s}])),h[l].push(t)):he(l,y(e)),this},this.component=function e(t,i){if(!Se(t))return he(t,y(Ie(this,e))),this;var a=i.controller||function(){};function n(r){function e(n){return Ee(n)||xe(n)?function(e,t){return r.invoke(n,this,{$element:e,$attrs:t})}:n}var t=i.template||i.templateUrl?i.template:"",n={controller:a,controllerAs:function(e,t){if(t&&Se(t))return t;if(Se(e)){var n=Cn.exec(e);if(n)return n[3]}}(i.controller)||i.controllerAs||"$ctrl",template:e(t),templateUrl:e(i.templateUrl),transclude:i.transclude,scope:{},bindToController:i.bindings||{},restrict:"E",require:i.require};return he(i,function(e,t){"$"===t.charAt(0)&&(n[t]=e)}),n}return he(i,function(e,t){"$"===t.charAt(0)&&(n[t]=e,Ee(a)&&(a[t]=e))}),n.$inject=["$injector"],this.directive(t,n)},this.aHrefSanitizationWhitelist=function(e){return $e(e)?(t.aHrefSanitizationWhitelist(e),this):t.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return $e(e)?(t.imgSrcSanitizationWhitelist(e),this):t.imgSrcSanitizationWhitelist()};var u=!0,ue=!(this.debugInfoEnabled=function(e){return $e(e)?(u=e,this):u}),x=!(this.preAssignBindingsEnabled=function(e){return $e(e)?(ue=e,this):ue});this.strictComponentBindingsEnabled=function(e){return $e(e)?(x=e,this):x};var C=10;this.onChangesTtl=function(e){return arguments.length?(C=e,this):C};var z=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(z=e,this):z};var U=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(U=e,this):U},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(p,E,V,e,b,W,a,i,o,v){var s,y=/^\w/,$=B.document.createElement("div"),T=z,D=U,t=C;function l(){try{if(!--t)throw s=void 0,hn("infchng","{0} $onChanges() iterations reached. Aborting!\n",C);a.$apply(function(){for(var t=[],e=0,n=s.length;e<n;++e)try{s[e]()}catch(e){t.push(e)}if(s=void 0,t.length)throw t})}finally{t++}}function q(e,t){if(t){var n,r,i,a=Object.keys(t);for(n=0,r=a.length;n<r;n++)this[i=a[n]]=t[i]}else this.$attr={};this.$$element=e}function k(e,t){try{e.addClass(t)}catch(e){}}q.prototype={$normalize:$n,$addClass:function(e){e&&0<e.length&&o.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&o.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=wn(e,t);n&&n.length&&o.addClass(this.$$element,n);var r=wn(t,e);r&&r.length&&o.removeClass(this.$$element,r)},$set:function(e,t,n,r){var i,a=Ot(this.$$element[0],e),o=Nt[e],s=e;if(a?(this.$$element.prop(e,t),r=a):o&&(this[o]=t,s=o),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e])||(this.$attr[e]=r=Pe(e,"-")),"a"===(i=Re(this.$$element))&&("href"===e||"xlinkHref"===e)||"img"===i&&"src"===e)this[e]=t=v(t,"src"===e);else if("img"===i&&"srcset"===e&&$e(t)){for(var l="",u=ke(t),c=/\s/.test(u)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,d=u.split(c),f=Math.floor(d.length/2),p=0;p<f;p++){var h=2*p;l+=v(ke(d[h]),!0),l+=" "+ke(d[h+1])}var g=ke(d[2*p]).split(/\s/);l+=v(ke(g[0]),!0),2===g.length&&(l+=" "+ke(g[1])),this[e]=t=l}!1!==n&&(null===t||be(t)?this.$$element.removeAttr(r):y.test(r)?this.$$element.attr(r,t):function(e,t,n){$.innerHTML="<span "+t+">";var r=$.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}(this.$$element[0],r,t));var m=this.$$observers;m&&he(m[s],function(e){try{e(t)}catch(e){V(e)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=ze()),i=r[e]||(r[e]=[]);return i.push(t),a.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||be(n[e])||t(n[e])}),function(){Me(i,t)}}};var n=E.startSymbol(),r=E.endSymbol(),G="{{"===n&&"}}"===r?ye:function(e){return e.replace(/\{\{/g,n).replace(/}}/g,r)},R=/^ngAttr[A-Z]/,M=/^(.+)Start$/;return Y.$$addBindingInfo=u?function(e,t){var n=e.data("$binding")||[];xe(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:ve,Y.$$addBindingClass=u?function(e){k(e,"ng-binding")}:ve,Y.$$addScopeInfo=u?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:ve,Y.$$addScopeClass=u?function(e,t){k(e,t?"ng-isolate-scope":"ng-scope")}:ve,Y.$$createComment=function(e,t){var n="";return u&&(n=" "+(e||"")+": ",t&&(n+=t+" ")),B.document.createComment(n)},Y;function Y(c,e,t,n,d){c instanceof fe||(c=fe(c));var f=A(c,e,c,t,n,d);Y.$$addScopeClass(c);var p=null;return function(e,t,n){if(!c)throw hn("multilink","This element has already been linked.");He(e,"scope"),d&&d.needsNewScope&&(e=e.$parent.$new());var r,i,a,o=(n=n||{}).parentBoundTranscludeFn,s=n.transcludeControllers,l=n.futureParentElement;if(o&&o.$$boundTransclude&&(o=o.$$boundTransclude),p||(i=(r=l)&&r[0],p=i&&"foreignobject"!==Re(i)&&pe.call(i).match(/SVG/)?"svg":"html"),a="html"!==p?fe(ie(p,fe("<div>").append(c).html())):t?Rt.clone.call(c):c,s)for(var u in s)a.data("$"+u+"Controller",s[u].instance);return Y.$$addScopeInfo(a,e),t&&t(a,e),f&&f(e,a,a,o),t||(c=f=null),a}}function A(e,h,t,n,r,i){for(var a,o,s,l,u,c,g,m=[],d=xe(e)||e instanceof fe,f=0;f<e.length;f++)a=new q,11===de&&w(e,f,d),(s=(o=K(e[f],[],a,0===f?n:void 0,r)).length?O(o,e[f],a,h,t,null,[],[],i):null)&&s.scope&&Y.$$addScopeClass(a.$$element),u=s&&s.terminal||!(l=e[f].childNodes)||!l.length?null:A(l,s?(s.transcludeOnThisElement||!s.templateOnThisElement)&&s.transclude:h),(s||u)&&(m.push(f,s,u),c=!0,g=g||s),i=null;return c?function(e,t,n,r){var i,a,o,s,l,u,c,d,f;if(g){var p=t.length;for(f=new Array(p),l=0;l<m.length;l+=3)c=m[l],f[c]=t[c]}else f=t;for(l=0,u=m.length;l<u;)o=f[m[l++]],i=m[l++],a=m[l++],i?(i.scope?(s=e.$new(),Y.$$addScopeInfo(fe(o),s)):s=e,d=i.transcludeOnThisElement?N(e,i.transclude,r):!i.templateOnThisElement&&r?r:!r&&h?N(e,h):null,i(a,s,o,n,d)):a&&a(e,o.childNodes,void 0,r)}:null}function w(e,t,n){var r,i=e[t],a=i.parentNode;if(i.nodeType===je)for(;(r=a?i.nextSibling:e[t+1])&&r.nodeType===je;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===e[t+1]&&e.splice(t+1,1)}function N(a,o,s){function e(e,t,n,r,i){return e||((e=a.$new(!1,i)).$$transcluded=!0),o(e,t,{parentBoundTranscludeFn:s,transcludeControllers:n,futureParentElement:r})}var t=e.$$slots=ze();for(var n in o.$$slots)o.$$slots[n]?t[n]=N(a,o.$$slots[n],s):t[n]=null;return e}function K(e,t,n,r,i){var a,o,s,l,u,c,d=e.nodeType,f=n.$attr;switch(d){case Be:I(t,$n(o=Re(e)),"E",r,i);for(var p,h,g,m,v,y,b=e.attributes,$=0,w=b&&b.length;$<w;$++){var S=!1,x=!1;h=(p=b[$]).name,v=p.value,m=$n(h),(y=R.test(m))&&(h=h.replace(yn,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var C=m.match(M);C&&_(C[1])&&(x=(S=h).substr(0,h.length-5)+"end",h=h.substr(0,h.length-6)),f[g=$n(h.toLowerCase())]=h,!y&&n.hasOwnProperty(g)||(n[g]=v,Ot(e,g)&&(n[g]=!0)),H(e,t,v,g,y),I(t,g,"A",r,i,S,x)}if("input"===o&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!D)break;if(we(s=e.className)&&(s=s.animVal),Se(s)&&""!==s)for(;a=F.exec(s);)I(t,g=$n(a[2]),"C",r,i)&&(n[g]=ke(a[3])),s=s.substr(a.index+a[0].length);break;case je:l=t,u=e.nodeValue,(c=E(u,!0))&&l.push({priority:0,compile:function(e){var t=e.parent(),r=!!t.length;return r&&Y.$$addBindingClass(t),function(e,t){var n=t.parent();r||Y.$$addBindingClass(n),Y.$$addBindingInfo(n,c.expressions),e.$watch(c,function(e){t[0].nodeValue=e})}}});break;case Ve:if(!T)break;!function(e,t,n,r,i){try{var a=L.exec(e.nodeValue);if(a){var o=$n(a[1]);I(t,o,"M",r,i)&&(n[o]=ke(a[2]))}}catch(e){}}(e,t,n,r,i)}return t.sort(P),t}function X(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw hn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===Be&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(0<i);else r.push(e);return fe(r)}function Z(a,o,s){return function(e,t,n,r,i){return t=X(t[0],o,s),a(e,t,n,r,i)}}function J(e,t,n,r,i,a){var o;return e?Y(t,n,r,i,a):function(){return o||(o=Y(t,n,r,i,a),t=n=a=null),o.apply(this,arguments)}}function O(e,w,S,t,n,r,x,C,i){i=i||{};for(var a,o,s,l,u,c=-Number.MAX_VALUE,E=i.newScopeDirective,T=i.controllerDirectives,D=i.newIsolateScopeDirective,k=i.templateDirective,d=i.nonTlbTranscludeDirective,f=!1,p=!1,R=i.hasElementTranscludeDirective,h=S.$$element=fe(w),g=r,m=t,v=!1,y=!1,b=0,$=e.length;b<$;b++){var M=(a=e[b]).$$start,A=a.$$end;if(M&&(h=X(w,M,A)),s=void 0,c>a.priority)break;if((u=a.scope)&&(a.templateUrl||(we(u)?(re("new/isolated scope",D||E,a,h),D=a):re("new/isolated scope",D,a,h)),E=E||a),o=a.name,!v&&(a.replace&&(a.templateUrl||a.template)||a.transclude&&!a.$$tlb)){for(var N,O=b+1;N=e[O++];)if(N.transclude&&!N.$$tlb||N.replace&&(N.templateUrl||N.template)){y=!0;break}v=!0}if(!a.templateUrl&&a.controller&&(T=T||ze(),re("'"+o+"' controller",T[o],a,h),T[o]=a),u=a.transclude)if(f=!0,a.$$tlb||(re("transclusion",d,a,h),d=a),"element"===u)R=!0,c=a.priority,s=h,h=S.$$element=fe(Y.$$createComment(o,S[o])),w=h[0],ae(n,Oe(s),w),s[0].$$parentNode=s[0].parentNode,m=J(y,s,t,c,g&&g.name,{nonTlbTranscludeDirective:d});else{var I=ze();if(we(u)){s=[];var _=ze(),P=ze();for(var H in he(u,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,_[e]=t,I[t]=null,P[t]=n}),he(h.contents(),function(e){var t=_[$n(Re(e))];t?(P[t]=!0,I[t]=I[t]||[],I[t].push(e)):s.push(e)}),he(P,function(e,t){if(!e)throw hn("reqslot","Required transclusion slot `{0}` was not filled.",t)}),I)I[H]&&(I[H]=J(y,I[H],t))}else s=fe(ht(w)).contents();h.empty(),(m=J(y,s,t,void 0,void 0,{needsNewScope:a.$$isolateScope||a.$$newScope})).$$slots=I}if(a.template)if(p=!0,re("template",k,a,h),u=Ee((k=a).template)?a.template(h,S):a.template,u=G(u),a.replace){if(g=a,s=ut(u)?[]:Sn(ie(a.templateNamespace,ke(u))),w=s[0],1!==s.length||w.nodeType!==Be)throw hn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",o,"");ae(n,h,w);var L={$attr:{}},F=K(w,[],L),z=e.splice(b+1,e.length-(b+1));(D||E)&&ee(F,D,E),e=e.concat(F).concat(z),te(S,L),$=e.length}else h.html(u);if(a.templateUrl)p=!0,re("template",k,a,h),(k=a).replace&&(g=a),j=ne(e.splice(b,e.length-b),h,S,n,f&&m,x,C,{controllerDirectives:T,newScopeDirective:E!==a&&E,newIsolateScopeDirective:D,templateDirective:k,nonTlbTranscludeDirective:d}),$=e.length;else if(a.compile)try{l=a.compile(h,S,m);var U=a.$$originalDirective||a;Ee(l)?B(null,Ie(U,l),M,A):l&&B(Ie(U,l.pre),Ie(U,l.post),M,A)}catch(e){V(e,_e(h))}a.terminal&&(j.terminal=!0,c=Math.max(c,a.priority))}return j.scope=E&&!0===E.scope,j.transcludeOnThisElement=f,j.templateOnThisElement=p,j.transclude=m,i.hasElementTranscludeDirective=R,j;function B(e,t,n,r){e&&(n&&(e=Z(e,n,r)),e.require=a.require,e.directiveName=o,(D===a||a.$$isolateScope)&&(e=oe(e,{isolateScope:!0})),x.push(e)),t&&(n&&(t=Z(t,n,r)),t.require=a.require,t.directiveName=o,(D===a||a.$$isolateScope)&&(t=oe(t,{isolateScope:!0})),C.push(t))}function j(e,t,n,r,o){var i,a,s,l,u,c,d,f,p,h;for(var g in w===n?f=(p=S).$$element:p=new q(f=fe(n),S),u=t,D?l=t.$new(!0):E&&(u=t.$parent),o&&((d=function(e,t,n,r){var i;Te(e)||(r=n,n=t,t=e,e=void 0);R&&(i=c);n||(n=R?f.parent():f);{if(!r)return o(e,t,i,n,$);var a=o.$$slots[r];if(a)return a(e,t,i,n,$);if(be(a))throw hn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,_e(f))}}).$$boundTransclude=o,d.isSlotFilled=function(e){return!!o.$$slots[e]}),T&&(c=function(e,t,n,r,i,a,o){var s=ze();for(var l in r){var u=r[l],c={$scope:u===o||u.$$isolateScope?i:a,$element:e,$attrs:t,$transclude:n},d=u.controller;"@"===d&&(d=t[u.name]);var f=W(d,c,!0,u.controllerAs);s[u.name]=f,e.data("$"+u.name+"Controller",f.instance)}return s}(f,p,d,T,l,t,D)),D&&(Y.$$addScopeInfo(f,l,!0,!(k&&(k===D||k===D.$$originalDirective))),Y.$$addScopeClass(f,!0),l.$$isolateBindings=D.$$isolateBindings,(h=le(t,p,l,l.$$isolateBindings,D)).removeWatches&&l.$on("$destroy",h.removeWatches)),c){var m=T[g],v=c[g],y=m.$$bindings.bindToController;if(ue){v.bindingInfo=y?le(u,p,v.instance,y,m):{};var b=v();b!==v.instance&&(v.instance=b,f.data("$"+m.name+"Controller",b),v.bindingInfo.removeWatches&&v.bindingInfo.removeWatches(),v.bindingInfo=le(u,p,v.instance,y,m))}else v.instance=v(),f.data("$"+m.name+"Controller",v.instance),v.bindingInfo=le(u,p,v.instance,y,m)}for(he(T,function(e,t){var n=e.require;e.bindToController&&!xe(n)&&we(n)&&ge(c[t].instance,Q(t,n,f,c))}),he(c,function(e){var t=e.instance;if(Ee(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){V(e)}if(Ee(t.$onInit))try{t.$onInit()}catch(e){V(e)}Ee(t.$doCheck)&&(u.$watch(function(){t.$doCheck()}),t.$doCheck()),Ee(t.$onDestroy)&&u.$on("$destroy",function(){t.$onDestroy()})}),i=0,a=x.length;i<a;i++)se(s=x[i],s.isolateScope?l:t,f,p,s.require&&Q(s.directiveName,s.require,f,c),d);var $=t;for(D&&(D.template||null===D.templateUrl)&&($=l),e&&e($,n.childNodes,void 0,o),i=C.length-1;0<=i;i--)se(s=C[i],s.isolateScope?l:t,f,p,s.require&&Q(s.directiveName,s.require,f,c),d);he(c,function(e){var t=e.instance;Ee(t.$postLink)&&t.$postLink()})}}function Q(n,e,r,i){var a;if(Se(e)){var t=e.match(f),o=e.substring(t[0].length),s=t[1]||t[3],l="?"===t[2];if("^^"===s?r=r.parent():a=(a=i&&i[o])&&a.instance,!a){var u="$"+o+"Controller";a=s?r.inheritedData(u):r.data(u)}if(!a&&!l)throw hn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,n)}else if(xe(e)){a=[];for(var c=0,d=e.length;c<d;c++)a[c]=Q(n,e[c],r,i)}else we(e)&&(a={},he(e,function(e,t){a[t]=Q(n,e,r,i)}));return a||null}function ee(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=me(e[r],{$$isolateScope:t,$$newScope:n})}function I(e,t,n,r,i,a,o){if(t===i)return null;var s=null;if(h.hasOwnProperty(t))for(var l,u=p.get(t+g),c=0,d=u.length;c<d;c++)if(l=u[c],(be(r)||r>l.priority)&&-1!==l.restrict.indexOf(n)){if(a&&(l=me(l,{$$start:a,$$end:o})),!l.$$bindings){var f=l.$$bindings=m(l,l.name);we(f.isolateScope)&&(l.$$isolateBindings=f.isolateScope)}e.push(l),s=l}return s}function _(e){if(h.hasOwnProperty(e))for(var t=p.get(e+g),n=0,r=t.length;n<r;n++)if(t[n].multiElement)return!0;return!1}function te(n,r){var i=r.$attr,a=n.$attr;he(n,function(e,t){"$"!==t.charAt(0)&&(r[t]&&r[t]!==e&&(e.length?e+=("style"===t?";":" ")+r[t]:e=r[t]),n.$set(t,e,!0,i[t]))}),he(r,function(e,t){n.hasOwnProperty(t)||"$"===t.charAt(0)||(n[t]=e,"class"!==t&&"style"!==t&&(a[t]=i[t]))})}function ne(f,p,h,g,m,v,y,b){var $,w,S=[],x=p[0],C=f.shift(),E=me(C,{templateUrl:null,transclude:null,replace:null,$$originalDirective:C}),T=Ee(C.templateUrl)?C.templateUrl(p,h):C.templateUrl,D=C.templateNamespace;return p.empty(),e(T).then(function(e){var n,t,r,i;if(e=G(e),C.replace){if(r=ut(e)?[]:Sn(ie(D,ke(e))),n=r[0],1!==r.length||n.nodeType!==Be)throw hn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",C.name,T);t={$attr:{}},ae(g,p,n);var a=K(n,[],t);we(C.scope)&&ee(a,!0),f=a.concat(f),te(h,t)}else n=x,p.html(e);for(f.unshift(E),$=O(f,n,h,m,p,C,v,y,b),he(g,function(e,t){e===n&&(g[t]=p[0])}),w=A(p[0].childNodes,m);S.length;){var o=S.shift(),s=S.shift(),l=S.shift(),u=S.shift(),c=p[0];if(!o.$$destroyed){if(s!==x){var d=s.className;b.hasElementTranscludeDirective&&C.replace||(c=ht(n)),ae(l,fe(s),c),k(fe(c),d)}i=$.transcludeOnThisElement?N(o,$.transclude,u):u,$(w,o,c,g,i)}}S=null}).catch(function(e){Ce(e)&&V(e)}),function(e,t,n,r,i){var a=i;t.$$destroyed||(S?S.push(t,n,r,a):($.transcludeOnThisElement&&(a=N(t,$.transclude,i)),$(w,t,n,r,a)))}}function P(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function re(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw hn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,_e(r))}function ie(e,t){switch(e=ce(e||"html")){case"svg":case"math":var n=B.document.createElement("div");return n.innerHTML="<"+e+">"+t+"</"+e+">",n.childNodes[0].childNodes;default:return t}}function H(e,t,a,o,n){var s=function(e,t){if("srcdoc"===t)return i.HTML;var n=Re(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return i.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return i.RESOURCE_URL}(e,o),r=!n,l=c[o]||n,u=E(a,r,s,l);if(u){if("multiple"===o&&"select"===Re(e))throw hn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",_e(e));if(d.test(o))throw hn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function(e,t,n){var r=n.$$observers||(n.$$observers=ze()),i=n[o];i!==a&&(u=i&&E(i,!0,s,l),a=i),u&&(n[o]=u(e),(r[o]||(r[o]=[])).$$inter=!0,(n.$$observers&&n.$$observers[o].$$scope||e).$watch(u,function(e,t){"class"===o&&e!==t?n.$updateClass(e,t):n.$set(o,e)}))}}}})}}function ae(e,t,n){var r,i,a=t[0],o=t.length,s=a.parentNode;if(e)for(r=0,i=e.length;r<i;r++)if(e[r]===a){e[r++]=n;for(var l=r,u=l+o-1,c=e.length;l<c;l++,u++)u<c?e[l]=e[u]:delete e[l];e.length-=o-1,e.context===a&&(e.context=n);break}s&&s.replaceChild(n,a);var d=B.document.createDocumentFragment();for(r=0;r<o;r++)d.appendChild(t[r]);for(fe.hasData(a)&&(fe.data(n,fe.data(a)),fe(a).off("$destroy")),fe.cleanData(d.querySelectorAll("*")),r=1;r<o;r++)delete t[r];t[0]=n,t.length=1}function oe(e,t){return ge(function(){return e.apply(null,arguments)},e,t)}function se(e,t,n,r,i,a){try{e(t,n,r,i,a)}catch(e){V(e,_e(n))}}function S(e,t){if(x)throw hn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}function le(f,p,h,e,g){var r,m=[],v={};function y(e,t,n){Ee(h.$onChanges)&&!Ae(t,n)&&(s||(f.$$postDigest(l),s=[]),r||(r={},s.push(i)),r[e]&&(n=r[e].previousValue),r[e]=new vn(n,t))}function i(){h.$onChanges(r),r=void 0}return he(e,function(e,n){var t,r,i,a,o,s=e.attrName,l=e.optional;switch(e.mode){case"@":l||j.call(p,s)||(S(s,g.name),h[n]=p[s]=void 0),o=p.$observe(s,function(e){if(Se(e)||De(e)){var t=h[n];y(n,e,t),h[n]=e}}),p.$$observers[s].$$scope=f,Se(t=p[s])?h[n]=E(t)(f):De(t)&&(h[n]=t),v[n]=new vn(gn,h[n]),m.push(o);break;case"=":if(!j.call(p,s)){if(l)break;S(s,g.name),p[s]=void 0}if(l&&!p[s])break;r=b(p[s]),a=r.literal?Ne:Ae,i=r.assign||function(){throw t=h[n]=r(f),hn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",p[s],s,g.name)},t=h[n]=r(f);var u=function(e){return a(e,h[n])||(a(e,t)?i(f,e=h[n]):h[n]=e),t=e};u.$stateful=!0,o=e.collection?f.$watchCollection(p[s],u):f.$watch(b(p[s],u),null,r.literal),m.push(o);break;case"<":if(!j.call(p,s)){if(l)break;S(s,g.name),p[s]=void 0}if(l&&!p[s])break;var c=(r=b(p[s])).literal,d=h[n]=r(f);v[n]=new vn(gn,h[n]),o=f.$watch(r,function(e,t){if(t===e){if(t===d||c&&Ne(t,d))return;t=d}y(n,e,t),h[n]=e},c),m.push(o);break;case"&":if(l||j.call(p,s)||S(s,g.name),(r=p.hasOwnProperty(s)?b(p[s]):ve)===ve&&l)break;h[n]=function(e){return r(f,e)}}}),{initialChanges:v,removeWatches:m.length&&function(){for(var e=0,t=m.length;e<t;++e)m[e]()}}}}]}function vn(e,t){this.previousValue=e,this.currentValue=t}mn.$inject=["$provide","$$sanitizeUriProvider"],vn.prototype.isFirstChange=function(){return this.previousValue===gn};var yn=/^((?:x|data)[:\-_])/i,bn=/[:\-_]+(.)/g;function $n(e){return e.replace(yn,"").replace(bn,function(e,t,n){return n?t.toUpperCase():t})}function wn(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o===i[s])continue e;n+=(0<n.length?" ":"")+o}return n}function Sn(e){var t=(e=fe(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===Ve||n.nodeType===je&&""===n.nodeValue.trim())&&r.call(e,t,1)}return e}var xn=D("$controller"),Cn=/^(\S+)(\s+as\s+([\w$]+))?$/;function En(){var f={},p=!1;this.has=function(e){return f.hasOwnProperty(e)},this.register=function(e,t){Le(e,"controller"),we(e)?ge(f,e):f[e]=t},this.allowGlobals=function(){p=!0},this.$get=["$injector","$window",function(u,c){return function(t,n,e,r){var i,a,o,s;if(e=!0===e,r&&Se(r)&&(s=r),Se(t)){if(!(a=t.match(Cn)))throw xn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);if(o=a[1],s=s||a[3],!(t=f.hasOwnProperty(o)?f[o]:ue(n.$scope,o,!0)||(p?ue(c,o,!0):void 0)))throw xn("ctrlreg","The controller with the name '{0}' is not registered.",o);le(t,o,!0)}if(e){var l=(xe(t)?t[t.length-1]:t).prototype;return i=Object.create(l||null),s&&d(n,s,i,o||t.name),ge(function(){var e=u.invoke(t,i,n,o);return e!==i&&(we(e)||Ee(e))&&(i=e,s&&d(n,s,i,o||t.name)),i},{instance:i,identifier:s})}return i=u.instantiate(t,n,o),s&&d(n,s,i,o||t.name),i};function d(e,t,n,r){if(!e||!we(e.$scope))throw D("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);e.$scope[t]=n}}]}function Tn(){this.$get=["$window",function(e){return fe(e.document)}]}function Dn(){this.$get=["$document","$rootScope",function(e,t){var n=e[0],r=n&&n.hidden;function i(){r=n.hidden}return e.on("visibilitychange",i),t.$on("$destroy",function(){e.off("visibilitychange",i)}),function(){return r}}]}function kn(){this.$get=["$log",function(n){return function(e,t){n.error.apply(n,arguments)}}]}var Rn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof fe&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Mn="application/json",An={"Content-Type":Mn+";charset=utf-8"},Nn=/^\[|^\{(?!\{)/,On={"[":/]$/,"{":/}$/},In=/^\)]\}',?\n/,_n=D("$http");function Pn(e){return we(e)?C(e)?e.toISOString():V(e):e}function Hn(){this.$get=function(){return function(e){if(!e)return"";var n=[];return h(e,function(e,t){null===e||be(e)||Ee(e)||(xe(e)?he(e,function(e){n.push(Q(t)+"="+Q(Pn(e)))}):n.push(Q(t)+"="+Q(Pn(e))))}),n.join("&")}}}function Ln(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function n(e,r,i){if(null===e||be(e))return;xe(e)?he(e,function(e,t){n(e,r+"["+(we(e)?t:"")+"]")}):we(e)&&!C(e)?h(e,function(e,t){n(e,r+(i?"":"[")+t+(i?"":"]"))}):t.push(Q(r)+"="+Q(Pn(e)))}(e,"",!0),t.join("&")}}}function Fn(t,e){if(Se(t)){var n=t.replace(In,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf(Mn);if(i||(o=(a=n).match(Nn))&&On[o[0]].test(a))try{t=W(n)}catch(e){if(!i)return t;throw _n("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var a,o;return t}function zn(e){var t,n=ze();function r(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}return Se(e)?he(e.split("\n"),function(e){t=e.indexOf(":"),r(ce(ke(e.substr(0,t))),ke(e.substr(t+1)))}):we(e)&&he(e,function(e,t){r(ce(t),ke(e))}),n}function Un(n){var r;return function(e){if(r||(r=zn(n)),e){var t=r[ce(e)];return void 0===t&&(t=null),t}return r}}function Bn(t,n,r,e){return Ee(e)?e(t,n,r):(he(e,function(e){t=e(t,n,r)}),t)}function jn(e){return 200<=e&&e<300}function Vn(){var x=this.defaults={transformResponse:[Fn],transformRequest:[function(e){return we(e)&&(r=e,"[object File]"!==pe.call(r))&&(n=e,"[object Blob]"!==pe.call(n))&&(t=e,"[object FormData]"!==pe.call(t))?V(e):e;var t,n,r}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ge(An),put:Ge(An),patch:Ge(An)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},C=!1;this.useApplyAsync=function(e){return $e(e)?(C=!!e,this):C};var t=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(s,m,v,e,y,b,l,$){var w=e("$http");x.paramSerializer=Se(x.paramSerializer)?l.get(x.paramSerializer):x.paramSerializer;var u=[];function S(e){if(!we(e))throw D("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);if(!Se($.valueOf(e.url)))throw D("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",e.url);var n=ge({method:"get",transformRequest:x.transformRequest,transformResponse:x.transformResponse,paramSerializer:x.paramSerializer,jsonpCallbackParam:x.jsonpCallbackParam},e);n.headers=function(e){var t,n,r,i=x.headers,a=ge({},e.headers);i=ge({},i.common,i[ce(e.method)]);e:for(t in i){for(r in n=ce(t),a)if(ce(r)===n)continue e;a[t]=i[t]}return o=a,s=Ge(e),u={},he(o,function(e,t){Ee(e)?null!=(l=e(s))&&(u[t]=l):u[t]=e}),u;var o,s,l,u}(e),n.method=c(n.method),n.paramSerializer=Se(n.paramSerializer)?l.get(n.paramSerializer):n.paramSerializer,s.$$incOutstandingRequestCount();var t=[],r=[],i=b.resolve(n);return he(u,function(e){(e.request||e.requestError)&&t.unshift(e.request,e.requestError),(e.response||e.responseError)&&r.push(e.response,e.responseError)}),i=(i=a(i=(i=a(i,t)).then(function(e){var n=e.headers,t=Bn(e.data,Un(n),void 0,e.transformRequest);be(t)&&he(n,function(e,t){"content-type"===ce(t)&&delete n[t]});be(e.withCredentials)&&!be(x.withCredentials)&&(e.withCredentials=x.withCredentials);return function(a,e){var o,t,s=b.defer(),n=s.promise,r=a.headers,i="jsonp"===ce(a.method),l=a.url;i?l=$.getTrustedResourceUrl(l):Se(l)||(l=$.valueOf(l));u=l,c=a.paramSerializer(a.params),0<c.length&&(u+=(-1===u.indexOf("?")?"?":"&")+c),l=u,i&&(l=function(n,r){var e=n.split("?");if(2<e.length)throw _n("badjsonp",'Illegal use more than one "?", in url, "{1}"',n);return he(X(e[1]),function(e,t){if("JSON_CALLBACK"===e)throw _n("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',n);if(t===r)throw _n("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',r,n)}),n+=(-1===n.indexOf("?")?"?":"&")+r+"=JSON_CALLBACK"}(l,a.jsonpCallbackParam));var u,c;S.pendingRequests.push(a),n.then(g,g),!a.cache&&!x.cache||!1===a.cache||"GET"!==a.method&&"JSONP"!==a.method||(o=we(a.cache)?a.cache:we(x.cache)?x.cache:w);o&&($e(t=o.get(l))?A(t)?t.then(h,h):xe(t)?p(t[1],t[0],Ge(t[2]),t[3],t[4]):p(t,200,{},"OK","complete"):o.put(l,n));if(be(t)){var d=oi(a.url)?v()[a.xsrfCookieName||x.xsrfCookieName]:void 0;d&&(r[a.xsrfHeaderName||x.xsrfHeaderName]=d),m(a.method,l,e,function(e,t,n,r,i){o&&(jn(e)?o.put(l,[e,t,zn(n),r,i]):o.remove(l));function a(){p(t,e,n,r,i)}C?y.$applyAsync(a):(a(),y.$$phase||y.$apply())},r,a.timeout,a.withCredentials,a.responseType,f(a.eventHandlers),f(a.uploadEventHandlers))}return n;function f(e){if(e){var t={};return he(e,function(n,e){t[e]=function(e){function t(){n(e)}C?y.$applyAsync(t):y.$$phase?t():y.$apply(t)}}),t}}function p(e,t,n,r,i){(jn(t=-1<=t?t:0)?s.resolve:s.reject)({data:e,status:t,headers:Un(n),config:a,statusText:r,xhrStatus:i})}function h(e){p(e.data,e.status,Ge(e.headers()),e.statusText,e.xhrStatus)}function g(){var e=S.pendingRequests.indexOf(a);-1!==e&&S.pendingRequests.splice(e,1)}}(e,t).then(o,o)}),r)).finally(function(){s.$$completeOutstandingRequest(ve)});function a(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],a=t[n++];e=e.then(i,a)}return t.length=0,e}function o(e){var t=ge({},e);return t.data=Bn(e.data,e.headers,e.status,n.transformResponse),jn(e.status)?t:b.reject(t)}}return he(t,function(e){u.unshift(Se(e)?l.get(e):l.invoke(e))}),S.pendingRequests=[],function(e){he(arguments,function(n){S[n]=function(e,t){return S(ge({},t||{},{method:n,url:e}))}})}("get","delete","head","jsonp"),function(e){he(arguments,function(r){S[r]=function(e,t,n){return S(ge({},n||{},{method:r,url:e,data:t}))}})}("post","put","patch"),S.defaults=x,S}]}function Wn(){this.$get=function(){return function(){return new B.XMLHttpRequest}}}function qn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return v=r,y=(m=e).defer,b=t,$=n[0],function(e,r,t,i,n,a,o,s,l,u){if(r=r||m.url(),"jsonp"===ce(e))var c=b.createCallback(r),d=function(e,r,i){e=e.replace("JSON_CALLBACK",r);var a=$.createElement("script"),o=null;return a.type="text/javascript",a.src=e,a.async=!0,o=function(e){a.removeEventListener("load",o),a.removeEventListener("error",o),$.body.removeChild(a),a=null;var t=-1,n="unknown";e&&("load"!==e.type||b.wasCalled(r)||(e={type:"error"}),n=e.type,t="error"===e.type?404:200),i&&i(t,n)},a.addEventListener("load",o),a.addEventListener("error",o),$.body.appendChild(a),o}(r,c,function(e,t){var n=200===e&&b.getResponse(c);g(i,e,n,"",t,"complete"),b.removeCallback(c)});else{var f=v(e,r);if(f.open(e,r,!0),he(n,function(e,t){$e(e)&&f.setRequestHeader(t,e)}),f.onload=function(){var e=f.statusText||"",t="response"in f?f.response:f.responseText,n=1223===f.status?204:f.status;0===n&&(n=t?200:"file"===ai(r).protocol?404:0),g(i,n,t,f.getAllResponseHeaders(),e,"complete")},f.onerror=function(){g(i,-1,null,null,"","error")},f.onabort=function(){g(i,-1,null,null,"","abort")},f.ontimeout=function(){g(i,-1,null,null,"","timeout")},he(l,function(e,t){f.addEventListener(t,e)}),he(u,function(e,t){f.upload.addEventListener(t,e)}),o&&(f.withCredentials=!0),s)try{f.responseType=s}catch(e){if("json"!==s)throw e}f.send(be(t)?null:t)}if(0<a)var p=y(h,a);else A(a)&&a.then(h);function h(){d&&d(),f&&f.abort()}function g(e,t,n,r,i,a){$e(p)&&y.cancel(p),d=f=null,e(t,n,r,i,a)}};var m,v,y,b,$}]}var Gn=b.$interpolateMinErr=D("$interpolate");function Yn(){var C="{{",E="}}";this.startSymbol=function(e){return e?(C=e,this):C},this.endSymbol=function(e){return e?(E=e,this):E},this.$get=["$parse","$exceptionHandler","$sce",function(v,y,b){var $=C.length,w=E.length,t=new RegExp(C.replace(/./g,e),"g"),n=new RegExp(E.replace(/./g,e),"g");function e(e){return"\\\\\\"+e}function S(e){return e.replace(t,C).replace(n,E)}function x(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function r(i,e,t,r){if(!i.length||-1===i.indexOf(C)){var n;if(!e)(n=T(S(i))).exp=i,n.expressions=[],n.$$watchDelegate=x;return n}r=!!r;for(var a,o,s,l=0,u=[],c=[],d=i.length,f=[],p=[];l<d;){if(-1===(a=i.indexOf(C,l))||-1===(o=i.indexOf(E,a+$))){l!==d&&f.push(S(i.substring(l)));break}l!==a&&f.push(S(i.substring(l,a))),s=i.substring(a+$,o),u.push(s),c.push(v(s,m)),l=o+w,p.push(f.length),f.push("")}if(t&&1<f.length&&Gn.throwNoconcat(i),!e||u.length){var h=function(e){for(var t=0,n=u.length;t<n;t++){if(r&&be(e[t]))return;f[p[t]]=e[t]}return f.join("")},g=function(e){return t?b.getTrusted(t,e):b.valueOf(e)};return ge(function(e){var t=0,n=u.length,r=new Array(n);try{for(;t<n;t++)r[t]=c[t](e);return h(r)}catch(e){y(Gn.interr(i,e))}},{exp:i,expressions:u,$$watchDelegate:function(r,i){var a;return r.$watchGroup(c,function(e,t){var n=h(e);i.call(this,n,e!==t?a:n,r),a=n})}})}function m(e){try{return e=g(e),r&&!$e(e)?e:Ue(e)}catch(e){y(Gn.interr(i,e))}}}return r.startSymbol=function(){return C},r.endSymbol=function(){return E},r}]}function Kn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(p,h,g,m,v){var y={};function e(e,t,n,r){var i=4<arguments.length,a=i?Oe(arguments,4):[],o=h.setInterval,s=h.clearInterval,l=0,u=$e(r)&&!r,c=(u?m:g).defer(),d=c.promise;return n=$e(n)?n:0,d.$$intervalId=o(function(){u?v.defer(f):p.$evalAsync(f),c.notify(l++),0<n&&n<=l&&(c.resolve(l),s(d.$$intervalId),delete y[d.$$intervalId]),u||p.$apply()},t),y[d.$$intervalId]=c,d;function f(){i?e.apply(null,a):e(l)}}return e.cancel=function(e){return!!(e&&e.$$intervalId in y)&&(Ur(y[e.$$intervalId].promise),y[e.$$intervalId].reject("canceled"),h.clearInterval(e.$$intervalId),delete y[e.$$intervalId],!0)},e}]}Gn.throwNoconcat=function(e){throw Gn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},Gn.interr=function(e,t){return Gn("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Xn=function(){this.$get=function(){var a=b.callbacks,o={};return{createCallback:function(e){var t,n="_"+(a.$$counter++).toString(36),r="angular.callbacks."+n,i=((t=function(e){t.data=e,t.called=!0}).id=n,t);return o[r]=a[n]=i,r},wasCalled:function(e){return o[e].called},getResponse:function(e){return o[e].data},removeCallback:function(e){var t=o[e];delete a[t.id],delete o[e]}}}},Zn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Jn={http:80,https:443,ftp:21},Qn=D("$location");function er(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=J(t[n].replace(/%2F/g,"/"));return t.join("/")}function tr(e,t){var n=ai(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=$(n.port)||Jn[n.protocol]||null}var nr=/^\s*[\\/]{2,}/;function rr(e,t,n){if(nr.test(e))throw Qn("badpath",'Invalid url "{0}".',e);var r="/"!==e.charAt(0);r&&(e="/"+e);var i=ai(e),a=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;t.$$path=function(e,t){for(var n=e.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),t&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(a,n),t.$$search=X(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function ir(e,t){return e.slice(0,t.length)===t}function ar(e,t){if(ir(t,e))return t.substr(e.length)}function or(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function sr(e){return e.replace(/(#.+)|#$/,"$1")}function lr(a,o,s){this.$$html5=!0,s=s||"",tr(a,this),this.$$parse=function(e){var t=ar(o,e);if(!Se(t))throw Qn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,o);rr(t,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=Z(this.$$search),t=this.$$hash?"#"+J(this.$$hash):"";this.$$url=er(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=o+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):($e(n=ar(a,e))?(r=n,i=s&&$e(n=ar(s,n))?o+(ar("/",n)||n):a+r):$e(n=ar(o,e))?i=o+n:o===e+"/"&&(i=o),i&&this.$$parse(i),!!i);var n,r,i}}function ur(r,i,a){tr(r,this),this.$$parse=function(e){var t,n=ar(r,e)||ar(i,e);be(n)||"#"!==n.charAt(0)?this.$$html5?t=n:(t="",be(n)&&(r=e,this.replace())):be(t=ar(a,n))&&(t=n),rr(t,this,!1),this.$$path=function(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;ir(t,n)&&(t=t.replace(n,""));if(i.exec(t))return e;return(r=i.exec(e))?r[1]:e}(this.$$path,t,r),this.$$compose()},this.$$compose=function(){var e=Z(this.$$search),t=this.$$hash?"#"+J(this.$$hash):"";this.$$url=er(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+(this.$$url?a+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,t){return or(r)===or(e)&&(this.$$parse(e),!0)}}function cr(i,a,o){this.$$html5=!0,ur.apply(this,arguments),this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(i===or(e)?n=e:(r=ar(a,e))?n=i+o+r:a===e+"/"&&(n=a),n&&this.$$parse(n),!!n);var n,r},this.$$compose=function(){var e=Z(this.$$search),t=this.$$hash?"#"+J(this.$$hash):"";this.$$url=er(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=i+o+this.$$url,this.$$urlUpdatedByLocation=!0}}var dr={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:fr("$$absUrl"),url:function(e){if(be(e))return this.$$url;var t=Zn.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:fr("$$protocol"),host:fr("$$host"),port:fr("$$port"),path:pr("$$path",function(e){return"/"===(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(n,e){switch(arguments.length){case 0:return this.$$search;case 1:if(Se(n)||x(n))n=n.toString(),this.$$search=X(n);else{if(!we(n))throw Qn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");he(n=H(n,{}),function(e,t){null==e&&delete n[t]}),this.$$search=n}break;default:be(e)||null===e?delete this.$$search[n]:this.$$search[n]=e}return this.$$compose(),this},hash:pr("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};function fr(e){return function(){return this[e]}}function pr(t,n){return function(e){return be(e)?this[t]:(this[t]=n(e),this.$$compose(),this)}}function hr(){var v="!",y={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return $e(e)?(v=e,this):v},this.html5Mode=function(e){return De(e)?(y.enabled=e,this):we(e)?(De(e.enabled)&&(y.enabled=e.enabled),De(e.requireBase)&&(y.requireBase=e.requireBase),(De(e.rewriteLinks)||Se(e.rewriteLinks))&&(y.rewriteLinks=e.rewriteLinks),this):y},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(o,s,t,a,l){var u,e,n,r,i=s.baseHref(),c=s.url();if(y.enabled){if(!i&&y.requireBase)throw Qn("nobase","$location in HTML5 mode requires a <base> tag to be present!");n=(r=c).substring(0,r.indexOf("/",r.indexOf("//")+2))+(i||"/"),e=t.history?lr:cr}else n=or(c),e=ur;var d,f=(d=n).substr(0,or(d).lastIndexOf("/")+1);(u=new e(n,f,"#"+v)).$$parseLinkUrl(c,c),u.$$state=s.state();var p=/^\s*(javascript|mailto):/i;function h(e,t,n){var r=u.url(),i=u.$$state;try{s.url(e,t,n),u.$$state=s.state()}catch(e){throw u.url(r),u.$$state=i,e}}a.on("click",function(e){var t=y.rewriteLinks;if(t&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var n=fe(e.target);"a"!==Re(n[0]);)if(n[0]===a[0]||!(n=n.parent())[0])return;if(!Se(t)||!be(n.attr(t))){var r=n.prop("href"),i=n.attr("href")||n.attr("xlink:href");we(r)&&"[object SVGAnimatedString]"===r.toString()&&(r=ai(r.animVal).href),p.test(r)||!r||n.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(r,i)&&(e.preventDefault(),u.absUrl()!==s.url()&&(o.$apply(),l.angular["ff-684208-preventDefault"]=!0))}}}),sr(u.absUrl())!==sr(c)&&s.url(u.absUrl(),!0);var g=!0;return s.onUrlChange(function(r,i){ir(r,f)?(o.$evalAsync(function(){var e,t=u.absUrl(),n=u.$$state;r=sr(r),u.$$parse(r),u.$$state=i,e=o.$broadcast("$locationChangeStart",r,t,i,n).defaultPrevented,u.absUrl()===r&&(e?(u.$$parse(t),h(t,!1,u.$$state=n)):(g=!1,m(t,n)))}),o.$$phase||o.$digest()):l.location.href=r}),o.$watch(function(){if(g||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var n=sr(s.url()),e=sr(u.absUrl()),r=s.state(),i=u.$$replace,a=n!==e||u.$$html5&&t.history&&r!==u.$$state;(g||a)&&(g=!1,o.$evalAsync(function(){var e=u.absUrl(),t=o.$broadcast("$locationChangeStart",e,n,u.$$state,r).defaultPrevented;u.absUrl()===e&&(t?(u.$$parse(n),u.$$state=r):(a&&h(e,i,r===u.$$state?null:u.$$state),m(n,r)))}))}u.$$replace=!1}),u;function m(e,t){o.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}}]}function gr(){var r=!0,a=this;this.debugEnabled=function(e){return $e(e)?(r=e,this):r},this.$get=["$window",function(n){var e,i=de||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:t("log"),info:t("info"),warn:t("warn"),error:t("error"),debug:(e=t("debug"),function(){r&&e.apply(a,arguments)})};function t(e){var t=n.console||{},r=t[e]||t.log||ve;return function(){var n=[];return he(arguments,function(e){var t;n.push((Ce(t=e)&&(t.stack&&i?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t))}),Function.prototype.apply.call(r,t,n)}}}]}he([cr,ur,lr],function(t){t.prototype=Object.create(dr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==lr||!this.$$html5)throw Qn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=be(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var mr=D("$parse"),vr={}.constructor.prototype.valueOf;function yr(e){return e+""}var br=ze();he("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){br[e]=!0});var $r={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wr=function(e){this.options=e};wr.prototype={constructor:wr,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=br[t],a=br[n],o=br[r];if(i||a||o){var s=o?r:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||""===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return 55296<=n&&n<=56319&&56320<=r&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=$e(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw mr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=ce(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{n+=$r[a]||a}i=!1}else if("\\"===a)i=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var Sr=function(e,t){this.lexer=e,this.options=t};function xr(e,t){return void 0!==e?e:t}function Cr(e,t){return void 0===e?t:void 0===t?e:e+t}Sr.Program="Program",Sr.ExpressionStatement="ExpressionStatement",Sr.AssignmentExpression="AssignmentExpression",Sr.ConditionalExpression="ConditionalExpression",Sr.LogicalExpression="LogicalExpression",Sr.BinaryExpression="BinaryExpression",Sr.UnaryExpression="UnaryExpression",Sr.CallExpression="CallExpression",Sr.MemberExpression="MemberExpression",Sr.Identifier="Identifier",Sr.Literal="Literal",Sr.ArrayExpression="ArrayExpression",Sr.Property="Property",Sr.ObjectExpression="ObjectExpression",Sr.ThisExpression="ThisExpression",Sr.LocalsExpression="LocalsExpression",Sr.NGValueParameter="NGValueParameter",Sr.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Sr.Program,body:e}},expressionStatement:function(){return{type:Sr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!Rr(e))throw mr("lval","Trying to assign a value to a non l-value");e={type:Sr.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Sr.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Sr.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Sr.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Sr.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Sr.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Sr.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Sr.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Sr.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=H(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Sr.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:Sr.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Sr.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Sr.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Sr.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)for(;e.push(this.filterChain()),this.expect(","););return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Sr.Identifier,name:e.text}},constant:function(){return{type:Sr.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Sr.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Sr.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Sr.ObjectExpression,properties:t}},throwError:function(e,t){throw mr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw mr("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw mr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return a}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:Sr.ThisExpression},$locals:{type:Sr.LocalsExpression}}};var Er=1,Tr=2;function Dr(e,t,n){var r,i,a,o,s,l=e.isPure=function(e,t){switch(e.type){case Sr.MemberExpression:if(e.computed)return!1;break;case Sr.UnaryExpression:return Er;case Sr.BinaryExpression:return"+"!==e.operator&&Er;case Sr.CallExpression:return!1}return void 0===t?Tr:t}(e,n);switch(e.type){case Sr.Program:r=!0,he(e.body,function(e){Dr(e.expression,t,l),r=r&&e.expression.constant}),e.constant=r;break;case Sr.Literal:e.constant=!0,e.toWatch=[];break;case Sr.UnaryExpression:Dr(e.argument,t,l),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Sr.BinaryExpression:Dr(e.left,t,l),Dr(e.right,t,l),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Sr.LogicalExpression:Dr(e.left,t,l),Dr(e.right,t,l),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Sr.ConditionalExpression:Dr(e.test,t,l),Dr(e.alternate,t,l),Dr(e.consequent,t,l),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Sr.Identifier:e.constant=!1,e.toWatch=[e];break;case Sr.MemberExpression:Dr(e.object,t,l),e.computed&&Dr(e.property,t,l),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=e.constant?[]:[e];break;case Sr.CallExpression:a=!!e.filter&&(o=t,s=e.callee.name,!o(s).$stateful),r=a,i=[],he(e.arguments,function(e){Dr(e,t,l),r=r&&e.constant,i.push.apply(i,e.toWatch)}),e.constant=r,e.toWatch=a?i:[e];break;case Sr.AssignmentExpression:Dr(e.left,t,l),Dr(e.right,t,l),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Sr.ArrayExpression:r=!0,i=[],he(e.elements,function(e){Dr(e,t,l),r=r&&e.constant,i.push.apply(i,e.toWatch)}),e.constant=r,e.toWatch=i;break;case Sr.ObjectExpression:r=!0,i=[],he(e.properties,function(e){Dr(e.value,t,l),r=r&&e.value.constant,i.push.apply(i,e.value.toWatch),e.computed&&(Dr(e.key,t,!1),r=r&&e.key.constant,i.push.apply(i,e.key.toWatch))}),e.constant=r,e.toWatch=i;break;case Sr.ThisExpression:case Sr.LocalsExpression:e.constant=!1,e.toWatch=[]}}function kr(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function Rr(e){return e.type===Sr.Identifier||e.type===Sr.MemberExpression}function Mr(e){if(1===e.body.length&&Rr(e.body[0].expression))return{type:Sr.AssignmentExpression,left:e.body[0].expression,right:{type:Sr.NGValueParameter},operator:"="}}function Ar(e){this.$filter=e}function Nr(e){this.$filter=e}function Or(e,t,n){this.ast=new Sr(e,n),this.astCompiler=n.csp?new Nr(t):new Ar(t)}function Ir(e){return Ee(e.valueOf)?e.valueOf():vr.call(e)}function _r(){var n,r,d=ze(),p={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){p[e]=t},this.setIdentifierFns=function(e,t){return n=e,r=t,this},this.$get=["$filter",function(i){var a={csp:L().noUnsafeEval,literals:H(p),isIdentifierStart:Ee(n)&&n,isIdentifierContinue:Ee(r)&&r};return e.$$getAst=function(e){return new Or(new wr(a),i,a).getAst(e).ast},e;function e(e,t){var n,r;switch(typeof e){case"string":if(e=e.trim(),!(n=d[r=e]))(n=new Or(new wr(a),i,a).parse(e)).constant?n.$$watchDelegate=o:n.oneTime?n.$$watchDelegate=n.literal?c:u:n.inputs&&(n.$$watchDelegate=l),d[r]=n;return s(n,t);case"function":return s(e,t);default:return s(ve,t)}}function f(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=Ir(e))&&!n)&&(e===t||e!=e&&t!=t)}function l(e,t,n,a,r){var o,s=a.inputs;if(1===s.length){var i=f;return s=s[0],e.$watch(function(e){var t=s(e);return f(t,i,s.isPure)||(o=a(e,void 0,void 0,[t]),i=t&&Ir(t)),o},t,n,r)}for(var l=[],u=[],c=0,d=s.length;c<d;c++)l[c]=f,u[c]=null;return e.$watch(function(e){for(var t=!1,n=0,r=s.length;n<r;n++){var i=s[n](e);(t||(t=!f(i,l[n],s[n].isPure)))&&(u[n]=i,l[n]=i&&Ir(i))}return t&&(o=a(e,void 0,void 0,u)),o},t,n,r)}function u(e,r,t,n,i){var a,o;return a=n.inputs?l(e,s,t,n,i):e.$watch(function(e){return n(e)},s,t);function s(e,t,n){o=e,Ee(r)&&r(e,t,n),$e(e)&&n.$$postDigest(function(){$e(o)&&a()})}}function c(e,r,t,n){var i,a;return i=e.$watch(function(e){return n(e)},function(e,t,n){a=e,Ee(r)&&r(e,t,n),o(e)&&n.$$postDigest(function(){o(a)&&i()})},t);function o(e){var t=!0;return he(e,function(e){$e(e)||(t=!1)}),t}}function o(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function s(o,s){if(!s)return o;var e=o.$$watchDelegate,a=!1,t=e!==c&&e!==u?function(e,t,n,r){var i=a&&r?r[0]:o(e,t,n,r);return s(i,e,t)}:function(e,t,n,r){var i=o(e,t,n,r),a=s(i,e,t);return $e(i)?a:i};return a=!o.inputs,e&&e!==l?(t.$$watchDelegate=e,t.inputs=o.inputs):s.$stateful||(t.$$watchDelegate=l,t.inputs=o.inputs?o.inputs:[o]),t.inputs&&(t.inputs=t.inputs.map(function(t){return t.isPure===Tr?function(e){return t(e)}:t})),t}}]}function Pr(){var n=!0;this.$get=["$rootScope","$exceptionHandler",function(t,e){return Lr(function(e){t.$evalAsync(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return $e(e)?(n=e,this):n}}function Hr(){var n=!0;this.$get=["$browser","$exceptionHandler",function(t,e){return Lr(function(e){t.defer(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return $e(e)?(n=e,this):n}}function Lr(o,s,l){var n=D("$q",TypeError),u=0,r=[];function i(){return new e}function e(){var t=this.promise=new a;this.resolve=function(e){f(t,e)},this.reject=function(e){p(t,e)},this.notify=function(e){g(t,e)}}function a(){this.$$state={status:0}}function c(){for(;!u&&r.length;){var e=r.shift();if(!Fr(e)){zr(e);var t="Possibly unhandled rejection: "+Ye(e.value);Ce(e.value)?s(e.value,t):s(t)}}}function d(e){!l||e.pending||2!==e.status||Fr(e)||(0===u&&0===r.length&&o(c),r.push(e)),!e.processScheduled&&e.pending&&(e.processScheduled=!0,++u,o(function(){!function(e){var t,n,r;r=e.pending,e.processScheduled=!1,e.pending=void 0;try{for(var i=0,a=r.length;i<a;++i){zr(e),n=r[i][0],t=r[i][e.status];try{Ee(t)?f(n,t(e.value)):1===e.status?f(n,e.value):p(n,e.value)}catch(e){p(n,e),e&&!0===e.$$passToExceptionHandler&&s(e)}}}finally{--u,l&&0===u&&o(c)}}(e)}))}function f(e,t){e.$$state.status||(t===e?h(e,n("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):function t(n,e){var r;var i=!1;try{(we(e)||Ee(e))&&(r=e.then),Ee(r)?(n.$$state.status=-1,r.call(e,a,o,s)):(n.$$state.value=e,n.$$state.status=1,d(n.$$state))}catch(e){o(e)}function a(e){i||(i=!0,t(n,e))}function o(e){i||(i=!0,h(n,e))}function s(e){g(n,e)}}(e,t))}function p(e,t){e.$$state.status||h(e,t)}function h(e,t){e.$$state.value=t,e.$$state.status=2,d(e.$$state)}function g(e,i){var a=e.$$state.pending;e.$$state.status<=0&&a&&a.length&&o(function(){for(var e,t,n=0,r=a.length;n<r;n++){t=a[n][0],e=a[n][3];try{g(t,Ee(e)?e(i):i)}catch(e){s(e)}}})}function m(e){var t=new a;return p(t,e),t}function v(e,t,n){var r=null;try{Ee(n)&&(r=n())}catch(e){return m(e)}return A(r)?r.then(function(){return t(e)},m):t(e)}function y(e,t,n,r){var i=new a;return f(i,e),i.then(t,n,r)}ge(a.prototype,{then:function(e,t,n){if(be(e)&&be(t)&&be(n))return this;var r=new a;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),0<this.$$state.status&&d(this.$$state),r},catch:function(e){return this.then(null,e)},finally:function(t,e){return this.then(function(e){return v(e,b,t)},function(e){return v(e,m,t)},e)}});var b=y;function t(e){if(!Ee(e))throw n("norslvr","Expected resolverFn, got '{0}'",e);var t=new a;return e(function(e){f(t,e)},function(e){p(t,e)}),t}return t.prototype=a.prototype,t.defer=i,t.reject=m,t.when=y,t.resolve=b,t.all=function(e){var n=new a,r=0,i=xe(e)?[]:{};return he(e,function(e,t){r++,y(e).then(function(e){i[t]=e,--r||f(n,i)},function(e){p(n,e)})}),0===r&&f(n,i),n},t.race=function(e){var t=i();return he(e,function(e){y(e).then(t.resolve,t.reject)}),t.promise},t}function Fr(e){return!!e.pur}function zr(e){e.pur=!0}function Ur(e){zr(e.$$state)}function Br(){this.$get=["$window","$timeout",function(e,n){var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,t=!!r,a=t?function(e){var t=r(e);return function(){i(t)}}:function(e){var t=n(e,16.66,!1);return function(){n.cancel(t)}};return a.supported=t,a}]}function jr(){var x=10,C=D("$rootScope"),E=null,T=null;this.digestTtl=function(e){return arguments.length&&(x=e),x},this.$get=["$exceptionHandler","$parse","$browser",function(f,h,p){function r(e){e.currentScope.$$destroyed=!0}function i(){this.$id=k(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}i.prototype={constructor:i,$new:function(e,t){var n;return t=t||this,e?(n=new i).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=k(),this.$$ChildScope=null}return t.prototype=e,t}(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!==this)&&n.$on("$destroy",r),n},$watch:function(e,t,n,r){var i=h(e),a=Ee(t)?t:ve;if(i.$$watchDelegate)return i.$$watchDelegate(this,a,n,i,e);var o=this,s=o.$$watchers,l={fn:a,last:w,get:i,exp:r||e,eq:!!n};return E=null,s||((s=o.$$watchers=[]).$$digestWatchIndex=-1),s.unshift(l),s.$$digestWatchIndex++,u(this,1),function(){var e=Me(s,l);0<=e&&(u(o,-1),e<s.$$digestWatchIndex&&s.$$digestWatchIndex--),E=null}},$watchGroup:function(e,r){var i=new Array(e.length),a=new Array(e.length),o=[],s=this,l=!1,t=!0;if(!e.length){var n=!0;return s.$evalAsync(function(){n&&r(a,a,s)}),function(){n=!1}}if(1===e.length)return this.$watch(e[0],function(e,t,n){a[0]=e,i[0]=t,r(a,e===t?a:i,n)});function u(){l=!1,t?(t=!1,r(a,a,s)):r(a,i,s)}return he(e,function(e,n){var t=s.$watch(e,function(e,t){a[n]=e,i[n]=t,l||(l=!0,s.$evalAsync(u))});o.push(t)}),function(){for(;o.length;)o.shift()()}},$watchCollection:function(e,n){p.$stateful=!0;var o,s,r,i=this,a=1<n.length,l=0,t=h(e,p),u=[],c={},d=!0,f=0;function p(e){var t,n,r,i;if(!be(o=e)){if(we(o))if(I(o)){s!==u&&(f=(s=u).length=0,l++),t=o.length,f!==t&&(l++,s.length=f=t);for(var a=0;a<t;a++)i=s[a],r=o[a],i!=i&&r!=r||i===r||(l++,s[a]=r)}else{for(n in s!==c&&(s=c={},f=0,l++),t=0,o)j.call(o,n)&&(t++,r=o[n],i=s[n],n in s?i!=i&&r!=r||i===r||(l++,s[n]=r):(f++,s[n]=r,l++));if(t<f)for(n in l++,s)j.call(o,n)||(f--,delete s[n])}else s!==o&&(s=o,l++);return l}}return this.$watch(t,function(){if(d?(d=!1,n(o,o,i)):n(o,r,i),a)if(we(o))if(I(o)){r=new Array(o.length);for(var e=0;e<o.length;e++)r[e]=o[e]}else for(var t in r={},o)j.call(o,t)&&(r[t]=o[t]);else r=o})},$digest:function(){var e,t,n,r,i,a,o,s,l,u=x,c=[];b("$digest"),p.$$checkUrlChange(),this===g&&null!==T&&(p.defer.cancel(T),S()),E=null;do{i=!1,o=this;for(var d=0;d<m.length;d++){try{(0,(l=m[d]).fn)(l.scope,l.locals)}catch(e){f(e)}E=null}m.length=0;e:do{if(r=o.$$watchers)for(r.$$digestWatchIndex=r.length;r.$$digestWatchIndex--;)try{if(e=r[r.$$digestWatchIndex])if((t=(0,e.get)(o))===(n=e.last)||(e.eq?Ne(t,n):R(t)&&R(n))){if(e===E){i=!1;break e}}else i=!0,(E=e).last=e.eq?H(t,null):t,(0,e.fn)(t,n===w?t:n,o),u<5&&(c[s=4-u]||(c[s]=[]),c[s].push({msg:Ee(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:t,oldVal:n}))}catch(e){f(e)}if(!(a=o.$$watchersCount&&o.$$childHead||o!==this&&o.$$nextSibling))for(;o!==this&&!(a=o.$$nextSibling);)o=o.$parent}while(o=a);if((i||m.length)&&!u--)throw $(),C("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",x,c)}while(i||m.length);for($();y<v.length;)try{v[y++]()}catch(e){f(e)}v.length=y=0,p.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;for(var t in this.$broadcast("$destroy"),this.$$destroyed=!0,this===g&&p.$$applicationDestroyed(),u(this,-this.$$watchersCount),this.$$listenerCount)a(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=ve,this.$on=this.$watch=this.$watchGroup=function(){return ve},this.$$listeners={},this.$$nextSibling=null,function e(t){9===de&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return h(e)(this,t)},$evalAsync:function(e,t){g.$$phase||m.length||p.defer(function(){m.length&&g.$digest()}),m.push({scope:this,fn:h(e),locals:t})},$$postDigest:function(e){v.push(e)},$apply:function(e){try{b("$apply");try{return this.$eval(e)}finally{$()}}catch(e){f(e)}finally{try{g.$digest()}catch(e){throw f(e),e}}},$applyAsync:function(e){var t=this;e&&n.push(function(){t.$eval(e)}),e=h(e),null===T&&(T=p.defer(function(){g.$apply(S)}))},$on:function(t,n){var r=this.$$listeners[t];r||(this.$$listeners[t]=r=[]),r.push(n);for(var e=this;e.$$listenerCount[t]||(e.$$listenerCount[t]=0),e.$$listenerCount[t]++,e=e.$parent;);var i=this;return function(){var e=r.indexOf(n);-1!==e&&(delete r[e],a(i,1,t))}},$emit:function(e,t){var n,r,i,a=[],o=this,s=!1,l={name:e,targetScope:o,stopPropagation:function(){s=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=z([l],arguments,1);do{for(n=o.$$listeners[e]||a,l.currentScope=o,r=0,i=n.length;r<i;r++)if(n[r])try{n[r].apply(null,u)}catch(e){f(e)}else n.splice(r,1),r--,i--;if(s)break;o=o.$parent}while(o);return l.currentScope=null,l},$broadcast:function(e,t){var n=this,r=this,i={name:e,targetScope:this,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[e])return i;for(var a,o,s,l=z([i],arguments,1);n=r;){for(o=0,s=(a=(i.currentScope=n).$$listeners[e]||[]).length;o<s;o++)if(a[o])try{a[o].apply(null,l)}catch(e){f(e)}else a.splice(o,1),o--,s--;if(!(r=n.$$listenerCount[e]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(r=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var g=new i,m=g.$$asyncQueue=[],v=g.$$postDigestQueue=[],n=g.$$applyAsyncQueue=[],y=0;return g;function b(e){if(g.$$phase)throw C("inprog","{0} already in progress",g.$$phase);g.$$phase=e}function $(){g.$$phase=null}function u(e,t){for(;e.$$watchersCount+=t,e=e.$parent;);}function a(e,t,n){for(;e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n],e=e.$parent;);}function w(){}function S(){for(;n.length;)try{n.shift()()}catch(e){f(e)}T=null}}]}function Vr(){var i=/^\s*(https?|s?ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return $e(e)?(i=e,this):i},this.imgSrcSanitizationWhitelist=function(e){return $e(e)?(a=e,this):a},this.$get=function(){return function(e,t){var n,r=t?a:i;return""===(n=ai(e&&e.trim()).href)||n.match(r)?e:"unsafe:"+n}}}Ar.prototype={compile:function(e){var i=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Dr(e,i.$filter);var t,n="";if(this.stage="assign",t=Mr(e)){this.state.computing="assign";var r=this.nextId();this.recurse(t,r),this.return_(r),n="fn.assign="+this.generateFunction("assign","s,v,l")}var a=kr(e.body);i.stage="inputs",he(a,function(e,t){var n="fn"+t;i.state[n]={vars:[],body:[],own:{}},i.state.computing=n;var r=i.nextId();i.recurse(e,r),i.return_(r),i.state.inputs.push({name:n,isPure:e.isPure}),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(e);var o='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",o)(this.$filter,yr,xr,Cr);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return he(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(e){return e.name}).join(",")+"];"),t.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var n=[],r=this;return he(this.state.filters,function(e,t){n.push(e+"=$filter("+r.escape(t)+")")}),n.length?"var "+n.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(n,t,e,r,i,a){var o,s,l,u,c,d=this;if(r=r||ve,!a&&$e(n.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",n.watchId)),this.lazyRecurse(n,t,e,r,i,!0));switch(n.type){case Sr.Program:he(n.body,function(e,t){d.recurse(e.expression,void 0,void 0,function(e){s=e}),t!==n.body.length-1?d.current().body.push(s,";"):d.return_(s)});break;case Sr.Literal:u=this.escape(n.value),this.assign(t,u),r(t||u);break;case Sr.UnaryExpression:this.recurse(n.argument,void 0,void 0,function(e){s=e}),u=n.operator+"("+this.ifDefined(s,0)+")",this.assign(t,u),r(u);break;case Sr.BinaryExpression:this.recurse(n.left,void 0,void 0,function(e){o=e}),this.recurse(n.right,void 0,void 0,function(e){s=e}),u="+"===n.operator?this.plus(o,s):"-"===n.operator?this.ifDefined(o,0)+n.operator+this.ifDefined(s,0):"("+o+")"+n.operator+"("+s+")",this.assign(t,u),r(u);break;case Sr.LogicalExpression:t=t||this.nextId(),d.recurse(n.left,t),d.if_("&&"===n.operator?t:d.not(t),d.lazyRecurse(n.right,t)),r(t);break;case Sr.ConditionalExpression:t=t||this.nextId(),d.recurse(n.test,t),d.if_(t,d.lazyRecurse(n.alternate,t),d.lazyRecurse(n.consequent,t)),r(t);break;case Sr.Identifier:t=t||this.nextId(),e&&(e.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",n.name)+"?l:s"),e.computed=!1,e.name=n.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",n.name)),function(){d.if_("inputs"===d.stage||"s",function(){i&&1!==i&&d.if_(d.isNull(d.nonComputedMember("s",n.name)),d.lazyAssign(d.nonComputedMember("s",n.name),"{}")),d.assign(t,d.nonComputedMember("s",n.name))})},t&&d.lazyAssign(t,d.nonComputedMember("l",n.name))),r(t);break;case Sr.MemberExpression:o=e&&(e.context=this.nextId())||this.nextId(),t=t||this.nextId(),d.recurse(n.object,o,void 0,function(){d.if_(d.notNull(o),function(){n.computed?(s=d.nextId(),d.recurse(n.property,s),d.getStringValue(s),i&&1!==i&&d.if_(d.not(d.computedMember(o,s)),d.lazyAssign(d.computedMember(o,s),"{}")),u=d.computedMember(o,s),d.assign(t,u),e&&(e.computed=!0,e.name=s)):(i&&1!==i&&d.if_(d.isNull(d.nonComputedMember(o,n.property.name)),d.lazyAssign(d.nonComputedMember(o,n.property.name),"{}")),u=d.nonComputedMember(o,n.property.name),d.assign(t,u),e&&(e.computed=!1,e.name=n.property.name))},function(){d.assign(t,"undefined")}),r(t)},!!i);break;case Sr.CallExpression:t=t||this.nextId(),n.filter?(s=d.filter(n.callee.name),l=[],he(n.arguments,function(e){var t=d.nextId();d.recurse(e,t),l.push(t)}),u=s+"("+l.join(",")+")",d.assign(t,u),r(t)):(s=d.nextId(),o={},l=[],d.recurse(n.callee,s,o,function(){d.if_(d.notNull(s),function(){he(n.arguments,function(e){d.recurse(e,n.constant?void 0:d.nextId(),void 0,function(e){l.push(e)})}),u=o.name?d.member(o.context,o.name,o.computed)+"("+l.join(",")+")":s+"("+l.join(",")+")",d.assign(t,u)},function(){d.assign(t,"undefined")}),r(t)}));break;case Sr.AssignmentExpression:s=this.nextId(),o={},this.recurse(n.left,void 0,o,function(){d.if_(d.notNull(o.context),function(){d.recurse(n.right,s),u=d.member(o.context,o.name,o.computed)+n.operator+s,d.assign(t,u),r(t||u)})},1);break;case Sr.ArrayExpression:l=[],he(n.elements,function(e){d.recurse(e,n.constant?void 0:d.nextId(),void 0,function(e){l.push(e)})}),u="["+l.join(",")+"]",this.assign(t,u),r(t||u);break;case Sr.ObjectExpression:c=!(l=[]),he(n.properties,function(e){e.computed&&(c=!0)}),c?(t=t||this.nextId(),this.assign(t,"{}"),he(n.properties,function(e){e.computed?(o=d.nextId(),d.recurse(e.key,o)):o=e.key.type===Sr.Identifier?e.key.name:""+e.key.value,s=d.nextId(),d.recurse(e.value,s),d.assign(d.member(t,o,e.computed),s)})):(he(n.properties,function(t){d.recurse(t.value,n.constant?void 0:d.nextId(),void 0,function(e){l.push(d.escape(t.key.type===Sr.Identifier?t.key.name:""+t.key.value)+":"+e)})}),u="{"+l.join(",")+"}",this.assign(t,u)),r(t||u);break;case Sr.ThisExpression:this.assign(t,"s"),r(t||"s");break;case Sr.LocalsExpression:this.assign(t,"l"),r(t||"l");break;case Sr.NGValueParameter:this.assign(t,"v"),r(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,i,a){var o=this;return function(){o.recurse(e,t,n,r,i,a)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(Se(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(x(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw mr("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Nr.prototype={compile:function(e){var t,r,i=this;Dr(e,i.$filter),(t=Mr(e))&&(r=this.recurse(t));var a,n=kr(e.body);n&&(a=[],he(n,function(e,t){var n=i.recurse(e);n.isPure=e.isPure,e.input=n,a.push(n),e.watchId=t}));var o=[];he(e.body,function(e){o.push(i.recurse(e.expression))});var s=0===e.body.length?ve:1===e.body.length?o[0]:function(t,n){var r;return he(o,function(e){r=e(t,n)}),r};return r&&(s.assign=function(e,t,n){return r(e,n,t)}),a&&(s.inputs=a),s},recurse:function(e,l,t){var o,u,c,n=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Sr.Literal:return this.value(e.value,l);case Sr.UnaryExpression:return u=this.recurse(e.argument),this["unary"+e.operator](u,l);case Sr.BinaryExpression:case Sr.LogicalExpression:return o=this.recurse(e.left),u=this.recurse(e.right),this["binary"+e.operator](o,u,l);case Sr.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),l);case Sr.Identifier:return n.identifier(e.name,l,t);case Sr.MemberExpression:return o=this.recurse(e.object,!1,!!t),e.computed||(u=e.property.name),e.computed&&(u=this.recurse(e.property)),e.computed?this.computedMember(o,u,l,t):this.nonComputedMember(o,u,l,t);case Sr.CallExpression:return c=[],he(e.arguments,function(e){c.push(n.recurse(e))}),e.filter&&(u=this.$filter(e.callee.name)),e.filter||(u=this.recurse(e.callee,!0)),e.filter?function(e,t,n,r){for(var i=[],a=0;a<c.length;++a)i.push(c[a](e,t,n,r));var o=u.apply(void 0,i,r);return l?{context:void 0,name:void 0,value:o}:o}:function(e,t,n,r){var i,a=u(e,t,n,r);if(null!=a.value){for(var o=[],s=0;s<c.length;++s)o.push(c[s](e,t,n,r));i=a.value.apply(a.context,o)}return l?{value:i}:i};case Sr.AssignmentExpression:return o=this.recurse(e.left,!0,1),u=this.recurse(e.right),function(e,t,n,r){var i=o(e,t,n,r),a=u(e,t,n,r);return i.context[i.name]=a,l?{value:a}:a};case Sr.ArrayExpression:return c=[],he(e.elements,function(e){c.push(n.recurse(e))}),function(e,t,n,r){for(var i=[],a=0;a<c.length;++a)i.push(c[a](e,t,n,r));return l?{value:i}:i};case Sr.ObjectExpression:return c=[],he(e.properties,function(e){e.computed?c.push({key:n.recurse(e.key),computed:!0,value:n.recurse(e.value)}):c.push({key:e.key.type===Sr.Identifier?e.key.name:""+e.key.value,computed:!1,value:n.recurse(e.value)})}),function(e,t,n,r){for(var i={},a=0;a<c.length;++a)c[a].computed?i[c[a].key(e,t,n,r)]=c[a].value(e,t,n,r):i[c[a].key]=c[a].value(e,t,n,r);return l?{value:i}:i};case Sr.ThisExpression:return function(e){return l?{value:e}:e};case Sr.LocalsExpression:return function(e,t){return l?{value:t}:t};case Sr.NGValueParameter:return function(e,t,n){return l?{value:n}:n}}},"unary+":function(a,o){return function(e,t,n,r){var i=a(e,t,n,r);return i=$e(i)?+i:0,o?{value:i}:i}},"unary-":function(a,o){return function(e,t,n,r){var i=a(e,t,n,r);return i=$e(i)?-i:-0,o?{value:i}:i}},"unary!":function(a,o){return function(e,t,n,r){var i=!a(e,t,n,r);return o?{value:i}:i}},"binary+":function(a,o,s){return function(e,t,n,r){var i=Cr(a(e,t,n,r),o(e,t,n,r));return s?{value:i}:i}},"binary-":function(s,l,u){return function(e,t,n,r){var i=s(e,t,n,r),a=l(e,t,n,r),o=($e(i)?i:0)-($e(a)?a:0);return u?{value:o}:o}},"binary*":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)*o(e,t,n,r);return s?{value:i}:i}},"binary/":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)/o(e,t,n,r);return s?{value:i}:i}},"binary%":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)%o(e,t,n,r);return s?{value:i}:i}},"binary===":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)===o(e,t,n,r);return s?{value:i}:i}},"binary!==":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)!==o(e,t,n,r);return s?{value:i}:i}},"binary==":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)==o(e,t,n,r);return s?{value:i}:i}},"binary!=":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)!=o(e,t,n,r);return s?{value:i}:i}},"binary<":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)<o(e,t,n,r);return s?{value:i}:i}},"binary>":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)>o(e,t,n,r);return s?{value:i}:i}},"binary<=":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)<=o(e,t,n,r);return s?{value:i}:i}},"binary>=":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)>=o(e,t,n,r);return s?{value:i}:i}},"binary&&":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)&&o(e,t,n,r);return s?{value:i}:i}},"binary||":function(a,o,s){return function(e,t,n,r){var i=a(e,t,n,r)||o(e,t,n,r);return s?{value:i}:i}},"ternary?:":function(a,o,s,l){return function(e,t,n,r){var i=a(e,t,n,r)?o(e,t,n,r):s(e,t,n,r);return l?{value:i}:i}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(o,s,l){return function(e,t,n,r){var i=t&&o in t?t:e;l&&1!==l&&i&&null==i[o]&&(i[o]={});var a=i?i[o]:void 0;return s?{context:i,name:o,value:a}:a}},computedMember:function(s,l,u,c){return function(e,t,n,r){var i,a,o=s(e,t,n,r);return null!=o&&(i=yr(i=l(e,t,n,r)),c&&1!==c&&o&&!o[i]&&(o[i]={}),a=o[i]),u?{context:o,name:i,value:a}:a}},nonComputedMember:function(o,s,l,u){return function(e,t,n,r){var i=o(e,t,n,r);u&&1!==u&&i&&null==i[s]&&(i[s]={});var a=null!=i?i[s]:void 0;return l?{context:i,name:s,value:a}:a}},inputs:function(i,a){return function(e,t,n,r){return r?r[a]:i(e,t,n)}}},Or.prototype={constructor:Or,parse:function(e){var t,n=this.getAst(e),r=this.astCompiler.compile(n.ast);return r.literal=0===(t=n.ast).body.length||1===t.body.length&&(t.body[0].expression.type===Sr.Literal||t.body[0].expression.type===Sr.ArrayExpression||t.body[0].expression.type===Sr.ObjectExpression),r.constant=n.ast.constant,r.oneTime=n.oneTime,r},getAst:function(e){var t=!1;return":"===(e=e.trim()).charAt(0)&&":"===e.charAt(1)&&(t=!0,e=e.substring(2)),{ast:this.ast.ast(e),oneTime:t}}};var Wr=D("$sce"),qr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Gr=/_([a-z])/g;function Yr(e){return e.replace(Gr,nt)}function Kr(e){var t=[];return $e(e)&&he(e,function(e){t.push(function(e){if("self"===e)return e;if(Se(e)){if(-1<e.indexOf("***"))throw Wr("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=O(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(E(e))return new RegExp("^"+e.source+"$");throw Wr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))}),t}function Xr(){this.SCE_CONTEXTS=qr;var o=["self"],s=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(o=Kr(e)),o},this.resourceUrlBlacklist=function(e){return arguments.length&&(s=Kr(e)),s},this.$get=["$injector",function(e){var r=function(e){throw Wr("unsafe","Attempting to use an unsafe value in a safe context.")};function a(e,t){return"self"===e?oi(t):!!e.exec(t.href)}function t(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}e.has("$sanitize")&&(r=e.get("$sanitize"));var n=t(),i={};return i[qr.HTML]=t(n),i[qr.CSS]=t(n),i[qr.URL]=t(n),i[qr.JS]=t(n),i[qr.RESOURCE_URL]=t(i[qr.URL]),{trustAs:function(e,t){var n=i.hasOwnProperty(e)?i[e]:null;if(!n)throw Wr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||be(t)||""===t)return t;if("string"!=typeof t)throw Wr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(e,t){if(null===t||be(t)||""===t)return t;var n=i.hasOwnProperty(e)?i[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===qr.RESOURCE_URL){if(function(e){var t,n,r=ai(e.toString()),i=!1;for(t=0,n=o.length;t<n;t++)if(a(o[t],r)){i=!0;break}if(i)for(t=0,n=s.length;t<n;t++)if(a(s[t],r)){i=!1;break}return i}(t))return t;throw Wr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===qr.HTML)return r(t);throw Wr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof n?e.$$unwrapTrustedValue():e}}}]}function Zr(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(r,e){if(t&&de<8)throw Wr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=Ge(qr);i.isEnabled=function(){return t},i.trustAs=e.trustAs,i.getTrusted=e.getTrusted,i.valueOf=e.valueOf,t||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=ye),i.parseAs=function(t,e){var n=r(e);return n.literal&&n.constant?n:r(e,function(e){return i.getTrusted(t,e)})};var a=i.parseAs,o=i.getTrusted,s=i.trustAs;return he(qr,function(t,e){var n=ce(e);i[Yr("parse_as_"+n)]=function(e){return a(t,e)},i[Yr("get_trusted_"+n)]=function(e){return o(t,e)},i[Yr("trust_as_"+n)]=function(e){return s(t,e)}}),i}]}function Jr(){this.$get=["$window","$document",function(e,t){var n={},r=!(!(e.nw&&e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,i=$((/android (\d+)/.exec(ce((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),o=t[0]||{},s=o.body&&o.body.style,l=!1,u=!1;return s&&(l=!!("transition"in s||"webkitTransition"in s),u=!!("animation"in s||"webkitAnimation"in s)),{history:!(!r||i<4||a),hasEvent:function(e){if("input"===e&&de)return!1;if(be(n[e])){var t=o.createElement("div");n[e]="on"+e in t}return n[e]},csp:L(),transitions:l,animations:u,android:i}}]}var Qr=D("$compile");function ei(){var u;this.httpOptions=function(e){return e?(u=e,this):u},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(r,i,a,o,s){function l(t,n){l.totalPendingRequests++,Se(t)&&!be(i.get(t))||(t=s.getTrustedResourceUrl(t));var e=a.defaults&&a.defaults.transformResponse;return xe(e)?e=e.filter(function(e){return e!==Fn}):e===Fn&&(e=null),a.get(t,ge({cache:i,transformResponse:e},u)).finally(function(){l.totalPendingRequests--}).then(function(e){return i.put(t,e.data),e.data},function(e){n||(e=Qr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",t,e.status,e.statusText),r(e));return o.reject(e)})}return l.totalPendingRequests=0,l}]}function ti(){this.$get=["$rootScope","$browser","$location",function(t,n,r){var e={findBindings:function(e,n,r){var t=e.getElementsByClassName("ng-binding"),i=[];return he(t,function(t){var e=b.element(t).data("$binding");e&&he(e,function(e){r?new RegExp("(^|\\s)"+O(n)+"(\\s|\\||$)").test(e)&&i.push(t):-1!==e.indexOf(n)&&i.push(t)})}),i},findModels:function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a="["+r[i]+"model"+(n?"=":"*=")+'"'+t+'"]',o=e.querySelectorAll(a);if(o.length)return o}},getLocation:function(){return r.url()},setLocation:function(e){e!==r.url()&&(r.url(e),t.$digest())},whenStable:function(e){n.notifyWhenNoOutstandingRequests(e)}};return e}]}function ni(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(l,u,c,d,f){var p={};function e(e,t,n){Ee(e)||(n=t,t=e,e=ve);var r,i=Oe(arguments,3),a=$e(n)&&!n,o=(a?d:c).defer(),s=o.promise;return r=u.defer(function(){try{o.resolve(e.apply(null,i))}catch(e){o.reject(e),f(e)}finally{delete p[s.$$timeoutId]}a||l.$apply()},t),s.$$timeoutId=r,p[r]=o,s}return e.cancel=function(e){return!!(e&&e.$$timeoutId in p)&&(Ur(p[e.$$timeoutId].promise),p[e.$$timeoutId].reject("canceled"),delete p[e.$$timeoutId],u.defer.cancel(e.$$timeoutId))},e}]}var ri=B.document.createElement("a"),ii=ai(B.location.href);function ai(e){var t=e;return de&&(ri.setAttribute("href",t),t=ri.href),ri.setAttribute("href",t),{href:ri.href,protocol:ri.protocol?ri.protocol.replace(/:$/,""):"",host:ri.host,search:ri.search?ri.search.replace(/^\?/,""):"",hash:ri.hash?ri.hash.replace(/^#/,""):"",hostname:ri.hostname,port:ri.port,pathname:"/"===ri.pathname.charAt(0)?ri.pathname:"/"+ri.pathname}}function oi(e){var t=Se(e)?ai(e):e;return t.protocol===ii.protocol&&t.host===ii.host}function si(){this.$get=T(B)}function li(e){var o=e[0]||{},s={},l="";function u(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var e,t,n,r,i,a=function(e){try{return e.cookie||""}catch(e){return""}}(o);if(a!==l)for(e=(l=a).split("; "),s={},n=0;n<e.length;n++)0<(r=(t=e[n]).indexOf("="))&&(i=u(t.substring(0,r)),be(s[i])&&(s[i]=u(t.substring(r+1))));return s}}function ui(){this.$get=li}function ci(r){var i="Filter";function a(e,t){if(we(e)){var n={};return he(e,function(e,t){n[t]=a(t,e)}),n}return r.factory(e+i,t)}this.register=a,this.$get=["$injector",function(t){return function(e){return t.get(e+i)}}],a("currency",vi),a("date",Ri),a("filter",di),a("json",Mi),a("limitTo",Oi),a("lowercase",Ai),a("number",yi),a("orderBy",_i),a("uppercase",Ni)}function di(){return function(e,t,n,r){if(!I(e)){if(null==e)return e;throw D("filter")("notarray","Expected array but received: {0}",e)}var i,a;switch(r=r||"$",pi(t)){case"function":i=t;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":i=function(t,n,r,i){var a=we(t)&&r in t;!0===n?n=Ne:Ee(n)||(n=function(e,t){return!be(e)&&(null===e||null===t?e===t:!(we(t)||we(e)&&!w(e))&&(e=ce(""+e),t=ce(""+t),-1!==e.indexOf(t)))});return function(e){return a&&!we(e)?fi(e,t[r],n,r,!1):fi(e,t,n,r,i)}}(t,n,r,a);break;default:return e}return Array.prototype.filter.call(e,i)}}function fi(e,t,n,r,i,a){var o=pi(e),s=pi(t);if("string"===s&&"!"===t.charAt(0))return!fi(e,t.substring(1),n,r,i);if(xe(e))return e.some(function(e){return fi(e,t,n,r,i)});switch(o){case"object":var l;if(i){for(l in e)if(l.charAt&&"$"!==l.charAt(0)&&fi(e[l],t,n,r,!0))return!0;return!a&&fi(e,t,n,r,!1)}if("object"!==s)return n(e,t);for(l in t){var u=t[l];if(!Ee(u)&&!be(u)){var c=l===r;if(!fi(c?e:e[l],u,n,r,c,c))return!1}}return!0;case"function":return!1;default:return n(e,t)}}function pi(e){return null===e?"null":typeof e}li.$inject=["$document"],ci.$inject=["$provide"];var hi=22,gi=".",mi="0";function vi(e){var i=e.NUMBER_FORMATS;return function(e,t,n){be(t)&&(t=i.CURRENCY_SYM),be(n)&&(n=i.PATTERNS[1].maxFrac);var r=t?/\u00A4/g:/\s*\u00A4\s*/g;return null==e?e:bi(e,i.PATTERNS[1],i.GROUP_SEP,i.DECIMAL_SEP,n).replace(r,t)}}function yi(e){var n=e.NUMBER_FORMATS;return function(e,t){return null==e?e:bi(e,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,t)}}function bi(e,t,n,r,i){if(!Se(e)&&!x(e)||isNaN(e))return"";var a,o=!isFinite(e),s=!1,l=Math.abs(e)+"",u="";if(o)u="";else{(function(e,t,n,r){var i=e.d,a=i.length-e.i,o=(t=be(t)?Math.min(Math.max(n,a),r):+t)+e.i,s=i[o];if(0<o){i.splice(Math.max(e.i,o));for(var l=o;l<i.length;l++)i[l]=0}else{a=Math.max(0,a),e.i=1,i.length=Math.max(1,o=t+1),i[0]=0;for(var u=1;u<o;u++)i[u]=0}if(5<=s)if(o-1<0){for(var c=0;o<c;c--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[o-1]++;for(;a<Math.max(0,t);a++)i.push(0);var d=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);d&&(i.unshift(d),e.i++)})(a=function(e){var t,n,r,i,a,o=0;for(-1<(n=e.indexOf(gi))&&(e=e.replace(gi,"")),0<(r=e.search(/e/i))?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charAt(r)===mi;r++);if(r===(a=e.length))t=[0],n=1;else{for(a--;e.charAt(a)===mi;)a--;for(n-=r,t=[],i=0;r<=a;r++,i++)t[i]=+e.charAt(r)}return hi<n&&(t=t.splice(0,hi-1),o=n-1,n=1),{d:t,e:o,i:n}}(l),i,t.minFrac,t.maxFrac);var c=a.d,d=a.i,f=a.e,p=[];for(s=c.reduce(function(e,t){return e&&!t},!0);d<0;)c.unshift(0),d++;0<d?p=c.splice(d,c.length):(p=c,c=[0]);var h=[];for(c.length>=t.lgSize&&h.unshift(c.splice(-t.lgSize,c.length).join(""));c.length>t.gSize;)h.unshift(c.splice(-t.gSize,c.length).join(""));c.length&&h.unshift(c.join("")),u=h.join(n),p.length&&(u+=r+p.join("")),f&&(u+="e+"+f)}return e<0&&!s?t.negPre+u+t.negSuf:t.posPre+u+t.posSuf}function $i(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=1-e:(e=-e,i="-")),e=""+e;e.length<t;)e=mi+e;return n&&(e=e.substr(e.length-t)),i+e}function wi(n,r,i,a,o){return i=i||0,function(e){var t=e["get"+n]();return(0<i||-i<t)&&(t+=i),0===t&&-12===i&&(t=12),$i(t,r,a,o)}}function Si(r,i,a){return function(e,t){var n=e["get"+r]();return t[c((a?"STANDALONE":"")+(i?"SHORT":"")+r)][n]}}function xi(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function Ci(i){return function(e){var t,n=xi(e.getFullYear()),r=+(t=e,new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay())))-+n;return $i(1+Math.round(r/6048e5),i)}}function Ei(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}vi.$inject=["$locale"];var Ti={yyyy:wi("FullYear",4,0,!(yi.$inject=["$locale"]),!0),yy:wi("FullYear",2,0,!0,!0),y:wi("FullYear",1,0,!1,!0),MMMM:Si("Month"),MMM:Si("Month",!0),MM:wi("Month",2,1),M:wi("Month",1,1),LLLL:Si("Month",!1,!0),dd:wi("Date",2),d:wi("Date",1),HH:wi("Hours",2),H:wi("Hours",1),hh:wi("Hours",2,-12),h:wi("Hours",1,-12),mm:wi("Minutes",2),m:wi("Minutes",1),ss:wi("Seconds",2),s:wi("Seconds",1),sss:wi("Milliseconds",3),EEEE:Si("Day"),EEE:Si("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){var r=-1*n,i=0<=r?"+":"";return i+=$i(Math[0<r?"floor":"ceil"](r/60),2)+$i(Math.abs(r%60),2)},ww:Ci(2),w:Ci(1),G:Ei,GG:Ei,GGG:Ei,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},Di=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,ki=/^-?\d+$/;function Ri(l){var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,e,n){var r,i,a="",o=[];if(e=e||"mediumDate",e=l.DATETIME_FORMATS[e]||e,Se(t)&&(t=ki.test(t)?$(t):function(e){var t;if(t=e.match(d)){var n=new Date(0),r=0,i=0,a=t[8]?n.setUTCFullYear:n.setFullYear,o=t[8]?n.setUTCHours:n.setHours;t[9]&&(r=$(t[9]+t[10]),i=$(t[9]+t[11])),a.call(n,$(t[1]),$(t[2])-1,$(t[3]));var s=$(t[4]||0)-r,l=$(t[5]||0)-i,u=$(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(n,s,l,u,c),n}return e}(t)),x(t)&&(t=new Date(t)),!C(t)||!isFinite(t.getTime()))return t;for(;e;)e=(i=Di.exec(e))?(o=z(o,i,1)).pop():(o.push(e),null);var s=t.getTimezoneOffset();return n&&(s=G(n,s),t=Y(t,n,!0)),he(o,function(e){r=Ti[e],a+=r?r(t,l.DATETIME_FORMATS,s):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function Mi(){return function(e,t){return be(t)&&(t=2),V(e,t)}}Ri.$inject=["$locale"];var Ai=T(ce),Ni=T(c);function Oi(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):$(t),R(t)?e:(x(e)&&(e=e.toString()),I(e)?(n=(n=!n||isNaN(n)?0:$(n))<0?Math.max(0,e.length+n):n,0<=t?Ii(e,n,n+t):0===n?Ii(e,t,e.length):Ii(e,Math.max(0,n+t),n)):e)}}function Ii(e,t,n){return Se(e)?e.slice(t,n):s.call(e,t,n)}function _i(l){return function(e,t,n,r){if(null==e)return e;if(!I(e))throw D("orderBy")("notarray","Expected array but received: {0}",e);xe(t)||(t=[t]),0===t.length&&(t=["+"]);var a=t.map(function(e){var t=1,n=ye;if(Ee(e))n=e;else if(Se(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(t="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(n=l(e)).constant)){var r=n();n=function(e){return e[r]}}return{get:n,descending:t}}),o=n?-1:1,s=Ee(r)?r:c,i=Array.prototype.map.call(e,function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:a.map(function(e){return function(e,t){var n=typeof e;null===e?(n="string",e="null"):"object"===n&&(e=function(e){if(Ee(e.valueOf)&&u(e=e.valueOf()))return e;if(w(e)&&u(e=e.toString()))return e;return e}(e));return{value:e,type:n,index:t}}(e.get(t),n)})}});return i.sort(function(e,t){for(var n=0,r=a.length;n<r;n++){var i=s(e.predicateValues[n],t.predicateValues[n]);if(i)return i*a[n].descending*o}return(s(e.tieBreaker,t.tieBreaker)||c(e.tieBreaker,t.tieBreaker))*o}),e=i.map(function(e){return e.value})};function u(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function c(e,t){var n=0,r=e.type,i=t.type;if(r===i){var a=e.value,o=t.value;"string"===r?(a=a.toLowerCase(),o=o.toLowerCase()):"object"===r&&(we(a)&&(a=e.index),we(o)&&(o=t.index)),a!==o&&(n=a<o?-1:1)}else n=r<i?-1:1;return n}}function Pi(e){return Ee(e)&&(e={link:e}),e.restrict=e.restrict||"AC",T(e)}_i.$inject=["$parse"];var Hi=T({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===pe.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Li={};he(Mt,function(e,r){if("multiple"!==e){var i=$n("ng-"+r),t=a;"checked"===e&&(t=function(e,t,n){n.ngModel!==n[i]&&a(e,0,n)}),Li[i]=function(){return{restrict:"A",priority:100,link:t}}}function a(e,t,n){e.$watch(n[i],function(e){n.$set(r,!!e)})}}),he(Nt,function(e,i){Li[i]=function(){return{priority:100,link:function(e,t,n){if("ngPattern"===i&&"/"===n.ngPattern.charAt(0)){var r=n.ngPattern.match(a);if(r)return void n.$set("ngPattern",new RegExp(r[1],r[2]))}e.$watch(n[i],function(e){n.$set(i,e)})}}}}),he(["src","srcset","href"],function(a){var o=$n("ng-"+a);Li[o]=function(){return{priority:99,link:function(e,t,n){var r=a,i=a;"href"===a&&"[object SVGAnimatedString]"===pe.call(t.prop("href"))&&(i="xlinkHref",n.$attr[i]="xlink:href",r=null),n.$observe(o,function(e){e?(n.$set(i,e),de&&r&&t.prop(r,n[i])):"href"===a&&n.$set(i,null)})}}}});var Fi={$addControl:ve,$$renameControl:function(e,t){e.$name=t},$removeControl:ve,$setValidity:ve,$setDirty:ve,$setPristine:ve,$setSubmitted:ve},zi="ng-pending",Ui="ng-submitted";function Bi(e,t,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Fi,this.$$element=e,this.$$animate=r,qi(this)}Bi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Bi.prototype={$rollbackViewValue:function(){he(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){he(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){Le(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],(this[t]=e).$name=t},$removeControl:function(n){n.$name&&this[n.$name]===n&&delete this[n.$name],he(this.$pending,function(e,t){this.$setValidity(t,null,n)},this),he(this.$error,function(e,t){this.$setValidity(t,null,n)},this),he(this.$$success,function(e,t){this.$setValidity(t,null,n)},this),Me(this.$$controls,n),n.$$parentForm=Fi},$setDirty:function(){this.$$animate.removeClass(this.$$element,za),this.$$animate.addClass(this.$$element,Ua),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,za,Ua+" "+Ui),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,he(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){he(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,Ui),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},Gi({clazz:Bi,set:function(e,t,n){var r=e[t];r?-1===r.indexOf(n)&&r.push(n):e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(Me(r,n),0===r.length&&delete e[t])}});var ji=function(n){return["$timeout","$parse",function(l,t){return{name:"form",restrict:n?"EAC":"E",require:["form","^^?form"],controller:Bi,compile:function(e,t){e.addClass(za).addClass(La);var s=t.name?"name":!(!n||!t.ngForm)&&"ngForm";return{pre:function(t,e,n,r){var i=r[0];if(!("action"in n)){var a=function(e){t.$apply(function(){i.$commitViewValue(),i.$setSubmitted()}),e.preventDefault()};e[0].addEventListener("submit",a),e.on("$destroy",function(){l(function(){e[0].removeEventListener("submit",a)},0,!1)})}(r[1]||i.$$parentForm).$addControl(i);var o=s?u(i.$name):ve;s&&(o(t,i),n.$observe(s,function(e){i.$name!==e&&(o(t,void 0),i.$$parentForm.$$renameControl(i,e),(o=u(i.$name))(t,i))})),e.on("$destroy",function(){i.$$parentForm.$removeControl(i),o(t,void 0),ge(i,Fi)})}}}};function u(e){return""===e?t('this[""]').assign:t(e).assign||ve}}]},Vi=ji(),Wi=ji(!0);function qi(e){e.$$classCache={},e.$$classCache[Fa]=!(e.$$classCache[La]=e.$$element.hasClass(La))}function Gi(e){var t=e.clazz,i=e.set,a=e.unset;function o(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function s(e,t,n){t=t?"-"+Pe(t,"-"):"",o(e,La+t,!0===n),o(e,Fa+t,!1===n)}t.prototype.$setValidity=function(e,t,n){var r;be(t)?function(e,t,n,r){e[t]||(e[t]={});i(e[t],n,r)}(this,"$pending",e,n):function(e,t,n,r){e[t]&&a(e[t],n,r);Yi(e[t])&&(e[t]=void 0)}(this,"$pending",e,n),De(t)?t?(a(this.$error,e,n),i(this.$$success,e,n)):(i(this.$error,e,n),a(this.$$success,e,n)):(a(this.$error,e,n),a(this.$$success,e,n)),this.$pending?(o(this,zi,!0),this.$valid=this.$invalid=void 0,s(this,"",null)):(o(this,zi,!1),this.$valid=Yi(this.$error),this.$invalid=!this.$valid,s(this,"",this.$valid)),s(this,e,r=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,r,this)}}function Yi(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Ki=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Xi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Zi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Ji=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Qi=/^(\d{4,})-(\d{2})-(\d{2})$/,ea=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ta=/^(\d{4,})-W(\d\d)$/,na=/^(\d{4,})-(\d\d)$/,ra=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ia="keydown wheel mousedown",aa=ze();he("date,datetime-local,month,time,week".split(","),function(e){aa[e]=!0});var oa={text:function(e,t,n,r,i,a){la(e,t,n,r,i,a),sa(r)},date:ca("date",Qi,ua(Qi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ca("datetimelocal",ea,ua(ea,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:ca("time",ra,ua(ra,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ca("week",ta,function(e,t){if(C(e))return e;if(Se(e)){ta.lastIndex=0;var n=ta.exec(e);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,l=0,u=xi(r),c=7*(i-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(r,0,u.getDate()+c,a,o,s,l)}}return NaN},"yyyy-Www"),month:ca("month",na,ua(na,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,r,i,a){var o,s;da(e,t,n,r),fa(r),la(e,t,n,r,i,a),($e(n.min)||n.ngMin)&&(r.$validators.min=function(e){return r.$isEmpty(e)||be(o)||o<=e},n.$observe("min",function(e){o=pa(e),r.$validate()}));($e(n.max)||n.ngMax)&&(r.$validators.max=function(e){return r.$isEmpty(e)||be(s)||e<=s},n.$observe("max",function(e){s=pa(e),r.$validate()}));if($e(n.step)||n.ngStep){var l;r.$validators.step=function(e,t){return r.$isEmpty(t)||be(l)||ma(t,o||0,l)},n.$observe("step",function(e){l=pa(e),r.$validate()})}},url:function(e,t,n,r,i,a){la(e,t,n,r,i,a),sa(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||Xi.test(n)}},email:function(e,t,n,r,i,a){la(e,t,n,r,i,a),sa(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||Zi.test(n)}},radio:function(e,n,r,i){var a=!r.ngTrim||"false"!==ke(r.ngTrim);be(r.name)&&n.attr("name",k());n.on("click",function(e){var t;n[0].checked&&(t=r.value,a&&(t=ke(t)),i.$setViewValue(t,e&&e.type))}),i.$render=function(){var e=r.value;a&&(e=ke(e)),n[0].checked=e===i.$viewValue},r.$observe("value",i.$render)},range:function(e,n,r,i,t,a){da(e,n,r,i),fa(i),la(e,n,r,i,t,a);var o=i.$$hasNativeValidators&&"range"===n[0].type,s=o?0:void 0,l=o?100:void 0,u=o?1:void 0,c=n[0].validity,d=$e(r.min),f=$e(r.max),p=$e(r.step),h=i.$render;i.$render=o&&$e(c.rangeUnderflow)&&$e(c.rangeOverflow)?function(){h(),i.$setViewValue(n.val())}:h,d&&(i.$validators.min=o?function(){return!0}:function(e,t){return i.$isEmpty(t)||be(s)||s<=t},g("min",function(e){if(s=pa(e),R(i.$modelValue))return;if(o){var t=n.val();t<s&&(t=s,n.val(t)),i.$setViewValue(t)}else i.$validate()}));f&&(i.$validators.max=o?function(){return!0}:function(e,t){return i.$isEmpty(t)||be(l)||t<=l},g("max",function(e){if(l=pa(e),R(i.$modelValue))return;if(o){var t=n.val();l<t&&(n.val(l),t=l<s?s:l),i.$setViewValue(t)}else i.$validate()}));p&&(i.$validators.step=o?function(){return!c.stepMismatch}:function(e,t){return i.$isEmpty(t)||be(u)||ma(t,s||0,u)},g("step",function(e){if(u=pa(e),R(i.$modelValue))return;o&&i.$viewValue!==n.val()?i.$setViewValue(n.val()):i.$validate()}));function g(e,t){n.attr(e,r[e]),r.$observe(e,t)}},checkbox:function(e,t,n,r,i,a,o,s){var l=va(s,e,"ngTrueValue",n.ngTrueValue,!0),u=va(s,e,"ngFalseValue",n.ngFalseValue,!1);t.on("click",function(e){r.$setViewValue(t[0].checked,e&&e.type)}),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return!1===e},r.$formatters.push(function(e){return Ne(e,l)}),r.$parsers.push(function(e){return e?l:u})},hidden:ve,button:ve,submit:ve,reset:ve,file:ve};function sa(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function la(e,r,i,a,t,o){var s,l=ce(r[0].type);if(!t.android){var u=!1;r.on("compositionstart",function(){u=!0}),r.on("compositionend",function(){u=!1,c()})}var c=function(e){if(s&&(o.defer.cancel(s),s=null),!u){var t=r.val(),n=e&&e.type;"password"===l||i.ngTrim&&"false"===i.ngTrim||(t=ke(t)),(a.$viewValue!==t||""===t&&a.$$hasNativeValidators)&&a.$setViewValue(t,n)}};if(t.hasEvent("input"))r.on("input",c);else{var n=function(e,t,n){s||(s=o.defer(function(){s=null,t&&t.value===n||c(e)}))};r.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||n(e,this,this.value)}),t.hasEvent("paste")&&r.on("paste cut drop",n)}r.on("change",c),aa[l]&&a.$$hasNativeValidators&&l===i.type&&r.on(ia,function(e){if(!s){var t=this[d],n=t.badInput,r=t.typeMismatch;s=o.defer(function(){s=null,t.badInput===n&&t.typeMismatch===r||c(e)})}}),a.$render=function(){var e=a.$isEmpty(a.$viewValue)?"":a.$viewValue;r.val()!==e&&r.val(e)}}function ua(i,a){return function(e,t){var n,r;if(C(e))return e;if(Se(e)){if('"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substring(1,e.length-1)),Ki.test(e))return new Date(e);if(i.lastIndex=0,n=i.exec(e))return n.shift(),r=t?{yyyy:t.getFullYear(),MM:t.getMonth()+1,dd:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},he(n,function(e,t){t<a.length&&(r[a[t]]=+e)}),new Date(r.yyyy,r.MM-1,r.dd,r.HH,r.mm,r.ss||0,1e3*r.sss||0)}return NaN}}function ca(p,h,g,m){return function(e,t,n,r,i,a,o){da(e,t,n,r),la(0,t,n,r,i,a);var s,l,u,c=r&&r.$options.getOption("timezone");(r.$$parserName=p,r.$parsers.push(function(e){if(r.$isEmpty(e))return null;if(h.test(e)){var t=g(e,s);return c&&(t=Y(t,c)),t}}),r.$formatters.push(function(e){if(e&&!C(e))throw qa("datefmt","Expected `{0}` to be a date",e);return d(e)?((s=e)&&c&&(s=Y(s,c,!0)),o("date")(e,m,c)):(s=null,"")}),$e(n.min)||n.ngMin)&&(r.$validators.min=function(e){return!d(e)||be(l)||g(e)>=l},n.$observe("min",function(e){l=f(e),r.$validate()}));($e(n.max)||n.ngMax)&&(r.$validators.max=function(e){return!d(e)||be(u)||g(e)<=u},n.$observe("max",function(e){u=f(e),r.$validate()}));function d(e){return e&&!(e.getTime&&e.getTime()!=e.getTime())}function f(e){return $e(e)&&!C(e)?g(e)||void 0:e}}}function da(e,n,t,r){var i=n[0];(r.$$hasNativeValidators=we(i.validity))&&r.$parsers.push(function(e){var t=n.prop(d)||{};return t.badInput||t.typeMismatch?void 0:e})}function fa(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:Ji.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!x(e))throw qa("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function pa(e){return $e(e)&&!x(e)&&(e=parseFloat(e)),R(e)?void 0:e}function ha(e){return(0|e)===e}function ga(e){var t=e.toString(),n=t.indexOf(".");if(-1!==n)return t.length-n-1;if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}function ma(e,t,n){var r=Number(e),i=!ha(r),a=!ha(t),o=!ha(n);if(i||a||o){var s=i?ga(r):0,l=a?ga(t):0,u=o?ga(n):0,c=Math.max(s,l,u),d=Math.pow(10,c);r*=d,t*=d,n*=d,i&&(r=Math.round(r)),a&&(t=Math.round(t)),o&&(n=Math.round(n))}return(r-t)%n==0}function va(e,t,n,r,i){var a;if($e(r)){if(!(a=e(r)).constant)throw qa("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(t)}return i}var ya=["$browser","$sniffer","$filter","$parse",function(i,a,o,s){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,t,n,r){r[0]&&(oa[ce(n.type)]||oa.text)(e,t,n,r[0],a,i,o,s)}}}}],ba=/^(true|false|\d+)$/,$a=function(){function r(e,t,n){var r=$e(n)?n:9===de?"":null;e.prop("value",r),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,t){return ba.test(t.ngValue)?function(e,t,n){r(t,n,e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){r(t,n,e)})}}}},wa=["$compile",function(r){return{restrict:"AC",compile:function(e){return r.$$addBindingClass(e),function(e,t,n){r.$$addBindingInfo(t,n.ngBind),t=t[0],e.$watch(n.ngBind,function(e){t.textContent=Ue(e)})}}}}],Sa=["$interpolate","$compile",function(i,a){return{compile:function(e){return a.$$addBindingClass(e),function(e,t,n){var r=i(t.attr(n.$attr.ngBindTemplate));a.$$addBindingInfo(t,r.expressions),t=t[0],n.$observe("ngBindTemplate",function(e){t.textContent=be(e)?"":e})}}}}],xa=["$sce","$parse","$compile",function(a,n,o){return{restrict:"A",compile:function(e,t){var r=n(t.ngBindHtml),i=n(t.ngBindHtml,function(e){return a.valueOf(e)});return o.$$addBindingClass(e),function(t,n,e){o.$$addBindingInfo(n,e.ngBindHtml),t.$watch(i,function(){var e=r(t);n.html(a.getTrustedHtml(e)||"")})}}}}],Ca=T({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}});function Ea(p,h){var g;return p="ngClass"+p,["$parse",function(f){return{restrict:"AC",link:function(e,t,l){var u,n=l[p].trim(),r=":"===n.charAt(0)&&":"===n.charAt(1),i=f(n,r?b:y),a=r?function(e){var t=y(e);t!==u&&s(t)}:s,o=t.data("$classCounts"),c=!0;function d(e,t){var n=[];return he(e,function(e){(0<t||o[e])&&(o[e]=(o[e]||0)+t,o[e]===+(0<t)&&n.push(e))}),n.join(" ")}function s(e){var t,n,r,i,a,o,s;c===h&&(t=e,n=v(u),r=v(t),i=m(n,r),a=m(r,n),o=d(i,-1),s=d(a,1),l.$addClass(s),l.$removeClass(o)),u=e}o||(o=ze(),t.data("$classCounts",o)),"ngClass"!==p&&(g||(g=f("$index",function(e){return 1&e})),e.$watch(g,function(e){e===h?(n=d(v(n=u),1),l.$addClass(n)):(t=d(v(t=u),-1),l.$removeClass(t));var t;var n;c=e})),e.$watch(i,a,r)}}}];function m(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],a=0;a<t.length;a++)if(i===t[a])continue e;n.push(i)}return n}function v(e){return e&&e.split(" ")}function y(t){var e=t;return xe(t)?e=t.map(y).join(" "):we(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}function b(n){var e=n;if(xe(n))e=n.map(b);else if(we(n)){var r=!1;e=Object.keys(n).filter(function(e){var t=n[e];return!r&&be(t)&&(r=!0),t}),r&&e.push(void 0)}return e}}var Ta=Ea("",!0),Da=Ea("Odd",0),ka=Ea("Even",1),Ra=Pi({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Ma=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Aa={},Na={blur:!0,focus:!0};he("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var o=$n("ng-"+a);Aa[o]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(e,t){var r=n(t[o]);return function(n,e){e.on(a,function(e){var t=function(){r(n,{$event:e})};Na[a]&&i.$$phase?n.$evalAsync(t):n.$apply(t)})}}}}]});var Oa=["$animate","$compile",function(l,u){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(e,n,r,t,i){var a,o,s;e.$watch(r.ngIf,function(e){e?o||i(function(e,t){o=t,e[e.length++]=u.$$createComment("end ngIf",r.ngIf),a={clone:e},l.enter(e,n.parent(),n)}):(s&&(s.remove(),s=null),o&&(o.$destroy(),o=null),a&&(s=Fe(a.clone),l.leave(s).done(function(e){!1!==e&&(s=null)}),a=null))})}}}],Ia=["$templateRequest","$anchorScroll","$animate",function(m,v,y){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(e,t){var n=t.ngInclude||t.src,h=t.onload||"",g=t.autoscroll;return function(o,s,e,l,u){var c,t,d,f=0,p=function(){t&&(t.remove(),t=null),c&&(c.$destroy(),c=null),d&&(y.leave(d).done(function(e){!1!==e&&(t=null)}),t=d,d=null)};o.$watch(n,function(r){var i=function(e){!1===e||!$e(g)||g&&!o.$eval(g)||v()},a=++f;r?(m(r,!0).then(function(e){if(!o.$$destroyed&&a===f){var t=o.$new();l.template=e;var n=u(t,function(e){p(),y.enter(e,null,s).done(i)});d=n,(c=t).$emit("$includeContentLoaded",r),o.$eval(h)}},function(){o.$$destroyed||a===f&&(p(),o.$emit("$includeContentError",r))}),o.$emit("$includeContentRequested",r)):(p(),l.template=null)})}}}}],_a=["$compile",function(i){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(e,t,n,r){if(pe.call(t[0]).match(/SVG/))return t.empty(),void i(dt(r.template,B.document).childNodes)(e,function(e){t.append(e)},{futureParentElement:t});t.html(r.template),i(t.contents())(e)}}}],Pa=Pi({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ha=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var i=n.ngList||", ",a="false"!==n.ngTrim,o=a?ke(i):i;r.$parsers.push(function(e){if(!be(e)){var t=[];return e&&he(e.split(o),function(e){e&&t.push(a?ke(e):e)}),t}}),r.$formatters.push(function(e){if(xe(e))return e.join(i)}),r.$isEmpty=function(e){return!e||!e.length}}}},La="ng-valid",Fa="ng-invalid",za="ng-pristine",Ua="ng-dirty",Ba="ng-untouched",ja="ng-touched",Va="ng-empty",Wa="ng-not-empty",qa=D("ngModel");function Ga(e,t,n,r,i,a,o,s,l){var u;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(e),this.$$parentForm=Fi,this.$options=Ya,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:e}),this.$$attr=n,this.$$element=r,this.$$animate=a,this.$$timeout=o,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,qi(this),(u=this).$$scope.$watch(function(e){var t=u.$$ngModelGet(e);return t===u.$modelValue||u.$modelValue!=u.$modelValue&&t!=t||u.$$setModelValue(t),t})}Ga.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Ga.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var n=this.$$parse(this.$$attr.ngModel+"()"),r=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var t=this.$$parsedNgModel(e);return Ee(t)&&(t=n(e)),t},this.$$ngModelSet=function(e,t){Ee(this.$$parsedNgModel(e))?r(e,{$$$p:t}):this.$$parsedNgModelAssign(e,t)}}else if(!this.$$parsedNgModel.assign)throw qa("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,_e(this.$$element))},$render:ve,$isEmpty:function(e){return be(e)||""===e||null===e||e!=e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,Wa),this.$$animate.addClass(this.$$element,Va)):(this.$$animate.removeClass(this.$$element,Va),this.$$animate.addClass(this.$$element,Wa))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Ua),this.$$animate.addClass(this.$$element,za)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,za),this.$$animate.addClass(this.$$element,Ua),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Ba,ja)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,ja,Ba)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!R(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),a=this;this.$$runValidators(t,e,function(e){i||n===e||(a.$modelValue=e?t:void 0,a.$modelValue!==r&&a.$$writeModelToScope())})}},$$runValidators:function(r,i,t){this.$$currentValidationRunId++;var a,o,s,n=this.$$currentValidationRunId,l=this;(function(){var e=l.$$parserName||"parse";{if(!be(l.$$parserValid))return l.$$parserValid||(he(l.$validators,function(e,t){u(t,null)}),he(l.$asyncValidators,function(e,t){u(t,null)})),u(e,l.$$parserValid),l.$$parserValid;u(e,null)}return!0})()?(a=!0,he(l.$validators,function(e,t){var n=Boolean(e(r,i));a=a&&n,u(t,n)}),a||(he(l.$asyncValidators,function(e,t){u(t,null)}),0)?(o=[],s=!0,he(l.$asyncValidators,function(e,t){var n=e(r,i);if(!A(n))throw qa("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",n);u(t,void 0),o.push(n.then(function(){u(t,!0)},function(){u(t,s=!1)}))}),o.length?l.$$q.all(o).then(function(){e(s)},ve):e(!0)):e(!1)):e(!1);function u(e,t){n===l.$$currentValidationRunId&&l.$setValidity(e,t)}function e(e){n===l.$$currentValidationRunId&&t(e)}},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,n=this;if(this.$$parserValid=!be(t)||void 0,this.$$parserValid)for(var e=0;e<this.$parsers.length;e++)if(be(t=this.$parsers[e](t))){this.$$parserValid=!1;break}R(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function a(){n.$modelValue!==r&&n.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,a()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(e){i||(n.$modelValue=e?t:void 0,a())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),he(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");x(t[e])?t=t[e]:x(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;0<t?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e),this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();this.$viewValue!==e&&(this.$$updateEmptyClasses(e),this.$viewValue=this.$$lastCommittedViewValue=e,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,ve))},$$format:function(){for(var e=this.$formatters,t=e.length,n=this.$modelValue;t--;)n=e[t](n);return n},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}},Gi({clazz:Ga,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Ya,Ka=["$rootScope",function(o){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ga,priority:1,compile:function(e){return e.addClass(za).addClass(Ba).addClass(La),{pre:function(e,t,n,r){var i=r[0],a=r[1]||i.$$parentForm,o=r[2];o&&(i.$options=o.$options),i.$$initGetterSetters(),a.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,t,n,r){var i=r[0];function a(){i.$setTouched()}i.$$setUpdateOnEvents(),t.on("blur",function(){i.$touched||(o.$$phase?e.$evalAsync(a):e.$apply(a))})}}}}}],Xa=/(\s+|^)default(\s+|$)/;function Za(e){this.$$options=e}Za.prototype={getOption:function(e){return this.$$options[e]},createChild:function(n){var r=!1;return he(n=ge({},n),function(e,t){"$inherit"===e?"*"===t?r=!0:(n[t]=this.$$options[t],"updateOn"===t&&(n.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===t&&(n.updateOnDefault=!1,n[t]=ke(e.replace(Xa,function(){return n.updateOnDefault=!0," "})))},this),r&&(delete n["*"],Qa(n,this.$$options)),Qa(n,Ya.$$options),new Za(n)}},Ya=new Za({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Ja=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Ya,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}};function Qa(n,e){he(e,function(e,t){$e(n[t])||(n[t]=e)})}var eo=Pi({terminal:!0,priority:1e3}),to=D("ngOptions"),no=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ro=["$compile","$document","$parse",function(m,v,C){var y=B.document.createElement("option"),b=B.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=ve},post:function(e,o,t,n){for(var s=n[0],l=n[1],u=t.multiple,r=0,i=o.children(),a=i.length;r<a;r++)if(""===i[r].value){s.hasEmptyOption=!0,s.emptyOption=i.eq(r);break}o.empty();var c,d=!!s.emptyOption;fe(y.cloneNode(!1)).val("?");var f=function(e,t,f){var d=e.match(no);if(!d)throw to("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,_e(t));var n=d[5]||d[7],r=d[6],i=/ as /.test(d[0])&&d[1],p=d[9],a=C(d[2]?d[1]:n),h=i&&C(i)||a,o=p&&C(p),g=p?function(e,t){return o(f,t)}:function(e){return Ht(e)},m=function(e,t){return g(e,w(e,t))},v=C(d[2]||d[1]),y=C(d[3]||""),b=C(d[4]||""),$=C(d[8]),s={},w=r?function(e,t){return s[r]=t,s[n]=e,s}:function(e){return s[n]=e,s};function S(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function x(e){var t;if(!r&&I(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}return{trackBy:p,getTrackByValue:m,getWatchables:C($,function(e){for(var t=[],n=x(e=e||[]),r=n.length,i=0;i<r;i++){var a=e===n?i:n[i],o=e[a],s=w(o,a),l=g(o,s);if(t.push(l),d[2]||d[1]){var u=v(f,s);t.push(u)}if(d[4]){var c=b(f,s);t.push(c)}}return t}),getOptions:function(){for(var e=[],t={},n=$(f)||[],r=x(n),i=r.length,a=0;a<i;a++){var o=n===r?a:r[a],s=n[o],l=w(s,o),u=h(f,l),c=g(u,l),d=new S(c,u,v(f,l),y(f,l),b(f,l));e.push(d),t[c]=d}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[m(e)]},getViewValueFromOption:function(e){return p?H(e.viewValue):e.viewValue}}}}}(t.ngOptions,o,e),p=v[0].createDocumentFragment();function h(e,t){var n,r,i=y.cloneNode(!1);t.appendChild(i),r=i,((n=e).element=r).disabled=n.disabled,n.label!==r.label&&(r.label=n.label,r.textContent=n.label),r.value=n.selectValue}function g(e){var t=c.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}s.generateUnknownOptionValue=function(e){return"?"},u?(s.writeValue=function(e){if(c){var t=e&&e.map(g)||[];c.items.forEach(function(e){e.element.selected&&!P(t,e)&&(e.element.selected=!1)})}},s.readValue=function(){var e=o.val()||[],n=[];return he(e,function(e){var t=c.selectValueMap[e];t&&!t.disabled&&n.push(c.getViewValueFromOption(t))}),n},f.trackBy&&e.$watchCollection(function(){if(xe(l.$viewValue))return l.$viewValue.map(function(e){return f.getTrackByValue(e)})},function(){l.$render()})):(s.writeValue=function(e){if(c){var t=o[0].options[o[0].selectedIndex],n=c.getOptionFromViewValue(e);t&&t.removeAttribute("selected"),n?(o[0].value!==n.selectValue&&(s.removeUnknownOption(),o[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):s.selectUnknownOrEmptyOption(e)}},s.readValue=function(){var e=c.selectValueMap[o.val()];return e&&!e.disabled?(s.unselectEmptyOption(),s.removeUnknownOption(),c.getViewValueFromOption(e)):null},f.trackBy&&e.$watch(function(){return f.getTrackByValue(l.$viewValue)},function(){l.$render()})),d&&(m(s.emptyOption)(e),o.prepend(s.emptyOption),s.emptyOption[0].nodeType===Ve?(s.hasEmptyOption=!1,s.registerOption=function(e,t){""===t.val()&&(s.hasEmptyOption=!0,s.emptyOption=t,s.emptyOption.removeClass("ng-scope"),l.$render(),t.on("$destroy",function(){var e=s.$isEmptyOptionSelected();s.hasEmptyOption=!1,s.emptyOption=void 0,e&&l.$render()}))}):s.emptyOption.removeClass("ng-scope")),e.$watchCollection(f.getWatchables,function(){var e=c&&s.readValue();if(c)for(var t=c.items.length-1;0<=t;t--){var n=c.items[t];$e(n.group)?Dt(n.element.parentNode):Dt(n.element)}c=f.getOptions();var r={};if(c.items.forEach(function(e){var t;$e(e.group)?((t=r[e.group])||(t=b.cloneNode(!1),p.appendChild(t),t.label=null===e.group?"null":e.group,r[e.group]=t),h(e,t)):h(e,p)}),o[0].appendChild(p),l.$render(),!l.$isEmpty(e)){var i=s.readValue(),a=f.trackBy||u;(a?Ne(e,i):e===i)||(l.$setViewValue(i),l.$render())}})}}}}],io=["$locale","$interpolate","$log",function(h,g,m){var v=/{}/g,y=/^when(Minus)?(.+)$/;return{link:function(i,a,o){var s,e=o.count,l=o.$attr.when&&a.attr(o.$attr.when),u=o.offset||0,c=i.$eval(l)||{},d={},t=g.startSymbol(),n=g.endSymbol(),r=t+e+"-"+u+n,f=b.noop;function p(e){a.text(e||"")}he(o,function(e,t){var n=y.exec(t);if(n){var r=(n[1]?"-":"")+ce(n[2]);c[r]=a.attr(o.$attr[t])}}),he(c,function(e,t){d[t]=g(e.replace(v,r))}),i.$watch(e,function(e){var t=parseFloat(e),n=R(t);if(n||t in c||(t=h.pluralCat(t-u)),!(t===s||n&&R(s))){f();var r=d[t];be(r)?(null!=e&&m.debug("ngPluralize: no rule defined for '"+t+"' in "+l),f=ve,p()):f=i.$watch(r,p),s=t}})}}}],ao=["$parse","$animate","$compile",function(l,M,u){var A="$$NG_REMOVED",N=D("ngRepeat"),O=function(e,t,n,r,i,a,o){e[n]=r,i&&(e[i]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,t){var S=t.ngRepeat,x=u.$$createComment("end ngRepeat",S),n=S.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!n)throw N("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",S);var r=n[1],i=n[2],C=n[3],a=n[4];if(!(n=r.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw N("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",r);var o,E,T,D,k=n[3]||n[1],R=n[2];if(C&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(C)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(C)))throw N("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",C);var s={$id:Ht};return a?o=l(a):(T=function(e,t){return Ht(t)},D=function(e){return e}),function(y,b,e,t,$){o&&(E=function(e,t,n){return R&&(s[R]=e),s[k]=t,s.$index=n,o(y,s)});var w=ze();y.$watchCollection(i,function(e){var r,t,n,i,a,o,s,l,u,c,d,f,p,h=b[0],g=ze();if(C&&(y[C]=e),I(e))u=e,l=E||T;else for(var m in l=E||D,u=[],e)j.call(e,m)&&"$"!==m.charAt(0)&&u.push(m);for(i=u.length,d=new Array(i),r=0;r<i;r++)if(a=e===u?r:u[r],o=e[a],s=l(a,o,r),w[s])c=w[s],delete w[s],g[s]=c,d[r]=c;else{if(g[s])throw he(d,function(e){e&&e.scope&&(w[e.id]=e)}),N("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",S,s,o);d[r]={id:s,scope:void 0,clone:void 0},g[s]=!0}for(var v in w){if(f=Fe((c=w[v]).clone),M.leave(f),f[0].parentNode)for(r=0,t=f.length;r<t;r++)f[r][A]=!0;c.scope.$destroy()}for(r=0;r<i;r++)if(a=e===u?r:u[r],o=e[a],(c=d[r]).scope){for(n=h;(n=n.nextSibling)&&n[A];);c.clone[0]!==n&&M.move(Fe(c.clone),null,h),h=(p=c).clone[p.clone.length-1],O(c.scope,r,k,o,R,a,i)}else $(function(e,t){c.scope=t;var n=x.cloneNode(!1);e[e.length++]=n,M.enter(e,null,h),h=n,c.clone=e,g[c.id]=c,O(c.scope,r,k,o,R,a,i)});w=g})}}}}],oo="ng-hide",so="ng-hide-animate",lo=["$animate",function(r){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngShow,function(e){r[e?"removeClass":"addClass"](t,oo,{tempClasses:so})})}}}],uo=["$animate",function(r){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngHide,function(e){r[e?"addClass":"removeClass"](t,oo,{tempClasses:so})})}}}],co=Pi(function(e,n,t){e.$watch(t.ngStyle,function(e,t){t&&e!==t&&he(t,function(e,t){n.css(t,"")}),e&&n.css(e)},!0)}),fo=["$animate","$compile",function(c,d){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(e,t,n,i){var r=n.ngSwitch||n.on,a=[],o=[],s=[],l=[],u=function(t,n){return function(e){!1!==e&&t.splice(n,1)}};e.$watch(r,function(e){for(var t,n;s.length;)c.cancel(s.pop());for(t=0,n=l.length;t<n;++t){var r=Fe(o[t].clone);l[t].$destroy(),(s[t]=c.leave(r)).done(u(s,t))}o.length=0,l.length=0,(a=i.cases["!"+e]||i.cases["?"])&&he(a,function(i){i.transclude(function(e,t){l.push(t);var n=i.element;e[e.length++]=d.$$createComment("end ngSwitchWhen");var r={clone:e};o.push(r),c.enter(e,n.parent(),n)})})})}}}],po=Pi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){he(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){r.cases["!"+e]=r.cases["!"+e]||[],r.cases["!"+e].push({transclude:i,element:t})})}}),ho=Pi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),go=D("ngTransclude"),mo=["$compile",function(t){return{restrict:"EAC",compile:function(e){var s=t(e.contents());return e.empty(),function(e,n,t,r,i){if(!i)throw go("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",_e(n));t.ngTransclude===t.$attr.ngTransclude&&(t.ngTransclude="");var a=t.ngTransclude||t.ngTranscludeSlot;function o(){s(e,function(e){n.append(e)})}i(function(e,t){e.length&&function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.nodeType!==je||r.nodeValue.trim())return!0}}(e)?n.append(e):(o(),t.$destroy())},null,a),a&&!i.isSlotFilled(a)&&o()}}}}],vo=["$templateCache",function(i){return{restrict:"E",terminal:!0,compile:function(e,t){if("text/ng-template"===t.type){var n=t.id,r=e[0].text;i.put(n,r)}}}}],yo={$setViewValue:ve,$render:ve};function bo(e,t){e.prop("selected",t),e.attr("selected",t)}var $o=["$element","$scope",function(i,t){var s=this,r=new zt;s.selectValueMap={},s.ngModelCtrl=yo,s.multiple=!1,s.unknownOption=fe(B.document.createElement("option")),s.hasEmptyOption=!1,s.emptyOption=void 0,s.renderUnknownOption=function(e){var t=s.generateUnknownOptionValue(e);s.unknownOption.val(t),i.prepend(s.unknownOption),bo(s.unknownOption,!0),i.val(t)},s.updateUnknownOption=function(e){var t=s.generateUnknownOptionValue(e);s.unknownOption.val(t),bo(s.unknownOption,!0),i.val(t)},s.generateUnknownOptionValue=function(e){return"? "+Ht(e)+" ?"},s.removeUnknownOption=function(){s.unknownOption.parent()&&s.unknownOption.remove()},s.selectEmptyOption=function(){s.emptyOption&&(i.val(""),bo(s.emptyOption,!0))},s.unselectEmptyOption=function(){s.hasEmptyOption&&bo(s.emptyOption,!1)},t.$on("$destroy",function(){s.renderUnknownOption=ve}),s.readValue=function(){var e=i.val(),t=e in s.selectValueMap?s.selectValueMap[e]:e;return s.hasOption(t)?t:null},s.writeValue=function(e){var t=i[0].options[i[0].selectedIndex];if(t&&bo(fe(t),!1),s.hasOption(e)){s.removeUnknownOption();var n=Ht(e);i.val(n in s.selectValueMap?n:e);var r=i[0].options[i[0].selectedIndex];bo(fe(r),!0)}else s.selectUnknownOrEmptyOption(e)},s.addOption=function(e,t){if(t[0].nodeType!==Ve){Le(e,'"option value"'),""===e&&(s.hasEmptyOption=!0,s.emptyOption=t);var n=r.get(e)||0;r.set(e,n+1),l()}},s.removeOption=function(e){var t=r.get(e);t&&(1===t?(r.delete(e),""===e&&(s.hasEmptyOption=!1,s.emptyOption=void 0)):r.set(e,t-1))},s.hasOption=function(e){return!!r.get(e)},s.$hasEmptyOption=function(){return s.hasEmptyOption},s.$isUnknownOptionSelected=function(){return i[0].options[0]===s.unknownOption[0]},s.$isEmptyOptionSelected=function(){return s.hasEmptyOption&&i[0].options[i[0].selectedIndex]===s.emptyOption[0]};var e=!(s.selectUnknownOrEmptyOption=function(e){null==e&&s.emptyOption?(s.removeUnknownOption(),s.selectEmptyOption()):s.unknownOption.parent().length?s.updateUnknownOption(e):s.renderUnknownOption(e)});function l(){e||(e=!0,t.$$postDigest(function(){e=!1,s.ngModelCtrl.$render()}))}var n=!1;function u(e){n||(n=!0,t.$$postDigest(function(){t.$$destroyed||(n=!1,s.ngModelCtrl.$setViewValue(s.readValue()),e&&s.ngModelCtrl.$render())}))}s.registerOption=function(e,r,i,t,n){if(i.$attr.ngValue){var a,o=NaN;i.$observe("value",function(e){var t,n=r.prop("selected");$e(o)&&(s.removeOption(a),delete s.selectValueMap[o],t=!0),o=Ht(e),a=e,s.selectValueMap[o]=e,s.addOption(e,r),r.attr("value",o),t&&n&&u()})}else t?i.$observe("value",function(e){var t;s.readValue();var n=r.prop("selected");$e(a)&&(s.removeOption(a),t=!0),a=e,s.addOption(e,r),t&&n&&u()}):n?e.$watch(n,function(e,t){i.$set("value",e);var n=r.prop("selected");t!==e&&s.removeOption(t),s.addOption(e,r),t&&n&&u()}):s.addOption(i.value,r);i.$observe("disabled",function(e){("true"===e||e&&r.prop("selected"))&&(s.multiple?u(!0):(s.ngModelCtrl.$setViewValue(null),s.ngModelCtrl.$render()))}),r.on("$destroy",function(){var e=s.readValue(),t=i.value;s.removeOption(t),l(),(s.multiple&&e&&-1!==e.indexOf(t)||e===t)&&u(!0)})}}],wo=function(){return{restrict:"E",require:["select","?ngModel"],controller:$o,priority:1,link:{pre:function(e,t,n,r){var i=r[0],a=r[1];if(!a)return void(i.registerOption=ve);if(i.ngModelCtrl=a,t.on("change",function(){i.removeUnknownOption(),e.$apply(function(){a.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var n=[];return he(t.find("option"),function(e){if(e.selected&&!e.disabled){var t=e.value;n.push(t in i.selectValueMap?i.selectValueMap[t]:t)}}),n},i.writeValue=function(r){he(t.find("option"),function(e){var t=!!r&&(P(r,e.value)||P(r,i.selectValueMap[e.value])),n=e.selected;t!==n&&bo(fe(e),t)})};var o,s=NaN;e.$watch(function(){s!==a.$viewValue||Ne(o,a.$viewValue)||(o=Ge(a.$viewValue),a.$render()),s=a.$viewValue}),a.$isEmpty=function(e){return!e||0===e.length}}},post:function(e,t,n,r){var i=r[1];if(!i)return;var a=r[0];i.$render=function(){a.writeValue(i.$viewValue)}}}}},So=["$interpolate",function(n){return{restrict:"E",priority:100,compile:function(e,t){var o,s;return $e(t.ngValue)||($e(t.value)?o=n(t.value,!0):(s=n(e.text(),!0))||t.$set("value",e.text())),function(e,t,n){var r="$selectController",i=t.parent(),a=i.data(r)||i.parent().data(r);a&&a.registerOption(e,t,n,o,s)}}}}],xo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},Co=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i,a=n.ngPattern||n.pattern;n.$observe("pattern",function(e){if(Se(e)&&0<e.length&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw D("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,_e(t));i=e||void 0,r.$validate()}),r.$validators.pattern=function(e,t){return r.$isEmpty(t)||be(i)||i.test(t)}}}}},Eo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=$(e);i=R(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}}},To=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=$(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};B.angular.bootstrap?B.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var i;if(!se){var e=F();(o=be(e)?B.jQuery:e?B[e]:void 0)&&o.fn.on?(ge((fe=o).fn,{scope:Rt.scope,isolateScope:Rt.isolateScope,controller:Rt.controller,injector:Rt.injector,inheritedData:Rt.inheritedData}),i=o.cleanData,o.cleanData=function(e){for(var t,n,r=0;null!=(n=e[r]);r++)(t=o._data(n,"events"))&&t.$destroy&&o(n).triggerHandler("$destroy");i(e)}):fe=pt,b.element=fe,se=!0}}(),ge(b,{errorHandlingConfig:e,bootstrap:re,copy:H,extend:ge,merge:i,equals:Ne,element:fe,forEach:he,injector:Xt,noop:ve,bind:Ie,toJson:V,fromJson:W,identity:ye,isUndefined:be,isDefined:$e,isString:Se,isFunction:Ee,isObject:we,isNumber:x,isElement:_,isArray:xe,version:Ke,isDate:C,lowercase:ce,uppercase:c,callbacks:{$$counter:0},getTestability:ae,reloadWithDebugInfo:ie,$$minErr:D,$$csp:L,$$encodeUriSegment:J,$$encodeUriQuery:Q,$$stringify:Ue}),(v=function(e){var d=D("$injector"),f=D("ng");function t(e,t,n){return e[t]||(e[t]=n())}var n=t(e,"angular",Object);return n.$$minErr=n.$$minErr||D,t(n,"module",function(){var e={};return function(s,l,u){var c={};return function(e,t){if("hasOwnProperty"===e)throw f("badname","hasOwnProperty is not a valid {0} name",t)}(s,"module"),l&&e.hasOwnProperty(s)&&(e[s]=null),t(e,s,function(){if(!l)throw d("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",s);var a=[],e=[],t=[],n=r("$injector","invoke","push",e),o={_invokeQueue:a,_configBlocks:e,_runBlocks:t,info:function(e){if($e(e)){if(!we(e))throw f("aobj","Argument '{0}' must be an object","value");return c=e,this}return c},requires:l,name:s,provider:i("$provide","provider"),factory:i("$provide","factory"),service:i("$provide","service"),value:r("$provide","value"),constant:r("$provide","constant","unshift"),decorator:i("$provide","decorator",e),animation:i("$animateProvider","register"),filter:i("$filterProvider","register"),controller:i("$controllerProvider","register"),directive:i("$compileProvider","directive"),component:i("$compileProvider","component"),config:n,run:function(e){return t.push(e),this}};return u&&n(u),o;function r(e,t,n,r){return r||(r=a),function(){return r[n||"push"]([e,t,arguments]),o}}function i(n,r,i){return i||(i=a),function(e,t){return t&&Ee(t)&&(t.$$moduleName=s),i.push([n,r,arguments]),o}}})}})}(B))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Vr}),e.provider("$compile",mn).directive({a:Hi,input:ya,textarea:ya,form:Vi,script:vo,select:wo,option:So,ngBind:wa,ngBindHtml:xa,ngBindTemplate:Sa,ngClass:Ta,ngClassEven:ka,ngClassOdd:Da,ngCloak:Ra,ngController:Ma,ngForm:Wi,ngHide:uo,ngIf:Oa,ngInclude:Ia,ngInit:Pa,ngNonBindable:eo,ngPluralize:io,ngRepeat:ao,ngShow:lo,ngStyle:co,ngSwitch:fo,ngSwitchWhen:po,ngSwitchDefault:ho,ngOptions:ro,ngTransclude:mo,ngModel:Ka,ngList:Ha,ngChange:Ca,pattern:Co,ngPattern:Co,required:xo,ngRequired:xo,minlength:To,ngMinlength:To,maxlength:Eo,ngMaxlength:Eo,ngValue:$a,ngModelOptions:Ja}).directive({ngInclude:_a}).directive(Li).directive(Aa),e.provider({$anchorScroll:Zt,$animate:on,$animateCss:un,$$animateJs:rn,$$animateQueue:an,$$AnimateRunner:ln,$$animateAsyncRun:sn,$browser:dn,$cacheFactory:fn,$controller:En,$document:Tn,$$isDocumentHidden:Dn,$exceptionHandler:kn,$filter:ci,$$forceReflow:Rn,$interpolate:Yn,$interval:Kn,$http:Vn,$httpParamSerializer:Hn,$httpParamSerializerJQLike:Ln,$httpBackend:qn,$xhrFactory:Wn,$jsonpCallbacks:Xn,$location:hr,$log:gr,$parse:_r,$rootScope:jr,$q:Pr,$$q:Hr,$sce:Zr,$sceDelegate:Xr,$sniffer:Jr,$templateCache:pn,$templateRequest:ei,$$testability:ti,$timeout:ni,$window:si,$$rAF:Br,$$jqLite:Pt,$$Map:Ut,$$cookieReader:ui})}]).info({angularVersion:"1.6.9"}),b.module("ngLocale",[],["$provide",function(e){var i="one",a="other";e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var n=0|e,r=function(e,t){var n,r,i=t;void 0===i&&(i=Math.min((n=e,-1==(r=(n+="").indexOf("."))?0:n.length-r-1),3));var a=Math.pow(10,i);return{v:i,f:(e*a|0)%a}}(e,t);return 1==n&&0==r.v?i:a}})}]),fe(function(){ne(B.document,re)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(d,e){"use strict";var oe,se,le,ue,K=1,ce="-add",de="-remove",fe="ng-",x="ng-animate",X="$$ngAnimateChildren";se=void 0===d.ontransitionend&&void 0!==d.onwebkittransitionend?("-webkit-",oe="WebkitTransition","webkitTransitionEnd transitionend"):(oe="transition","transitionend"),ue=void 0===d.onanimationend&&void 0!==d.onwebkitanimationend?("-webkit-",le="WebkitAnimation","webkitAnimationEnd animationend"):(le="animation","animationend");var i="Duration",pe="TimingFunction",a="PlayState",n=le+"Delay",he=le+i,r=oe+"Delay",t=oe+i,o=e.$$minErr("ng");function f(e,t,n){if(!e)throw o("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function C(e,t){return e||t?e?t?(Oe(e)&&(e=e.join(" ")),Oe(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function ge(e,n,r){var i="";return e=Oe(e)?e:e&&ne(e)&&e.length?e.split(/\s+/):[],Ne(e,function(e,t){e&&0<e.length&&(i+=0<t?" ":"",i+=r?n+e:e+n)}),i}function Z(e){if(e instanceof ie)switch(e.length){case 0:return e;case 1:if(e[0].nodeType===K)return e;break;default:return ie(p(e))}if(e.nodeType===K)return ie(e)}function p(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===K)return n}}function E(l){return function(e,t){var n,r,i,a,o,s;t.addClass&&(n=l,r=e,i=t.addClass,Ne(r,function(e){n.addClass(e,i)}),t.addClass=null),t.removeClass&&(a=l,o=e,s=t.removeClass,Ne(o,function(e){a.removeClass(e,s)}),t.removeClass=null)}}function me(e){if(!(e=e||{}).$$prepared){var t=e.domOperation||Ie;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=Ie},e.$$prepared=!0}return e}function ve(e,t){ye(e,t),be(e,t)}function ye(e,t){t.from&&(e.css(t.from),t.from=null)}function be(e,t){t.to&&(e.css(t.to),t.to=null)}function J(e,t,n){var r=t.options||{},i=n.options||{},a=(r.addClass||"")+" "+(i.addClass||""),o=(r.removeClass||"")+" "+(i.removeClass||""),s=function(i,e,t){var n={};i=r(i),e=r(e),Ne(e,function(e,t){n[t]=1}),t=r(t),Ne(t,function(e,t){n[t]=1===n[t]?null:-1});var a={addClass:"",removeClass:""};function r(e){ne(e)&&(e=e.split(" "));var t={};return Ne(e,function(e){e.length&&(t[e]=!0)}),t}return Ne(n,function(e,t){var n,r;1===e?(n="addClass",r=!i[t]||i[t+de]):-1===e&&(n="removeClass",r=i[t]||i[t+ce]),r&&(a[n].length&&(a[n]+=" "),a[n]+=t)}),a}(e.attr("class"),a,o);i.preparationClasses&&(r.preparationClasses=Q(i.preparationClasses,r.preparationClasses),delete i.preparationClasses);var l=r.domOperation!==Ie?r.domOperation:null;return h(r,i),l&&(r.domOperation=l),s.addClass?r.addClass=s.addClass:r.addClass=null,s.removeClass?r.removeClass=s.removeClass:r.removeClass=null,t.addClass=r.addClass,t.removeClass=r.removeClass,r}function $e(e){return e instanceof ie?e[0]:e}function we(e,t){var n=t?"-"+t+"s":"";return xe(e,[r,n]),[r,n]}function Se(e,t){var n=t?"paused":"",r=le+a;return xe(e,[r,n]),[r,n]}function xe(e,t){var n=t[0],r=t[1];e.style[n]=r}function Q(e,t){return e?t?e+" "+t:e:t}var s=["$interpolate",function(a){return{link:function(e,t,n){var r=n.ngAnimateChildren;function i(e){e="on"===e||"true"===e,t.data(X,e)}ne(r)&&0===r.length?t.data(X,!0):(i(a(r)(e)),n.$observe("ngAnimateChildren",i))}}}],Ce="$$animateCss",c={transitionDuration:t,transitionDelay:r,transitionProperty:oe+"Property",animationDuration:he,animationDelay:n,animationIterationCount:le+"IterationCount"},Ee={transitionDuration:t,transitionDelay:r,animationDuration:he,animationDelay:n};function Te(e,t){return[t?n:r,e+"s"]}function De(e,t,n){var o=Object.create(null),s=e.getComputedStyle(t)||{};return Ne(n,function(e,t){var n,r,i=s[e];if(i){var a=i.charAt(0);("-"===a||"+"===a||0<=a)&&(n=0,r=i.split(/\s*,\s*/),Ne(r,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,n=n?Math.max(e,n):e}),i=n),0===i&&(i=null),o[t]=i}}),o}function ke(e){return 0===e||null!=e}function Re(e,t){var n=oe,r=e+"s";return t?n+=i:r+=" linear all",[n,r]}function l(){var n=Object.create(null);return{flush:function(){n=Object.create(null)},count:function(e){var t=n[e];return t?t.total:0},get:function(e){var t=n[e];return t&&t.value},put:function(e,t){n[e]?n[e].total++:n[e]={total:1,value:t}}}}function Me(t,n,e){Ne(e,function(e){t[e]=ee(t[e])?t[e]:n.style.getPropertyValue(e)})}var Ae,h,Ne,Oe,ee,g,w,te,ne,re,ie,Ie,u=["$animateProvider",function(e){var ie=l(),ae=l();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(Y,K,X,Z,n,J,t,Q){var ee=E(K),i=0;function te(e,t){var n="$$ngAnimateParentKey",r=e.parentNode;return(r[n]||(r[n]=++i))+"-"+e.getAttribute("class")+"-"+t}var r=[];function ne(e){r.push(e),t.waitUntilQuiet(function(){ie.flush(),ae.flush();for(var e=n(),t=0;t<r.length;t++)r[t](e);r.length=0})}function re(e,t,n){var r,i,a,o,s=(r=e,i=n,a=c,(o=ie.get(i))||"infinite"===(o=De(Y,r,a)).animationIterationCount&&(o.animationIterationCount=1),ie.put(i,o),o),l=s.animationDelay,u=s.transitionDelay;return s.maxDelay=l&&u?Math.max(l,u):l||u,s.maxDuration=Math.max(s.animationDuration*s.animationIterationCount,s.transitionDuration),s}return function(u,e){var c=e||{};c.$$prepared||(c=me(Ae(c)));var d={},f=$e(u);if(!f||!f.parentNode||!Q.enabled())return W();var t,n,p,a,o,r,i,h,g,m,v,y,b=[],s=u.attr("class"),l=(n={},(t=c)&&(t.to||t.from)&&(n.to=t.to,n.from=t.from),n),$=[];if(0===c.duration||!J.animations&&!J.transitions)return W();var w=c.event&&Oe(c.event)?c.event.join(" "):c.event,S="",x="";w&&c.structural?S=ge(w,fe,!0):w&&(S=w),c.addClass&&(x+=ge(c.addClass,ce)),c.removeClass&&(x.length&&(x+=" "),x+=ge(c.removeClass,de)),c.applyClassesEarly&&x.length&&ee(u,c);var C,E,T,D=[S,x].join(" ").trim(),k=s+" "+D,R=ge(D,"-active"),M=l.to&&0<Object.keys(l.to).length;if(!(0<(c.keyframeStyle||"").length)&&!M&&!D)return W();if(0<c.stagger){var A=parseFloat(c.stagger);E={transitionDelay:A,animationDelay:A,transitionDuration:0,animationDuration:0}}else C=te(f,k),E=function(e,t,n,r){var i;if(0<ie.count(n)&&!(i=ae.get(n))){var a=ge(t,"-stagger");K.addClass(e,a),(i=De(Y,e,r)).animationDuration=Math.max(i.animationDuration,0),i.transitionDuration=Math.max(i.transitionDuration,0),K.removeClass(e,a),ae.put(n,i)}return i||{}}(f,D,C,Ee);if(c.$$skipPreparationClasses||K.addClass(u,D),c.transitionStyle){var N=[oe,c.transitionStyle];xe(f,N),b.push(N)}if(0<=c.duration){T=0<f.style[oe].length;var O=Re(c.duration,T);xe(f,O),b.push(O)}if(c.keyframeStyle){var I=[le,c.keyframeStyle];xe(f,I),b.push(I)}var _=E?0<=c.staggerIndex?c.staggerIndex:ie.count(C):0,P=0===_;P&&!c.skipBlocking&&we(f,9999);var H=re(f,0,C),L=H.maxDelay;h=Math.max(L,0),m=H.maxDuration;var F,z={};if(z.hasTransitions=0<H.transitionDuration,z.hasAnimations=0<H.animationDuration,z.hasTransitionAll=z.hasTransitions&&"all"===H.transitionProperty,z.applyTransitionDuration=M&&(z.hasTransitions&&!z.hasTransitionAll||z.hasAnimations&&!z.hasTransitions),z.applyAnimationDuration=c.duration&&z.hasAnimations,z.applyTransitionDelay=ke(c.delay)&&(z.applyTransitionDuration||z.hasTransitions),z.applyAnimationDelay=ke(c.delay)&&z.hasAnimations,z.recalculateTimingStyles=0<x.length,(z.applyTransitionDuration||z.applyAnimationDuration)&&(m=c.duration?parseFloat(c.duration):m,z.applyTransitionDuration&&(z.hasTransitions=!0,H.transitionDuration=m,T=0<f.style[oe+"Property"].length,b.push(Re(m,T))),z.applyAnimationDuration&&(z.hasAnimations=!0,H.animationDuration=m,b.push([he,m+"s"]))),0===m&&!z.recalculateTimingStyles)return W();null!=c.delay&&("boolean"!=typeof c.delay&&(F=parseFloat(c.delay),h=Math.max(F,0)),z.applyTransitionDelay&&b.push(Te(F)),z.applyAnimationDelay&&b.push(Te(F,!0)));return null==c.duration&&0<H.transitionDuration&&(z.recalculateTimingStyles=z.recalculateTimingStyles||P),g=1e3*h,v=1e3*m,c.skipBlocking||(z.blockTransition=0<H.transitionDuration,z.blockKeyframeAnimation=0<H.animationDuration&&0<E.animationDelay&&0===E.animationDuration),c.from&&(c.cleanupStyles&&Me(d,f,Object.keys(c.from)),ye(u,c)),z.blockTransition||z.blockKeyframeAnimation?V(m):c.skipBlocking||we(f,!1),{$$willAnimate:!0,end:U,start:function(){if(!p)return r=new X(i={end:U,cancel:B,resume:null,pause:null}),ne(G),r}};function U(){j()}function B(){j(!0)}function j(e){if(!(p||o&&a)){a=!(p=!0),c.$$skipPreparationClasses||K.removeClass(u,D),K.removeClass(u,R),Se(f,!1),we(f,!1),Ne(b,function(e){f.style[e[0]]=""}),ee(u,c),ve(u,c),Object.keys(d).length&&Ne(d,function(e,t){e?f.style.setProperty(t,e):f.style.removeProperty(t)}),c.onDone&&c.onDone(),$&&$.length&&u.off($.join(" "),q);var t=u.data(Ce);t&&(Z.cancel(t[0].timer),u.removeData(Ce)),r&&r.complete(!e)}}function V(e){z.blockTransition&&we(f,e),z.blockKeyframeAnimation&&Se(f,!!e)}function W(){return r=new X({end:U,cancel:B}),ne(Ie),j(),{$$willAnimate:!1,start:function(){return r},end:U}}function q(e){e.stopPropagation();var t=e.originalEvent||e;if(t.target===f){var n=t.$manualTimeStamp||Date.now(),r=parseFloat(t.elapsedTime.toFixed(3));Math.max(n-y,0)>=g&&m<=r&&(o=!0,j())}}function G(){if(!p)if(f.parentNode){var e=function(e){if(o)a&&e&&(a=!1,j());else if(a=!e,H.animationDuration){var t=Se(f,a);a?b.push(t):(r=t,i=(n=b).indexOf(r),0<=r&&n.splice(i,1))}var n,r,i},t=0<_&&(H.transitionDuration&&0===E.transitionDuration||H.animationDuration&&0===E.animationDuration)&&Math.max(E.animationDelay,E.transitionDelay);t?Z(n,Math.floor(t*_*1e3),!1):n(),i.resume=function(){e(!0)},i.pause=function(){e(!1)}}else j();function n(){if(!p){if(V(!1),Ne(b,function(e){var t=e[0],n=e[1];f.style[t]=n}),ee(u,c),K.addClass(u,R),z.recalculateTimingStyles){if(k=f.getAttribute("class")+" "+D,C=te(f,k),H=re(f,0,C),L=H.maxDelay,h=Math.max(L,0),0===(m=H.maxDuration))return void j();z.hasTransitions=0<H.transitionDuration,z.hasAnimations=0<H.animationDuration}if(z.applyAnimationDelay&&(L="boolean"!=typeof c.delay&&ke(c.delay)?parseFloat(c.delay):L,h=Math.max(L,0),H.animationDelay=L,F=Te(L,!0),b.push(F),f.style[F[0]]=F[1]),g=1e3*h,v=1e3*m,c.easing){var e,t=c.easing;z.hasTransitions&&(e=oe+pe,b.push([e,t]),f.style[e]=t),z.hasAnimations&&(e=le+pe,b.push([e,t]),f.style[e]=t)}H.transitionDuration&&$.push(se),H.animationDuration&&$.push(ue),y=Date.now();var n=g+1.5*v,r=y+n,i=u.data(Ce)||[],a=!0;if(i.length){var o=i[0];(a=r>o.expectedEndTime)?Z.cancel(o.timer):i.push(j)}if(a){var s=Z(l,n,!1);i[0]={timer:s,expectedEndTime:r},i.push(j),u.data(Ce,i)}$.length&&u.on($.join(" "),q),c.to&&(c.cleanupStyles&&Me(d,f,Object.keys(c.to)),be(u,c))}}function l(){var e=u.data(Ce);if(e){for(var t=1;t<e.length;t++)e[t]();u.removeData(Ce)}}}}}]}],m=["$$animationProvider",function(e){e.drivers.push("$$animateCssDriver");var b="ng-animate-shim",$="ng-anchor-out";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(p,e,h,t,n,r,i){if(!n.animations&&!n.transitions)return Ie;var a,g=i[0].body,o=$e(t),m=ie((a=o).parentNode&&11===a.parentNode.nodeType||g.contains(o)?o:g);return function(e){return e.from&&e.to?function(e,t,n,r){var i=s(e),a=s(t),o=[];if(Ne(r,function(e){var t=function(e,t,i){var a=ie($e(t).cloneNode(!0)),o=v(c(a));t.addClass(b),i.addClass(b),a.addClass("ng-anchor"),m.append(a);var r,n,s=(n=p(a,{addClass:$,delay:!0,from:u(t)})).$$willAnimate?n:null;if(!s&&!(r=d()))return f();var l=s||r;return{start:function(){var e,t=l.start();return t.done(function(){if(t=null,!r&&(r=d()))return(t=r.start()).done(function(){t=null,f(),e.complete()}),t;f(),e.complete()}),e=new h({end:n,cancel:n});function n(){t&&t.end()}}};function u(e){var n={},r=$e(e).getBoundingClientRect();return Ne(["width","height","top","left"],function(e){var t=r[e];switch(e){case"top":t+=g.scrollTop;break;case"left":t+=g.scrollLeft}n[e]=Math.floor(t)+"px"}),n}function c(e){return e.attr("class")||""}function d(){var e=v(c(i)),t=y(e,o),n=y(o,e),r=p(a,{to:u(i),addClass:"ng-anchor-in "+t,removeClass:$+" "+n,delay:!0});return r.$$willAnimate?r:null}function f(){a.remove(),t.removeClass(b),i.removeClass(b)}}(0,e.out,e.in);t&&o.push(t)}),!i&&!a&&0===o.length)return;return{start:function(){var t=[];i&&t.push(i.start()),a&&t.push(a.start()),Ne(o,function(e){t.push(e.start())});var n=new h({end:e,cancel:e});return h.all(t,function(e){n.complete(e)}),n;function e(){Ne(t,function(e){e.end()})}}}}(e.from,e.to,e.classes,e.anchors):s(e)};function v(e){return e.replace(/\bng-\S+\b/g,"")}function y(e,t){return ne(e)&&(e=e.split(" ")),ne(t)&&(t=t.split(" ")),e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function s(e){var t=e.element,n=e.options||{};e.structural&&(n.event=e.event,n.structural=!0,n.applyClassesEarly=!0,"leave"===e.event&&(n.onDone=n.domOperation)),n.preparationClasses&&(n.event=Q(n.event,n.preparationClasses));var r=p(t,n);return r.$$willAnimate?r:null}}]}],v=["$animateProvider",function($){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(v,y,e){var b=E(e);return function(e,t,n,r){var i=!1;3===arguments.length&&te(n)&&(r=n,n=null),r=me(r),n||(n=e.attr("class")||"",r.addClass&&(n+=" "+r.addClass),r.removeClass&&(n+=" "+r.removeClass));var a,o,s,l,u,c=r.addClass,d=r.removeClass,f=function(e){e=Oe(e)?e:e.split(" ");for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],a=$.$$registeredAnimations[i];a&&!n[i]&&(t.push(v.get(a)),n[i]=!0)}return t}(n);f.length&&(s="leave"===t?(l="leave","afterLeave"):(l="before"+t.charAt(0).toUpperCase()+t.substr(1),t),"enter"!==t&&"move"!==t&&(a=m(e,t,r,f,l)),o=m(e,t,r,f,s));if(a||o)return{$$willAnimate:!0,end:function(){return u?u.end():(h(),(u=new y).complete(!0)),u},start:function(){if(u)return u;var t;u=new y;var e=[];return a&&e.push(function(e){t=a(e)}),e.length?e.push(function(e){p(),e(!0)}):p(),o&&e.push(function(e){t=o(e)}),u.setHost({end:function(){r()},cancel:function(){r(!0)}}),y.chain(e,n),u;function n(e){h(),u.complete(e)}function r(e){i||((t||Ie)(e),n(e))}}};function p(){r.domOperation(),b(e,r)}function h(){i=!0,p(),ve(e,r)}function g(o,s,l,e,t){var n=[];return Ne(e,function(e){var a=e[t];a&&n.push(function(){var t,n,r=!1,i=function(e){r||(r=!0,(n||Ie)(e),t.complete(!e))};return t=new y({end:function(){i()},cancel:function(){i(!0)}}),n=function(e,t,n,r,i){var a;switch(n){case"animate":a=[t,r.from,r.to,i];break;case"setClass":a=[t,c,d,i];break;case"addClass":a=[t,c,i];break;case"removeClass":a=[t,d,i];break;default:a=[t,i]}a.push(r);var o=e.apply(e,a);if(o)if(w(o.start)&&(o=o.start()),o instanceof y)o.done(i);else if(w(o))return o;return Ie}(a,o,s,l,function(e){i(!1===e)}),t})}),n}function m(e,t,n,r,i){var a,o,s=g(e,t,n,r,i);0===s.length&&("beforeSetClass"===i?(a=g(e,"removeClass",n,r,"beforeRemoveClass"),o=g(e,"addClass",n,r,"beforeAddClass")):"setClass"===i&&(a=g(e,"removeClass",n,r,"removeClass"),o=g(e,"addClass",n,r,"addClass")),a&&(s=s.concat(a)),o&&(s=s.concat(o)));if(0!==s.length)return function(e){var n=[];return s.length&&Ne(s,function(e){n.push(e())}),n.length?y.all(n,e):e(),function(t){Ne(n,function(e){t?e.cancel():e.end()})}}}}}]}],y=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(a,o){return function(e){if(e.from&&e.to){var r=t(e.from),i=t(e.to);if(!r&&!i)return;return{start:function(){var e=[];r&&e.push(r.start()),i&&e.push(i.start()),o.all(e,function(e){t.complete(e)});var t=new o({end:n(),cancel:n()});return t;function n(){return function(){Ne(e,function(e){e.end()})}}}}}return t(e)};function t(e){var t=e.element,n=e.event,r=e.options,i=e.classes;return a(t,n,i,r)}}]}],ae="data-ng-animate",_e="$ngAnimatePin",b=["$animateProvider",function(c){var r=" ",i=this.rules={skip:[],cancel:[],join:[]};function o(e,t){if(e&&t){var n=function(e){if(!e)return null;var t=e.split(r),n=Object.create(null);return Ne(t,function(e){n[e]=!0}),n}(t);return e.split(r).some(function(e){return n[e]})}}function G(e,t,n){return i[e].some(function(e){return e(t,n)})}function Y(e,t){var n=0<(e.addClass||"").length,r=0<(e.removeClass||"").length;return t?n&&r:n||r}i.join.push(function(e,t){return!e.structural&&Y(e)}),i.skip.push(function(e,t){return!e.structural&&!Y(e)}),i.skip.push(function(e,t){return"leave"===t.event&&e.structural}),i.skip.push(function(e,t){return t.structural&&2===t.state&&!e.structural}),i.cancel.push(function(e,t){return t.structural&&e.structural}),i.cancel.push(function(e,t){return 2===t.state&&e.structural}),i.cancel.push(function(e,t){if(t.structural)return!1;var n=e.addClass,r=e.removeClass,i=t.addClass,a=t.removeClass;return!(re(n)&&re(r)||re(i)&&re(a))&&(o(n,a)||o(r,i))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(k,R,M,A,e,N,O,t,n,r,I){var _=new e,P=new e,H=null;var i=R.$watch(function(){return 0===t.totalPendingRequests},function(e){e&&(i(),R.$$postDigest(function(){R.$$postDigest(function(){null===H&&(H=!0)})}))}),L=Object.create(null),a=c.customFilter(),o=c.classNameFilter(),s=function(){return!0},F=a||s,z=o?function(e,t){var n=[e.getAttribute("class"),t.addClass,t.removeClass].join(" ");return o.test(n)}:s,U=E(n);function B(e,t){return J(e,t,{})}var j=d.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))};function l(e,t,n){var r=p(t);return e.filter(function(e){return!(e.node===r&&(!n||e.callback===n))})}function V(e,t){"close"!==e||t.parentNode||u.off(t)}var u={on:function(e,t,n){var r=p(t);L[e]=L[e]||[],L[e].push({node:r,callback:n}),ie(t).on("$destroy",function(){_.get(r)||u.off(e,t,n)})},off:function(e,t,n){if(1!==arguments.length||ne(e)){var r=L[e];r&&(L[e]=1===arguments.length?null:l(r,t,n))}else for(var i in t=e,L)L[i]=l(L[i],t)},pin:function(e,t){f(g(e),"element","not an element"),f(g(t),"parentElement","not an element"),e.data(_e,t)},push:function(e,t,n,r){return(n=n||{}).domOperation=r,function(i,a,e){var o=Ae(e),u=Z(i),c=$e(u),d=c&&c.parentNode;o=me(o);var s=new O,t=(n=!1,function(e){n?e():R.$$postDigest(function(){n=!0,e()})});var n;Oe(o.addClass)&&(o.addClass=o.addClass.join(" "));o.addClass&&!ne(o.addClass)&&(o.addClass=null);Oe(o.removeClass)&&(o.removeClass=o.removeClass.join(" "));o.removeClass&&!ne(o.removeClass)&&(o.removeClass=null);o.from&&!te(o.from)&&(o.from=null);o.to&&!te(o.to)&&(o.to=null);if(!(H&&c&&F(c,a,e)&&z(c,o)))return D(),s;var l=0<=["enter","move","leave"].indexOf(a),r=I(),f=r||P.get(c),p=!f&&_.get(c)||{},h=!!p.state;f||h&&1===p.state||(f=!function(e,t,n){var r,i=A[0].body,a=$e(M),o=e===i||"HTML"===e.nodeName,s=e===a,l=!1,u=P.get(e),c=ie.data(e,_e);c&&(t=$e(c));for(;t&&(s||(s=t===a),t.nodeType===K);){var d=_.get(t)||{};if(!l){var f=P.get(t);if(!0===f&&!1!==u){u=!0;break}!1===f&&(u=!1),l=d.structural}if(re(r)||!0===r){var p=ie.data(t,X);ee(p)&&(r=p)}if(l&&!1===r)break;if(o||(o=t===i),o&&s)break;t=s||!(c=ie.data(t,_e))?t.parentNode:$e(c)}return(!l||r)&&!0!==u&&s&&o}(c,d));if(f)return r&&T(s,a,"start"),D(),r&&T(s,a,"close"),s;l&&(g=c.querySelectorAll("["+ae+"]"),Ne(g,function(e){var t=parseInt(e.getAttribute(ae),10),n=_.get(e);if(n)switch(t){case 2:n.runner.end();case 1:_.delete(e)}}));var g;var m={structural:l,element:u,event:a,addClass:o.addClass,removeClass:o.removeClass,close:D,options:o,runner:s};if(h){var v=G("skip",m,p);if(v)return 2===p.state?(D(),s):(J(u,p,m),p.runner);var y=G("cancel",m,p);if(y)if(2===p.state)p.runner.end();else{if(!p.structural)return J(u,p,m),p.runner;p.close()}else{var b=G("join",m,p);if(b){if(2!==p.state)return $=u,S=o,x="",(w=l?a:null)&&(x=ge(w,fe,!0)),S.addClass&&(x=Q(x,ge(S.addClass,ce))),S.removeClass&&(x=Q(x,ge(S.removeClass,de))),x.length&&(S.preparationClasses=x,$.addClass(x)),a=m.event=p.event,o=J(u,p,m),p.runner;B(u,m)}}}else B(u,m);var $,w,S,x;var C=m.structural;C||(C="animate"===m.event&&0<Object.keys(m.options.to||{}).length||Y(m));if(!C)return D(),W(c),s;var E=(p.counter||0)+1;return m.counter=E,q(c,1,m),R.$$postDigest(function(){u=Z(i);var e=_.get(c),t=!e;e=e||{};var n=0<(u.parent()||[]).length&&("animate"===e.event||e.structural||Y(e));if(t||e.counter!==E||!n)return t&&(U(u,o),ve(u,o)),(t||l&&e.event!==a)&&(o.domOperation(),s.end()),void(n||W(c));a=!e.structural&&Y(e,!0)?"setClass":e.event,q(c,2);var r=N(u,a,e.options);s.setHost(r),T(s,a,"start",{}),r.done(function(e){D(!e);var t=_.get(c);t&&t.counter===E&&W(c),T(s,a,"close",{})})}),s;function T(e,o,s,l){t(function(){var t,n,r,i,e,a=(t=d,n=c,i=[],(e=L[r=o])&&Ne(e,function(e){j.call(e.node,n)?i.push(e.callback):"leave"===r&&j.call(e.node,t)&&i.push(e.callback)}),i);a.length?k(function(){Ne(a,function(e){e(u,s,l)}),V(s,c)}):V(s,c)}),e.progress(o,s,l)}function D(e){var t,n;t=u,(n=o).preparationClasses&&(t.removeClass(n.preparationClasses),n.preparationClasses=null),n.activeClasses&&(t.removeClass(n.activeClasses),n.activeClasses=null),U(u,o),ve(u,o),o.domOperation(),s.complete(!e)}}(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!H;else if(g(e)){var r=$e(e);1===n?t=!P.get(r):P.set(r,!t)}else t=H=!!e;return t}};return u;function W(e){e.removeAttribute(ae),_.delete(e)}function q(e,t,n){(n=n||{}).state=t,e.setAttribute(ae,t);var r=_.get(e),i=r?h(r,n):n;_.set(e,i)}}]}],$=["$animateProvider",function(e){var b="ng-animate-ref",$=this.drivers=[],w="$$animationRunner";function S(e){return e.data(w)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(d,f,p,h,g,m){var v=[],y=E(d);return function(t,n,r){r=me(r);var e,i=0<=["enter","move","leave"].indexOf(n),a=new h({end:function(){c()},cancel:function(){c(!0)}});if(!$.length)return c(),a;e=a,t.data(w,e);var o,s=C(t.attr("class"),C(r.addClass,r.removeClass)),l=r.tempClasses;return l&&(s+=" "+l,r.tempClasses=null),i&&(o="ng-"+n+"-prepare",d.addClass(t,o)),v.push({element:t,classes:s,event:n,structural:i,options:r,beforeStart:function(){t.addClass(x),l&&d.addClass(t,l);o&&(d.removeClass(t,o),o=null)},close:c}),t.on("$destroy",u),1<v.length||f.$$postDigest(function(){var t=[];Ne(v,function(e){S(e.element)?t.push(e):e.close()}),v.length=0;var e=function(c){var d=[],f={};Ne(c,function(e,n){var t,r,i,a=e.element,o=$e(a),s=e.event,l=0<=["enter","move"].indexOf(s),u=e.structural?(r=(t=o).hasAttribute(b)?[t]:t.querySelectorAll("[ng-animate-ref]"),i=[],Ne(r,function(e){var t=e.getAttribute(b);t&&t.length&&i.push(e)}),i):[];if(u.length){var c=l?"to":"from";Ne(u,function(e){var t=e.getAttribute(b);f[t]=f[t]||{},f[t][c]={animationID:n,element:ie(e)}})}else d.push(e)});var p={},h={};return Ne(f,function(e,t){var n=e.from,r=e.to;if(n&&r){var i=c[n.animationID],a=c[r.animationID],o=n.animationID.toString();if(!h[o]){var s=h[o]={structural:!0,beforeStart:function(){i.beforeStart(),a.beforeStart()},close:function(){i.close(),a.close()},classes:function(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],r=0;r<e.length;r++){var i=e[r];if("ng-"!==i.substring(0,3))for(var a=0;a<t.length;a++)if(i===t[a]){n.push(i);break}}return n.join(" ")}(i.classes,a.classes),from:i,to:a,anchors:[]};s.classes.length?d.push(s):(d.push(i),d.push(a))}h[o].anchors.push({out:n.element,in:r.element})}else{var l=n?n.animationID:r.animationID,u=l.toString();p[u]||(p[u]=!0,d.push(c[l]))}}),d}(t),n=[];Ne(e,function(i){n.push({domNode:$e(i.from?i.from.element:i.element),fn:function(){i.beforeStart();var e,t=i.close;if(S(i.anchors?i.from.element||i.to.element:i.element)){var n=function(e){for(var t=$.length-1;0<=t;t--){var n=$[t],r=p.get(n),i=r(e);if(i)return i}}(i);n&&(e=n.start)}if(e){var r=e();r.done(function(e){t(!e)}),function(e,n){e.from&&e.to?(t(e.from.element),t(e.to.element)):t(e.element);function t(e){var t=S(e);t&&t.setHost(n)}}(i,r)}else t()}})}),m(function(e){var t,i={children:[]},a=new g;for(t=0;t<e.length;t++){var n=e[t];a.set(n.domNode,e[t]={domNode:n.domNode,fn:n.fn,children:[]})}for(t=0;t<e.length;t++)o(e[t]);return function(e){var t,n=[],r=[];for(t=0;t<e.children.length;t++)r.push(e.children[t]);var i=r.length,a=0,o=[];for(t=0;t<r.length;t++){var s=r[t];i<=0&&(i=a,a=0,n.push(o),o=[]),o.push(s.fn),s.children.forEach(function(e){a++,r.push(e)}),i--}return o.length&&n.push(o),n}(i);function o(e){if(e.processed)return e;e.processed=!0;var t,n=e.domNode,r=n.parentNode;for(a.set(n,e);r;){if(t=a.get(r)){t.processed||(t=o(t));break}r=r.parentNode}return(t||i).children.push(e),e}}(n))}),a;function u(){var e=S(t);!e||"leave"===n&&r.$$domOperationFired||e.end()}function c(e){t.off("$destroy",u),t.removeData(w),y(t,r),ve(t,r),r.domOperation(),l&&d.removeClass(t,l),t.removeClass(x),a.complete(!e)}}}]}];e.module("ngAnimate",[],function(){Ie=e.noop,Ae=e.copy,h=e.extend,ie=e.element,Ne=e.forEach,Oe=e.isArray,ne=e.isString,te=e.isObject,re=e.isUndefined,ee=e.isDefined,w=e.isFunction,g=e.isElement}).info({angularVersion:"1.6.9"}).directive("ngAnimateSwap",["$animate","$rootScope",function(s,e){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(t,n,e,r,i){var a,o;t.$watchCollection(e.ngAnimateSwap||e.for,function(e){a&&s.leave(a),o&&(o.$destroy(),o=null),(e||0===e)&&(o=t.$new(),i(o,function(e){a=e,s.enter(e,null,n)}))})}}}]).directive("ngAnimateChildren",s).factory("$$rAFScheduler",["$$rAF",function(n){var r,i;function e(e){r=r.concat(e),a()}return r=e.queue=[],e.waitUntilQuiet=function(e){i&&i(),i=n(function(){i=null,e(),a()})},e;function a(){if(r.length){for(var e=r.shift(),t=0;t<e.length;t++)e[t]();i||n(function(){i||a()})}}}]).provider("$$animateQueue",b).provider("$$animation",$).provider("$animateCss",u).provider("$$animateCssDriver",m).provider("$$animateJs",v).provider("$$animateJsDriver",y)}(window,window.angular),function(e,v){"use strict";function t(o){var t=!1,n=["<style>.glyphicon-spin-jcs {-webkit-animation: spin 1000ms infinite linear;animation: spin 1000ms infinite linear;}@-webkit-keyframes spin {0% {-webkit-transform: rotate(0deg);transform: rotate(0deg);}100% {-webkit-transform: rotate(359deg);transform: rotate(359deg);}}@keyframes spin {0% {-webkit-transform: rotate(0deg);transform: rotate(0deg);}100% {-webkit-transform: rotate(359deg);transform: rotate(359deg);}}</style>"].join(""),s=function(e){!1===t&&(v.element(document.body).append(v.element(n)),t=!0),v.forEach(e.find("span"),function(e){((e=v.element(e)).hasClass("error-msg")||e.hasClass("form-control-feedback")||e.hasClass("control-feedback"))&&e.remove()}),e.removeClass("has-success has-error has-feedback")},i=function(e,t){for(var n,r=0;r<e.children.length&&(void 0===(n=e.children[r])||!v.element(n).hasClass(t))&&!(void 0!==n.children&&0<(n=i(n,t)).length);r+=1);return v.element(n)},l=function(e){return function(e,t){for(var n,r=e,i=0;i<=10;i+=1){if(void 0!==r&&r.hasClass(t)){n=r;break}void 0!==r&&(r=r.parent())}return n}(e,"form-group")},u=function(e){return i(e,"input-group")},c=function(e,t){e[0].parentNode.insertBefore(t[0],e[0].nextSibling)},d=!1,f=function(e){var t=e,n=e[0].type?e[0].type.toLowerCase():"";return"checkbox"!==n&&"radio"!==n||"label"!==e.parent()[0].nodeName.toLowerCase()||(t=e.parent()),t};return{makeValid:function(e){var t,n=l(e);if(n){if(s(n),t=u(n[0]),n.addClass("has-success "+(0<t.length||!1===d?"":"has-feedback")),d){var r='<span class="glyphicon glyphicon-ok form-control-feedback"></span>';0<t.length&&(r='<span class="input-group-addon control-feedback">'+(r=r.replace("form-",""))+"</span>"),c(e,v.element(r))}}else o.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},makeInvalid:function(e,t){var n,r=l(e),i=v.element('<span class="help-block has-error error-msg">'+t+"</span>");if(r){if(s(r),n=u(r[0]),r.addClass("has-error "+(0<n.length||!1===d?"":"has-feedback")),c(0<n.length?n:f(e),i),d){var a='<span class="glyphicon glyphicon-remove form-control-feedback"></span>';0<n.length&&(a='<span class="input-group-addon control-feedback">'+(a=a.replace("form-",""))+"</span>"),c(f(e),v.element(a))}}else o.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},makeDefault:function(e){var t=l(e);t?s(t):o.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},waitForAsyncValidators:function(e){var t,n=l(e);if(n){if(s(n),t=u(n[0]),n.addClass("has-feedback "+(0<t.length||!1===d?"":"has-feedback")),d){var r='<span class="glyphicon glyphicon-repeat glyphicon-spin-jcs form-control-feedback"></span>';0<t.length&&(r='<span class="input-group-addon control-feedback">'+(r=r.replace("form-",""))+"</span>"),c(e,v.element(r))}}else o.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},enableValidationStateIcons:function(e){d=e},key:"bs3"}}function n(s){return{debounce:function(r,i,a){var o;return function(){var e=this,t=arguments,n=a&&!o;s.cancel(o),o=s(function(){o=null,a||r.apply(e,t)},i,!1),n&&r.apply(e,t)}}}}function h(e,n){return e.replace(/{(\d+)}/g,function(e,t){return void 0!==typeof n[t]?n[t]:e})}function r(c,t){var d,f="default",n="js/angular-auto-validate/dist/lang",r=function(e){return d=t.get(h("{0}/jcs-auto-validate_{1}.json",[n,e.toLowerCase()]))},p=function(e,t){var n,r,i,a,o,s,l=c.defer(),u=[];if(void 0!==d)d.then(function(){p(e,t).then(function(e){l.resolve(e)})});else{if(n=v.autoValidate.errorMessages[f][e],a=e,(o=t)&&(a+="-err-type",void 0===(s=o.attr("ng-"+a))&&(s=o.attr("data-ng-"+a)||o.attr(a)),s&&(s=s.replace(/[\W]/g,""))),(i=s)&&(n=v.autoValidate.errorMessages[f][i]),void 0===n&&void 0!==i?n=h(v.autoValidate.errorMessages[f].defaultMsg,[i]):void 0===n&&(n=h(v.autoValidate.errorMessages[f].defaultMsg,[e])),t&&t.attr)try{void 0===(r=t.attr("ng-"+e))&&(r=t.attr("data-ng-"+e)||t.attr(e)),u.push(r||""),n=h(n,u)}catch(e){}l.resolve(n)}return l.promise};return{setI18nFileRootPath:function(e){n=e},setCulture:function(e,t){var n=c.defer();return t=t||r,f=e.toLowerCase(),void 0===v.autoValidate.errorMessages[f]?(d=t(e)).then(function(e){d=void 0,v.autoValidate.errorMessages[f]=e.data,n.resolve(v.autoValidate.errorMessages[f])},function(e){v.autoValidate.errorMessages[f]={defaultMsg:"Loading culture failed!"},d=null,n.reject(e)}):n.resolve(v.autoValidate.errorMessages[f]),n.promise},getErrorMessages:function(e){var t=c.defer();return e=void 0===e?f:e.toLowerCase(),void 0!==d?d.then(function(){t.resolve(v.autoValidate.errorMessages[e])},function(e){t.reject(e)}):t.resolve(v.autoValidate.errorMessages[e]),t.promise},resolve:p}}function i(d,u,f){var c=["input","textarea","select","form"],p=function(e){var t=v.element(e).controller("form");return null!=t?t.autoValidateFormOptions:d.defaultFormValidationOptions},h=function(e,t,n){var r,i,a,o,s=e&&0<e.length,l=s&&"#comment"===e[0].nodeName.toLowerCase();return s&&!1===l&&(o=e,r=u.isElementVisible(o)||t.validateNonVisibleControls,i=-1<c.indexOf(e[0].nodeName.toLowerCase())||e[0].hasAttribute("register-custom-form-control"),a=!1===t.validateOnFormSubmit||!0===t.validateOnFormSubmit&&!0===n),s&&!l&&r&&i&&a},g=function(e,t,n){var r,i,a,o,s=!0,l=n||p(t),u=!1===e.$pristine||l.forceValidation;return!1===l.disabled&&(l.forceValidation||h(t,l,l.getFormController().$submitted)&&e&&u)&&(s=!e.$invalid,l.removeExternalValidationErrorsOnSubmit&&e.removeAllExternalValidation&&e.removeAllExternalValidation(),void 0!==e.$pending&&!0===n.waitForAsyncValidators?d.waitForAsyncValidators(t):s?d.makeValid(t):(i=e.$errors||e.$error,o=!0,v.forEach(i,function(e,t){o&&e&&(o=!1,a=t)}),void 0===(r=a)?s=!0:d.getErrorMessage(r,t).then(function(e){d.makeInvalid(t,e)}))),s},r=function(e){v.forEach(e[0].all||e[0].elements||e[0],function(e){var t,n=v.element(e);void 0!==(t=n.controller("ngModel"))&&("form"===n[0].nodeName.toLowerCase()?r(n):t.$setPristine())})},m=function(e){var t,l=!0,u=null,c=e?v.element(e).controller("form"):void 0,n=function(e,t,n){var r,i,a,o;if(void 0!==(r=(e=v.element(e)).controller("ngModel"))&&(t||h(e,n,c.$submitted)))if("form"===e[0].nodeName.toLowerCase())m(e);else{o=(a=p(e)).forceValidation,a.forceValidation=t;try{if(i=g(r,e,a),d.enableFocusInputError()&&!i&&l&&(u||(u=e[0]).focus()),d.firstInvalidElementScrollingOnSubmitEnabled()&&!i&&l){var s=e.attr("id");s&&f(s)}l=l&&i}finally{a.forceValidation=o}}};return void 0===e||void 0!==c&&c.autoValidateFormOptions.disabled?void 0!==e:((t=v.copy(c.autoValidateFormOptions)).forceValidation=!0,v.forEach(e[0].elements||e[0].all||e[0],function(e){n(e,!0,t)}),e[0].customHTMLFormControlsCollection&&v.forEach(e[0].customHTMLFormControlsCollection,function(e){n(e,!0,t)}),l)};return{setElementValidationError:function(t,e,n){n?d.makeInvalid(t,n):d.getErrorMessage(e,t).then(function(e){d.makeInvalid(t,e)})},validateElement:g,validateForm:m,resetElement:function(e){d.makeDefault(e)},resetForm:r}}function a(e,t){return null==e&&void 0!==t?t:"false"!==e}function o(e,t,n){var r=e.autoValidateFormOptions=e.autoValidateFormOptions||v.copy(t.defaultFormValidationOptions);r.getFormController=function(){return e},r.waitForAsyncValidators=a(n.waitForAsyncValidators,r.waitForAsyncValidators),r.forceValidation=!1,r.disabled=!t.isEnabled()||a(n.disableDynamicValidation,r.disabled),r.validateNonVisibleControls=a(n.validateNonVisibleControls,r.validateNonVisibleControls),r.validateOnFormSubmit=a(n.validateOnFormSubmit,r.validateOnFormSubmit),r.removeExternalValidationErrorsOnSubmit=void 0===n.removeExternalValidationErrorsOnSubmit?r.removeExternalValidationErrorsOnSubmit:a(n.removeExternalValidationErrorsOnSubmit,r.removeExternalValidationErrorsOnSubmit),!1===t.isEnabled()&&"false"===n.disableDynamicValidation&&(r.disabled=!1)}function s(i){return{restrict:"E",link:function(e,t){var n=t.controller("form");function r(){i.resetForm(t),n.$setPristine&&n.$setPristine(),n.$setUntouched&&n.$setUntouched()}void 0!==n&&n.autoValidateFormOptions&&!1===n.autoValidateFormOptions.disabled&&(t.on("reset",r),e.$on("$destroy",function(){t.off("reset",r)}))}}}function l(e,n,l){return e[0].compile=function(e,t){var o=n(t.ngSubmit),s="true"===t.ngSubmitForce;return function(t,n){var e,r=n.controller("form");function i(e){t.$apply(function(){null!=r&&r.autoValidateFormOptions&&!0===r.autoValidateFormOptions.disabled?o(t,{$event:e}):(void 0===r.$setSubmitted&&(r.$submitted=!0),(l.validateForm(n)||!0===s)&&o(t,{$event:e}))})}function a(){n[0].reset?n[0].reset():l.resetForm(n)}r&&r.autoValidateFormOptions&&(r.autoValidateFormOptions.resetForm=a,void 0!==r.$name&&""!==r.$name&&(e=t.$on("form:"+r.$name+":reset",a))),n.on("submit",i),t.$on("$destroy",function(){n.off("submit",i),e&&e()})}},e}function u(e){e.decorator("ngSubmitDirective",l)}function c(e,t,n,r,i){e.setErrorMessageResolver(t.resolve),e.registerDomModifier(n.key,n),e.registerDomModifier(r.key,r),e.registerDomModifier(i.key,i),e.setDefaultElementModifier(n.key)}v.module("jcs-autoValidate",[]),v.module("jcs-autoValidate").provider("validator",function(){var n={},r=!0,i=!0,t=!1,a=!0,o=!0,s=function(e,t){return a=t,void 0!==(i=e)&&(o=i.attr(a)||i.attr("data-"+a)),n=!(!(n=o)||0===n.length||"f"===(r=n.toLowerCase())||"0"===r||"false"===r);var n,r,i,a,o},l=function(e){return!s(e,"disable-auto-validate")};this.enable=function(e){a=e},this.isEnabled=function(){return a},this.setDefaultElementModifier=function(e){if(void 0===n[e])throw new Error("Element modifier not registered: "+e);this.defaultElementModifier=e},this.registerDomModifier=function(e,t){n[e]=t},this.setErrorMessageResolver=function(e){this.errorMessageResolver=e},this.getErrorMessage=function(e,t){var n,r,i,a;if(void 0===this.errorMessageResolver)throw new Error("Please set an error message resolver via the setErrorMessageResolver function before attempting to resolve an error message.");return i="disable-validation-message",void 0!==(r=t)&&(a=void 0!==r.attr(i)||void 0!==r.attr("data-"+i)),a?((n=v.injector(["ng"]).get("$q").defer()).resolve(""),n.promise):this.errorMessageResolver(e,t)},this.setValidElementStyling=function(e){r=e},this.setInvalidElementStyling=function(e){i=e},this.setFirstInvalidElementScrollingOnSubmit=function(e){t=e},this.firstInvalidElementScrollingOnSubmitEnabled=function(){return t},this.setFocusInputError=function(e){o=e},this.enableFocusInputError=function(){return o},this.getDomModifier=function(e){var t=(void 0!==e?e.attr("element-modifier"):this.defaultElementModifier)||(void 0!==e?e.attr("data-element-modifier"):this.defaultElementModifier)||this.defaultElementModifier;if(void 0===t)throw new Error("Please set a default dom modifier via the setDefaultElementModifier method on the validator class.");return n[t]},this.makeValid=function(e){var t;l(e)&&(t=e,r&&!s(t,"disable-valid-styling")?this.getDomModifier(e).makeValid(e):this.makeDefault(e))},this.makeInvalid=function(e,t){var n;l(e)&&(n=e,i&&!s(n,"disable-invalid-styling")?this.getDomModifier(e).makeInvalid(e,t):this.makeDefault(e))},this.makeDefault=function(e){if(l(e)){var t=this.getDomModifier(e);t.makeDefault&&t.makeDefault(e)}},this.waitForAsyncValidators=function(e){if(l(e)){var t=this.getDomModifier(e);t.waitForAsyncValidators&&t.waitForAsyncValidators(e)}},this.defaultFormValidationOptions={forceValidation:!1,disabled:!1,validateNonVisibleControls:!1,removeExternalValidationErrorsOnSubmit:!0,validateOnFormSubmit:!1,waitForAsyncValidators:!0},this.$get=[function(){return this}]}),t.$inject=["$log"],v.module("jcs-autoValidate").factory("bootstrap3ElementModifier",t),n.$inject=["$timeout"],v.module("jcs-autoValidate").factory("jcs-debounce",n),v.autoValidate=v.autoValidate||{errorMessages:{}},v.autoValidate.errorMessages.default={defaultMsg:"Please add error message for {0}",email:"Please enter a valid email address",minlength:"Please enter at least {0} characters",maxlength:"You have entered more than the maximum {0} characters",min:"Please enter the minimum number of {0}",max:"Please enter the maximum number of {0}",required:"This field is required",date:"Please enter a valid date",pattern:"Please ensure the entered information adheres to this pattern {0}",number:"Please enter a valid number",url:"Please enter a valid URL in the format of http(s)://www.google.com"},r.$inject=["$q","$http"],v.module("jcs-autoValidate").factory("defaultErrorMessageResolver",r),v.module("jcs-autoValidate").factory("foundation5ElementModifier",function(){var i=function(e,t){v.forEach(e.find("small"),function(e){v.element(e).hasClass("error")&&v.element(e).remove()}),t.removeClass("error")},a=function(e){for(var t=e,n=0;n<=3&&(void 0===t||!t.hasClass("columns")&&!t.hasClass("column"));n+=1)void 0!==t&&(t=t.parent());return t},t=function(e){var t=a(e);i(t&&0<t.length?t:e,e)};return{makeValid:t,makeInvalid:function(e,t){var n,r=a(e);i(r||e,e),e.addClass("error"),r&&(n=v.element('<small class="error">'+t+"</small>"),r.append(n))},makeDefault:function(e){t(e)},key:"foundation5"}}),v.module("jcs-autoValidate").factory("foundation6ElementModifier",function(){var i=function(e,t){v.forEach(e.find("small"),function(e){v.element(e).hasClass("form-error is-visible")&&v.element(e).remove()}),t.removeClass("alert callout")},a=function(e){for(var t=e,n=0;n<=3&&(void 0===t||!t.hasClass("columns")&&!t.hasClass("column"));n+=1)void 0!==t&&(t=t.parent());return t},t=function(e){var t=a(e);i(t&&0<t.length?t:e,e)};return{makeValid:t,makeInvalid:function(e,t){var n,r=a(e);i(r||e,e),e.addClass("alert callout"),r&&(n=v.element('<small class="form-error is-visible">'+t+"</small>"),r.append(n))},makeDefault:function(e){t(e)},key:"foundation6"}}),i.$inject=["validator","jcs-elementUtils","$anchorScroll"],v.module("jcs-autoValidate").factory("jcs-elementUtils",function(){return{isElementVisible:function(e){return 0<e[0].offsetWidth&&0<e[0].offsetHeight}}}),v.module("jcs-autoValidate").factory("validationManager",i),v.module("jcs-autoValidate").directive("form",["validator",function(i){return{restrict:"E",require:"form",compile:function(){return{pre:function(e,t,n,r){o(r,i,n)}}}}}]),v.module("jcs-autoValidate").directive("ngForm",["validator",function(i){return{restrict:"EA",require:"form",priority:9999,compile:function(){return{pre:function(e,t,n,r){o(r,i,n)}}}}}]),s.$inject=["validationManager"],v.module("jcs-autoValidate").directive("form",s),v.module("jcs-autoValidate").directive("registerCustomFormControl",function(){return{restrict:"A",link:function(e,t){var n=function(e){for(var t=e,n=0;n<=50&&(void 0===t||"form"!==t.nodeName.toLowerCase());n+=1)void 0!==t&&(t=v.element(t).parent()[0]);return t}(t.parent()[0]);n&&(n.customHTMLFormControlsCollection=n.customHTMLFormControlsCollection||[],n.customHTMLFormControlsCollection.push(t[0]))}}}),l.$inject=["$delegate","$parse","validationManager"],u.$inject=["$provide"],v.module("jcs-autoValidate").config(u),v.module("jcs-autoValidate").config(["$provide",function(e){e.decorator("ngModelDirective",["$timeout","$delegate","validationManager","jcs-debounce",function(e,t,f,p){var n=t[0],r=n.link||n.compile;return n.compile=function(e){var c=1<=v.version.major&&3<=v.version.minor,d=r;return c&&v.isFunction(r)&&(d=r(e)),{pre:function(e,r,t,n){var i=n[0],a=n[1],o=void 0===t.ngModelOptions?void 0:e.$eval(t.ngModelOptions),s=i.$setValidity,l=i.$setPristine,u=p.debounce(function(){var e=null!=a?a.autoValidateFormOptions:void 0;f.validateElement(i,r,e)},100);return void 0===t.formnovalidate&&null!=a&&a.autoValidateFormOptions&&!1===a.autoValidateFormOptions.disabled&&(c||!c||void 0===o||void 0===o.updateOn||""===o.updateOn?i.$setValidity=function(e,t){s.call(i,e,t),u()}:(r.on(o.updateOn,function(){u()}),e.$on("$destroy",function(){r.off(o.updateOn)})),i.$setPristine=function(){l.call(i),f.resetElement(r)},i.autoValidated=!0),i.setExternalValidation=function(e,t,n){n&&i.$setValidity(e,!1),i.externalErrors=i.externalErrors||{},i.externalErrors[e]=!1,f.setElementValidationError(r,e,t)},i.removeExternalValidation=function(e,t){t&&(i.$setValidity(e,!0),delete(i.$error||i.$errors)[e]);i.externalErrors&&delete i.externalErrors[e],f.resetElement(r)},i.removeAllExternalValidation=function(){if(i.externalErrors){var n=i.$error||i.$errors;v.forEach(i.externalErrors,function(e,t){i.$setValidity(t,!0),delete n[t]}),i.externalErrors={},f.resetElement(r)}},a&&(a.setExternalValidation=function(e,t,n,r){var i=!1;return a[e]&&(a[e].setExternalValidation(t,n,r),i=!0),i},a.removeExternalValidation=function(e,t,n,r){var i=!1;return a[e]&&(a[e].removeExternalValidation(t,r),i=!0),i}),d.pre?d.pre.apply(this,arguments):this},post:function(e,t,n,r){return d.post?d.post.apply(this,arguments):d.apply(this,arguments)}}},t}])}]),c.$inject=["validator","defaultErrorMessageResolver","bootstrap3ElementModifier","foundation5ElementModifier","foundation6ElementModifier"],v.module("jcs-autoValidate").run(c)}(String,angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(p,h,g,e){var m=e.has("$animateCss")?e.get("$animateCss"):null;return{link:function(t,n,e){var r=g(e.expanding),i=g(e.expanded),a=g(e.collapsing),o=g(e.collapsed),s=!1,l={},u={};function c(e){return s?{width:e.scrollWidth+"px"}:{height:e.scrollHeight+"px"}}function d(){n.removeClass("collapsing").addClass("collapse").css(l),i(t)}function f(){n.css(u),n.removeClass("collapsing").addClass("collapse"),o(t)}!function(){u=(s=!!("horizontal"in e))?(l={width:""},{width:"0"}):(l={height:""},{height:"0"});t.$eval(e.uibCollapse)||n.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(l)}(),t.$watch(e.uibCollapse,function(e){e?function(){if(!n.hasClass("collapse")&&!n.hasClass("in"))return f();h.resolve(a(t)).then(function(){n.css(c(n[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),m?m(n,{removeClass:"in",to:u}).start().finally(f):p.removeClass(n,"in",{to:u}).then(f)},angular.noop)}():n.hasClass("collapse")&&n.hasClass("in")||h.resolve(r(t)).then(function(){n.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),m?m(n,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:c(n[0])}).start().finally(d):p.addClass(n,"in",{css:{overflow:"hidden"},to:c(n[0])}).then(d)},angular.noop)})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(e,t,n){n.$observe("disabled",function(e){n.$set("tabindex",e?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(e,n,r){this.groups=[],this.closeOthers=function(t){(angular.isDefined(n.closeOthers)?e.$eval(n.closeOthers):r.closeOthers)&&angular.forEach(this.groups,function(e){e!==t&&(e.isOpen=!1)})},this.addGroup=function(t){var n=this;this.groups.push(t),t.$on("$destroy",function(e){n.removeGroup(t)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(t,n,e,r){n.addClass("panel"),r.addGroup(t),t.openClass=e.openClass||"panel-open",t.panelClass=e.panelClass||"panel-default",t.$watch("isOpen",function(e){n.toggleClass(t.openClass,!!e),e&&r.closeOthers(t)}),t.toggleOpen=function(e){t.isDisabled||e&&32!==e.which||(t.isOpen=!t.isOpen)};var i="accordiongroup-"+t.$id+"-"+Math.floor(1e4*Math.random());t.headingId=i+"-tab",t.panelId=i+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(e,t,n,r,i){r.setHeading(i(e,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(e,n,t,r){e.$watch(function(){return r[t.uibAccordionTransclude]},function(e){if(e){var t=angular.element(n[0].querySelector("uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"));t.html(""),t.append(e)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(e,t,n,r,i){e.closeable=!!n.close,t.addClass("alert"),n.$set("role","alert"),e.closeable&&t.addClass("alert-dismissible");var a=angular.isDefined(n.dismissOnTimeout)?r(n.dismissOnTimeout)(e.$parent):null;a&&i(function(){e.close()},parseInt(a,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(s){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(t,n,r,e){var i=e[0],a=e[1],o=s(r.uibUncheckable);n.find("input").css({display:"none"}),a.$render=function(){n.toggleClass(i.activeClass,angular.equals(a.$modelValue,t.$eval(r.uibBtnRadio)))},n.on(i.toggleEvent,function(){if(!r.disabled){var e=n.hasClass(i.activeClass);e&&!angular.isDefined(r.uncheckable)||t.$apply(function(){a.$setViewValue(e?null:t.$eval(r.uibBtnRadio)),a.$render()})}}),r.uibUncheckable&&t.$watch(o,function(e){r.$set("uncheckable",e?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(n,e,t,r){var i=r[0],a=r[1];function o(){return s(t.btnCheckboxTrue,!0)}function s(e,t){return angular.isDefined(e)?n.$eval(e):t}e.find("input").css({display:"none"}),a.$render=function(){e.toggleClass(i.activeClass,angular.equals(a.$modelValue,o()))},e.on(i.toggleEvent,function(){t.disabled||n.$apply(function(){a.$setViewValue(e.hasClass(i.activeClass)?s(t.btnCheckboxFalse,!1):o()),a.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(i,a,t,e,o){var n,r,s=this,l=s.slides=i.slides=[],u="uib-slideDirection",c=i.active,d=!1;function f(e){for(var t=0;t<l.length;t++)l[t].slide.active=t===e}function p(e){for(var t=0;t<l.length;t++)if(l[t].slide===e)return t}function h(){n&&(t.cancel(n),n=null)}function g(){h();var e=+i.interval;!isNaN(e)&&0<e&&(n=t(m,e))}function m(){var e=+i.interval;r&&!isNaN(e)&&0<e&&l.length?i.next():i.pause()}a.addClass("carousel"),s.addSlide=function(e,t){l.push({slide:e,element:t}),l.sort(function(e,t){return+e.slide.index-+t.slide.index}),(e.index===i.active||1===l.length&&!angular.isNumber(i.active))&&(i.$currentTransition&&(i.$currentTransition=null),c=e.index,i.active=e.index,f(c),s.select(l[p(e)]),1===l.length&&i.play())},s.getCurrentIndex=function(){for(var e=0;e<l.length;e++)if(l[e].slide.index===c)return e},s.next=i.next=function(){var e=(s.getCurrentIndex()+1)%l.length;if(0!==e||!i.noWrap())return s.select(l[e],"next");i.pause()},s.prev=i.prev=function(){var e=s.getCurrentIndex()-1<0?l.length-1:s.getCurrentIndex()-1;if(!i.noWrap()||e!==l.length-1)return s.select(l[e],"prev");i.pause()},s.removeSlide=function(e){var t=p(e);l.splice(t,1),0<l.length&&c===t?t>=l.length?(c=l.length-1,f(i.active=c),s.select(l[l.length-1])):(c=t,f(i.active=c),s.select(l[t])):t<c&&(c--,i.active=c),0===l.length&&(c=null,i.active=null)},s.select=i.select=function(e,t){var n=p(e.slide);void 0===t&&(t=n>s.getCurrentIndex()?"next":"prev"),e.slide.index===c||i.$currentTransition||function(e,t,n){if(d)return;if(angular.extend(e,{direction:n}),angular.extend(l[c].slide||{},{direction:n}),o.enabled(a)&&!i.$currentTransition&&l[t].element&&1<s.slides.length){l[t].element.data(u,e.direction);var r=s.getCurrentIndex();angular.isNumber(r)&&l[r].element&&l[r].element.data(u,e.direction),i.$currentTransition=!0,o.on("addClass",l[t].element,function(e,t){"close"===t&&(i.$currentTransition=null,o.off("addClass",e))})}i.active=e.index,c=e.index,f(t),g()}(e.slide,n,t)},i.indexOfSlide=function(e){return+e.slide.index},i.isActive=function(e){return i.active===e.slide.index},i.isPrevDisabled=function(){return 0===i.active&&i.noWrap()},i.isNextDisabled=function(){return i.active===l.length-1&&i.noWrap()},i.pause=function(){i.noPause||(r=!1,h())},i.play=function(){r||(r=!0,g())},a.on("mouseenter",i.pause),a.on("mouseleave",i.play),i.$on("$destroy",function(){d=!0,h()}),i.$watch("noTransition",function(e){o.enabled(a,!e)}),i.$watch("interval",g),i.$watchCollection("slides",function(e){e.length||(i.$currentTransition=null)}),i.$watch("active",function(e){if(angular.isNumber(e)&&c!==e){for(var t=0;t<l.length;t++)if(l[t].slide.index===e){e=t;break}l[e]&&(f(e),s.select(l[e]),c=e)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(i){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(e,t,n,r){t.addClass("item"),r.addSlide(e,t),e.$on("$destroy",function(){r.removeSlide(e)}),e.$watch("active",function(e){i[e?"addClass":"removeClass"](t,"active")})}}}]).animation(".item",["$animateCss",function(o){var s="uib-slideDirection";function l(e,t,n){e.removeClass(t),n&&n()}return{beforeAddClass:function(e,t,n){if("active"===t){var r=e.data(s),i="next"===r?"left":"right",a=l.bind(this,e,i+" "+r,n);return e.addClass(r),o(e,{addClass:i}).start().done(a),function(){!0}}n()},beforeRemoveClass:function(e,t,n){if("active"===t){var r="next"===e.data(s)?"left":"right",i=l.bind(this,e,r,n);return o(e,{addClass:r}).start().done(i),function(){!0}}n()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function(g,m,n,v,t){var y,b,$=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function r(e){return t(b,{key:e},!0)[0]}function a(e,t,n){return function(){return e.substr(t+1,n-t-1)}}function o(e,t){for(var n=e.substr(t),r=0;r<b.length;r++)if(new RegExp("^"+b[r].key).test(n)){var i=b[r];return{endIdx:t+i.key.length,parser:i.formatter}}return{endIdx:t+1,parser:function(){return n.charAt(0)}}}function s(e){return parseInt(e,10)}function i(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function l(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function u(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return l(e,n*(i(t,r)-r))}this.init=function(){y=m.id,this.parsers={},this.formatters={},b=[{key:"yyyy",regex:"\\d{4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(e){e=+e,this.year=e<69?e+2e3:e+1900},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){var t=e.getMonth();return/^[0-9]$/.test(t)?n(e,"MM"):n(e,"M")}},{key:"MMMM",regex:m.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=m.DATETIME_FORMATS.MONTH.indexOf(e)},formatter:function(e){return n(e,"MMMM")}},{key:"MMM",regex:m.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=m.DATETIME_FORMATS.SHORTMONTH.indexOf(e)},formatter:function(e){return n(e,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){var t=e.getDate();return/^[1-9]$/.test(t)?n(e,"dd"):n(e,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"d")}},{key:"EEEE",regex:m.DATETIME_FORMATS.DAY.join("|"),formatter:function(e){return n(e,"EEEE")}},{key:"EEE",regex:m.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(e){return n(e,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e},formatter:function(e){return n(e,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"s")}},{key:"a",regex:m.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)},formatter:function(e){return n(e,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(e){var t=e.match(/([+-])(\d{2})(\d{2})/),n=t[1],r=t[2],i=t[3];this.hours+=s(n+r),this.minutes+=s(n+i)},formatter:function(e){return n(e,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(e){return n(e,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(e){return n(e,"w")}},{key:"GGGG",regex:m.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(e){return n(e,"GGGG")}},{key:"GGG",regex:m.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GGG")}},{key:"GG",regex:m.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GG")}},{key:"G",regex:m.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"G")}}],1<=angular.version.major&&4<angular.version.minor&&b.push({key:"LLLL",regex:m.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(e){this.month=m.DATETIME_FORMATS.STANDALONEMONTH.indexOf(e)},formatter:function(e){return n(e,"LLLL")}})},this.init(),this.getParser=function(e){var t=r(e);return t&&t.apply||null},this.overrideParser=function(e,t){var n=r(e);n&&angular.isFunction(t)&&(this.parsers={},n.apply=t)}.bind(this),this.filter=function(n,e){return angular.isDate(n)&&!isNaN(n)&&e?(e=m.DATETIME_FORMATS[e]||e,m.id!==y&&this.init(),this.formatters[e]||(this.formatters[e]=function(e){for(var t,n,r=[],i=0;i<e.length;)if(angular.isNumber(n)){if("'"===e.charAt(i))(i+1>=e.length||"'"!==e.charAt(i+1))&&(r.push(a(e,n,i)),n=null);else if(i===e.length)for(;n<e.length;)t=o(e,n),r.push(t),n=t.endIdx;i++}else"'"!==e.charAt(i)?(t=o(e,i),r.push(t.parser),i=t.endIdx):(n=i,i++);return r}(e)),this.formatters[e].reduce(function(e,t){return e+t(n)},"")):""},this.parse=function(e,t,n){if(!angular.isString(e)||!t)return e;t=(t=m.DATETIME_FORMATS[t]||t).replace($,"\\$&"),m.id!==y&&this.init(),this.parsers[t]||(this.parsers[t]=function(i){var a=[],o=i.split(""),e=i.indexOf("'");if(-1<e){var t=!1;i=i.split("");for(var n=e;n<i.length;n++)t?("'"===i[n]&&(n+1<i.length&&"'"===i[n+1]?(i[n+1]="$",o[n+1]=""):(o[n]="",t=!1)),i[n]="$"):"'"===i[n]&&(i[n]="$",t=!(o[n]=""));i=i.join("")}return angular.forEach(b,function(e){var t=i.indexOf(e.key);if(-1<t){i=i.split(""),o[t]="("+e.regex+")",i[t]="$";for(var n=t+1,r=t+e.key.length;n<r;n++)o[n]="",i[n]="$";i=i.join(""),a.push({index:t,key:e.key,apply:e.apply,matcher:e.regex})}}),{regex:new RegExp("^"+o.join("")+"$"),map:v(a,"index")}}(t));var r=this.parsers[t],i=r.regex,a=r.map,o=e.match(i),s=!1;if(o&&o.length){var l,u;l=angular.isDate(n)&&!isNaN(n.getTime())?{year:n.getFullYear(),month:n.getMonth(),date:n.getDate(),hours:n.getHours(),minutes:n.getMinutes(),seconds:n.getSeconds(),milliseconds:n.getMilliseconds()}:(n&&g.warn("dateparser:","baseDate is not a valid date"),{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var c=1,d=o.length;c<d;c++){var f=a[c-1];"Z"===f.matcher&&(s=!0),f.apply&&f.apply.call(l,o[c])}var p=s?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,h=s?Date.prototype.setUTCHours:Date.prototype.setHours;return function(e,t,n){if(n<1)return!1;if(1===t&&28<n)return 29===n&&(e%4==0&&e%100!=0||e%400==0);return 3!==t&&5!==t&&8!==t&&10!==t||n<31}(l.year,l.month,l.date)&&(!angular.isDate(n)||isNaN(n.getTime())||s?(u=new Date(0),p.call(u,l.year,l.month,l.date),h.call(u,l.hours||0,l.minutes||0,l.seconds||0,l.milliseconds||0)):(u=new Date(n),p.call(u,l.year,l.month,l.date),h.call(u,l.hours,l.minutes,l.seconds,l.milliseconds))),u}},this.toTimezone=function(e,t){return e&&t?u(e,t):e},this.fromTimezone=function(e,t){return e&&t?u(e,t,!0):e},this.timezoneToOffset=i,this.addDateMinutes=l,this.convertTimezoneToLocal=u}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(c){var o=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,d=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(e,t){var i=[],s=[],l={},n=t.uibIsClass.match(o),u=n[2],r=n[1].split(",");return function(n,e,t){i.push(n),s.push({scope:n,element:e}),r.forEach(function(e,t){!function(e,t){var n=e.match(d),i=t.$eval(n[1]),r=n[2],a=l[e];if(!a){var o=function(n){var r=null;s.some(function(e){var t=e.scope.$eval(u);if(t===n)return r=e,!0}),a.lastActivated!==r&&(a.lastActivated&&c.removeClass(a.lastActivated.element,i),r&&c.addClass(r.element,i),a.lastActivated=r)};l[e]=a={lastActivated:null,scope:t,watchFn:o,compareWithExp:r,watcher:t.$watch(r,o)}}a.watchFn(t.$eval(r))}(e,n)}),n.$on("$destroy",a)};function a(e){var t=e.targetScope,n=i.indexOf(t);if(i.splice(n,1),s.splice(n,1),i.length){var r=i[0];angular.forEach(l,function(e){e.scope===t&&(e.watcher=r.$watch(e.compareWithExp,e.watchFn),e.scope=r)})}else l={}}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(o,e,t,n,r,i,a,s,l,u,c,d){var f=this,p={$setViewValue:angular.noop},h={},g=[];e.addClass("uib-datepicker"),t.$set("role","application"),o.datepickerOptions||(o.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(t){switch(t){case"customClass":case"dateDisabled":o[t]=o.datepickerOptions[t]||angular.noop;break;case"datepickerMode":o.datepickerMode=angular.isDefined(o.datepickerOptions.datepickerMode)?o.datepickerOptions.datepickerMode:l.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":f[t]=angular.isDefined(o.datepickerOptions[t])?r(o.datepickerOptions[t])(o.$parent):l[t];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":f[t]=angular.isDefined(o.datepickerOptions[t])?o.datepickerOptions[t]:l[t];break;case"startingDay":angular.isDefined(o.datepickerOptions.startingDay)?f.startingDay=o.datepickerOptions.startingDay:angular.isNumber(l.startingDay)?f.startingDay=l.startingDay:f.startingDay=(i.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":o.$watch("datepickerOptions."+t,function(e){e?angular.isDate(e)?f[t]=d.fromTimezone(new Date(e),h.getOption("timezone")):(u&&a.warn("Literal date support has been deprecated, please switch to date object usage"),f[t]=new Date(s(e,"medium"))):f[t]=l[t]?d.fromTimezone(new Date(l[t]),h.getOption("timezone")):null,f.refreshView()});break;case"maxMode":case"minMode":o.datepickerOptions[t]?o.$watch(function(){return o.datepickerOptions[t]},function(e){f[t]=o[t]=angular.isDefined(e)?e:o.datepickerOptions[t],("minMode"===t&&f.modes.indexOf(o.datepickerOptions.datepickerMode)<f.modes.indexOf(f[t])||"maxMode"===t&&f.modes.indexOf(o.datepickerOptions.datepickerMode)>f.modes.indexOf(f[t]))&&(o.datepickerMode=f[t],o.datepickerOptions.datepickerMode=f[t])}):f[t]=o[t]=l[t]||null}}),o.uniqueId="datepicker-"+o.$id+"-"+Math.floor(1e4*Math.random()),o.disabled=angular.isDefined(t.disabled)||!1,angular.isDefined(t.ngDisabled)&&g.push(o.$parent.$watch(t.ngDisabled,function(e){o.disabled=e,f.refreshView()})),o.isActive=function(e){return 0===f.compare(e.date,f.activeDate)&&(o.activeDateId=e.uid,!0)},this.init=function(e){h=function(e){var t;if(angular.version.minor<6)(t=e.$options||o.datepickerOptions.ngModelOptions||l.ngModelOptions||{}).getOption=function(e){return t[e]};else{var n=e.$options.getOption("timezone")||(o.datepickerOptions.ngModelOptions?o.datepickerOptions.ngModelOptions.timezone:null)||(l.ngModelOptions?l.ngModelOptions.timezone:null);t=e.$options.createChild(l.ngModelOptions).createChild(o.datepickerOptions.ngModelOptions).createChild(e.$options).createChild({timezone:n})}return t}(p=e),o.datepickerOptions.initDate?(f.activeDate=d.fromTimezone(o.datepickerOptions.initDate,h.getOption("timezone"))||new Date,o.$watch("datepickerOptions.initDate",function(e){e&&(p.$isEmpty(p.$modelValue)||p.$invalid)&&(f.activeDate=d.fromTimezone(e,h.getOption("timezone")),f.refreshView())})):f.activeDate=new Date;var t=p.$modelValue?new Date(p.$modelValue):new Date;this.activeDate=isNaN(t)?d.fromTimezone(new Date,h.getOption("timezone")):d.fromTimezone(t,h.getOption("timezone")),p.$render=function(){f.render()}},this.render=function(){if(p.$viewValue){var e=new Date(p.$viewValue);!isNaN(e)?this.activeDate=d.fromTimezone(e,h.getOption("timezone")):c||a.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){o.selectedDt=null,this._refreshView(),o.activeDt&&(o.activeDateId=o.activeDt.uid);var e=p.$viewValue?new Date(p.$viewValue):null;e=d.fromTimezone(e,h.getOption("timezone")),p.$setValidity("dateDisabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=p.$viewValue?new Date(p.$viewValue):null;n=d.fromTimezone(n,h.getOption("timezone"));var r=new Date;r=d.fromTimezone(r,h.getOption("timezone"));var i=this.compare(e,r),a={date:e,label:d.filter(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),past:i<0,current:0===i,future:0<i,customClass:this.customClass(e)||null};return n&&0===this.compare(e,n)&&(o.selectedDt=a),f.activeDate&&0===this.compare(a.date,f.activeDate)&&(o.activeDt=a),a},this.isDisabled=function(e){return o.disabled||this.minDate&&this.compare(e,this.minDate)<0||this.maxDate&&0<this.compare(e,this.maxDate)||o.dateDisabled&&o.dateDisabled({date:e,mode:o.datepickerMode})},this.customClass=function(e){return o.customClass({date:e,mode:o.datepickerMode})},this.split=function(e,t){for(var n=[];0<e.length;)n.push(e.splice(0,t));return n},o.select=function(e){if(o.datepickerMode===f.minMode){var t=p.$viewValue?d.fromTimezone(new Date(p.$viewValue),h.getOption("timezone")):new Date(0,0,0,0,0,0,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t=d.toTimezone(t,h.getOption("timezone")),p.$setViewValue(t),p.$render()}else f.activeDate=e,m(f.modes[f.modes.indexOf(o.datepickerMode)-1]),o.$emit("uib:datepicker.mode");o.$broadcast("uib:datepicker.focus")},o.move=function(e){var t=f.activeDate.getFullYear()+e*(f.step.years||0),n=f.activeDate.getMonth()+e*(f.step.months||0);f.activeDate.setFullYear(t,n,1),f.refreshView()},o.toggleMode=function(e){e=e||1,o.datepickerMode===f.maxMode&&1===e||o.datepickerMode===f.minMode&&-1===e||(m(f.modes[f.modes.indexOf(o.datepickerMode)+e]),o.$emit("uib:datepicker.mode"))},o.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};function m(e){o.datepickerMode=e,o.datepickerOptions.datepickerMode=e}o.$on("uib:datepicker.focus",function(){f.element[0].focus()}),o.keydown=function(e){var t=o.keys[e.which];if(t&&!e.shiftKey&&!e.altKey&&!o.disabled)if(e.preventDefault(),f.shortcutPropagation||e.stopPropagation(),"enter"===t||"space"===t){if(f.isDisabled(f.activeDate))return;o.select(f.activeDate)}else!e.ctrlKey||"up"!==t&&"down"!==t?(f.handleKeyDown(t,e),f.refreshView()):o.toggleMode("up"===t?1:-1)},e.on("keydown",function(e){o.$apply(function(){o.keydown(e)})}),o.$on("$destroy",function(){for(;g.length;)g.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(f,e,p){var n=[31,28,31,30,31,30,31,31,30,31,30,31];function i(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?n[t]:29}function h(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}this.step={months:1},this.element=e,this.init=function(e){angular.extend(e,this),f.showWeeks=e.showWeeks,e.refreshView()},this.getDates=function(e,t){for(var n,r=new Array(t),i=new Date(e),a=0;a<t;)n=new Date(i),r[a++]=n,i.setDate(i.getDate()+1);return r},this._refreshView=function(){var e=this.activeDate.getFullYear(),t=this.activeDate.getMonth(),n=new Date(this.activeDate);n.setFullYear(e,t,1);var r=this.startingDay-n.getDay(),i=0<r?7-r:-r,a=new Date(n);0<i&&a.setDate(1-i);for(var o=this.getDates(a,42),s=0;s<42;s++)o[s]=angular.extend(this.createDateObject(o[s],this.formatDay),{secondary:o[s].getMonth()!==t,uid:f.uniqueId+"-"+s});f.labels=new Array(7);for(var l=0;l<7;l++)f.labels[l]={abbr:p(o[l].date,this.formatDayHeader),full:p(o[l].date,"EEEE")};if(f.title=p(this.activeDate,this.formatDayTitle),f.rows=this.split(o,7),f.showWeeks){f.weekNumbers=[];for(var u=(11-this.startingDay)%7,c=f.rows.length,d=0;d<c;d++)f.weekNumbers.push(h(f.rows[d][u].date))}},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e,t){var n=this.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var r=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(r,1),n=Math.min(i(this.activeDate.getFullYear(),this.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=i(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(n)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(i,e,a){this.step={years:1},this.element=e,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var e,t=new Array(12),n=this.activeDate.getFullYear(),r=0;r<12;r++)(e=new Date(this.activeDate)).setFullYear(n,r,1),t[r]=angular.extend(this.createDateObject(e,this.formatMonth),{uid:i.uniqueId+"-"+r});i.title=a(this.activeDate,this.formatMonthTitle),i.rows=this.split(t,this.monthColumns),i.yearHeaderColspan=3<this.monthColumns?this.monthColumns-2:1},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth()),r=new Date(t.getFullYear(),t.getMonth());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e,t){var n=this.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=this.monthColumns;else if("right"===e)n+=1;else if("down"===e)n+=this.monthColumns;else if("pageup"===e||"pagedown"===e){var r=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(r)}else"home"===e?n=0:"end"===e&&(n=11);this.activeDate.setMonth(n)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(i,e,t){var a,o;function s(e){return parseInt((e-1)/o,10)*o+1}this.element=e,this.yearpickerInit=function(){a=this.yearColumns,o=this.yearRows*a,this.step={years:o}},this._refreshView=function(){for(var e,t=new Array(o),n=0,r=s(this.activeDate.getFullYear());n<o;n++)(e=new Date(this.activeDate)).setFullYear(r+n,0,1),t[n]=angular.extend(this.createDateObject(e,this.formatYear),{uid:i.uniqueId+"-"+n});i.title=[t[0].label,t[o-1].label].join(" - "),i.rows=this.split(t,a),i.columns=a},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var n=this.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=a:"right"===e?n+=1:"down"===e?n+=a:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*o:"home"===e?n=s(this.activeDate.getFullYear()):"end"===e&&(n=s(this.activeDate.getFullYear())+o-1),this.activeDate.setFullYear(n)}}]).directive("uibDatepicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,n,r){var i=r[0],a=r[1];i.init(a)}}}).directive("uibDaypicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(e,t,n,r){var i=r[0];r[1].init(i)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(e,t,n,r){var i=r[0];r[1].init(i)}}}).directive("uibYearpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(e,t,n,r){var i=r[0];angular.extend(i,r[1]),i.yearpickerInit(),i.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(u,h){var r,i,c={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},g={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},o=/(HTML|BODY)/;return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(e){var t,n=(e=this.getRawNode(e)).offsetParent||u[0].documentElement;for(;n&&n!==u[0].documentElement&&(t=n,"static"===(h.getComputedStyle(t).position||"static"));)n=n.offsetParent;return n||u[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(i)){var t=u.find("body");t.addClass("uib-position-body-scrollbar-measure"),i=h.innerWidth-t[0].clientWidth,i=isFinite(i)?i:0,t.removeClass("uib-position-body-scrollbar-measure")}return i}if(angular.isUndefined(r)){var n=angular.element('<div class="uib-position-scrollbar-measure"></div>');u.find("body").append(n),r=n[0].offsetWidth-n[0].clientWidth,r=isFinite(r)?r:0,n.remove()}return r},scrollbarPadding:function(e){e=this.getRawNode(e);var t=h.getComputedStyle(e),n=this.parseStyle(t.paddingRight),r=this.parseStyle(t.paddingBottom),i=this.scrollParent(e,!1,!0),a=this.scrollbarWidth(o.test(i.tagName));return{scrollbarWidth:a,widthOverflow:i.scrollWidth>i.clientWidth,right:n+a,originalRight:n,heightOverflow:i.scrollHeight>i.clientHeight,bottom:r+a,originalBottom:r}},isScrollable:function(e,t){e=this.getRawNode(e);var n=t?c.hidden:c.normal,r=h.getComputedStyle(e);return n.test(r.overflow+r.overflowY+r.overflowX)},scrollParent:function(e,t,n){e=this.getRawNode(e);var r=t?c.hidden:c.normal,i=u[0].documentElement,a=h.getComputedStyle(e);if(n&&r.test(a.overflow+a.overflowY+a.overflowX))return e;var o="absolute"===a.position,s=e.parentElement||i;if(s===i||"fixed"===a.position)return i;for(;s.parentElement&&s!==i;){var l=h.getComputedStyle(s);if(o&&"static"!==l.position&&(o=!1),!o&&r.test(l.overflow+l.overflowY+l.overflowX))break;s=s.parentElement}return s},position:function(e,t){e=this.getRawNode(e);var n=this.offset(e);if(t){var r=h.getComputedStyle(e);n.top-=this.parseStyle(r.marginTop),n.left-=this.parseStyle(r.marginLeft)}var i=this.offsetParent(e),a={top:0,left:0};return i!==u[0].documentElement&&((a=this.offset(i)).top+=i.clientTop-i.scrollTop,a.left+=i.clientLeft-i.scrollLeft),{width:Math.round(angular.isNumber(n.width)?n.width:e.offsetWidth),height:Math.round(angular.isNumber(n.height)?n.height:e.offsetHeight),top:Math.round(n.top-a.top),left:Math.round(n.left-a.left)}},offset:function(e){var t=(e=this.getRawNode(e)).getBoundingClientRect();return{width:Math.round(angular.isNumber(t.width)?t.width:e.offsetWidth),height:Math.round(angular.isNumber(t.height)?t.height:e.offsetHeight),top:Math.round(t.top+(h.pageYOffset||u[0].documentElement.scrollTop)),left:Math.round(t.left+(h.pageXOffset||u[0].documentElement.scrollLeft))}},viewportOffset:function(e,t,n){n=!1!==n;var r=(e=this.getRawNode(e)).getBoundingClientRect(),i={top:0,left:0,bottom:0,right:0},a=t?u[0].documentElement:this.scrollParent(e),o=a.getBoundingClientRect();if(i.top=o.top+a.clientTop,i.left=o.left+a.clientLeft,a===u[0].documentElement&&(i.top+=h.pageYOffset,i.left+=h.pageXOffset),i.bottom=i.top+a.clientHeight,i.right=i.left+a.clientWidth,n){var s=h.getComputedStyle(a);i.top+=this.parseStyle(s.paddingTop),i.bottom-=this.parseStyle(s.paddingBottom),i.left+=this.parseStyle(s.paddingLeft),i.right-=this.parseStyle(s.paddingRight)}return{top:Math.round(r.top-i.top),bottom:Math.round(i.bottom-r.bottom),left:Math.round(r.left-i.left),right:Math.round(i.right-r.right)}},parsePlacement:function(e){var t=g.auto.test(e);return t&&(e=e.replace(g.auto,"")),(e=e.split("-"))[0]=e[0]||"top",g.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",g.secondary.test(e[1])||(e[1]="center"),e[2]=!!t,e},positionElements:function(e,t,n,r){e=this.getRawNode(e),t=this.getRawNode(t);var i=angular.isDefined(t.offsetWidth)?t.offsetWidth:t.prop("offsetWidth"),a=angular.isDefined(t.offsetHeight)?t.offsetHeight:t.prop("offsetHeight");n=this.parsePlacement(n);var o=r?this.offset(e):this.position(e),s={top:0,left:0,placement:""};if(n[2]){var l=this.viewportOffset(e,r),u=h.getComputedStyle(t),c=i+Math.round(Math.abs(this.parseStyle(u.marginLeft)+this.parseStyle(u.marginRight))),d=a+Math.round(Math.abs(this.parseStyle(u.marginTop)+this.parseStyle(u.marginBottom)));if(n[0]="top"===n[0]&&d>l.top&&d<=l.bottom?"bottom":"bottom"===n[0]&&d>l.bottom&&d<=l.top?"top":"left"===n[0]&&c>l.left&&c<=l.right?"right":"right"===n[0]&&c>l.right&&c<=l.left?"left":n[0],n[1]="top"===n[1]&&d-o.height>l.bottom&&d-o.height<=l.top?"bottom":"bottom"===n[1]&&d-o.height>l.top&&d-o.height<=l.bottom?"top":"left"===n[1]&&c-o.width>l.right&&c-o.width<=l.left?"right":"right"===n[1]&&c-o.width>l.left&&c-o.width<=l.right?"left":n[1],"center"===n[1])if(g.vertical.test(n[0])){var f=o.width/2-i/2;l.left+f<0&&c-o.width<=l.right?n[1]="left":l.right+f<0&&c-o.width<=l.left&&(n[1]="right")}else{var p=o.height/2-d/2;l.top+p<0&&d-o.height<=l.bottom?n[1]="top":l.bottom+p<0&&d-o.height<=l.top&&(n[1]="bottom")}}switch(n[0]){case"top":s.top=o.top-a;break;case"bottom":s.top=o.top+o.height;break;case"left":s.left=o.left-i;break;case"right":s.left=o.left+o.width}switch(n[1]){case"top":s.top=o.top;break;case"bottom":s.top=o.top+o.height-a;break;case"left":s.left=o.left;break;case"right":s.left=o.left+o.width-i;break;case"center":g.vertical.test(n[0])?s.left=o.left+o.width/2-i/2:s.top=o.top+o.height/2-a/2}return s.top=Math.round(s.top),s.left=Math.round(s.left),s.placement="center"===n[1]?n[0]:n[0]+"-"+n[1],s},adjustTop:function(e,t,n,r){if(-1!==e.indexOf("top")&&n!==r)return{top:t.top-r+"px"}},positionArrow:function(e,t){var n=(e=this.getRawNode(e)).querySelector(".tooltip-inner, .popover-inner");if(n){var r=angular.element(n).hasClass("tooltip-inner"),i=r?e.querySelector(".tooltip-arrow"):e.querySelector(".arrow");if(i){var a={top:"",bottom:"",left:"",right:""};if("center"!==(t=this.parsePlacement(t))[1]){var o="border-"+t[0]+"-width",s=h.getComputedStyle(i)[o],l="border-";g.vertical.test(t[0])?l+=t[0]+"-"+t[1]:l+=t[1]+"-"+t[0],l+="-radius";var u=h.getComputedStyle(r?n:e)[l];switch(t[0]){case"top":a.bottom=r?"0":"-"+s;break;case"bottom":a.top=r?"0":"-"+s;break;case"left":a.right=r?"0":"-"+s;break;case"right":a.left=r?"0":"-"+s}a[t[1]]=u,angular.element(i).css(a)}else angular.element(i).css(a)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(i,a,r,t,n,e,o,s,l,u,c,d,f,p,h,g){var m,v,y,b,$,w,S,x,C,E,T,D,k,R=!1,M=[];function A(e){var t=d.parse(e,m,i.date);if(isNaN(t))for(var n=0;n<k.length;n++)if(t=d.parse(e,k[n],i.date),!isNaN(t))return t;return t}function N(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=A(e);if(!isNaN(t))return d.toTimezone(t,T.getOption("timezone"))}return T.getOption("allowInvalid")?e:void 0}function O(e,t){var n=e||t;return!r.ngRequired&&!n||(angular.isNumber(n)&&(n=new Date(n)),!n||(!(!angular.isDate(n)||isNaN(n))||!!angular.isString(n)&&!isNaN(A(n))))}function I(e){if(i.isOpen||!i.disabled){var t=D[0],n=a[0].contains(e.target),r=void 0!==t.contains&&t.contains(e.target);!i.isOpen||n||r||i.$apply(function(){i.isOpen=!1})}}function _(e){27===e.which&&i.isOpen?(e.preventDefault(),e.stopPropagation(),i.$apply(function(){i.isOpen=!1}),a[0].focus()):40!==e.which||i.isOpen||(e.preventDefault(),e.stopPropagation(),i.$apply(function(){i.isOpen=!0}))}function P(){if(i.isOpen){var e=angular.element(D[0].querySelector(".uib-datepicker-popup")),t=r.popupPlacement?r.popupPlacement:f.placement,n=u.positionElements(a,e,t,y);e.css({top:n.top+"px",left:n.left+"px"}),e.hasClass("uib-position-measure")&&e.removeClass("uib-position-measure")}}this.init=function(e){if(T=function(e){var t;angular.version.minor<6?(t=angular.isObject(e.$options)?e.$options:{timezone:null}).getOption=function(e){return t[e]}:t=e.$options;return t}(E=e),v=angular.isDefined(r.closeOnDateSelection)?i.$parent.$eval(r.closeOnDateSelection):f.closeOnDateSelection,y=angular.isDefined(r.datepickerAppendToBody)?i.$parent.$eval(r.datepickerAppendToBody):f.appendToBody,b=angular.isDefined(r.onOpenFocus)?i.$parent.$eval(r.onOpenFocus):f.onOpenFocus,$=angular.isDefined(r.datepickerPopupTemplateUrl)?r.datepickerPopupTemplateUrl:f.datepickerPopupTemplateUrl,w=angular.isDefined(r.datepickerTemplateUrl)?r.datepickerTemplateUrl:f.datepickerTemplateUrl,k=angular.isDefined(r.altInputFormats)?i.$parent.$eval(r.altInputFormats):f.altInputFormats,i.showButtonBar=angular.isDefined(r.showButtonBar)?i.$parent.$eval(r.showButtonBar):f.showButtonBar,f.html5Types[r.type]?(m=f.html5Types[r.type],R=!0):(m=r.uibDatepickerPopup||f.datepickerPopup,r.$observe("uibDatepickerPopup",function(e,t){var n=e||f.datepickerPopup;if(n!==m&&(m=n,E.$modelValue=null,!m))throw new Error("uibDatepickerPopup must have a date format specified.")})),!m)throw new Error("uibDatepickerPopup must have a date format specified.");if(R&&r.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");(S=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>")).attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":$}),(x=angular.element(S.children()[0])).attr("template-url",w),i.datepickerOptions||(i.datepickerOptions={}),R&&"month"===r.type&&(i.datepickerOptions.datepickerMode="month",i.datepickerOptions.minMode="month"),x.attr("datepicker-options","datepickerOptions"),R?E.$formatters.push(function(e){return i.date=d.fromTimezone(e,T.getOption("timezone")),e}):(E.$$parserName="date",E.$validators.date=O,E.$parsers.unshift(N),E.$formatters.push(function(e){return E.$isEmpty(e)?i.date=e:(angular.isNumber(e)&&(e=new Date(e)),i.date=d.fromTimezone(e,T.getOption("timezone")),d.filter(i.date,m))})),E.$viewChangeListeners.push(function(){i.date=A(E.$viewValue)}),a.on("keydown",_),D=t(S)(i),S.remove(),y?s.find("body").append(D):a.after(D),i.$on("$destroy",function(){for(!0===i.isOpen&&(l.$$phase||i.$apply(function(){i.isOpen=!1})),D.remove(),a.off("keydown",_),s.off("click",I),C&&C.off("scroll",P),angular.element(o).off("resize",P);M.length;)M.shift()()})},i.getText=function(e){return i[e+"Text"]||f[e+"Text"]},i.isDisabled=function(e){"today"===e&&(e=d.fromTimezone(new Date,T.getOption("timezone")));var t={};return angular.forEach(["minDate","maxDate"],function(e){i.datepickerOptions[e]?angular.isDate(i.datepickerOptions[e])?t[e]=new Date(i.datepickerOptions[e]):(g&&n.warn("Literal date support has been deprecated, please switch to date object usage"),t[e]=new Date(c(i.datepickerOptions[e],"medium"))):t[e]=null}),i.datepickerOptions&&t.minDate&&i.compare(e,t.minDate)<0||t.maxDate&&0<i.compare(e,t.maxDate)},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.dateSelection=function(e){i.date=e;var t=i.date?d.filter(i.date,m):null;a.val(t),E.$setViewValue(t),v&&(i.isOpen=!1,a[0].focus())},i.keydown=function(e){27===e.which&&(e.stopPropagation(),i.isOpen=!1,a[0].focus())},i.select=function(e,t){if(t.stopPropagation(),"today"===e){var n=new Date;angular.isDate(i.date)?(e=new Date(i.date)).setFullYear(n.getFullYear(),n.getMonth(),n.getDate()):(e=d.fromTimezone(n,T.getOption("timezone"))).setHours(0,0,0,0)}i.dateSelection(e)},i.close=function(e){e.stopPropagation(),i.isOpen=!1,a[0].focus()},i.disabled=angular.isDefined(r.disabled)||!1,r.ngDisabled&&M.push(i.$parent.$watch(e(r.ngDisabled),function(e){i.disabled=e})),i.$watch("isOpen",function(e){e?i.disabled?i.isOpen=!1:p(function(){P(),b&&i.$broadcast("uib:datepicker.focus"),s.on("click",I);var e=r.popupPlacement?r.popupPlacement:f.placement;y||u.parsePlacement(e)[2]?(C=C||angular.element(u.scrollParent(a)))&&C.on("scroll",P):C=null,angular.element(o).on("resize",P)},0,!1):(s.off("click",I),C&&C.off("scroll",P),angular.element(o).off("resize",P))}),i.$on("uib:datepicker.mode",function(){p(P,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(e,t,n,r){var i=r[0];r[1].init(i)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(n,r){var i;return function(){var e=this,t=Array.prototype.slice.call(arguments);i&&a.cancel(i),i=a(function(){n.apply(e,t)},r)}}}]),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var i={};return{entries:function(){return Object.keys(i).map(function(e){return{key:e,value:i[e]}})},get:function(e){return i[e]},hasKey:function(e){return!!i[e]},keys:function(){return Object.keys(i)},put:function(e,t){i[e]||(i[e]=[]),i[e].push(t)},remove:function(e,t){var n=i[e];if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1),n.length||delete i[e]}}}}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function(a,r,e){var o=null,s=e.createNew();this.isOnlyOpen=function(n,e){var t=s.get(e);if(t&&t.reduce(function(e,t){return t.scope===n?t:e},{}))return 1===t.length;return!1},this.open=function(e,t,n){if(o||a.on("click",l),o&&o!==e&&(o.isOpen=!1),o=e,n){var r=s.get(n);if(r)-1===r.map(function(e){return e.scope}).indexOf(e)&&s.put(n,{scope:e});else s.put(n,{scope:e})}},this.close=function(n,e,t){if(o===n&&(a.off("click",l),a.off("keydown",this.keybindFilter),o=null),t){var r=s.get(t);if(r){var i=r.reduce(function(e,t){return t.scope===n?t:e},{});i&&s.remove(t,i)}}};var l=function(e){if(o&&o.isOpen&&!(e&&"disabled"===o.getAutoClose()||e&&3===e.which)){var t=o.getToggleElement();if(!(e&&t&&t[0].contains(e.target))){var n=o.getDropdownElement();e&&"outsideClick"===o.getAutoClose()&&n&&n[0].contains(e.target)||(o.focusToggleElement(),o.isOpen=!1,r.$$phase||o.$apply())}}};this.keybindFilter=function(e){if(o){var t=o.getDropdownElement(),n=o.getToggleElement(),r=t&&t[0].contains(e.target),i=n&&n[0].contains(e.target);27===e.which?(e.stopPropagation(),o.focusToggleElement(),l()):o.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&o.isOpen&&(r||i)&&(e.preventDefault(),e.stopPropagation(),o.focusDropdownEntry(e.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(m,v,y,b,e,$,w,S,x,C,E){var T,t,D=this,k=m.$new(),R=e.appendToOpenClass,M=e.openClass,A=angular.noop,N=y.onToggle?b(y.onToggle):angular.noop,n=!1,O=x.find("body");function I(){v.append(D.dropdownMenu)}v.addClass("dropdown"),this.init=function(){y.isOpen&&(t=b(y.isOpen),A=t.assign,m.$watch(t,function(e){k.isOpen=!!e})),n=angular.isDefined(y.keyboardNav)},this.toggle=function(e){return k.isOpen=arguments.length?!!e:!k.isOpen,angular.isFunction(A)&&A(k,k.isOpen),k.isOpen},this.isOpen=function(){return k.isOpen},k.getToggleElement=function(){return D.toggleElement},k.getAutoClose=function(){return y.autoClose||"always"},k.getElement=function(){return v},k.isKeynavEnabled=function(){return n},k.focusDropdownEntry=function(e){var t=D.dropdownMenu?angular.element(D.dropdownMenu).find("a"):v.find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(D.selectedOption)?D.selectedOption=D.selectedOption===t.length-1?D.selectedOption:D.selectedOption+1:D.selectedOption=0;break;case 38:angular.isNumber(D.selectedOption)?D.selectedOption=0===D.selectedOption?0:D.selectedOption-1:D.selectedOption=t.length-1}t[D.selectedOption].focus()},k.getDropdownElement=function(){return D.dropdownMenu},k.focusToggleElement=function(){D.toggleElement&&D.toggleElement[0].focus()},k.$watch("isOpen",function(e,t){var n=null,r=!1;if(angular.isDefined(y.dropdownAppendTo)){var i=b(y.dropdownAppendTo)(k);i&&(n=angular.element(i))}angular.isDefined(y.dropdownAppendToBody)&&(!1!==b(y.dropdownAppendToBody)(k)&&(r=!0));if(r&&!n&&(n=O),n&&D.dropdownMenu&&(e?(n.append(D.dropdownMenu),v.on("$destroy",I)):(v.off("$destroy",I),I())),n&&D.dropdownMenu){var a,o,s,l=S.positionElements(v,D.dropdownMenu,"bottom-left",!0),u=0;if(a={top:l.top+"px",display:e?"block":"none"},(o=D.dropdownMenu.hasClass("dropdown-menu-right"))?(a.left="auto",(s=S.scrollbarPadding(n)).heightOverflow&&s.scrollbarWidth&&(u=s.scrollbarWidth),a.right=window.innerWidth-u-(l.left+v.prop("offsetWidth"))+"px"):(a.left=l.left+"px",a.right="auto"),!r){var c=S.offset(n);a.top=l.top-c.top+"px",o?a.right=window.innerWidth-(l.left-c.left+v.prop("offsetWidth"))+"px":a.left=l.left-c.left+"px"}D.dropdownMenu.css(a)}var d=n||v,f=n?R:M,p=d.hasClass(f),h=$.isOnlyOpen(m,n);p===!e&&w[n?h?"removeClass":"addClass":e?"addClass":"removeClass"](d,f).then(function(){angular.isDefined(e)&&e!==t&&N(m,{open:!!e})});if(e)D.dropdownMenuTemplateUrl?E(D.dropdownMenuTemplateUrl).then(function(e){T=k.$new(),C(e.trim())(T,function(e){var t=e;D.dropdownMenu.replaceWith(t),D.dropdownMenu=t,x.on("keydown",$.keybindFilter)})}):x.on("keydown",$.keybindFilter),k.focusToggleElement(),$.open(k,v,n);else{if($.close(k,v,n),D.dropdownMenuTemplateUrl){T&&T.$destroy();var g=angular.element('<ul class="dropdown-menu"></ul>');D.dropdownMenu.replaceWith(g),D.dropdownMenu=g}D.selectedOption=null}angular.isFunction(A)&&A(m,e)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,r){r.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,r){if(r&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var i=n.templateUrl;i&&(r.dropdownMenuTemplateUrl=i),r.dropdownMenu||(r.dropdownMenu=t)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(t,n,r,i){if(i){n.addClass("dropdown-toggle"),i.toggleElement=n;var e=function(e){e.preventDefault(),n.hasClass("disabled")||r.disabled||t.$apply(function(){i.toggle()})};n.on("click",e),n.attr({"aria-haspopup":!0,"aria-expanded":!1}),t.$watch(i.isOpen,function(e){n.attr("aria-expanded",!!e)}),t.$on("$destroy",function(){n.off("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var r=[];return{add:function(e,t){r.push({key:e,value:t})},get:function(e){for(var t=0;t<r.length;t++)if(e===r[t].key)return r[t]},keys:function(){for(var e=[],t=0;t<r.length;t++)e.push(r[t].key);return e},top:function(){return r[r.length-1]},remove:function(e){for(var t=-1,n=0;n<r.length;n++)if(e===r[n].key){t=n;break}return r.splice(t,1)[0]},removeTop:function(){return r.pop()},length:function(){return r.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(a,o){var s=e.resolver?a.get(e.resolver):null;return{resolve:function(e,t,n,r){if(s)return s.resolve(e,t,n,r);var i=[];return angular.forEach(e,function(e){angular.isFunction(e)||angular.isArray(e)?i.push(o.resolve(a.invoke(e))):angular.isString(e)?i.push(o.resolve(a.get(e))):i.push(o.resolve(e))}),o.all(i).then(function(n){var r={},i=0;return angular.forEach(e,function(e,t){r[t]=n[i++]}),r})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(o,e,t){return{restrict:"A",compile:function(e,t){return e.addClass(t.backdropClass),n}};function n(r,i,a){a.modalInClass&&(o.addClass(i,a.modalInClass),r.$on(t.NOW_CLOSING_EVENT,function(e,t){var n=t();r.modalOptions.animation?o.removeClass(i,a.modalInClass).then(n):n()}))}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(n,a,o,s){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/modal/window.html"},link:function(t,r,i){r.addClass(i.windowTopClass||""),t.size=i.size,t.close=function(e){var t=n.getTop();t&&t.value.backdrop&&"static"!==t.value.backdrop&&e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),n.dismiss(t.key,"backdrop click"))},r.on("click",t.close),t.$isRendered=!0;var e=a.defer();t.$$postDigest(function(){e.resolve()}),e.promise.then(function(){var e=null;i.modalInClass&&(e=o(r,{addClass:i.modalInClass}).start(),t.$on(n.NOW_CLOSING_EVENT,function(e,t){var n=t();o(r,{removeClass:i.modalInClass}).start().then(n)})),a.when(e).then(function(){var e=n.getTop();if(e&&n.modalRendered(e.key),!s[0].activeElement||!r[0].contains(s[0].activeElement)){var t=r[0].querySelector("[autofocus]");t?t.focus():r[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(a){return{link:function(e,t,n,r,i){i(e.$parent,function(e){t.empty(),a.enter(e,t)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(l,e,u,c,d,o,t,n,f){var p,h,g,m="modal-open",v=n.createNew(),y=t.createNew(),s={NOW_CLOSING_EVENT:"modal.stack.now-closing"},b=0,$=null,w="data-bootstrap-modal-aria-hidden-count",S=/[A-Z]/g;function x(){for(var e=-1,t=v.keys(),n=0;n<t.length;n++)v.get(t[n]).value.backdrop&&(e=n);return-1<e&&e<b&&(e=b),e}function r(n,e){var r=v.get(n).value,i=r.appendTo;v.remove(n),($=v.top())&&(b=parseInt($.value.modalDomEl.attr("index"),10)),a(r.modalDomEl,r.modalScope,function(){var e=r.openedClass||m;y.remove(e,n);var t=y.hasKey(e);i.toggleClass(e,t),!t&&g&&g.heightOverflow&&g.scrollbarWidth&&(g.originalRight?i.css({paddingRight:g.originalRight+"px"}):i.css({paddingRight:""}),g=null),C(!0)},r.closedDeferred),function(){if(p&&-1===x()){a(p,h,function(){null}),h=p=void 0}}(),e&&e.focus?e.focus():i.focus&&i.focus()}function C(e){var t;0<v.length()&&(t=v.top().value).modalDomEl.toggleClass(t.windowTopClass||"",e)}function a(t,n,r,i){var e,a=null;return n.$broadcast(s.NOW_CLOSING_EVENT,function(){return e||(e=o.defer(),a=e.promise),function(){e.resolve()}}),o.when(a).then(function e(){if(e.done)return;e.done=!0;l.leave(t).then(function(){r&&r(),t.remove(),i&&i.resolve()});n.$destroy()})}function i(e){if(e.isDefaultPrevented())return e;var t=v.top();if(t)switch(e.which){case 27:t.value.keyboard&&(e.preventDefault(),d.$apply(function(){s.dismiss(t.key,"escape key press")}));break;case 9:var n=s.loadFocusElementList(t),r=!1;e.shiftKey?(s.isFocusInFirstItem(e,n)||s.isModalFocused(e,t))&&(r=s.focusLastFocusableElement(n)):s.isFocusInLastItem(e,n)&&(r=s.focusFirstFocusableElement(n)),r&&(e.preventDefault(),e.stopPropagation())}}function E(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}function T(){Array.prototype.forEach.call(document.querySelectorAll("["+w+"]"),function(e){var t=parseInt(e.getAttribute(w),10)-1;e.setAttribute(w,t),t||(e.removeAttribute(w),e.removeAttribute("aria-hidden"))})}return d.$watch(x,function(e){h&&(h.index=e)}),u.on("keydown",i),d.$on("$destroy",function(){u.off("keydown",i)}),s.open=function(e,t){var n=u[0].activeElement,r=t.openedClass||m;C(!1),$=v.top(),v.add(e,{deferred:t.deferred,renderDeferred:t.renderDeferred,closedDeferred:t.closedDeferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard,openedClass:t.openedClass,windowTopClass:t.windowTopClass,animation:t.animation,appendTo:t.appendTo}),y.put(r,e);var i,a=t.appendTo,o=x();0<=o&&!p&&((h=d.$new(!0)).modalOptions=t,h.index=o,(p=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>')).attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),t.backdropClass&&p.addClass(t.backdropClass),t.animation&&p.attr("modal-animation","true"),c(p)(h),l.enter(p,a),f.isScrollable(a)&&(g=f.scrollbarPadding(a)).heightOverflow&&g.scrollbarWidth&&a.css({paddingRight:g.right+"px"})),t.component?(i=document.createElement(t.component.name.replace(S,function(e,t){return(t?"-":"")+e.toLowerCase()})),(i=angular.element(i)).attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):i=t.content,b=$?parseInt($.value.modalDomEl.attr("index"),10)+1:0;var s=angular.element('<div uib-modal-window="modal-window"></div>');s.attr({class:"modal","template-url":t.windowTemplateUrl,"window-top-class":t.windowTopClass,role:"dialog","aria-labelledby":t.ariaLabelledBy,"aria-describedby":t.ariaDescribedBy,size:t.size,index:b,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(i),t.windowClass&&s.addClass(t.windowClass),t.animation&&s.attr("modal-animation","true"),a.addClass(r),t.scope&&(t.scope.$$topModalIndex=b),l.enter(c(s)(t.scope),a),v.top().value.modalDomEl=s,v.top().value.modalOpener=n,function e(t){if(!t||"BODY"===t[0].tagName)return;n(t).forEach(function(e){var t="true"===e.getAttribute("aria-hidden"),n=parseInt(e.getAttribute(w),10);n||(n=t?1:0),e.setAttribute(w,n+1),e.setAttribute("aria-hidden","true")});return e(t.parent());function n(t){var e=t.parent()?t.parent().children():[];return Array.prototype.filter.call(e,function(e){return e!==t[0]})}}(s)},s.close=function(e,t){var n=v.get(e);return T(),n&&E(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),r(e,n.value.modalOpener),!0):!n},s.dismiss=function(e,t){var n=v.get(e);return T(),n&&E(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),r(e,n.value.modalOpener),!0):!n},s.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},s.getTop=function(){return v.top()},s.modalRendered=function(e){var t=v.get(e);t&&t.value.renderDeferred.resolve()},s.focusFirstFocusableElement=function(e){return 0<e.length&&(e[0].focus(),!0)},s.focusLastFocusableElement=function(e){return 0<e.length&&(e[e.length-1].focus(),!0)},s.isModalFocused=function(e,t){if(e&&t){var n=t.value.modalDomEl;if(n&&n.length)return(e.target||e.srcElement)===n[0]}return!1},s.isFocusInFirstItem=function(e,t){return 0<t.length&&(e.target||e.srcElement)===t[0]},s.isFocusInLastItem=function(e,t){return 0<t.length&&(e.target||e.srcElement)===t[t.length-1]},s.loadFocusElementList=function(e){if(e){var t=e.value.modalDomEl;if(t&&t.length){var n=t[0].querySelectorAll("a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]");return n?Array.prototype.filter.call(n,function(e){return!!((t=e).offsetWidth||t.offsetHeight||t.getClientRects().length);var t}):n}}},s}]).provider("$uibModal",function(){var y={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(g,i,a,o,m,s,v){var e={};var l=null;return e.getPromiseChain=function(){return l},e.open=function(u){var e,t,n,c=i.defer(),d=i.defer(),f=i.defer(),p=i.defer(),h={result:c.promise,opened:d.promise,closed:f.promise,rendered:p.promise,close:function(e){return v.close(h,e)},dismiss:function(e){return v.dismiss(h,e)}};if((u=angular.extend({},y.options,u)).resolve=u.resolve||{},u.appendTo=u.appendTo||a.find("body").eq(0),!u.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!u.component&&!u.template&&!u.templateUrl)throw new Error("One of component or template or templateUrl options is required.");function r(){return e}return e=u.component?i.when(s.resolve(u.resolve,{},null,null)):i.all([(t=u,t.template?i.when(t.template):o(angular.isFunction(t.templateUrl)?t.templateUrl():t.templateUrl)),s.resolve(u.resolve,{},null,null)]),n=l=i.all([l]).then(r,r).then(function(a){var e=u.scope||g,o=e.$new();o.$close=h.close,o.$dismiss=h.dismiss,o.$on("$destroy",function(){o.$$uibDestructionScheduled||o.$dismiss("$uibUnscheduledDestruction")});var t,n,r={scope:o,deferred:c,renderDeferred:p,closedDeferred:f,animation:u.animation,backdrop:u.backdrop,keyboard:u.keyboard,backdropClass:u.backdropClass,windowTopClass:u.windowTopClass,windowClass:u.windowClass,windowTemplateUrl:u.windowTemplateUrl,ariaLabelledBy:u.ariaLabelledBy,ariaDescribedBy:u.ariaDescribedBy,size:u.size,openedClass:u.openedClass,appendTo:u.appendTo},i={},s={};function l(n,e,t,r){n.$scope=o,n.$scope.$resolve={},t?n.$scope.$uibModalInstance=h:n.$uibModalInstance=h;var i=e?a[1]:a;angular.forEach(i,function(e,t){r&&(n[t]=e),n.$scope.$resolve[t]=e})}u.component?(l(i,!1,!0,!1),i.name=u.component,r.component=i):u.controller&&(l(s,!0,!1,!0),n=m(u.controller,s,!0,u.controllerAs),u.controllerAs&&u.bindToController&&((t=n.instance).$close=o.$close,t.$dismiss=o.$dismiss,angular.extend(t,{$resolve:s.$scope.$resolve},e)),t=n(),angular.isFunction(t.$onInit)&&t.$onInit()),u.component||(r.content=a[0]),v.open(h,r),d.resolve(!0)},function(e){d.reject(e),c.reject(e)}).finally(function(){l===n&&(l=null)}),h},e}]};return y}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(e){return{create:function(n,r,i){n.setNumPages=i.numPages?e(i.numPages).assign:angular.noop,n.ngModelCtrl={$setViewValue:angular.noop},n._watchers=[],n.init=function(e,t){n.ngModelCtrl=e,n.config=t,e.$render=function(){n.render()},i.itemsPerPage?n._watchers.push(r.$parent.$watch(i.itemsPerPage,function(e){n.itemsPerPage=parseInt(e,10),r.totalPages=n.calculateTotalPages(),n.updatePage()})):n.itemsPerPage=t.itemsPerPage,r.$watch("totalItems",function(e,t){(angular.isDefined(e)||e!==t)&&(r.totalPages=n.calculateTotalPages(),n.updatePage())})},n.calculateTotalPages=function(){var e=n.itemsPerPage<1?1:Math.ceil(r.totalItems/n.itemsPerPage);return Math.max(e||0,1)},n.render=function(){r.page=parseInt(n.ngModelCtrl.$viewValue,10)||1},r.selectPage=function(e,t){t&&t.preventDefault(),(!r.ngDisabled||!t)&&r.page!==e&&0<e&&e<=r.totalPages&&(t&&t.target&&t.target.blur(),n.ngModelCtrl.$setViewValue(e),n.ngModelCtrl.$render())},r.getText=function(e){return r[e+"Text"]||n.config[e+"Text"]},r.noPrevious=function(){return 1===r.page},r.noNext=function(){return r.page===r.totalPages},n.updatePage=function(){n.setNumPages(r.$parent,r.totalPages),r.page>r.totalPages?r.selectPage(r.totalPages):n.ngModelCtrl.$render()},r.$on("$destroy",function(){for(;n._watchers.length;)n._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(e,t,n,r){e.align=angular.isDefined(t.align)?e.$parent.$eval(t.align):r.align,n.create(this,e,t)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(o){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(e,t){return t.templateUrl||"uib/template/pager/pager.html"},link:function(e,t,n,r){t.addClass("pager");var i=r[0],a=r[1];a&&i.init(a,o)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(t,n,e,r,i){var a=this,h=angular.isDefined(n.maxSize)?t.$parent.$eval(n.maxSize):i.maxSize,g=angular.isDefined(n.rotate)?t.$parent.$eval(n.rotate):i.rotate,m=angular.isDefined(n.forceEllipses)?t.$parent.$eval(n.forceEllipses):i.forceEllipses,v=angular.isDefined(n.boundaryLinkNumbers)?t.$parent.$eval(n.boundaryLinkNumbers):i.boundaryLinkNumbers,y=angular.isDefined(n.pageLabel)?function(e){return t.$parent.$eval(n.pageLabel,{$page:e})}:angular.identity;function b(e,t,n){return{number:e,text:t,active:n}}t.boundaryLinks=angular.isDefined(n.boundaryLinks)?t.$parent.$eval(n.boundaryLinks):i.boundaryLinks,t.directionLinks=angular.isDefined(n.directionLinks)?t.$parent.$eval(n.directionLinks):i.directionLinks,n.$set("role","menu"),r.create(this,t,n),n.maxSize&&a._watchers.push(t.$parent.$watch(e(n.maxSize),function(e){h=parseInt(e,10),a.render()}));var o=this.render;this.render=function(){o(),0<t.page&&t.page<=t.totalPages&&(t.pages=function(e,t){var n=[],r=1,i=t,a=angular.isDefined(h)&&h<t;a&&(g?t<(i=(r=Math.max(e-Math.floor(h/2),1))+h-1)&&(r=(i=t)-h+1):(r=(Math.ceil(e/h)-1)*h+1,i=Math.min(r+h-1,t)));for(var o=r;o<=i;o++){var s=b(o,y(o),o===e);n.push(s)}if(a&&0<h&&(!g||m||v)){if(1<r){if(!v||3<r){var l=b(r-1,"...",!1);n.unshift(l)}if(v){if(3===r){var u=b(2,"2",!1);n.unshift(u)}var c=b(1,"1",!1);n.unshift(c)}}if(i<t){if(!v||i<t-2){var d=b(i+1,"...",!1);n.push(d)}if(v){if(i===t-2){var f=b(t-1,t-1,!1);n.push(f)}var p=b(t,t,!1);n.push(p)}}}return n}(t.page,t.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(e,o){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"uib/template/pagination/pagination.html"},link:function(e,t,n,r){t.addClass("pagination");var i=r[0],a=r[1];a&&i.init(a,o)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){var s={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},l={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},u={};this.options=function(e){angular.extend(u,e)},this.setTriggers=function(e){angular.extend(l,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,a,V,W,q,o,t,G,n){var Y=n.createNew();function r(e){if(27===e.which){var t=Y.top();t&&(t.value.close(),t=null)}}return W.on("keyup",r),t.$on("$destroy",function(){W.off("keyup",r)}),function(z,U,r,B){function j(e){var t=(e||B.trigger||r).split(" "),n=t.map(function(e){return l[e]||e});return{show:t,hide:n}}B=angular.extend({},s,u,B);var e=z.replace(/[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()}),t=o.startSymbol(),n=o.endSymbol(),i="<div "+e+'-popup uib-title="'+t+"title"+n+'" '+(B.useContentExp?'content-exp="contentExp()" ':'content="'+t+"content"+n+'" ')+'origin-scope="origScope" class="uib-position-measure '+U+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(e,t){var F=a(i);return function(r,a,i,e){var o,t,n,s,l,u,c,d,f=!!angular.isDefined(B.appendToBody)&&B.appendToBody,p=j(void 0),h=angular.isDefined(i[U+"Enable"]),g=r.$new(!0),m=!1,v=!!angular.isDefined(i[U+"IsOpen"])&&G(i[U+"IsOpen"]),y=!!B.useContentExp&&G(i[z]),b=[],$=function(){o&&o.html()&&(u||(u=V(function(){var e=q.positionElements(a,o,g.placement,f),n=angular.isDefined(o.offsetHeight)?o.offsetHeight:o.prop("offsetHeight"),r=f?q.offset(a):q.position(a);o.css({top:e.top+"px",left:e.left+"px"});var i=e.placement.split("-");o.hasClass(i[0])||(o.removeClass(d.split("-")[0]),o.addClass(i[0])),o.hasClass(B.placementClassPrefix+e.placement)||(o.removeClass(B.placementClassPrefix+d),o.addClass(B.placementClassPrefix+e.placement)),c=V(function(){var e=angular.isDefined(o.offsetHeight)?o.offsetHeight:o.prop("offsetHeight"),t=q.adjustTop(i,r,n,e);t&&o.css(t),c=null},0,!1),o.hasClass("uib-position-measure")?(q.positionArrow(o,e.placement),o.removeClass("uib-position-measure")):d!==e.placement&&q.positionArrow(o,e.placement),d=e.placement,u=null},0,!1)))};function w(){g.isOpen?x():S()}function S(){h&&!r.$eval(i[U+"Enable"])||(D(),function(){g.title=i[U+"Title"],g.content=y?y(r):i[z];g.popupClass=i[U+"Class"],g.placement=angular.isDefined(i[U+"Placement"])?i[U+"Placement"]:B.placement;var e=q.parsePlacement(g.placement);d=e[1]?e[0]+"-"+e[1]:e[0];var t=parseInt(i[U+"PopupDelay"],10),n=parseInt(i[U+"PopupCloseDelay"],10);g.popupDelay=isNaN(t)?B.popupDelay:t,g.popupCloseDelay=isNaN(n)?B.popupCloseDelay:n}(),g.popupDelay?s||(s=V(C,g.popupDelay,!1)):C())}function x(){E(),g.popupCloseDelay?l||(l=V(T,g.popupCloseDelay,!1)):T()}function C(){if(E(),D(),!g.content)return angular.noop;!function(){if(o)return;t=g.$new(),o=F(t,function(e){f?W.find("body").append(e):a.after(e)}),Y.add(g,{close:T}),function(){b.length=0,y?(b.push(r.$watch(y,function(e){!(g.content=e)&&g.isOpen&&T()})),b.push(t.$watch(function(){m||(m=!0,t.$$postDigest(function(){m=!1,g&&g.isOpen&&$()}))}))):b.push(i.$observe(z,function(e){!(g.content=e)&&g.isOpen?T():$()}));b.push(i.$observe(U+"Title",function(e){g.title=e,g.isOpen&&$()})),b.push(i.$observe(U+"Placement",function(e){g.placement=e||B.placement,g.isOpen&&$()}))}()}(),g.$evalAsync(function(){R(g.isOpen=!0),$()})}function E(){s&&(V.cancel(s),s=null),u&&(V.cancel(u),u=null)}function T(){g&&g.$evalAsync(function(){g&&(R(g.isOpen=!1),g.animation?n||(n=V(k,150,!1)):k())})}function D(){l&&(V.cancel(l),l=null),n&&(V.cancel(n),n=null)}function k(){E(),D(),b.length&&(angular.forEach(b,function(e){e()}),b.length=0),o&&(o.remove(),o=null,c&&V.cancel(c)),Y.remove(g),t&&(t.$destroy(),t=null)}function R(e){v&&angular.isFunction(v.assign)&&v.assign(r,e)}function M(e){g&&g.isOpen&&o&&(a[0].contains(e.target)||o[0].contains(e.target)||x())}function A(e){27===e.which&&x()}g.origScope=r,g.isOpen=!1,g.contentExp=function(){return g.content},i.$observe("disabled",function(e){e&&E(),e&&g.isOpen&&T()}),v&&r.$watch(v,function(e){g&&!e===g.isOpen&&w()});var N,O,I,_=function(){p.show.forEach(function(e){"outsideClick"===e?a.off("click",w):(a.off(e,S),a.off(e,w)),a.off("keypress",A)}),p.hide.forEach(function(e){"outsideClick"===e?W.off("click",M):a.off(e,x)})};N=[],O=[],I=r.$eval(i[U+"Trigger"]),_(),"none"!==(p=angular.isObject(I)?(Object.keys(I).forEach(function(e){N.push(e),O.push(I[e])}),{show:N,hide:O}):j(I)).show&&p.show.forEach(function(e,t){"outsideClick"===e?(a.on("click",w),W.on("click",M)):e===p.hide[t]?a.on(e,w):e&&(a.on(e,S),a.on(p.hide[t],x)),a.on("keypress",A)});var P,H=r.$eval(i[U+"Animation"]);g.animation=angular.isDefined(H)?!!H:B.animation;var L=U+"AppendToBody";P=L in i&&void 0===i[L]||r.$eval(i[L]),f=angular.isDefined(P)?P:f,r.$on("$destroy",function(){_(),k(),g=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(d,r,f,p){return{link:function(e,a,t){var o,n,s,l=e.$eval(t.tooltipTemplateTranscludeScope),u=0,c=function(){n&&(n.remove(),n=null),o&&(o.$destroy(),o=null),s&&(d.leave(s).then(function(){n=null}),n=s,s=null)};e.$watch(r.parseAsResourceUrl(t.uibTooltipTemplateTransclude),function(r){var i=++u;r?(p(r,!0).then(function(e){if(i===u){var t=l.$new(),n=f(e)(t,function(e){c(),d.enter(e,a)});s=n,(o=t).$emit("$includeContentLoaded",r)}},function(){i===u&&(c(),e.$emit("$includeContentError",r))}),e.$emit("$includeContentRequested",r)):c()}),e.$on("$destroy",c)}}}]).directive("uibTooltipClasses",["$uibPosition",function(i){return{restrict:"A",link:function(e,t,n){if(e.placement){var r=i.parsePlacement(e.placement);t.addClass(r[0])}e.popupClass&&t.addClass(e.popupClass),e.animation&&t.addClass(n.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,n){var r=this,i=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;function a(){return angular.isDefined(e.maxParam)?e.maxParam:n.max}this.bars=[],e.max=a(),this.addBar=function(t,e,n){i||e.css({transition:"none"}),this.bars.push(t),t.max=a(),t.title=n&&angular.isDefined(n.title)?n.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){var e=r.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);100<e&&(t.percent-=e-100)},t.$on("$destroy",function(){e=null,r.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("maxParam",function(e){r.bars.forEach(function(e){e.max=a(),e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(e,t,n,r){r.addBar(e,t,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(e,t,n,r){r.addBar(e,angular.element(t.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(r,i,a){var o={$setViewValue:angular.noop},n=this;this.init=function(e){(o=e).$render=this.render,o.$formatters.push(function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e}),this.stateOn=angular.isDefined(i.stateOn)?r.$parent.$eval(i.stateOn):a.stateOn,this.stateOff=angular.isDefined(i.stateOff)?r.$parent.$eval(i.stateOff):a.stateOff,this.enableReset=angular.isDefined(i.enableReset)?r.$parent.$eval(i.enableReset):a.enableReset;var t=angular.isDefined(i.titles)?r.$parent.$eval(i.titles):a.titles;this.titles=angular.isArray(t)&&0<t.length?t:a.titles;var n=angular.isDefined(i.ratingStates)?r.$parent.$eval(i.ratingStates):new Array(angular.isDefined(i.max)?r.$parent.$eval(i.max):a.max);r.range=this.buildTemplateObjects(n)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;t<n;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(t)},e[t]);return e},this.getTitle=function(e){return e>=this.titles.length?e+1:this.titles[e]},r.rate=function(e){if(!r.readonly&&0<=e&&e<=r.range.length){var t=n.enableReset&&o.$viewValue===e?0:e;o.$setViewValue(t),o.$render()}},r.enter=function(e){r.readonly||(r.value=e),r.onHover({value:e})},r.reset=function(){r.value=o.$viewValue,r.onLeave()},r.onKeydown=function(e){/(37|38|39|40)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),r.rate(r.value+(38===e.which||39===e.which?1:-1)))},this.render=function(){r.value=o.$viewValue,r.title=n.getTitle(r.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(e,t,n,r){var i=r[0],a=r[1];i.init(a)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){var a,o,s=this;function l(e){for(var t=0;t<s.tabs.length;t++)if(s.tabs[t].index===e)return t}s.tabs=[],s.select=function(e,t){if(!o){var n=l(a),r=s.tabs[n];if(r){if(r.tab.onDeselect({$event:t,$selectedIndex:e}),t&&t.isDefaultPrevented())return;r.tab.active=!1}var i=s.tabs[e];i?(i.tab.onSelect({$event:t}),i.tab.active=!0,s.active=i.index,a=i.index):!i&&angular.isDefined(a)&&(s.active=null,a=null)}},s.addTab=function(e){if(s.tabs.push({tab:e,index:e.index}),s.tabs.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}),e.index===s.active||!angular.isDefined(s.active)&&1===s.tabs.length){var t=l(e.index);s.select(t)}},s.removeTab=function(e){for(var t,n=0;n<s.tabs.length;n++)if(s.tabs[n].tab===e){t=n;break}if(s.tabs[t].index===s.active){var r=t===s.tabs.length-1?t-1:t+1%s.tabs.length;s.select(r)}s.tabs.splice(t,1)},e.$watch("tabset.active",function(e){angular.isDefined(e)&&e!==a&&s.select(l(e))}),e.$on("$destroy",function(){o=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tabset.html"},link:function(e,t,n){e.vertical=!!angular.isDefined(n.vertical)&&e.$parent.$eval(n.vertical),e.justified=!!angular.isDefined(n.justified)&&e.$parent.$eval(n.justified)}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(r,e,t,i,n){r.disabled=!1,t.disable&&r.$parent.$watch(a(t.disable),function(e){r.disabled=!!e}),angular.isUndefined(t.index)&&(i.tabs&&i.tabs.length?r.index=Math.max.apply(null,i.tabs.map(function(e){return e.index}))+1:r.index=0),angular.isUndefined(t.classes)&&(r.classes=""),r.select=function(e){if(!r.disabled){for(var t,n=0;n<i.tabs.length;n++)if(i.tabs[n].tab===r){t=n;break}i.select(t,e)}},i.addTab(r),r.$on("$destroy",function(){i.removeTab(r)}),r.$transcludeFn=n}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){return{restrict:"A",require:"^uibTabset",link:function(e,n,t){var r=e.$eval(t.uibTabContentTransclude).tab;r.$transcludeFn(r.$parent,function(e){angular.forEach(e,function(e){var t;(t=e).tagName&&(t.hasAttribute("uib-tab-heading")||t.hasAttribute("data-uib-tab-heading")||t.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===t.tagName.toLowerCase()||"data-uib-tab-heading"===t.tagName.toLowerCase()||"x-uib-tab-heading"===t.tagName.toLowerCase()||"uib:tab-heading"===t.tagName.toLowerCase())?r.headingElement=e:n.append(e)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,e,o,t,n,r,s){var l,u,c,i=new Date,d=[],f={$setViewValue:angular.noop},p=angular.isDefined(o.meridians)?a.$parent.$eval(o.meridians):s.meridians||r.DATETIME_FORMATS.AMPMS,h=!angular.isDefined(o.padHours)||a.$parent.$eval(o.padHours);a.tabindex=angular.isDefined(o.tabindex)?o.tabindex:0,e.removeAttr("tabindex"),this.init=function(e,t){(f=e).$render=this.render,f.$formatters.unshift(function(e){return e?new Date(e):null});var n=t.eq(0),r=t.eq(1),i=t.eq(2);l=n.controller("ngModel"),u=r.controller("ngModel"),c=i.controller("ngModel"),(angular.isDefined(o.mousewheel)?a.$parent.$eval(o.mousewheel):s.mousewheel)&&this.setupMousewheelEvents(n,r,i),(angular.isDefined(o.arrowkeys)?a.$parent.$eval(o.arrowkeys):s.arrowkeys)&&this.setupArrowkeyEvents(n,r,i),a.readonlyInput=angular.isDefined(o.readonlyInput)?a.$parent.$eval(o.readonlyInput):s.readonlyInput,this.setupInputEvents(n,r,i)};var g=s.hourStep;o.hourStep&&d.push(a.$parent.$watch(t(o.hourStep),function(e){g=+e}));var m,v,y=s.minuteStep;o.minuteStep&&d.push(a.$parent.$watch(t(o.minuteStep),function(e){y=+e})),d.push(a.$parent.$watch(t(o.min),function(e){var t=new Date(e);m=isNaN(t)?void 0:t})),d.push(a.$parent.$watch(t(o.max),function(e){var t=new Date(e);v=isNaN(t)?void 0:t}));var b=!1;o.ngDisabled&&d.push(a.$parent.$watch(t(o.ngDisabled),function(e){b=e})),a.noIncrementHours=function(){var e=k(i,60*g);return b||v<e||e<i&&e<m},a.noDecrementHours=function(){var e=k(i,60*-g);return b||e<m||i<e&&v<e},a.noIncrementMinutes=function(){var e=k(i,y);return b||v<e||e<i&&e<m},a.noDecrementMinutes=function(){var e=k(i,-y);return b||e<m||i<e&&v<e},a.noIncrementSeconds=function(){var e=R(i,$);return b||v<e||e<i&&e<m},a.noDecrementSeconds=function(){var e=R(i,-$);return b||e<m||i<e&&v<e},a.noToggleMeridian=function(){return i.getHours()<12?b||k(i,720)>v:b||k(i,-720)<m};var $=s.secondStep;function w(){var e=+a.hours;if((a.showMeridian?0<e&&e<13:0<=e&&e<24)&&""!==a.hours)return a.showMeridian&&(12===e&&(e=0),a.meridian===p[1]&&(e+=12)),e}function S(){var e=+a.minutes;if(0<=e&&e<60&&""!==a.minutes)return e}function x(e,t){return null===e?"":angular.isDefined(e)&&e.toString().length<2&&!t?"0"+e:e.toString()}function C(e){E(),f.$setViewValue(new Date(i)),T(e)}function E(){l&&l.$setValidity("hours",!0),u&&u.$setValidity("minutes",!0),c&&c.$setValidity("seconds",!0),f.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1,a.invalidSeconds=!1}function T(e){if(f.$modelValue){var t=i.getHours(),n=i.getMinutes(),r=i.getSeconds();a.showMeridian&&(t=0===t||12===t?12:t%12),a.hours="h"===e?t:x(t,!h),"m"!==e&&(a.minutes=x(n)),a.meridian=i.getHours()<12?p[0]:p[1],"s"!==e&&(a.seconds=x(r)),a.meridian=i.getHours()<12?p[0]:p[1]}else a.hours=null,a.minutes=null,a.seconds=null,a.meridian=p[0]}function D(e){i=R(i,e),C()}function k(e,t){return R(e,60*t)}function R(e,t){var n=new Date(e.getTime()+1e3*t),r=new Date(e);return r.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),r}function M(){return(null===a.hours||""===a.hours)&&(null===a.minutes||""===a.minutes)&&(!a.showSeconds||a.showSeconds&&(null===a.seconds||""===a.seconds))}o.secondStep&&d.push(a.$parent.$watch(t(o.secondStep),function(e){$=+e})),a.showSeconds=s.showSeconds,o.showSeconds&&d.push(a.$parent.$watch(t(o.showSeconds),function(e){a.showSeconds=!!e})),a.showMeridian=s.showMeridian,o.showMeridian&&d.push(a.$parent.$watch(t(o.showMeridian),function(e){if(a.showMeridian=!!e,f.$error.time){var t=w(),n=S();angular.isDefined(t)&&angular.isDefined(n)&&(i.setHours(t),C())}else T()})),this.setupMousewheelEvents=function(e,t,n){var r=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||0<t};e.on("mousewheel wheel",function(e){b||a.$apply(r(e)?a.incrementHours():a.decrementHours()),e.preventDefault()}),t.on("mousewheel wheel",function(e){b||a.$apply(r(e)?a.incrementMinutes():a.decrementMinutes()),e.preventDefault()}),n.on("mousewheel wheel",function(e){b||a.$apply(r(e)?a.incrementSeconds():a.decrementSeconds()),e.preventDefault()})},this.setupArrowkeyEvents=function(e,t,n){e.on("keydown",function(e){b||(38===e.which?(e.preventDefault(),a.incrementHours(),a.$apply()):40===e.which&&(e.preventDefault(),a.decrementHours(),a.$apply()))}),t.on("keydown",function(e){b||(38===e.which?(e.preventDefault(),a.incrementMinutes(),a.$apply()):40===e.which&&(e.preventDefault(),a.decrementMinutes(),a.$apply()))}),n.on("keydown",function(e){b||(38===e.which?(e.preventDefault(),a.incrementSeconds(),a.$apply()):40===e.which&&(e.preventDefault(),a.decrementSeconds(),a.$apply()))})},this.setupInputEvents=function(e,t,n){if(a.readonlyInput)return a.updateHours=angular.noop,a.updateMinutes=angular.noop,void(a.updateSeconds=angular.noop);var r=function(e,t,n){f.$setViewValue(null),f.$setValidity("time",!1),angular.isDefined(e)&&(a.invalidHours=e,l&&l.$setValidity("hours",!1)),angular.isDefined(t)&&(a.invalidMinutes=t,u&&u.$setValidity("minutes",!1)),angular.isDefined(n)&&(a.invalidSeconds=n,c&&c.$setValidity("seconds",!1))};a.updateHours=function(){var e=w(),t=S();f.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(i.setHours(e),i.setMinutes(t),i<m||v<i?r(!0):C("h")):r(!0)},e.on("blur",function(e){f.$setTouched(),M()?E():null===a.hours||""===a.hours?r(!0):!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=x(a.hours,!h)})}),a.updateMinutes=function(){var e=S(),t=w();f.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(i.setHours(t),i.setMinutes(e),i<m||v<i?r(void 0,!0):C("m")):r(void 0,!0)},t.on("blur",function(e){f.$setTouched(),M()?E():null===a.minutes?r(void 0,!0):!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=x(a.minutes)})}),a.updateSeconds=function(){var e,t=0<=(e=+a.seconds)&&e<60?e:void 0;f.$setDirty(),angular.isDefined(t)?(i.setSeconds(t),C("s")):r(void 0,void 0,!0)},n.on("blur",function(e){M()?E():!a.invalidSeconds&&a.seconds<10&&a.$apply(function(){a.seconds=x(a.seconds)})})},this.render=function(){var e=f.$viewValue;isNaN(e)?(f.$setValidity("time",!1),n.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(i=e),i<m||v<i?(f.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):E(),T())},a.showSpinners=angular.isDefined(o.showSpinners)?a.$parent.$eval(o.showSpinners):s.showSpinners,a.incrementHours=function(){a.noIncrementHours()||D(60*g*60)},a.decrementHours=function(){a.noDecrementHours()||D(60*-g*60)},a.incrementMinutes=function(){a.noIncrementMinutes()||D(60*y)},a.decrementMinutes=function(){a.noDecrementMinutes()||D(60*-y)},a.incrementSeconds=function(){a.noIncrementSeconds()||D($)},a.decrementSeconds=function(){a.noDecrementSeconds()||D(-$)},a.toggleMeridian=function(){var e=S(),t=w();a.noToggleMeridian()||(angular.isDefined(e)&&angular.isDefined(t)?D(720*(i.getHours()<12?60:-60)):a.meridian=a.meridian===p[0]?p[1]:p[0])},a.blur=function(){f.$setTouched()},a.$on("$destroy",function(){for(;d.length;)d.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(n){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(e,t){return t.templateUrl||n.templateUrl},link:function(e,t,n,r){var i=r[0],a=r[1];a&&i.init(a,t.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(n){var r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(e){var t=e.match(r);if(!t)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+e+'".');return{itemName:t[3],source:n(t[4]),viewMapper:n(t[2]||t[1]),modelMapper:n(t[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(u,c,s,e,t,n,l,r,i,a,d,o,f){var p,h,g=[9,13,27,38,40],m=u.$eval(s.typeaheadMinLength);m||0===m||(m=1),u.$watch(s.typeaheadMinLength,function(e){m=e||0===e?e:1});var v=u.$eval(s.typeaheadWaitMs)||0,y=!1!==u.$eval(s.typeaheadEditable);u.$watch(s.typeaheadEditable,function(e){y=!1!==e});var b,$,w=t(s.typeaheadLoading).assign||angular.noop,S=s.typeaheadShouldSelect?t(s.typeaheadShouldSelect):function(e,t){var n=t.$event;return 13===n.which||9===n.which},x=t(s.typeaheadOnSelect),C=!!angular.isDefined(s.typeaheadSelectOnBlur)&&u.$eval(s.typeaheadSelectOnBlur),E=t(s.typeaheadNoResults).assign||angular.noop,T=s.typeaheadInputFormatter?t(s.typeaheadInputFormatter):void 0,D=!!s.typeaheadAppendToBody&&u.$eval(s.typeaheadAppendToBody),k=s.typeaheadAppendTo?u.$eval(s.typeaheadAppendTo):null,R=!1!==u.$eval(s.typeaheadFocusFirst),M=!!s.typeaheadSelectOnExact&&u.$eval(s.typeaheadSelectOnExact),A=t(s.typeaheadIsOpen).assign||angular.noop,N=u.$eval(s.typeaheadShowHint)||!1,O=t(s.ngModel),I=t(s.ngModel+"($$$p)"),_=f.parse(s.uibTypeahead),P=u.$new(),H=u.$on("$destroy",function(){P.$destroy()});P.$on("$destroy",H);var L,F,z="typeahead-"+P.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":z}),N&&((L=angular.element("<div></div>")).css("position","relative"),c.after(L),(F=c.clone()).attr("placeholder",""),F.attr("tabindex","-1"),F.val(""),F.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),c.css({position:"relative","vertical-align":"top","background-color":"transparent"}),F.attr("id")&&F.removeAttr("id"),L.append(F),F.after(c));var U=angular.element("<div uib-typeahead-popup></div>");U.attr({id:z,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(s.typeaheadTemplateUrl)&&U.attr("template-url",s.typeaheadTemplateUrl),angular.isDefined(s.typeaheadPopupTemplateUrl)&&U.attr("popup-template-url",s.typeaheadPopupTemplateUrl);var B=function(){P.matches=[],P.activeIdx=-1,c.attr("aria-expanded",!1),N&&F.val("")},j=function(e){return z+"-option-"+e};P.$watch("activeIdx",function(e){e<0?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",j(e))});var V=function(o,s){var l={$viewValue:o};w(u,!0),E(u,!1),n.when(_.source(u,l)).then(function(e){var t,n,r=o===p.$viewValue;if(r&&b)if(e&&0<e.length){P.activeIdx=R?0:-1,E(u,!1);for(var i=P.matches.length=0;i<e.length;i++)l[_.itemName]=e[i],P.matches.push({id:j(i),label:_.viewMapper(P,l),model:e[i]});if(P.query=o,Y(),c.attr("aria-expanded",!0),M&&1===P.matches.length&&(t=o,n=0,P.matches.length>n&&t&&t.toUpperCase()===P.matches[n].label.toUpperCase())&&(angular.isNumber(P.debounceUpdate)||angular.isObject(P.debounceUpdate)?d(function(){P.select(0,s)},angular.isNumber(P.debounceUpdate)?P.debounceUpdate:P.debounceUpdate.default):P.select(0,s)),N){var a=P.matches[0].label;angular.isString(o)&&0<o.length&&a.slice(0,o.length).toUpperCase()===o.toUpperCase()?F.val(o+a.slice(o.length)):F.val("")}}else B(),E(u,!0);r&&w(u,!1)},function(){B(),w(u,!1),E(u,!0)})};D&&(angular.element(i).on("resize",G),r.find("body").on("scroll",G));var W,q=d(function(){P.matches.length&&Y(),P.moveInProgress=!1},200);function G(){P.moveInProgress||(P.moveInProgress=!0,P.$digest()),q()}function Y(){P.position=D?o.offset(c):o.position(c),P.position.top+=c.prop("offsetHeight")}P.moveInProgress=!1,P.query=void 0;var K=function(){W&&l.cancel(W)};B(),P.assignIsOpen=function(e){A(u,e)},P.select=function(e,t){var n,r,i,a,o={};$=!0,o[_.itemName]=r=P.matches[e].model,n=_.modelMapper(u,o),i=u,a=n,angular.isFunction(O(u))&&h.getOption("getterSetter")?I(i,{$$$p:a}):O.assign(i,a),p.$setValidity("editable",!0),p.$setValidity("parse",!0),x(u,{$item:r,$model:n,$label:_.viewMapper(u,o),$event:t}),B(),!1!==P.$eval(s.typeaheadFocusOnSelect)&&l(function(){c[0].focus()},0,!1)},c.on("keydown",function(e){if(0!==P.matches.length&&-1!==g.indexOf(e.which)){var t,n=S(u,{$event:e});if(-1===P.activeIdx&&n||9===e.which&&e.shiftKey)return B(),void P.$digest();switch(e.preventDefault(),e.which){case 27:e.stopPropagation(),B(),u.$digest();break;case 38:P.activeIdx=(0<P.activeIdx?P.activeIdx:P.matches.length)-1,P.$digest(),(t=U[0].querySelectorAll(".uib-typeahead-match")[P.activeIdx]).parentNode.scrollTop=t.offsetTop;break;case 40:P.activeIdx=(P.activeIdx+1)%P.matches.length,P.$digest(),(t=U[0].querySelectorAll(".uib-typeahead-match")[P.activeIdx]).parentNode.scrollTop=t.offsetTop;break;default:n&&P.$apply(function(){angular.isNumber(P.debounceUpdate)||angular.isObject(P.debounceUpdate)?d(function(){P.select(P.activeIdx,e)},angular.isNumber(P.debounceUpdate)?P.debounceUpdate:P.debounceUpdate.default):P.select(P.activeIdx,e)})}}}),c.on("focus",function(e){b=!0,0!==m||p.$viewValue||l(function(){V(p.$viewValue,e)},0)}),c.on("blur",function(e){C&&P.matches.length&&-1!==P.activeIdx&&!$&&($=!0,P.$apply(function(){angular.isObject(P.debounceUpdate)&&angular.isNumber(P.debounceUpdate.blur)?d(function(){P.select(P.activeIdx,e)},P.debounceUpdate.blur):P.select(P.activeIdx,e)})),!y&&p.$error.editable&&(p.$setViewValue(),P.$apply(function(){p.$setValidity("editable",!0),p.$setValidity("parse",!0)}),c.val("")),$=b=!1});var X=function(e){c[0]!==e.target&&3!==e.which&&0!==P.matches.length&&(B(),a.$$phase||u.$digest())};r.on("click",X),u.$on("$destroy",function(){r.off("click",X),(D||k)&&Z.remove(),D&&(angular.element(i).off("resize",G),r.find("body").off("scroll",G)),U.remove(),N&&L.remove()});var Z=e(U)(P);D?r.find("body").append(Z):k?angular.element(k).eq(0).append(Z):c.after(Z),this.init=function(e){h=function(e){var t;angular.version.minor<6?(t=e.$options||{}).getOption=function(e){return t[e]}:t=e.$options;return t}(p=e),P.debounceUpdate=t(h.getOption("debounce"))(u),p.$parsers.unshift(function(e){var t;return b=!0,0===m||e&&e.length>=m?0<v?(K(),t=e,W=l(function(){V(t)},v)):V(e):(w(u,!1),K(),B()),y?e:e?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),null)}),p.$formatters.push(function(e){var t,n={};return y||p.$setValidity("editable",!0),T?(n.$model=e,T(u,n)):(n[_.itemName]=e,t=_.viewMapper(u,n),n[_.itemName]=void 0,t!==_.viewMapper(u,n)?t:e)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(e,t,n,r){r[1].init(r[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function(i){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(r,e,t){r.templateUrl=t.templateUrl,r.isOpen=function(){var e=0<r.matches.length;return r.assignIsOpen({isOpen:e}),e},r.isActive=function(e){return r.active===e},r.selectActive=function(e){r.active=e},r.selectMatch=function(e,t){var n=r.debounce();angular.isNumber(n)||angular.isObject(n)?i(function(){r.select({activeIdx:e,evt:t})},angular.isNumber(n)?n:n.default):r.select({activeIdx:e,evt:t})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(i,a,o){return{scope:{index:"=",match:"=",query:"="},link:function(n,r,e){var t=o(e.templateUrl)(n.$parent)||"uib/template/typeahead/typeahead-match.html";i(t).then(function(e){var t=angular.element(e.trim());r.replaceWith(t),a(t)(n)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(n,e,r){var i;return i=e.has("$sanitize"),function(e,t){return!i&&/<.*>/g.test(e)&&r.warn("Unsafe use of typeahead please use ngSanitize"),e=t?(""+e).replace(new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),"<strong>$&</strong>"):e,i||(e=n.trustAsHtml(e)),e}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(e){e.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,I,_){"use strict";var P,H=I.isDefined,m=I.isFunction,L=I.isString,F=I.isObject,z=I.isArray,U=I.forEach,B=I.extend,j=I.copy,h=I.toJson;function V(e,t){return B(new(B(function(){},{prototype:e})),t)}function w(n){return U(arguments,function(e){e!==n&&U(e,function(e,t){n.hasOwnProperty(t)||(n[t]=e)})}),n}function W(e){if(Object.keys)return Object.keys(e);var n=[];return U(e,function(e,t){n.push(t)}),n}function q(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for((r=r<0?Math.ceil(r):Math.floor(r))<0&&(r+=n);r<n;r++)if(r in e&&e[r]===t)return r;return-1}function G(e,t,n,r){var i,a=function(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}(n,r),o={},s=[];for(var l in a)if(a[l]&&a[l].params&&(i=W(a[l].params)).length)for(var u in i)0<=q(s,i[u])||(s.push(i[u]),o[i[u]]=e[i[u]]);return B({},o,t)}function Y(e,t){var n={};return U(e,function(e){n[e]=t[e]}),n}function K(t){var n={},e=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return U(e,function(e){e in t&&(n[e]=t[e])}),n}function S(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)-1==q(n,r)&&(t[r]=e[r]);return t}function C(e,n){var r=z(e),i=r?[]:{};return U(e,function(e,t){n(e,t)&&(i[r?i.length:t]=e)}),i}function X(e,n){var r=z(e)?[]:{};return U(e,function(e,t){r[t]=n(e,t)}),r}function n(e){return e.then(_,function(){})&&e}function t(v,y){var e={},s=[],b=e,$=B(v.when(e),{$$promises:e,$$values:e});this.study=function(i){if(!F(i))throw new Error("'invocables' must be an object");var h=W(i||{}),g=[],a=[],o={};function m(e){return F(e)&&e.then&&e.$$promises}return U(i,function t(e,n){if(2!==o[n]){if(a.push(n),1===o[n])throw a.splice(0,q(a,n)),new Error("Cyclic dependency: "+a.join(" -> "));if(o[n]=1,L(e))g.push(n,[function(){return y.get(e)}],s);else{var r=y.annotate(e);U(r,function(e){e!==n&&i.hasOwnProperty(e)&&t(i[e],e)}),g.push(n,e,r)}a.pop(),o[n]=2}}),i=a=o=null,function(s,e,l){if(m(s)&&l===_&&(l=e,e=s,s=null),s){if(!F(s))throw new Error("'locals' must be an object")}else s=b;if(e){if(!m(e))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else e=$;var t=v.defer(),u=t.promise,c=u.$$promises={},d=B({},s),n=1+g.length/3,r=!1;function f(){--n||(r||w(d,e.$$values),u.$$values=d,u.$$promises=u.$$promises||!0,delete u.$$inheritedValues,t.resolve(d))}function p(e){u.$$failure=e,t.reject(e)}if(H(e.$$failure))return p(e.$$failure),u;e.$$inheritedValues&&w(d,S(e.$$inheritedValues,h)),B(c,e.$$promises),e.$$values?(r=w(d,S(e.$$values,h)),u.$$inheritedValues=S(e.$$values,h),f()):(e.$$inheritedValues&&(u.$$inheritedValues=S(e.$$inheritedValues,h)),e.then(f,p));for(var i=0,a=g.length;i<a;i+=3)s.hasOwnProperty(g[i])?f():o(g[i],g[i+1],g[i+2]);function o(t,e,n){var r=v.defer(),i=0;function a(e){r.reject(e),p(e)}function o(){if(!H(u.$$failure))try{r.resolve(y.invoke(e,l,d)),r.promise.then(function(e){d[t]=e,f()},a)}catch(e){a(e)}}U(n,function(t){c.hasOwnProperty(t)&&!s.hasOwnProperty(t)&&(i++,c[t].then(function(e){d[t]=e,--i||o()},a))}),i||o(),c[t]=r.promise}return u}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function i(n,r,i,a){this.fromConfig=function(e,t,n){return H(e.template)?this.fromString(e.template,t):H(e.templateUrl)?this.fromUrl(e.templateUrl,t):H(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return m(e)?e(t):e},this.fromUrl=function(e,t){return m(e)&&(e=e(t)),null==e?null:a?n.get(e,{cache:r,headers:{Accept:"text/html"}}).then(function(e){return e.data}):i.get("$templateRequest")(e)},this.fromProvider=function(e,t,n){return i.invoke(e,null,n||{params:t})}}function u(s,l,e){l=B({params:{}},F(l)?l:{});var t,n,r,i,a=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,o=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u="^",c=0,d=this.segments=[],f=e?e.params:{},p=this.params=e?e.params.$$new():new P.ParamSet,h=[];function g(e,t,n,r){if(h.push(e),f[e])return f[e];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+s+"'");if(p[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+s+"'");return p[e]=new P.Param(e,t,n,r),p[e]}function m(e,t,n,r){var i=["",""],a=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return a;switch(n){case!1:i=["(",")"+(r?"?":"")];break;case!0:a=a.replace(/\/$/,""),i=["(?:/(",")|/)?"];break;default:i=["("+n+"|",")?"]}return a+i[0]+t+i[1]}function v(e,t){var n,r,i,a,o;return n=e[2]||e[3],o=l.params[n],i=s.substring(c,e.index),(r=t?e[4]:e[4]||("*"==e[1]?".*":null))&&(a=P.type(r)||V(P.type("string"),{pattern:new RegExp(r,l.caseInsensitive?"i":_)})),{id:n,regexp:r,segment:i,type:a,cfg:o}}for(this.source=s;(t=a.exec(s))&&!(0<=(n=v(t,!1)).segment.indexOf("?"));)r=g(n.id,n.type,n.cfg,"path"),u+=m(n.segment,r.type.pattern.source,r.squash,r.isOptional),d.push(n.segment),c=a.lastIndex;var y=(i=s.substring(c)).indexOf("?");if(0<=y){var b=this.sourceSearch=i.substring(y);if(i=i.substring(0,y),this.sourcePath=s.substring(0,c+y),0<b.length)for(c=0;t=o.exec(b);)r=g((n=v(t,!0)).id,n.type,n.cfg,"search"),c=a.lastIndex}else this.sourcePath=s,this.sourceSearch="";u+=m(i)+(!1===l.strict?"/?":"")+"$",d.push(i),this.regexp=new RegExp(u,l.caseInsensitive?"i":_),this.prefix=d[0],this.$$paramNames=h}function E(e){B(this,e)}function r(p,s){var l,u=[],h=null,g=!1;function c(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return!H(r)||r}function e(c,e,i,t,d){var a,f=t.baseHref(),n=c.url();function r(e){if(!e||!e.defaultPrevented){a&&c.url();a=_;var t,n=u.length;for(t=0;t<n;t++)if(r(u[t]))return;h&&r(h)}function r(e){var t=e(i,c);return!!t&&(L(t)&&c.replace().url(t),!0)}}function o(){return l=l||e.$on("$locationChangeSuccess",r)}return g||o(),{sync:function(){r()},listen:function(){return o()},update:function(e){e?n=c.url():c.url()!==n&&(c.url(n),c.replace())},push:function(e,t,n){var r=e.format(t||{});null!==r&&t&&t["#"]&&(r+="#"+t["#"]),c.url(r),a=n&&n.$$avoidResync?c.url():_,n&&n.replace&&c.replace()},href:function(e,t,n){if(!e.validates(t))return null;var r=p.html5Mode();I.isObject(r)&&(r=r.enabled),r=r&&d.history;var i,a,o,s=e.format(t);if(n=n||{},r||null===s||(s="#"+p.hashPrefix()+s),null!==s&&t&&t["#"]&&(s+="#"+t["#"]),i=s,a=r,o=n.absolute,s="/"===f?i:a?f.slice(0,-1)+i:o?f.slice(1)+i:i,!n.absolute||!s)return s;var l=!r&&s?"/":"",u=c.port();return u=80===u||443===u?"":":"+u,[c.protocol(),"://",c.host(),u,l,s].join("")}}}this.rule=function(e){if(!m(e))throw new Error("'rule' must be a function");return u.push(e),this},this.otherwise=function(e){if(L(e)){var t=e;e=function(){return t}}else if(!m(e))throw new Error("'rule' must be a function");return h=e,this},this.when=function(e,t){var i,a=L(t);if(L(e)&&(e=s.compile(e)),!a&&!m(t)&&!z(t))throw new Error("invalid 'handler' in when()");var n={matcher:function(n,r){return a&&(i=s.compile(r),r=["$match",function(e){return i.format(e)}]),B(function(e,t){return c(e,r,n.exec(t.path(),t.search()))},{prefix:L(n.prefix)?n.prefix:""})},regex:function(n,r){if(n.global||n.sticky)throw new Error("when() RegExp must not be global or sticky");return a&&(i=r,r=["$match",function(e){return n=e,i.replace(/\$(\$|\d{1,2})/,function(e,t){return n["$"===t?0:Number(t)]});var n}]),B(function(e,t){return c(e,r,n.exec(t.path()))},{prefix:(e=n,t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source),null!=t?t[1].replace(/\\(.)/g,"$1"):"")});var e,t}},r={matcher:s.isMatcher(e),regex:e instanceof RegExp};for(var o in r)if(r[o])return this.rule(n[o](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===_&&(e=!0),g=e},(this.$get=e).$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function a(o,r){var M,A,d={},s={},N="abstract",l={parent:function(e){if(H(e.parent)&&e.parent)return O(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?O(t[1]):M},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=V(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(L(t))return"^"==t.charAt(0)?r.compile(t.substring(1),n):(e.parent.navigable||M).url.concat(t,n);if(!t||r.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var n=e.url&&e.url.params||new P.ParamSet;return U(e.params||{},function(e,t){n[t]||(n[t]=new P.Param(t,null,e,"config"))}),n},params:function(e){var t=K(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?B(e.parent.params.$$new(),t):new P.ParamSet},views:function(n){var r={};return U(H(n.views)?n.views:{"":n},function(e,t){t.indexOf("@")<0&&(t+="@"+n.parent.name),e.resolveAs=e.resolveAs||n.resolveAs||"$resolve",r[t]=e}),r},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?B({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};function O(e,t){if(!e)return _;var n,r=L(e),i=r?e:e.name;if(0===(n=i).indexOf(".")||0===n.indexOf("^")){if(!t)throw new Error("No reference point given for path '"+i+"'");t=O(t);for(var a=i.split("."),o=0,s=a.length,l=t;o<s;o++)if(""!==a[o]||0!==o){if("^"!==a[o])break;if(!l.parent)throw new Error("Path '"+i+"' not valid for state '"+t.name+"'");l=l.parent}else l=t;a=a.slice(o).join("."),i=l.name+(l.name&&a?".":"")+a}var u=d[i];return!u||!r&&(r||u!==e&&u.self!==e)?_:u}function u(n){var e=(n=V(n,{self:n,resolve:n.resolve||{},toString:function(){return this.name}})).name;if(!L(e)||0<=e.indexOf("@"))throw new Error("State must have a valid name");if(d.hasOwnProperty(e))throw new Error("State '"+e+"' is already defined");var t,r,i=-1!==e.indexOf(".")?e.substring(0,e.lastIndexOf(".")):L(n.parent)?n.parent:F(n.parent)&&L(n.parent.name)?n.parent.name:"";if(i&&!d[i])return t=i,r=n.self,s[t]||(s[t]=[]),void s[t].push(r);for(var a in l)m(l[a])&&(n[a]=l[a](n,l.$delegates[a]));return!(d[e]=n)[N]&&n.url&&o.when(n.url,["$match","$stateParams",function(e,t){A.$current.navigable==n&&function(e,t,n){if(!n)for(var r in n=[],e)n.push(r);for(var i=0;i<n.length;i++){var a=n[i];if(e[a]!=t[a])return!1}return!0}(e,t)||A.transitionTo(n,e,{inherit:!0,location:!1})}]),function(e){for(var t=s[e]||[];t.length;)u(t.shift())}(e),n}function e(b,$,u,w,c,S,x,e,t){var C=new Error("transition superseded"),E=n($.reject(C)),T=n($.reject(new Error("transition prevented"))),D=n($.reject(new Error("transition aborted"))),k=n($.reject(new Error("transition failed")));function R(a,e,t,n,o,s){var l=t?e:Y(a.params.$$keys(),e),r={$stateParams:l};o.resolve=c.resolve(a.resolve,r,o.resolve,a);var i=[o.resolve.then(function(e){o.globals=e})];return n&&i.push(n),$.all(i).then(function(){var e=[];return U(a.views,function(n,r){var i=n.resolve&&n.resolve!==a.resolve?n.resolve:{};i.$template=[function(){return u.load(r,{view:n,locals:o.globals,params:l,notify:s.notify})||""}],e.push(c.resolve(i,o.globals,o.resolve,a).then(function(e){if(m(n.controllerProvider)||z(n.controllerProvider)){var t=I.extend({},i,o.globals);e.$$controller=w.invoke(n.controllerProvider,null,t)}else e.$$controller=n.controller;e.$$state=a,e.$$controllerAs=n.controllerAs,e.$$resolveAs=n.resolveAs,o[r]=e}))}),$.all(e).then(function(){return o.globals})}).then(function(e){return o})}return M.locals={resolve:null,globals:{$stateParams:{}}},(A={params:{},current:M.self,$current:M,transition:null,reload:function(e){return A.transitionTo(A.current,S,{reload:e||!0,inherit:!1,notify:!0})},go:function(e,t,n){return A.transitionTo(e,t,B({inherit:!0,relative:A.$current},n))}}).transitionTo=function(r,i,a){i=i||{},a=B({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},a||{});var o=A.$current,s=A.params,l=o.path,e=O(r,a.relative),t=i["#"];if(!H(e)){var n={to:r,toParams:i,options:a},u=function(e,t,n,r){var i=b.$broadcast("$stateNotFound",e,t,n);if(i.defaultPrevented)return x.update(),D;if(!i.retry)return null;if(r.$retry)return x.update(),k;var a=A.transition=$.when(i.retry);return a.then(function(){return a!==A.transition?(b.$broadcast("$stateChangeCancel",e.to,e.toParams,t,n),E):(e.options.$retry=!0,A.transitionTo(e.to,e.toParams,e.options))},function(){return D}),x.update(),a}(n,o.self,s,a);if(u)return u;if(i=n.toParams,e=O(r=n.to,(a=n.options).relative),!H(e)){if(!a.relative)throw new Error("No such state '"+r+"'");throw new Error("Could not resolve '"+r+"' from state '"+a.relative+"'")}}if(e[N])throw new Error("Cannot transition to abstract state '"+r+"'");if(a.inherit&&(i=G(S,i||{},A.$current,e)),!e.params.$$validates(i))return k;i=e.params.$$values(i);var c=(r=e).path,d=0,f=c[d],p=M.locals,h=[];if(a.reload){if(L(a.reload)||F(a.reload)){if(F(a.reload)&&!a.reload.name)throw new Error("Invalid reload state object");var g=!0===a.reload?l[0]:O(a.reload);if(a.reload&&!g)throw new Error("No such reload state '"+(L(a.reload)?a.reload:a.reload.name)+"'");for(;f&&f===l[d]&&f!==g;)p=h[d]=f.locals,f=c[++d]}}else for(;f&&f===l[d]&&f.ownParams.$$equals(i,s);)p=h[d]=f.locals,f=c[++d];if(function(e,t,n,r,i,a){if(!a.reload&&e===n&&(i===n.locals||!1===e.self.reloadOnSearch&&function(t,e,n){function r(e){return"search"!=t.params[e].location}var i=t.params.$$keys().filter(r),a=K.apply({},[t.params].concat(i));return new P.ParamSet(a).$$equals(e,n)}(n,r,t)))return!0}(r,i,o,s,p,a))return t&&(i["#"]=t),A.params=i,j(A.params,S),j(Y(r.params.$$keys(),S),r.locals.globals.$stateParams),a.location&&r.navigable&&r.navigable.url&&(x.push(r.navigable.url,i,{$$avoidResync:!0,replace:"replace"===a.location}),x.update(!0)),A.transition=null,$.when(A.current);if(i=Y(r.params.$$keys(),i||{}),t&&(i["#"]=t),a.notify&&b.$broadcast("$stateChangeStart",r.self,i,o.self,s,a).defaultPrevented)return b.$broadcast("$stateChangeCancel",r.self,i,o.self,s),null==A.transition&&x.update(),T;for(var m=$.when(p),v=d;v<c.length;f=c[++v])p=h[v]=V(p),m=R(f,i,f===r,m,p,a);var y=A.transition=m.then(function(){var e,t,n;if(A.transition!==y)return b.$broadcast("$stateChangeCancel",r.self,i,o.self,s),E;for(e=l.length-1;d<=e;e--)(n=l[e]).self.onExit&&w.invoke(n.self.onExit,n.self,n.locals.globals),n.locals=null;for(e=d;e<c.length;e++)(t=c[e]).locals=h[e],t.self.onEnter&&w.invoke(t.self.onEnter,t.self,t.locals.globals);return A.transition!==y?(b.$broadcast("$stateChangeCancel",r.self,i,o.self,s),E):(A.$current=r,A.current=r.self,A.params=i,j(A.params,S),A.transition=null,a.location&&r.navigable&&x.push(r.navigable.url,r.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===a.location}),a.notify&&b.$broadcast("$stateChangeSuccess",r.self,i,o.self,s),x.update(!0),A.current)}).then(null,function(e){return e===C?E:A.transition!==y?(b.$broadcast("$stateChangeCancel",r.self,i,o.self,s),E):(A.transition=null,b.$broadcast("$stateChangeError",r.self,i,o.self,s,e).defaultPrevented||x.update(),$.reject(e))});return y.catch(I.noop),y},A.is=function(e,r,t){var i=O(e,(t=B({relative:A.$current},t||{})).relative);return H(i)?A.$current===i&&(!r||W(r).reduce(function(e,t){var n=i.params[t];return e&&!n||n.type.equals(S[t],r[t])},!0)):_},A.includes=function(e,r,t){if(t=B({relative:A.$current},t||{}),L(e)&&-1<e.indexOf("*")){if(!function(e){for(var t=e.split("."),n=A.$current.name.split("."),r=0,i=t.length;r<i;r++)"*"===t[r]&&(n[r]="*");return"**"===t[0]&&(n=n.slice(q(n,t[1]))).unshift("**"),"**"===t[t.length-1]&&(n.splice(q(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length==n.length&&n.join("")===t.join("")}(e))return!1;e=A.$current.name}var i=O(e,t.relative);if(!H(i))return _;if(!H(A.$current.includes[i.name]))return!1;if(!r)return!0;for(var n=W(r),a=0;a<n.length;a++){var o=n[a],s=i.params[o];if(s&&!s.type.equals(S[o],r[o]))return!1}return W(r).reduce(function(e,t){var n=i.params[t];return e&&!n||n.type.equals(S[t],r[t])},!0)},A.href=function(e,t,n){var r=O(e,(n=B({lossy:!0,inherit:!0,absolute:!1,relative:A.$current},n||{})).relative);if(!H(r))return null;n.inherit&&(t=G(S,t||{},A.$current,r));var i=r&&n.lossy?r.navigable:r;return i&&i.url!==_&&null!==i.url?x.href(i.url,Y(r.params.$$keys().concat("#"),t||{}),{absolute:n.absolute}):null},A.get=function(e,t){if(0===arguments.length)return X(W(d),function(e){return d[e].self});var n=O(e,t||A.$current);return n&&n.self?n.self:null},A}(M=u({name:"",url:"^",views:null,abstract:!0})).navigable=null,this.decorator=function(e,t){if(L(e)&&!H(t))return l[e];if(!m(t)||!L(e))return this;l[e]&&!l.$delegates[e]&&(l.$delegates[e]=l[e]);return l[e]=t,this},this.state=function(e,t){F(e)?t=e:t.name=e;return u(t),this},(this.$get=e).$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function o(){function e(e,r){return{load:function(e,t){var n;return(t=B({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},t)).view&&(n=r.fromConfig(t.view,t.params,t.locals)),n}}}(this.$get=e).$inject=["$rootScope","$templateFactory"]}function s(g,t,m,v,y){var e=t.has?function(e){return t.has(e)?t.get(e):null}:function(e){try{return t.get(e)}catch(e){return null}},n=e("$animator"),b=e("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(e,t,h){return function(i,a,o){var s,l,u,c,d=o.onload||"",f=o.autoscroll,p=function(e,t){if(b)return{enter:function(e,t,n){2<I.version.minor?b.enter(e,null,t).then(n):b.enter(e,null,t,n)},leave:function(e,t){2<I.version.minor?b.leave(e).then(t):b.leave(e,t)}};if(n){var r=n&&n(t,e);return{enter:function(e,t,n){r.enter(e,null,t),n()},leave:function(e,t){r.leave(e),t()}}}return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}}(o,i);a.inheritedData("$uiView");function e(e){var t,n=$(i,o,a,v),r=n&&g.$current&&g.$current.locals[n];(e||r!==c)&&(t=i.$new(),c=g.$current.locals[n],t.$emit("$viewContentLoading",n),l=h(t,function(e){var t=y.defer(),n=y.defer(),r={$animEnter:t.promise,$animLeave:n.promise,$$animLeave:n};e.data("$uiViewAnim",r),p.enter(e,a,function(){t.resolve(),u&&u.$emit("$viewContentAnimationEnded"),(I.isDefined(f)&&!f||i.$eval(f))&&m(e)}),function(){if(s&&(s.remove(),s=null),u&&(u.$destroy(),u=null),l){var e=l.data("$uiViewAnim");p.leave(l,function(){e.$$animLeave.resolve(),s=null}),s=l,l=null}}()}),(u=t).$emit("$viewContentLoaded",n),u.$eval(d))}i.$on("$stateChangeSuccess",function(){e(!1)}),e(!0)}}}}function l(c,d,f,p){return{restrict:"ECA",priority:-400,compile:function(e){var u=e.html();return e.empty?e.empty():e[0].innerHTML=null,function(e,t,n){var r=f.$current,i=$(e,n,t,p),a=r&&r.locals[i];if(!a)return t.html(u),void c(t.contents())(e);t.data("$uiView",{name:i,state:a.$$state}),t.html(a.$template?a.$template:u);var o=I.extend({},a);e[a.$$resolveAs]=o;var s=c(t.contents());if(a.$$controller){a.$scope=e,a.$element=t;var l=d(a.$$controller,a);a.$$controllerAs&&(e[a.$$controllerAs]=l,e[a.$$controllerAs][a.$$resolveAs]=o),m(l.$onInit)&&l.$onInit(),t.data("$ngControllerController",l),t.children().data("$ngControllerController",l)}s(e)}}}}function $(e,t,n,r){var i=r(t.uiView||t.name||"")(e),a=n.inheritedData("$uiView");return 0<=i.indexOf("@")?i:i+"@"+(a?a.state.name:"")}function g(e,t){var n,r=e.match(/^\s*({[^}]*})\s*$/);if(r&&(e=t+"("+r[1]+")"),!(n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function v(e){var t=e.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function y(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),n="FORM"===e[0].nodeName;return{attr:n?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!n}}function b(a,o,s,l,u){return function(e){var t=e.which||e.button,n=u();if(!(1<t||e.ctrlKey||e.metaKey||e.shiftKey||a.attr("target"))){var r=s(function(){o.go(n.state,n.params,n.options)});e.preventDefault();var i=l.isAnchor&&!n.href?1:0;e.preventDefault=function(){i--<=0&&s.cancel(r)}}}}function c(f,p){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,t,n,r){var i,a,o=g(n.uiSref,f.current.name),s={state:o.state,href:null,params:null},l=y(t),u=r[1]||r[0],c=null;s.options=B((a=f,{relative:v(t)||a.$current,inherit:!0}),n.uiSrefOpts?e.$eval(n.uiSrefOpts):{});var d=function(e){e&&(s.params=I.copy(e)),s.href=f.href(o.state,s.params,s.options),c&&c(),u&&(c=u.$$addStateInfo(o.state,s.params)),null!==s.href&&n.$set(l.attr,s.href)};o.paramExpr&&(e.$watch(o.paramExpr,function(e){e!==s.params&&d(e)},!0),s.params=I.copy(e.$eval(o.paramExpr))),d(),l.clickable&&(i=b(t,f,p,l,function(){return s}),t[t.on?"on":"bind"]("click",i),e.$on("$destroy",function(){t[t.off?"off":"unbind"]("click",i)}))}}}function d(d,f){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,t,n,r){var i,a=y(t),o=r[1]||r[0],s="["+[n.uiState,n.uiStateParams||null,n.uiStateOpts||null].map(function(e){return e||"null"}).join(", ")+"]",l={state:null,params:null,options:null,href:null},u=null;function c(e){l.state=e[0],l.params=e[1],l.options=e[2],l.href=d.href(l.state,l.params,l.options),u&&u(),o&&(u=o.$$addStateInfo(l.state,l.params)),l.href&&n.$set(a.attr,l.href)}e.$watch(s,c,!0),c(e.$eval(s)),a.clickable&&(i=b(t,d,f,a,function(){return l}),t[t.on?"on":"bind"]("click",i),e.$on("$destroy",function(){t[t.off?"off":"unbind"]("click",i)}))}}}function f(p,e,t){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(o,s,e,n){var a,r,l=[],u={};a=t(e.uiSrefActiveEq||"",!1)(o);try{r=o.$eval(e.uiSrefActive)}catch(e){}function i(e,t,n){var r=p.get(e,v(s)),i=function(e,t){if(!L(e))throw new Error("state should be a string");if(F(t))return e+h(t);if(t=o.$eval(t),F(t))return e+h(t);return e}(e,t),a={state:r||{name:e},params:t,hash:i};return l.push(a),u[i]=n,function(){var e=l.indexOf(a);-1!==e&&l.splice(e,1)}}function c(){for(var e=0;e<l.length;e++)r=l[e].state,i=l[e].params,p.includes(r.name,i)?d(s,u[l[e].hash]):f(s,u[l[e].hash]),t=l[e].state,n=l[e].params,p.is(t.name,n)?d(s,a):f(s,a);var t,n,r,i}function d(e,t){n(function(){e.addClass(t)})}function f(e,t){e.removeClass(t)}r=r||t(e.uiSrefActive||"",!1)(o),F(r)&&U(r,function(e,t){if(L(e)){var n=g(e,p.current.name);i(n.state,o.$eval(n.paramExpr),t)}}),this.$$addStateInfo=function(e,t){if(!(F(r)&&0<l.length)){var n=i(e,t,r);return c(),n}},o.$on("$stateChangeSuccess",c),c()}]}}function p(n){var e=function(e,t){return n.is(e,t)};return e.$stateful=!0,e}function x(r){var e=function(e,t,n){return r.includes(e,t,n)};return e.$stateful=!0,e}I.module("ui.router.util",["ng"]),I.module("ui.router.router",["ui.router.util"]),I.module("ui.router.state",["ui.router.router","ui.router.util"]),I.module("ui.router",["ui.router.state"]),I.module("ui.router.compat",["ui.router"]),t.$inject=["$q","$injector"],I.module("ui.router.util").service("$resolve",t),I.module("ui.router.util").provider("$templateFactory",function(){var r=I.version.minor<3;this.shouldUnsafelyUseHttp=function(e){r=!!e},this.$get=["$http","$templateCache","$injector",function(e,t,n){return new i(e,t,n,r)}]}),u.prototype.concat=function(e,t){var n={caseInsensitive:P.caseInsensitive(),strict:P.strictMode(),squash:P.defaultSquashPolicy()};return new u(this.sourcePath+e+this.sourceSearch,B(n,t),this)},u.prototype.toString=function(){return this.source},u.prototype.exec=function(e,t){var n=this.regexp.exec(e);if(!n)return null;t=t||{};var r,i,a,o,s,l=this.parameters(),u=l.length,c=this.segments.length-1,d={};if(c!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");function f(e){function t(e){return e.split("").reverse().join("")}return X(X(t(e).split(/-(?!\\)/),t),function(e){return e.replace(/\\-/g,"-")}).reverse()}for(r=0;r<c;r++){for(a=l[r],o=this.params[a],s=n[r+1],i=0;i<o.replace.length;i++)o.replace[i].from===s&&(s=o.replace[i].to);s&&!0===o.array&&(s=f(s)),H(s)&&(s=o.type.decode(s)),d[a]=o.value(s)}for(;r<u;r++){for(d[a=l[r]]=this.params[a].value(t[a]),o=this.params[a],s=t[a],i=0;i<o.replace.length;i++)o.replace[i].from===s&&(s=o.replace[i].to);H(s)&&(s=o.type.decode(s)),d[a]=o.value(s)}return d},u.prototype.parameters=function(e){return H(e)?this.params[e]||null:this.$$paramNames},u.prototype.validates=function(e){return this.params.$$validates(e)},u.prototype.format=function(e){e=e||{};var t=this.segments,n=this.parameters(),r=this.params;if(!this.validates(e))return null;var i,a=!1,o=t.length-1,s=n.length,l=t[0];function u(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}for(i=0;i<s;i++){var c=i<o,d=n[i],f=r[d],p=f.value(e[d]),h=f.isOptional&&f.type.equals(f.value(),p),g=!!h&&f.squash,m=f.type.encode(p);if(c){var v=t[i+1],y=i+1===o;if(!1===g)null!=m&&(z(m)?l+=X(m,u).join("-"):l+=encodeURIComponent(m)),l+=v;else if(!0===g){var b=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=v.match(b)[1]}else L(g)&&(l+=g+v);y&&!0===f.squash&&"/"===l.slice(-1)&&(l=l.slice(0,-1))}else{if(null==m||h&&!1!==g)continue;if(z(m)||(m=[m]),0===m.length)continue;l+=(a?"&":"?")+d+"="+(m=X(m,encodeURIComponent).join("&"+d+"=")),a=!0}}return l},E.prototype.is=function(e,t){return!0},E.prototype.encode=function(e,t){return e},E.prototype.decode=function(e,t){return e},E.prototype.equals=function(e,t){return e==t},E.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},E.prototype.pattern=/.*/,E.prototype.toString=function(){return"{Type:"+this.name+"}"},E.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},E.prototype.$asArray=function(e,t){if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new function(e,i){function t(e,t){return function(){return e[t].apply(e,arguments)}}function a(e){return z(e)?e:H(e)?[e]:[]}function o(e){return!e}function n(n,r){return function(e){if(z(e)&&0===e.length)return e;var t=X(e=a(e),n);return!0===r?0===C(t,o).length:function(e){switch(e.length){case 0:return _;case 1:return"auto"===i?e[0]:e;default:return e}}(t)}}var s;this.encode=n(t(e,"encode")),this.decode=n(t(e,"decode")),this.is=n(t(e,"is"),!0),this.equals=(s=t(e,"equals"),function(e,t){var n=a(e),r=a(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!s(n[i],r[i]))return!1;return!0}),this.pattern=e.pattern,this.$normalize=n(t(e,"$normalize")),this.name=e.name,this.$arrayMode=i}(this,e)},I.module("ui.router.util").provider("$urlMatcherFactory",function e(){P=this;var n=!1,r=!0,$=!1;function t(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e}var w,S={},i=!0,a=[],o={string:{encode:t,decode:function(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e},is:function(e){return null==e||!H(e)||"string"==typeof e},pattern:/[^/]*/},int:{encode:t,decode:function(e){return parseInt(e,10)},is:function(e){return e!==_&&null!==e&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return!0===e||!1===e},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):_},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):_},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:I.toJson,decode:I.fromJson,is:I.isObject,equals:I.equals,pattern:/[^/]*/},any:{encode:I.identity,decode:I.identity,equals:I.equals,pattern:/.*/}};function x(e){return m(e)||z(e)&&m(e[e.length-1])}function s(){for(;a.length;){var e=a.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");I.extend(S[e.name],w.invoke(e.def))}}function l(e){B(this,e||{})}e.$$getDefaultValue=function(e){if(!x(e.value))return e.value;if(!w)throw new Error("Injectable functions cannot be called at configuration time");return w.invoke(e.value)},this.caseInsensitive=function(e){return H(e)&&(n=e),n},this.strictMode=function(e){return H(e)&&(r=e),r},this.defaultSquashPolicy=function(e){if(!H(e))return $;if(!0!==e&&!1!==e&&!L(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return $=e},this.compile=function(e,t){return new u(e,B({strict:r,caseInsensitive:n},t))},this.isMatcher=function(n){if(!F(n))return!1;var r=!0;return U(u.prototype,function(e,t){m(e)&&(r=r&&H(n[t])&&m(n[t]))}),r},this.type=function(e,t,n){if(!H(t))return S[e];if(S.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return S[e]=new E(B({name:e},t)),n&&(a.push({name:e,def:n}),i||s()),this},U(o,function(e,t){S[t]=new E(B({name:t},e))}),S=V(S,{}),this.$get=["$injector",function(e){return w=e,i=!1,s(),U(o,function(e,t){S[t]||(S[t]=new E(e))}),this}],this.Param=function(r,e,i,t){var n,a,o=this;-1===q(a=F(n=i)?W(n):[],"value")&&-1===q(a,"type")&&-1===q(a,"squash")&&-1===q(a,"array")&&(n={value:n}),n.$$fn=x(n.value)?n.value:function(){return n.value},e=function(e,t,n){if(e.type&&t)throw new Error("Param '"+r+"' has two type configurations.");return t||(e.type?I.isString(e.type)?S[e.type]:e.type instanceof E?e.type:new E(e.type):"config"===n?S.any:S.string)}(i=n,e,t);var s,l,u=(s={array:"search"===t&&"auto"},l=r.match(/\[\]$/)?{array:!0}:{},B(s,l,i).array);"string"!==(e=u?e.$asArray(u,"search"===t):e).name||u||"path"!==t||i.value!==_||(i.value="");var c,d,f,p,h,g,m,v=i.value!==_,y=function(e,t){var n=e.squash;if(!t||!1===n)return!1;if(!H(n)||null==n)return $;if(!0===n||L(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}(i,v),b=(d=u,p=y,m=[{from:"",to:(f=v)||d?_:""},{from:null,to:f||d?_:""}],h=z((c=i).replace)?c.replace:[],L(p)&&h.push({from:p,to:_}),g=X(h,function(e){return e.from}),C(m,function(e){return-1===q(g,e.from)}).concat(h));B(this,{id:r,type:e,location:t,array:u,squash:y,replace:b,isOptional:v,value:function(e){var t,n,r;return t=e,e=(r=X(C(o.replace,(n=t,function(e){return e.from===n})),function(e){return e.to})).length?r[0]:t,H(e)?o.type.$normalize(e):function(){if(!w)throw new Error("Injectable functions cannot be called at configuration time");var e=w.invoke(i.$$fn);if(null!==e&&e!==_&&!o.type.is(e))throw new Error("Default value ("+e+") for parameter '"+o.id+"' is not an instance of Type ("+o.type.name+")");return e}()},dynamic:_,config:i,toString:function(){return"{Param:"+r+" "+e+" squash: '"+y+"' optional: "+v+"}"}})},l.prototype={$$new:function(){return V(this,B(new l,{$$parent:this}))},$$keys:function(){for(var t=[],e=[],n=this,r=W(l.prototype);n;)e.push(n),n=n.$$parent;return e.reverse(),U(e,function(e){U(W(e),function(e){-1===q(t,e)&&-1===q(r,e)&&t.push(e)})}),t},$$values:function(t){var n={},r=this;return U(r.$$keys(),function(e){n[e]=r[e].value(t&&t[e])}),n},$$equals:function(r,i){var a=!0,o=this;return U(o.$$keys(),function(e){var t=r&&r[e],n=i&&i[e];o[e].type.equals(t,n)||(a=!1)}),a},$$validates:function(e){var t,n,r,i,a,o=this.$$keys();for(t=0;t<o.length&&(n=this[o[t]],(r=e[o[t]])!==_&&null!==r||!n.isOptional);t++){if(i=n.type.$normalize(r),!n.type.is(i))return!1;if(a=n.type.encode(i),I.isString(a)&&!n.type.pattern.exec(a))return!1}return!0},$$parent:_},this.ParamSet=l}),I.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),r.$inject=["$locationProvider","$urlMatcherFactoryProvider"],I.module("ui.router.router").provider("$urlRouter",r),a.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],I.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",a).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]),o.$inject=[],I.module("ui.router.state").provider("$view",o),I.module("ui.router.state").provider("$uiViewScroll",function(){var n=!1;this.useAnchorScroll=function(){n=!0},this.$get=["$anchorScroll","$timeout",function(e,t){return n?e:function(e){return t(function(){e[0].scrollIntoView()},0,!1)}}]}),s.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],l.$inject=["$compile","$controller","$state","$interpolate"],I.module("ui.router.state").directive("uiView",s),I.module("ui.router.state").directive("uiView",l),c.$inject=["$state","$timeout"],d.$inject=["$state","$timeout"],f.$inject=["$state","$stateParams","$interpolate"],I.module("ui.router.state").directive("uiSref",c).directive("uiSrefActive",f).directive("uiSrefActiveEq",f).directive("uiState",d),p.$inject=["$state"],x.$inject=["$state"],I.module("ui.router.state").filter("isState",p).filter("includedByState",x)}(window,window.angular),function(e,p,a){"use strict";function h(e){var t=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!t||4!==t.length)throw new Error("Invalid state ref '"+e+"'");return{state:t[1],paramExpr:t[3]||null}}var o={};function g(e,t,n,r){var i=o[e];i!==a&&i(),i=t.$on(n,r),o[e]=i}var c=function(e){if(e.expressions)return e.expressions;var t=[];return p.forEach(e.parts,function(e){p.isFunction(e)&&t.push(e.exp)}),t},l=function(n,r,i,a){p.forEach(c(r),function(e){var t=i.$watch(e,function(){a.ncyBreadcrumbLabel=r(i)});n.push(t)})},d=function(e){p.forEach(e,function(e){e()})};function t(i,a,n){return{restrict:"AE",replace:!0,scope:{},template:a.getTemplate({bootstrap2:'<ul class="breadcrumb"><li ng-repeat="step in steps" ng-switch="$last || !!step.abstract" ng-class="{active: $last}"><a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a><span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span><span class="divider" ng-hide="$last">/</span></li></ul>',bootstrap3:'<ol class="breadcrumb"><li ng-repeat="step in steps" ng-class="{active: $last}" ng-switch="$last || !!step.abstract"><a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a><span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span></li></ol>'}),templateUrl:a.getTemplateUrl(),link:{post:function(e){var r=[],t=function(){d(r),r=[];var n=a.$getLastViewScope();e.steps=a.getStatesChain(),p.forEach(e.steps,function(e){if(e.ncyBreadcrumb&&e.ncyBreadcrumb.label){var t=i(e.ncyBreadcrumb.label);e.ncyBreadcrumbLabel=t(n),l(r,t,n,e)}else e.ncyBreadcrumbLabel=e.name})};g("BreadcrumbDirective.$viewContentLoaded",n,"$viewContentLoaded",function(e){e.targetScope.ncyBreadcrumbIgnore||t()}),t()}}}}function n(a,o,s){return{restrict:"A",scope:{},template:o.getTemplateLast({default:"{{ncyBreadcrumbLabel}}"}),templateUrl:o.getTemplateLastUrl(),compile:function(e,t){var n=e.attr(t.$attr.ncyBreadcrumbLast);return n&&e.html(n),{post:function(r){var i=[],t=function(){d(i),i=[];var e=o.$getLastViewScope(),t=o.getLastStep();if(t)if(r.ncyBreadcrumbLink=t.ncyBreadcrumbLink,t.ncyBreadcrumb&&t.ncyBreadcrumb.label){var n=a(t.ncyBreadcrumb.label);r.ncyBreadcrumbLabel=n(e),l(i,n,e,r)}else r.ncyBreadcrumbLabel=t.name};g("BreadcrumbLastDirective.$viewContentLoaded",s,"$viewContentLoaded",function(e){e.targetScope.ncyBreadcrumbIgnore||t()}),t()}}}}}function r(u,i,a){return{restrict:"A",scope:{},template:"{{ncyBreadcrumbChain}}",compile:function(e,t){var n=e.attr(t.$attr.ncyBreadcrumbText);n&&e.html(n);var r=e.attr(t.$attr.ncyBreadcrumbTextSeparator)||" / ";return{post:function(t){var s=[],l=function(){d(s),s=[];var a=i.$getLastViewScope(),e=i.getStatesChain(),o=[];p.forEach(e,function(e){if(e.ncyBreadcrumb&&e.ncyBreadcrumb.label){var t=u(e.ncyBreadcrumb.label);o.push(t(a)),n=s,r=t,i=a,p.forEach(c(r),function(e){var t=i.$watch(e,function(e,t){e!==t&&l()});n.push(t)})}else o.push(e.name);var n,r,i}),t.ncyBreadcrumbChain=o.join(r)};g("BreadcrumbTextDirective.$viewContentLoaded",a,"$viewContentLoaded",function(e){e.targetScope.ncyBreadcrumbIgnore||l()}),l()}}}}}t.$inject=["$interpolate","$breadcrumb","$rootScope"],n.$inject=["$interpolate","$breadcrumb","$rootScope"],r.$inject=["$interpolate","$breadcrumb","$rootScope"],p.module("ncy-angular-breadcrumb",["ui.router.state"]).provider("$breadcrumb",function(){var f={prefixStateName:null,template:"bootstrap3",templateUrl:null,templateLast:"default",templateLastUrl:null,includeAbstract:!1};this.setOptions=function(e){p.extend(f,e)},this.$get=["$state","$stateParams","$rootScope",function(u,c,e){var d=e;g("$Breadcrumb.$viewContentLoaded",e,"$viewContentLoaded",function(e){var t,n;!e.targetScope.ncyBreadcrumbIgnore&&(t=e.targetScope.$id,n=d.$id,p.equals(t.length,n.length)?n<t:t.length>n.length)&&(d=e.targetScope)});var r=function(e,t){for(var n,r,i=h(t),a=!1,o=!1,s=0,l=e.length;s<l;s+=1)if(e[s].name===i.state)return;(n=u.get(i.state)).ncyBreadcrumb&&(n.ncyBreadcrumb.force&&(a=!0),n.ncyBreadcrumb.skip&&(o=!0)),n.abstract&&!f.includeAbstract&&!a||o||(i.paramExpr&&(r=d.$eval(i.paramExpr)),n.ncyBreadcrumbLink=u.href(i.state,r||c||{}),n.ncyBreadcrumbStateRef=t,e.unshift(n))},i=function(e){var t,n,r=h(e),i=u.get(r.state);if(i.ncyBreadcrumb&&i.ncyBreadcrumb.parent){var a="function"==typeof i.ncyBreadcrumb.parent?i.ncyBreadcrumb.parent(d):i.ncyBreadcrumb.parent;if(a)return a}return"object"==typeof(n=(t=i).parent||(/^(.+)\.[^.]+$/.exec(t.name)||[])[1])?n.name:n};return{getTemplate:function(e){return f.templateUrl?null:e[f.template]?e[f.template]:f.template},getTemplateUrl:function(){return f.templateUrl},getTemplateLast:function(e){return f.templateLastUrl?null:e[f.templateLast]?e[f.templateLast]:f.templateLast},getTemplateLastUrl:function(){return f.templateLastUrl},getStatesChain:function(e){for(var t=[],n=u.$current.self.name;n;n=i(n))if(r(t,n),e&&t.length)return t;return f.prefixStateName&&r(t,f.prefixStateName),t},getLastStep:function(){var e=this.getStatesChain(!0);return e.length?e[0]:a},$getLastViewScope:function(){return d}}}]}).directive("ncyBreadcrumb",t).directive("ncyBreadcrumbLast",n).directive("ncyBreadcrumbText",r)}(window,window.angular),angular.module("ngCacheBuster",[]).config(["$httpProvider",function(e){return e.interceptors.push("httpRequestInterceptorCacheBuster")}]).provider("httpRequestInterceptorCacheBuster",function(){this.matchlist=[/.*partials.*/,/.*views.*/],this.logRequests=!1,this.black=!1,this.setMatchlist=function(e,t){this.black=void 0!==t&&t,this.matchlist=e},this.setLogRequests=function(e){this.logRequests=e},this.$get=["$q","$log",function(a,o){var s=this.matchlist,l=this.logRequests,u=this.black;return l&&o.log("Blacklist? ",u),{request:function(e){for(var t=!u,n=0;n<s.length;n++)if(e.url.match(s[n])){t=u;break}if(t){var r=new Date;e.url=e.url.replace(/[?|&]cacheBuster=\d+/,""),e.url+=-1===e.url.indexOf("?")?"?":"&",e.url+="cacheBuster="+r.getTime()}if(l){var i="request.url ="+e.url;t?o.warn(i):o.info(i)}return e||a.when(e)}}}]}),function(e,u){"use strict";function t(e,s,t){var l=t.baseHref(),r=e[0];return function(e,t,n){r.cookie=function(e,t,n){var r,i;i=(n=n||{}).expires,r=u.isDefined(n.path)?n.path:l,u.isUndefined(t)&&(i="Thu, 01 Jan 1970 00:00:00 GMT",t=""),u.isString(i)&&(i=new Date(i));var a=encodeURIComponent(e)+"="+encodeURIComponent(t);a+=r?";path="+r:"",a+=n.domain?";domain="+n.domain:"",a+=i?";expires="+i.toUTCString():"";var o=(a+=n.secure?";secure":"").length+1;return 4096<o&&s.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+o+" > 4096 bytes)!"),a}(e,t,n)}}u.module("ngCookies",["ng"]).info({angularVersion:"1.6.9"}).provider("$cookies",[function(){var t=this.defaults={};function i(e){return e?u.extend({},t,e):t}this.$get=["$$cookieReader","$$cookieWriter",function(t,r){return{get:function(e){return t()[e]},getObject:function(e){var t=this.get(e);return t?u.fromJson(t):t},getAll:function(){return t()},put:function(e,t,n){r(e,t,i(n))},putObject:function(e,t,n){this.put(e,u.toJson(t),n)},remove:function(e,t){r(e,void 0,i(t))}}}]}]),u.module("ngCookies").factory("$cookieStore",["$cookies",function(n){return{get:function(e){return n.getObject(e)},put:function(e,t){n.putObject(e,t)},remove:function(e){n.remove(e)}}}]),t.$inject=["$document","$log","$browser"],u.module("ngCookies").provider("$$cookieWriter",function(){this.$get=t})}(window,window.angular),function(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var i={};r.m=n,r.c=i,r.p="",r(0)}([function(e,t,n){"use strict";var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};angular.module("angularjs-dropdown-multiselect",[]).directive("dmDropdownStaticInclude",["$compile",function(a){return function(e,t,n){var r=n.dmDropdownStaticInclude,i=t.html(r).contents();a(i)(e)}}]).directive("ngDropdownMultiselect",a.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{restrict:"AE",scope:{selectedModel:"=",options:"=",extraSettings:"=",events:"=",searchFilter:"=?",translationTexts:"=",disabled:"="},transclude:{toggleDropdown:"?toggleDropdown"},controller:a.default,templateUrl:"app/component/angularjs-dropdown-multiselect.html"}};var r,i=n(2),a=(r=i)&&r.__esModule?r:{default:r}},function(e,t){"use strict";function d(e,t){var n=!1;return e.some(function(e){return e===t&&(n=!0)}),n}function f(e,n,r){var i=-1;return e.some(function(e,t){return e[r]===n[r]&&(i=t,!0)}),i}function n(a,o,r,e){function i(){setTimeout(function(){var e=angular.element(o)[0].querySelector(".option");angular.isDefined(e)&&null!=e&&e.focus()},0)}function s(e){var t=o.find("button"),n=document.createElement("canvas").getContext("2d");return n.font=t.css("font-size")+t.css("font-family"),n.originalFont=t.css("font-size")+t.css("font-family"),n.fillStyle="#000000",n.measureText(e).width}var l=o.children()[0],t={onItemSelect:angular.noop,onItemDeselect:angular.noop,onSelectAll:angular.noop,onDeselectAll:angular.noop,onInitDone:angular.noop,onMaxSelectionReached:angular.noop,onSelectionChanged:angular.noop,onClose:angular.noop},u={dynamicTitle:!0,scrollable:!1,scrollableHeight:"300px",closeOnBlur:!0,displayProp:"label",enableSearch:!1,clearSearchOnClose:!1,selectionLimit:0,showCheckAll:!0,showUncheckAll:!0,showEnableSearchButton:!1,closeOnSelect:!1,buttonClasses:"btn btn-default",closeOnDeselect:!1,groupBy:void 0,checkBoxes:!1,groupByTextProvider:null,smartButtonMaxItems:0,smartButtonTextConverter:angular.noop,styleActive:!1,selectedToTop:!1,keyboardControls:!1,template:"{{getPropertyForObject(option, settings.displayProp)}}",searchField:"$",showAllSelectedText:!1},n={checkAll:"Check All",uncheckAll:"Uncheck All",selectionCount:"checked",selectionOf:"/",searchPlaceholder:"Search...",buttonDefaultText:"Select",dynamicButtonTextSuffix:"checked",disableSearch:"Disable search",enableSearch:"Enable search",selectGroup:"Select all:",allSelectedText:"All"},c={searchFilter:a.searchFilter||""};angular.extend(u,a.extraSettings||[]),angular.extend(t,a.events||[]),angular.extend(n,a.translationTexts),u.closeOnBlur&&e.on("click",function(e){if(a.open){for(var t=e.target.parentElement,n=!1;angular.isDefined(t)&&null!==t&&!n;)t.className.split&&d(t.className.split(" "),"multiselect-parent")&&!n&&t===l&&(n=!0),t=t.parentElement;n||a.$apply(function(){a.close()})}}),angular.extend(a,{toggleDropdown:function(){a.open?a.close():a.open=!0,a.settings.keyboardControls&&a.open&&(1===a.settings.selectionLimit&&a.settings.enableSearch?setTimeout(function(){angular.element(o)[0].querySelector(".searchField").focus()},0):i()),a.settings.enableSearch&&a.open&&setTimeout(function(){angular.element(o)[0].querySelector(".searchField").focus()},0)},checkboxClick:function(e,t){a.setSelectedItem(t,!1,!0),e.stopImmediatePropagation()},externalEvents:t,settings:u,texts:n,input:c,close:function(){a.open=!1,a.input.searchFilter=a.settings.clearSearchOnClose?"":a.input.searchFilter,a.externalEvents.onClose()},selectCurrentGroup:function(t){a.selectedModel.splice(0,a.selectedModel.length),a.options.forEach(function(e){e[a.settings.groupBy]===t&&a.setSelectedItem(e,!1,!1)}),a.externalEvents.onSelectionChanged()},getGroupLabel:function(e){return null!==a.settings.groupByTextProvider?a.settings.groupByTextProvider(e):e},getButtonText:function(){if(a.settings.dynamicTitle&&a.selectedModel&&0<a.selectedModel.length){if(angular.isFunction(a.settings.smartButtonTextProvider))return a.settings.smartButtonTextProvider(a.selectedModel);if(0<a.settings.smartButtonMaxItems){var e=o[0].offsetWidth-24-2-8,r=[];angular.forEach(a.options,function(e){if(a.isChecked(e)){var t=a.getPropertyForObject(e,a.settings.displayProp),n=a.settings.smartButtonTextConverter(t,e);r.push(n||t)}}),a.selectedModel.length>a.settings.smartButtonMaxItems&&(r=r.slice(0,a.settings.smartButtonMaxItems)).push("...");var t=r.join(", "),n=t.length-4;if(0===o[0].offsetWidth)return t;if(e<=s("..."))return"...";for(;s(t)>e;)"..."!==r[r.length-1]&&(r.push("..."),n=(t+="...").length-4),t=t.slice(0,n)+t.slice(n+1),n-=1;return t}var i=angular.isDefined(a.selectedModel)?a.selectedModel.length:0;return 0===i?a.texts.buttonDefaultText:a.settings.showAllSelectedText&&i===a.options.length?a.texts.allSelectedText:i+" "+a.texts.dynamicButtonTextSuffix}return a.texts.buttonDefaultText},getPropertyForObject:function(e,t){return angular.isDefined(e)&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},selectAll:function(){a.deselectAll(!0),a.externalEvents.onSelectAll();var e=r("filter")(a.options,a.getFilter(a.input.searchFilter));angular.forEach(e,function(e){a.setSelectedItem(e,!0,!1)}),a.externalEvents.onSelectionChanged(),a.selectedGroup=null},deselectAll:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];e||a.externalEvents.onDeselectAll(),a.selectedModel.splice(0,a.selectedModel.length),e||a.externalEvents.onSelectionChanged(),a.selectedGroup=null},setSelectedItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=arguments[2],r=void 0,i=void 0;i=angular.isDefined(u.idProperty)?(r=-1!==f(a.selectedModel,e,u.idProperty),f(a.selectedModel,e,u.idProperty)):(r=-1!==a.selectedModel.indexOf(e),a.selectedModel.indexOf(e)),!t&&r?(a.selectedModel.splice(i,1),a.externalEvents.onItemDeselect(e),a.settings.closeOnDeselect&&a.close()):!r&&(0===a.settings.selectionLimit||a.selectedModel.length<a.settings.selectionLimit)?(a.selectedModel.push(e),n&&a.externalEvents.onItemSelect(e),a.settings.closeOnSelect&&a.close(),0<a.settings.selectionLimit&&a.selectedModel.length===a.settings.selectionLimit&&a.externalEvents.onMaxSelectionReached()):1!==a.settings.selectionLimit||r||a.selectedModel.length!==a.settings.selectionLimit||(a.selectedModel.splice(0,1),a.selectedModel.push(e),n&&a.externalEvents.onItemSelect(e),a.settings.closeOnSelect&&a.close()),n&&a.externalEvents.onSelectionChanged(),a.selectedGroup=null},isChecked:function(e){return angular.isDefined(u.idProperty)?-1!==f(a.selectedModel,e,u.idProperty):-1!==a.selectedModel.indexOf(e)},keyDownLink:function(e){var t=angular.element(e.target).scope(),n=void 0,r=e.target.parentNode;if(a.settings.keyboardControls)if(13===e.keyCode||32===e.keyCode)e.preventDefault(),t.option?a.setSelectedItem(t.option,!1,!0):"deselectAll"===e.target.id?a.deselectAll():"selectAll"===e.target.id&&a.selectAll();else if(38===e.keyCode){for(e.preventDefault(),r.previousElementSibling&&(n=r.previousElementSibling.querySelector("a")||r.previousElementSibling.querySelector("input"));!n&&r;)(r=r.previousElementSibling)&&(n=r.querySelector("a")||r.querySelector("input"));n&&n.focus()}else if(40===e.keyCode){for(e.preventDefault(),r.nextElementSibling&&(n=r.nextElementSibling.querySelector("a")||r.nextElementSibling.querySelector("input"));!n&&r;)(r=r.nextElementSibling)&&(n=r.querySelector("a")||r.querySelector("input"));n&&n.focus()}else 27===e.keyCode&&(e.preventDefault(),a.toggleDropdown())},keyDownSearchDefault:function(e){var t=e.target.parentNode.parentNode,n=void 0;if(a.settings.keyboardControls)if(9===e.keyCode||40===e.keyCode)e.preventDefault(),i();else if(38===e.keyCode){for(e.preventDefault(),t.previousElementSibling&&(n=t.previousElementSibling.querySelector("a")||t.previousElementSibling.querySelector("input"));!n&&t;)(t=t.previousElementSibling)&&(n=t.querySelector("a")||t.querySelector("input"));n&&n.focus()}else 27===e.keyCode&&(e.preventDefault(),a.toggleDropdown())},keyDownSearch:function(e,t){var n=void 0;a.settings.keyboardControls&&13===e.keyCode&&(1===a.settings.selectionLimit&&a.settings.enableSearch?1===(n=r("filter")(a.options,a.getFilter(t))).length&&a.setSelectedItem(n[0],!1,!0):a.settings.enableSearch&&a.selectAll())},getFilter:function(e){var t={};return t[a.settings.searchField]=e,t},toggleSearch:function(e){e&&e.stopPropagation(),a.settings.enableSearch=!a.settings.enableSearch,a.settings.enableSearch||(a.input.searchFilter="")},keyDownToggleSearch:function(){a.settings.keyboardControls&&13===event.keyCode&&(a.toggleSearch(),a.settings.enableSearch?setTimeout(function(){angular.element(o)[0].querySelector(".searchField").focus()},0):i())},orderFunction:function(e,t){if(angular.isUndefined(t))return-1;if(angular.isUndefined(e))return 1;if("object"!==e.type||"object"!==t.type)return e.index<t.index?-1:1;var n=e.value,r=t.value;return a.settings.groupBy&&n[a.settings.groupBy]!==r[a.settings.groupBy]?n[a.settings.groupBy]<r[a.settings.groupBy]?1:-1:a.settings.selectedToTop?!a.isChecked(n)&&!a.isChecked(r)||a.isChecked(n)&&a.isChecked(r)?a.options.indexOf(n)<a.options.indexOf(r)?-1:1:a.isChecked(n)?-1:1:a.options.indexOf(n)<a.options.indexOf(r)?-1:1}}),a.externalEvents.onInitDone()}n.$inject=["e","t","o","s"],n.$inject=["$scope","$element","$filter","$document"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}]),angular.module("angularjs-dropdown-multiselect").run(["$templateCache",function(e){e.put("app/component/angularjs-dropdown-multiselect.html",'<div class="multiselect-parent btn-group dropdown-multiselect" ng-class="{open: open}"><div ng-transclude=toggleDropdown ng-click=toggleDropdown()><button ng-disabled=disabled type=button class=dropdown-toggle ng-class=settings.buttonClasses>{{getButtonText()}}&nbsp;<span class=caret></span></button></div><ul class="dropdown-menu dropdown-menu-form" ng-if=open ng-style="{display: open ? \'block\' : \'none\', height : settings.scrollable ? settings.scrollableHeight : \'auto\', overflow: \'auto\' }"><li ng-if="settings.showCheckAll && settings.selectionLimit === 0"><a ng-keydown=keyDownLink($event) data-ng-click=selectAll() tabindex=-1 id=selectAll><span class="glyphicon glyphicon-ok"></span> {{texts.checkAll}}</a></li><li ng-if=settings.showUncheckAll><a ng-keydown=keyDownLink($event) data-ng-click=deselectAll(); tabindex=-1 id=deselectAll><span class="glyphicon glyphicon-remove"></span> {{texts.uncheckAll}}</a></li><li ng-if="settings.selectByGroups && ((settings.showCheckAll && settings.selectionLimit > 0) || settings.showUncheckAll)" class=divider></li><li ng-repeat="currentGroup in settings.selectByGroups track by $index" ng-click=selectCurrentGroup(currentGroup)><a ng-class="{\'dropdown-selected-group\': selectedGroup === currentGroup}" tabindex=-1>{{::texts.selectGroup}} {{::getGroupLabel(currentGroup)}}</a></li><li ng-if="settings.selectByGroups && settings.showEnableSearchButton" class=divider></li><li ng-if="settings.showEnableSearchButton && settings.enableSearch"><a ng-keydown="keyDownLink($event); keyDownToggleSearch();" ng-click=toggleSearch($event); tabindex=-1>{{texts.disableSearch}}</a></li><li ng-if="settings.showEnableSearchButton && !settings.enableSearch"><a ng-keydown="keyDownLink($event); keyDownToggleSearch();" ng-click=toggleSearch($event); tabindex=-1>{{texts.enableSearch}}</a></li><li ng-if="(settings.showCheckAll && settings.selectionLimit > 0) || settings.showUncheckAll || settings.showEnableSearchButton" class=divider></li><li ng-if=settings.enableSearch><div class=dropdown-header><input type=text class="form-control searchField" ng-keydown="keyDownSearchDefault($event); keyDownSearch($event, input.searchFilter);" ng-style="{width: \'100%\'}" ng-model=input.searchFilter placeholder={{texts.searchPlaceholder}}></div></li><li ng-if=settings.enableSearch class=divider></li><li ng-if=settings.groupBy ng-repeat-start="option in orderedItems = ( options | filter:getFilter(input.searchFilter) | orderBy:\'\':false:orderFunction)" ng-show="getPropertyForObject(option, settings.groupBy) !== getPropertyForObject(orderedItems[$index - 1], settings.groupBy)" role=presentation class=dropdown-header>{{ getGroupLabel(getPropertyForObject(option, settings.groupBy)) }}</li><li ng-if=settings.groupBy ng-class="{\'active\': isChecked(option) && settings.styleActive}" ng-repeat-end role=presentation><a ng-keydown="option.disabled || keyDownLink($event)" role=menuitem class=option tabindex=-1 ng-click="option.disabled || setSelectedItem(option, false, true)" ng-disabled=option.disabled><div ng-if=settings.checkBoxes class=checkbox><label><input class=checkboxInput type=checkbox ng-click="checkboxClick($event, option)" ng-checked=isChecked(option)> <span dm-dropdown-static-include={{settings.template}}></span></label></div><span ng-if=!settings.checkBoxes data-ng-class="{\'glyphicon glyphicon-ok\': isChecked(option)}"></span> <span dm-dropdown-static-include={{settings.template}}></span></a></li><li ng-if=!settings.groupBy ng-class="{\'active\': isChecked(option) && settings.styleActive}" role=presentation ng-repeat="option in options | filter:getFilter(input.searchFilter) | orderBy:\'\':false:orderFunction"><a ng-keydown="option.disabled || keyDownLink($event)" role=menuitem class=option tabindex=-1 ng-click="option.disabled || setSelectedItem(option, false, true)" ng-disabled=option.disabled><div ng-if=settings.checkBoxes class=checkbox><label><input class=checkboxInput type=checkbox ng-click="checkboxClick($event, option)" ng-checked=isChecked(option)> <span dm-dropdown-static-include={{settings.template}}></span></label></div><span ng-if=!settings.checkBoxes data-ng-class="{\'glyphicon glyphicon-ok\': isChecked(option)}"></span> <span ng-if=!settings.checkBoxes dm-dropdown-static-include={{settings.template}}></span></a></li><li class=divider ng-show="settings.selectionLimit > 1"></li><li role=presentation ng-show="settings.selectionLimit > 1"><a role=menuitem>{{selectedModel.length}} {{texts.selectionOf}} {{settings.selectionLimit}} {{texts.selectionCount}}</a></li></ul></div>')}]),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(p){var e=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(t,a,n,r,i,o){var s,l=0,u=0,c=o.latencyThreshold;function d(){n.cancel(s),o.complete(),l=u=0}function f(e){var t,n=a.get("$http"),r=p.defaults;!e.cache&&!r.cache||!1===e.cache||"GET"!==e.method&&"JSONP"!==e.method||(t=angular.isObject(e.cache)?e.cache:angular.isObject(r.cache)?r.cache:n);var i=void 0!==t&&void 0!==t.get(e.url);return void 0!==e.cached&&i!==e.cached?e.cached:e.cached=i}return{request:function(e){return e.ignoreLoadingBar||f(e)||(r.$broadcast("cfpLoadingBar:loading",{url:e.url}),0===l&&(s=n(function(){o.start()},c)),l++,o.set(u/l)),e},response:function(e){return e&&e.config?e.config.ignoreLoadingBar||f(e.config)||(u++,r.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),l<=u?d():o.set(u/l)):i.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e},responseError:function(e){return e&&e.config?e.config.ignoreLoadingBar||f(e.config)||(u++,r.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),l<=u?d():o.set(u/l)):i.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t.reject(e)}}}];p.interceptors.push(e)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(i,a,o,s){var l,n,u,c=this.parentSelector,d=angular.element(this.loadingBarTemplate),r=d.find("div").eq(0),f=angular.element(this.spinnerTemplate),p=!1,h=0,g=this.autoIncrement,m=this.includeSpinner,v=this.includeBar,y=this.startSize;function b(e){if(p){var t=100*e+"%";r.css("width",t),h=e,g&&(o.cancel(n),n=o(function(){$()},250))}}function $(){if(!(1<=w())){var e=0,t=w();e=0<=t&&t<.25?(3*Math.random()+3)/100:.25<=t&&t<.65?3*Math.random()/100:.65<=t&&t<.9?2*Math.random()/100:.9<=t&&t<.99?.005:0,b(w()+e)}}function w(){return h}function t(){h=0,p=!1}return{start:function(){if(l||(l=i.get("$animate")),o.cancel(u),!p){var e=a[0],t=e.querySelector?e.querySelector(c):a.find(c)[0];t||(t=e.getElementsByTagName("body")[0]);var n=angular.element(t),r=t.lastChild&&angular.element(t.lastChild);s.$broadcast("cfpLoadingBar:started"),p=!0,v&&l.enter(d,n,r),m&&l.enter(f,n,d),b(y)}},set:b,status:w,inc:$,complete:function(){l||(l=i.get("$animate")),s.$broadcast("cfpLoadingBar:completed"),b(1),o.cancel(u),u=o(function(){var e=l.leave(d,t);e&&e.then&&e.then(t),l.leave(f)},500)},autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),function(e,s){"use strict";var F=s.$$minErr("$resource"),l=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;function z(e,t){if(null==(n=t)||""===n||"hasOwnProperty"===n||!l.test("."+n))throw F("badmember",'Dotted member path "@{0}" is invalid.',t);for(var n,r=t.split("."),i=0,a=r.length;i<a&&s.isDefined(e);i++){var o=r[i];e=null!==e?e[o]:void 0}return e}function U(e,n){for(var t in n=n||{},s.forEach(n,function(e,t){delete n[t]}),e)!e.hasOwnProperty(t)||"$"===t.charAt(0)&&"$"===t.charAt(1)||(n[t]=e[t]);return n}s.module("ngResource",["ng"]).info({angularVersion:"1.6.9"}).provider("$resource",function(){var f=/^https?:\/\/\[[^\]]*][^/]*/,o=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(M,r,A,N){var O=s.noop,I=s.forEach,_=s.extend,P=s.copy,H=s.isArray,u=s.isDefined,L=s.isFunction,i=s.isNumber,c=s.$$encodeUriQuery,d=s.$$encodeUriSegment;function a(e,t){this.template=e,this.defaults=_({},o.defaults,t),this.urlParams={}}return a.prototype={setUrlParams:function(n,r,e){var i,a,o=this,s=e||o.template,t="",l=o.urlParams=Object.create(null);I(s.split(/\W/),function(e){if("hasOwnProperty"===e)throw F("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(s)&&(l[e]={isQueryParamValue:new RegExp("\\?.*=:"+e+"(?:\\W|$)").test(s)})}),s=(s=s.replace(/\\:/g,":")).replace(f,function(e){return t=e,""}),r=r||{},I(o.urlParams,function(e,t){i=r.hasOwnProperty(t)?r[t]:o.defaults[t],s=u(i)&&null!==i?(a=e.isQueryParamValue?c(i,!0):d(i),s.replace(new RegExp(":"+t+"(\\W|$)","g"),function(e,t){return a+t})):s.replace(new RegExp("(/?):"+t+"(\\W|$)","g"),function(e,t,n){return"/"===n.charAt(0)?n:t+n})}),o.defaults.stripTrailingSlashes&&(s=s.replace(/\/+$/,"")||"/"),s=s.replace(/\/\.(?=\w+($|\?))/,"."),n.url=t+s.replace(/\/(\\|%5C)\./,"/."),I(r,function(e,t){o.urlParams[t]||(n.params=n.params||{},n.params[t]=e)})}},function(e,T,t,n){var D=new a(e,n);function k(e){return e.resource}function R(e){U(e||{},this)}return t=_({},o.defaults.actions,t),R.prototype.toJSON=function(){var e=_({},this);return delete e.$promise,delete e.$resolved,delete e.$cancelRequest,e},I(t,function(w,S){var x=!0===w.hasBody||!1!==w.hasBody&&/^(POST|PUT|PATCH)$/i.test(w.method),C=w.timeout,E=u(w.cancellable)?w.cancellable:D.defaults.cancellable;C&&!i(C)&&(r.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete w.timeout,C=null),R[S]=function(e,t,n,r){var i,a,o,s={};switch(arguments.length){case 4:o=r,a=n;case 3:case 2:if(!L(t)){s=e,i=t,a=n;break}if(L(e)){a=e,o=t;break}a=t,o=n;case 1:L(e)?a=e:x?i=e:s=e;break;case 0:break;default:throw F("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var l,u,c,d,f,p=this instanceof R,h=p?i:w.isArray?[]:new R(i),g={},m=w.interceptor&&w.interceptor.response||k,v=w.interceptor&&w.interceptor.responseError||void 0,y=!!o,b=!!v;I(w,function(e,t){switch(t){default:g[t]=P(e);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!p&&E&&(l=A.defer(),g.timeout=l.promise,C&&(u=N(l.resolve,C))),x&&(g.data=i),D.setUrlParams(g,_({},(c=i,d=w.params||{},f={},d=_({},T,d),I(d,function(e,t){L(e)&&(e=e(c)),f[t]=e&&e.charAt&&"@"===e.charAt(0)?z(c,e.substr(1)):e}),f),s),w.url);var $=M(g).then(function(e){var t=e.data;if(t){if(H(t)!==!!w.isArray)throw F("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",S,w.isArray?"array":"object",H(t)?"array":"object",g.method,g.url);if(w.isArray)h.length=0,I(t,function(e){"object"==typeof e?h.push(new R(e)):h.push(e)});else{var n=h.$promise;U(t,h),h.$promise=n}}return e.resource=h,e},function(e){return e.resource=h,A.reject(e)});return $=($=$.finally(function(){h.$resolved=!0,!p&&E&&(h.$cancelRequest=O,N.cancel(u),l=u=g.timeout=null)})).then(function(e){var t=m(e);return(a||O)(t,e.headers,e.status,e.statusText),t},y||b?function(e){return y&&!b&&$.catch(O),y&&o(e),b?v(e):A.reject(e)}:void 0),p?$:(h.$promise=$,h.$resolved=!1,E&&(h.$cancelRequest=function(e){$.catch(O),null!==l&&l.resolve(e)}),h)},R.prototype["$"+S]=function(e,t,n){L(e)&&(n=t,t=e,e={});var r=R[S].call(this,e,this,t,n);return r.$promise||r}}),R}}]})}(window,window.angular),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():t()}(0,function(){function e(t){"use strict";var n=t.storageKey(),r=t.storage(),e=function(){var e=t.preferredLanguage();angular.isString(e)?t.use(e):r.put(n,t.use())};e.displayName="fallbackFromIncorrectStorageValue",r?r.get(n)?t.use(r.get(n)).catch(e):e():angular.isString(t.preferredLanguage())&&t.use(t.preferredLanguage())}function t(e,i,t,a){"use strict";var N,c,O,I,_,P,H,n,L,F,z,U,B,j,V,W,q={},G=[],Y=e,K=[],X="translate-cloak",Z=!1,J=!1,Q=".",ee=!1,te=!1,ne=0,re=!0,r="default",o={default:function(e){return(e||"").split("-").join("_")},java:function(e){var t=(e||"").split("-").join("_"),n=t.split("_");return 1<n.length?n[0].toLowerCase()+"_"+n[1].toUpperCase():t},bcp47:function(e){var t=(e||"").split("_").join("-"),n=t.split("-");return 1<n.length?n[0].toLowerCase()+"-"+n[1].toUpperCase():t},"iso639-1":function(e){return(e||"").split("_").join("-").split("-")[0].toLowerCase()}},s=function(){if(angular.isFunction(a.getLocale))return a.getLocale();var e,t,n=i.$get().navigator,r=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(n.languages))for(e=0;e<n.languages.length;e++)if((t=n.languages[e])&&t.length)return t;for(e=0;e<r.length;e++)if((t=n[r[e]])&&t.length)return t;return null};s.displayName="angular-translate/service: getFirstBrowserLanguage";var ie=function(){var e=s()||"";return o[r]&&(e=o[r](e)),e};ie.displayName="angular-translate/service: getLocale";var ae=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},oe=function(){return this.toString().replace(/^\s+|\s+$/g,"")},se=function(e){if(e){for(var t,n=[],r=angular.lowercase(e),i=0,a=G.length;i<a;i++)n.push(angular.lowercase(G[i]));if(-1<ae(n,r))return e;if(c)for(var o in c)if(c.hasOwnProperty(o)){var s=!1,l=Object.prototype.hasOwnProperty.call(c,o)&&angular.lowercase(o)===angular.lowercase(e);if("*"===o.slice(-1)&&(s=o.slice(0,-1)===e.slice(0,o.length-1)),(l||s)&&(t=c[o],-1<ae(n,angular.lowercase(t))))return t}var u=e.split("_");return 1<u.length&&-1<ae(n,angular.lowercase(u[0]))?u[0]:void 0}},le=function(e,t){if(!e&&!t)return q;if(e&&!t){if(angular.isString(e))return q[e]}else angular.isObject(q[e])||(q[e]={}),angular.extend(q[e],ue(t));return this};this.translations=le,this.cloakClassName=function(e){return e?(X=e,this):X},this.nestedObjectDelimeter=function(e){return e?(Q=e,this):Q};var ue=function(e,t,n,r){var i,a,o;for(i in t||(t=[]),n||(n={}),e)Object.prototype.hasOwnProperty.call(e,i)&&(o=e[i],angular.isObject(o)?ue(o,t.concat(i),n,i):(a=t.length?""+t.join(Q)+Q+i:i,t.length&&i===r&&(n[""+t.join(Q)]="@:"+a),n[a]=o));return n};ue.displayName="flatObject",this.addInterpolation=function(e){return K.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return F=e,this},this.useSanitizeValueStrategy=function(e){return t.useStrategy(e),this},this.preferredLanguage=function(e){return e?(ce(e),this):N};var ce=function(e){return e&&(N=e),N};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(B=e,this):B},this.translationNotFoundIndicatorRight=function(e){return e?(j=e,this):j},this.fallbackLanguage=function(e){return de(e),this};var de=function(e){return e?(angular.isString(e)?(I=!0,O=[e]):angular.isArray(e)&&(I=!1,O=e),angular.isString(N)&&ae(O,N)<0&&O.push(N),this):I?O[0]:O};this.use=function(e){if(e){if(!q[e]&&!z)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return _=e,this}return _},this.resolveClientLocale=function(){return ie()};var fe=function(e){return e?(Y=e,this):n?n+Y:Y};this.storageKey=fe,this.useUrlLoader=function(e,t){return this.useLoader("$translateUrlLoader",angular.extend({url:e},t))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,t){return z=e,U=t||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return H=e,this},this.storagePrefix=function(e){return e?(n=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return L=e,this},this.usePostCompiling=function(e){return Z=!!e,this},this.forceAsyncReload=function(e){return J=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},r=e.standard,this},this.determinePreferredLanguage=function(e){var t=e&&angular.isFunction(e)?e():ie();return N=G.length&&se(t)||t,this},this.registerAvailableLanguageKeys=function(e,t){return e?(G=e,t&&(c=t),this):G},this.useLoaderCache=function(e){return!1===e?V=void 0:!0===e?V=!0:void 0===e?V="$translationCache":e&&(V=e),this},this.directivePriority=function(e){return void 0===e?ne:(ne=e,this)},this.statefulFilter=function(e){return void 0===e?re:(re=e,this)},this.postProcess=function(e){return W=e||void 0,this},this.keepContent=function(e){return te=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,s,c,g){var a,m,v,y=s.get(F||"$translateDefaultInterpolation"),b=!1,$={},d={},w=function(e,o,s,l,u){!_&&N&&(_=N);var r=u&&u!==_?se(u)||u:_;if(u&&k(u),angular.isArray(e)){return function(e){for(var r={},t=[],n=function(t){var n=g.defer(),e=function(e){r[t]=e,n.resolve([t,e])};return w(t,o,s,l,u).then(e,e),n.promise},i=0,a=e.length;i<a;i++)t.push(n(e[i]));return g.all(t).then(function(){return r})}(e)}var t=g.defer();e&&(e=oe.apply(e));var n=function(){var e=N?d[N]:d[r];if(m=0,H&&!e){var t=a.get(Y);if(e=d[t],O&&O.length){var n=ae(O,t);m=0===n?1:0,ae(O,N)<0&&O.push(N)}}return e}();if(n){var i=function(){u||(r=_),E(e,o,s,l,r).then(t.resolve,t.reject)};i.displayName="promiseResolved",n.finally(i)}else E(e,o,s,l,r).then(t.resolve,t.reject);return t.promise},S=function(e){return B&&(e=[B,e].join(" ")),j&&(e=[e,j].join(" ")),e},f=function(e){_=e,H&&a.put(w.storageKey(),_),c.$emit("$translateChangeSuccess",{language:e}),y.setLocale(_);var t=function(e,t){$[t].setLocale(_)};t.displayName="eachInterpolatorLocaleSetter",angular.forEach($,t),c.$emit("$translateChangeEnd",{language:e})},p=function(n){if(!n)throw"No language key specified for loading.";var r=g.defer();c.$emit("$translateLoadingStart",{language:n}),b=!0;var e=V;"string"==typeof e&&(e=s.get(e));var t=angular.extend({},U,{key:n,$http:angular.extend({},{cache:e},U.$http)}),i=function(e){var t={};c.$emit("$translateLoadingSuccess",{language:n}),angular.isArray(e)?angular.forEach(e,function(e){angular.extend(t,ue(e))}):angular.extend(t,ue(e)),b=!1,r.resolve({key:n,table:t}),c.$emit("$translateLoadingEnd",{language:n})};i.displayName="onLoaderSuccess";var a=function(e){c.$emit("$translateLoadingError",{language:e}),r.reject(e),c.$emit("$translateLoadingEnd",{language:e})};return a.displayName="onLoaderError",s.get(z)(t).then(i,a),r.promise};if(H&&(!(a=s.get(H)).get||!a.put))throw new Error("Couldn't use storage '"+H+"', missing get() or put() method!");if(K.length){var t=function(e){var t=s.get(e);t.setLocale(N||_),$[t.getInterpolationIdentifier()]=t};t.displayName="interpolationFactoryAdder",angular.forEach(K,t)}var l=function(r,i,a,o){var s=g.defer(),e=function(e){if(Object.prototype.hasOwnProperty.call(e,i)){o.setLocale(r);var t=e[i];if("@:"===t.substr(0,2))l(r,t.substr(2),a,o).then(s.resolve,s.reject);else{var n=o.interpolate(e[i],a,"service");n=D(i,e[i],n,a,r),s.resolve(n)}o.setLocale(_)}else s.reject()};return e.displayName="fallbackTranslationResolver",function(e){var t=g.defer();if(Object.prototype.hasOwnProperty.call(q,e))t.resolve(q[e]);else if(d[e]){var n=function(e){le(e.key,e.table),t.resolve(e.table)};n.displayName="translationTableResolver",d[e].then(n,t.reject)}else t.reject();return t.promise}(r).then(e,s.reject),s.promise},u=function(e,t,n,r,i){var a,o=q[e];if(o&&Object.prototype.hasOwnProperty.call(o,t)){if(r.setLocale(e),a=r.interpolate(o[t],n,"filter",i),a=D(t,o[t],a,n,e,i),!angular.isString(a)&&angular.isFunction(a.$$unwrapTrustedValue)){var s=a.$$unwrapTrustedValue();if("@:"===s.substr(0,2))return u(e,s.substr(2),n,r,i)}else if("@:"===a.substr(0,2))return u(e,a.substr(2),n,r,i);r.setLocale(_)}return a},x=function(e,t,n,r){return L?s.get(L)(e,_,t,n,r):e},C=function(e,t,n,r,i){var a=g.defer();if(e<O.length){var o=O[e];l(o,t,n,r).then(function(e){a.resolve(e)},function(){return C(e+1,t,n,r,i).then(a.resolve,a.reject)})}else if(i)a.resolve(i);else{var s=x(t,n,i);L&&s?a.resolve(s):a.reject(S(t))}return a.promise},h=function(e,t,n,r,i){var a;if(e<O.length){var o=O[e];(a=u(o,t,n,r,i))||""===a||(a=h(e+1,t,n,r))}return a},E=function(e,t,n,r,i){var a,o,s,l,u=g.defer(),c=i?q[i]:q,d=n?$[n]:y;if(c&&Object.prototype.hasOwnProperty.call(c,e)){var f=c[e];if("@:"===f.substr(0,2))w(f.substr(2),t,n,r,i).then(u.resolve,u.reject);else{var p=d.interpolate(f,t,"service");p=D(e,f,p,t,i),u.resolve(p)}}else{var h;L&&!b&&(h=x(e,t,r)),i&&O&&O.length?(a=e,o=t,s=d,l=r,C(0<v?v:m,a,o,s,l)).then(function(e){u.resolve(e)},function(e){u.reject(S(e))}):L&&!b&&h?r?u.resolve(r):u.resolve(h):r?u.resolve(r):u.reject(S(e))}return u.promise},T=function(e,t,n,r,i){var a,o=r?q[r]:q,s=y;if($&&Object.prototype.hasOwnProperty.call($,n)&&(s=$[n]),o&&Object.prototype.hasOwnProperty.call(o,e)){var l=o[e];a="@:"===l.substr(0,2)?T(l.substr(2),t,n,r,i):(a=s.interpolate(l,t,"filter",i),D(e,l,a,t,r,i))}else{var u;L&&!b&&(u=x(e,t,i)),a=r&&O&&O.length?h((m=0)<v?v:m,e,t,s,i):L&&!b&&u?u:S(e)}return a},D=function(e,t,n,r,i,a){var o=W;return o&&("string"==typeof o&&(o=s.get(o)),o)?o(e,t,n,r,i,a):n},k=function(e){q[e]||!z||d[e]||(d[e]=p(e).then(function(e){return le(e.key,e.table),e}))};w.preferredLanguage=function(e){return e&&ce(e),N},w.cloakClassName=function(){return X},w.nestedObjectDelimeter=function(){return Q},w.fallbackLanguage=function(e){if(null!=e){if(de(e),z&&O&&O.length)for(var t=0,n=O.length;t<n;t++)d[O[t]]||(d[O[t]]=p(O[t]));w.use(w.use())}return I?O[0]:O},w.useFallbackLanguage=function(e){if(null!=e)if(e){var t=ae(O,e);-1<t&&(v=t)}else v=0},w.proposedLanguage=function(){return P},w.storage=function(){return a},w.negotiateLocale=se,w.use=function(t){if(!t)return _;var n=g.defer();c.$emit("$translateChangeStart",{language:t});var e=se(t);return 0<G.length&&!e?g.reject(t):(e&&(t=e),P=t,!J&&q[t]||!z||d[t]?d[t]?d[t].then(function(e){return P===e.key&&f(e.key),n.resolve(e.key),e},function(e){return!_&&O&&0<O.length&&O[0]!==e?w.use(O[0]).then(n.resolve,n.reject):n.reject(e)}):(n.resolve(t),f(t)):(d[t]=p(t).then(function(e){return le(e.key,e.table),n.resolve(e.key),P===t&&f(e.key),e},function(e){return c.$emit("$translateChangeError",{language:e}),n.reject(e),c.$emit("$translateChangeEnd",{language:e}),g.reject(e)}),d[t].finally(function(){var e;P===(e=t)&&(P=void 0),d[e]=void 0})),n.promise)},w.resolveClientLocale=function(){return ie()},w.storageKey=function(){return fe()},w.isPostCompilingEnabled=function(){return Z},w.isForceAsyncReloadEnabled=function(){return J},w.isKeepContent=function(){return te},w.refresh=function(t){if(!z)throw new Error("Couldn't refresh translation table, no loader registered!");var e=g.defer();function n(){e.resolve(),c.$emit("$translateRefreshEnd",{language:t})}function r(){e.reject(),c.$emit("$translateRefreshEnd",{language:t})}if(c.$emit("$translateRefreshStart",{language:t}),t)if(q[t]){var i=function(e){return le(e.key,e.table),t===_&&f(_),n(),e};i.displayName="refreshPostProcessor",p(t).then(i,r)}else r();else{var a=[],o={};if(O&&O.length)for(var s=0,l=O.length;s<l;s++)a.push(p(O[s])),o[O[s]]=!0;_&&!o[_]&&a.push(p(_));var u=function(e){q={},angular.forEach(e,function(e){le(e.key,e.table)}),_&&f(_),n()};u.displayName="refreshPostProcessor",g.all(a).then(u,r)}return e.promise},w.instant=function(e,t,n,r,i){var a=r&&r!==_?se(r)||r:_;if(null===e||angular.isUndefined(e))return e;if(r&&k(r),angular.isArray(e)){for(var o={},s=0,l=e.length;s<l;s++)o[e[s]]=w.instant(e[s],t,n,r,i);return o}if(angular.isString(e)&&e.length<1)return e;e&&(e=oe.apply(e));var u,c,d=[];N&&d.push(N),a&&d.push(a),O&&O.length&&(d=d.concat(O));for(var f=0,p=d.length;f<p;f++){var h=d[f];if(q[h]&&void 0!==q[h][e]&&(u=T(e,t,n,a,i)),void 0!==u)break}u||""===u||(B||j?u=S(e):(u=y.interpolate(e,t,"filter",i),L&&!b&&(c=x(e,t,i)),L&&!b&&c&&(u=c)));return u},w.versionInfo=function(){return"2.13.1"},w.loaderCache=function(){return V},w.directivePriority=function(){return ne},w.statefulFilter=function(){return re},w.isReady=function(){return ee};var n=g.defer();n.promise.then(function(){ee=!0}),w.onReady=function(e){var t=g.defer();return angular.isFunction(e)&&t.promise.then(e),ee?t.resolve():n.promise.then(t.resolve),t.promise},w.getAvailableLanguageKeys=function(){return 0<G.length?G:null},w.getTranslationTable=function(e){return(e=e||w.use())&&q[e]?angular.copy(q[e]):null};var r=c.$on("$translateReady",function(){n.resolve(),r(),r=null}),i=c.$on("$translateChangeEnd",function(){n.resolve(),i(),i=null});if(z){if(angular.equals(q,{})&&w.use()&&w.use(w.use()),O&&O.length)for(var o=function(e){return le(e.key,e.table),c.$emit("$translateChangeEnd",{language:e.key}),e},R=0,M=O.length;R<M;R++){var A=O[R];!J&&q[A]||(d[A]=p(A).then(o))}}else c.$emit("$translateReady",{language:w.use()});return w}]}function n(a,o){"use strict";var e={};return e.setLocale=function(e){e},e.getInterpolationIdentifier=function(){return"default"},e.useSanitizeValueStrategy=function(e){return o.useStrategy(e),this},e.interpolate=function(e,t,n,r){var i;return t=t||{},t=o.sanitize(t,"params",r,n),i=angular.isNumber(e)?""+e:angular.isString(e)?(i=a(e)(t),o.sanitize(i,"text",r,n)):""},e}function r($,w,S,x,C){"use strict";return{restrict:"AE",scope:!0,priority:$.directivePriority(),compile:function(e,h){var g=h.translateValues?h.translateValues:void 0,m=h.translateInterpolation?h.translateInterpolation:void 0,v=e[0].outerHTML.match(/translate-value-+/i),y="^(.*)("+w.startSymbol()+".*"+w.endSymbol()+")(.*)",b="^(.*)"+w.startSymbol()+"(.*)"+w.endSymbol()+"(.*)";return function(i,l,u){i.interpolateParams={},i.preText="",i.postText="",i.translateNamespace=E(i);var a={},o=function(e){if(angular.isFunction(o._unwatchOld)&&(o._unwatchOld(),o._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var t=function(){return this.toString().replace(/^\s+|\s+$/g,"")}.apply(l.text()),n=t.match(y);if(angular.isArray(n)){i.preText=n[1],i.postText=n[3],a.translate=w(n[2])(i.$parent);var r=t.match(b);angular.isArray(r)&&r[2]&&r[2].length&&(o._unwatchOld=i.$watch(r[2],function(e){a.translate=e,c()}))}else a.translate=t||void 0}else a.translate=e;c()},e=function(t){u.$observe(t,function(e){a[t]=e,c()})};!function(e,t,n){if(t.translateValues&&angular.extend(e,x(t.translateValues)(i.$parent)),v)for(var r in n)Object.prototype.hasOwnProperty.call(t,r)&&"translateValue"===r.substr(0,14)&&"translateValues"!==r&&(e[angular.lowercase(r.substr(14,1))+r.substr(15)]=n[r])}(i.interpolateParams,u,h);var t=!0;for(var n in u.$observe("translate",function(e){void 0===e?o(""):""===e&&t||(a.translate=e,c()),t=!1}),u)u.hasOwnProperty(n)&&"translateAttr"===n.substr(0,13)&&13<n.length&&e(n);if(u.$observe("translateDefault",function(e){i.defaultText=e,c()}),g&&u.$observe("translateValues",function(e){e&&i.$parent.$watch(function(){angular.extend(i.interpolateParams,x(e)(i.$parent))})}),v){var r=function(n){u.$observe(n,function(e){var t=angular.lowercase(n.substr(14,1))+n.substr(15);i.interpolateParams[t]=e})};for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&"translateValue"===s.substr(0,14)&&"translateValues"!==s&&r(s)}var c=function(){for(var e in a)a.hasOwnProperty(e)&&void 0!==a[e]&&d(e,a[e],i,i.interpolateParams,i.defaultText,i.translateNamespace)},d=function(t,e,n,r,i,a){e?(a&&"."===e.charAt(0)&&(e=a+e),$(e,r,m,i,n.translateLanguage).then(function(e){f(e,n,!0,t)},function(e){f(e,n,!1,t)})):f(e,n,!1,t)},f=function(e,t,n,r){if(n||void 0!==t.defaultText&&(e=t.defaultText),"translate"===r){(n||!n&&!$.isKeepContent()&&void 0===u.translateKeepContent)&&l.empty().append(t.preText+e+t.postText);var i=$.isPostCompilingEnabled(),a=void 0!==h.translateCompile,o=a&&"false"!==h.translateCompile;(i&&!a||o)&&S(l.contents())(t)}else{var s=u.$attr[r];"data-"===s.substr(0,5)&&(s=s.substr(5)),s=s.substr(15),l.attr(s,e)}};(g||v||u.translateDefault)&&i.$watch("interpolateParams",c,!0),i.$on("translateLanguageChanged",c);var p=C.$on("$translateChangeSuccess",c);l.text().length?u.translate?o(u.translate):o(""):u.translate&&o(u.translate),c(),i.$on("$destroy",p)}}}}function E(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?E(e.$parent):void 0}function i(l,u){"use strict";return{restrict:"A",priority:l.directivePriority(),link:function(n,r,i){var a,o,s={},e=function(){angular.forEach(a,function(e,t){e&&(s[t]=!0,n.translateNamespace&&"."===e.charAt(0)&&(e=n.translateNamespace+e),l(e,o,i.translateInterpolation,void 0,n.translateLanguage).then(function(e){r.attr(t,e)},function(e){r.attr(t,e)}))}),angular.forEach(s,function(e,t){a[t]||(r.removeAttr(t),delete s[t])})};c(n,i.translateAttr,function(e){a=e},e),c(n,i.translateValues,function(e){o=e},e),i.translateValues&&n.$watch(i.translateValues,e,!0),n.$on("translateLanguageChanged",e);var t=u.$on("$translateChangeSuccess",e);e(),n.$on("$destroy",t)}}}function c(e,t,n,r){"use strict";t&&("::"===t.substr(0,2)?t=t.substr(2):e.$watch(t,function(e){n(e),r()},!0),n(e.$eval(t)))}function a(a,o){"use strict";return{compile:function(e){var r=function(){e.addClass(a.cloakClassName())},i=function(){e.removeClass(a.cloakClassName())};return a.onReady(function(){i()}),r(),function(e,t,n){n.translateCloak&&n.translateCloak.length&&(n.$observe("translateCloak",function(e){a(e).then(i,r)}),o.$on("$translateChangeSuccess",function(){a(n.translateCloak).then(i,r)}))}}}}function o(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,t,n){e.translateNamespace=E(e),e.translateNamespace&&"."===n.translateNamespace.charAt(0)?e.translateNamespace+=n.translateNamespace:e.translateNamespace=n.translateNamespace}}}}}function E(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?E(e.$parent):void 0}function s(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(t,e,n){n.$observe("translateLanguage",function(e){t.translateLanguage=e}),t.$watch("translateLanguage",function(){t.$broadcast("translateLanguageChanged")})}}}}function l(i,a){"use strict";var e=function(e,t,n,r){return angular.isObject(t)||(t=i(t)(this)),a.instant(e,t,n,r)};return a.statefulFilter()&&(e.$stateful=!0),e}function u(e){"use strict";return e("translations")}return e.$inject=["$translate"],t.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],r.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],i.$inject=["$translate","$rootScope"],a.$inject=["$translate","$rootScope"],l.$inject=["$parse","$translate"],u.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",function(){"use strict";var n,r,f,p=null,h=!1,g=!1;(f={sanitize:function(e,t){return"text"===t&&(e=a(e)),e},escape:function(e,t){return"text"===t&&(e=i(e)),e},sanitizeParameters:function(e,t){return"params"===t&&(e=s(e,a)),e},escapeParameters:function(e,t){return"params"===t&&(e=s(e,i)),e},sce:function(e,t,n){return"text"===t?e=o(e):"params"===t&&"filter"!==n&&(e=s(e,i)),e},sceParameters:function(e,t){return"params"===t&&(e=s(e,o)),e}}).escaped=f.escapeParameters,this.addStrategy=function(e,t){return f[e]=t,this},this.removeStrategy=function(e){return delete f[e],this},this.useStrategy=function(e){return h=!0,p=e,this},this.$get=["$injector","$log",function(u,c){var t,d={};return u.has("$sanitize")&&(n=u.get("$sanitize")),u.has("$sce")&&(r=u.get("$sce")),{useStrategy:(t=this,function(e){t.useStrategy(e)}),sanitize:function(e,t,n,r){if(p||h||g||(c.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),g=!0),n||null===n||(n=p),!n)return e;r||(r="service");var i,a,o,s,l=angular.isArray(n)?n:[n];return i=e,a=t,o=r,s=l,angular.forEach(s,function(t){if(angular.isFunction(t))i=t(i,a,o);else if(angular.isFunction(f[t]))i=f[t](i,a,o);else{if(!angular.isString(f[t]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+t+"'");if(!d[f[t]])try{d[f[t]]=u.get(f[t])}catch(e){throw d[f[t]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+t+"'")}i=d[f[t]](i,a,o)}}),i}}}];var i=function(e){var t=angular.element("<div></div>");return t.text(e),t.html()},a=function(e){if(!n)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return n(e)},o=function(e){if(!r)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return r.trustAsHtml(e)},s=function(e,n,r){if(angular.isDate(e))return e;if(angular.isObject(e)){var i=angular.isArray(e)?[]:{};if(r){if(-1<r.indexOf(e))throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else r=[];return r.push(e),angular.forEach(e,function(e,t){angular.isFunction(e)||(i[t]=s(e,n,r))}),r.splice(-1,1),i}return angular.isNumber(e)?e:n(e)}}),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",t),t.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",r),r.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",i),i.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",a),a.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",o),o.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",s),s.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",l),l.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",u),u.displayName="$translationCache","pascalprecht.translate"}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():t()}(0,function(){function e(a,o){"use strict";return function(n){if(!(n&&(angular.isArray(n.files)||angular.isString(n.prefix)&&angular.isString(n.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");n.files||(n.files=[{prefix:n.prefix,suffix:n.suffix}]);for(var e=function(e){if(!e||!angular.isString(e.prefix)||!angular.isString(e.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var t=[e.prefix,n.key,e.suffix].join("");return angular.isObject(n.fileMap)&&n.fileMap[t]&&(t=n.fileMap[t]),o(angular.extend({url:t,method:"GET",params:""},n.$http)).then(function(e){return e.data},function(){return a.reject(n.key)})},t=[],r=n.files.length,i=0;i<r;i++)t.push(e({prefix:n.files[i].prefix,key:n.key,suffix:n.files[i].suffix}));return a.all(t).then(function(e){for(var t=e.length,n={},r=0;r<t;r++)for(var i in e[r])n[i]=e[r][i];return n})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",e),e.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),angular.module("ui.bootstrap.datetimepicker",["ui.bootstrap.dateparser","ui.bootstrap.datepicker","ui.bootstrap.timepicker"]).directive("datepickerPopup",function(){return{restrict:"EAC",require:"ngModel",link:function(e,t,n,r){r.$formatters.shift()}}}).directive("datetimepicker",[function(){return 1===angular.version.major&&(4<angular.version.minor||4===angular.version.minor&&4<=angular.version.dot)?{restrict:"EA",require:"ngModel",scope:{ngModel:"=",ngChange:"&",dayFormat:"=",monthFormat:"=",yearFormat:"=",minTime:"=",maxTime:"=",dayHeaderFormat:"=",dayTitleFormat:"=",monthTitleFormat:"=",yearRange:"=",dateOptions:"=?",dateDisabled:"&",dateNgClick:"&",hourStep:"=",dateOpened:"=",minuteStep:"=",showMeridian:"=",meredians:"=",mousewheel:"=",readonlyTime:"=",readonlyDate:"=",disabledDate:"=",hiddenTime:"=",hiddenDate:"="},template:function(e,r){function i(e){return e.replace(/[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()})}function t(e,t){var n=angular.isDefined(t)?t:e;return r[n]?i(e)+'="'+r[n]+'" ':i(e)+" "}function n(e,t){return e+function(e,t){var n=angular.isDefined(t)?t:e;return r[n]?i(e)+'="'+n+'" ':""}.apply(null,t)}var a,o,s,l,u;return'<ng-form name="datetimepickerForm" isolate-form>'+('<div class="datetimepicker-wrapper"><input class="form-control" type="text" name="datepicker"ng-change="date_change($event)" is-open="innerDateOpened" datepicker-options="dateOptions" uib-datepicker-popup="{{dateFormat}}"ng-model="ngModel" '+[["dayFormat"],["monthFormat"],["yearFormat"],["dayHeaderFormat"],["dayTitleFormat"],["monthTitleFormat"],["yearRange"],["showButtonBar"],["ngHide","hiddenDate"],["ngReadonly","readonlyDate"],["ngDisabled","disabledDate"]].reduce(n,"")+(a="ngClick",o="$event: $event, opened: opened",s="dateNgClick",l="open($event)",u=angular.isDefined(s)?s:a,r[u]?i(a)+'="'+u+"({"+o+'})" ':angular.isDefined(l)?i(a)+'="'+l+'"':"")+t("currentText","currentText")+t("clearText","clearText")+t("datepickerAppendToBody","datepickerAppendToBody")+t("closeText","closeText")+t("placeholder","placeholder")+"/>\n</div>\n")+('<div class="datetimepicker-wrapper" name="timepicker" ng-model="time" ng-change="time_change()" style="display:inline-block">\n<div uib-timepicker min="minDate" max="maxDate" '+[["hourStep"],["minuteStep"],["showMeridian"],["meredians"],["mousewheel"],["ngHide","hiddenTime"],["ngDisabled","readonlyTime"]].reduce(n,"")+t("showSpinners","showSpinners")+"></div>\n</div>")+"</ng-form>"},controller:["$scope","$attrs",function(n,e){n.date_change=function(){var e=n.time;n.ngModel&&n.time&&n.ngModel.setHours(e.getHours(),e.getMinutes(),0,0)},n.time_change=function(){n.ngModel&&n.time&&n.ngModel.setHours(n.time.getHours(),n.time.getMinutes(),0,0)},n.open=function(e){e.preventDefault(),e.stopPropagation(),n.innerDateOpened=!0},e.$observe("dateFormat",function(e,t){n.dateFormat=e}),n.dateOptions=angular.isDefined(n.dateOptions)?n.dateOptions:{},n.dateOptions.dateDisabled=n.dateDisabled}],link:function(n,r,e,t){var i=function(){n.ngModel&&(n.minTime?(n.minDate=new Date(n.ngModel.getFullYear(),n.ngModel.getMonth(),n.ngModel.getDate(),n.minTime.getHours(),n.minTime.getMinutes(),0),n.dateOptions.minDate&&n.dateOptions.minDate>n.minDate&&(n.minDate=n.dateOptions.minDate)):n.minDate=n.dateOptions.minDate)},a=function(){n.ngModel&&(n.maxTime?(n.maxDate=new Date(n.ngModel.getFullYear(),n.ngModel.getMonth(),n.ngModel.getDate(),n.maxTime.getHours(),n.maxTime.getMinutes(),0),n.dateOptions.maxDate&&n.dateOptions.maxDate<n.maxDate&&(n.maxDate=n.dateOptions.maxDate)):n.maxDate=n.dateOptions.maxDate)},o=!0;n.$watch(function(){return n.ngModel},function(e){!n.ngModel||n.ngModel instanceof Date||(n.ngModel=new Date(n.ngModel));var t=r[0].querySelector("[name=timepicker]");if(t&&!t.contains(document.activeElement)){if(null===e||""===e){if(!o)return n.time=null,void(n.ngChange&&n.$eval(n.ngChange));(e=new Date).setHours(0,0,0,0)}e=new Date(e),!1===isNaN(e.getTime())&&(n.time=e,o&&(o=!1))}i(),a(),n.ngChange&&n.$eval(n.ngChange)},!0),n.$watch(function(){return n.datetimepickerForm&&n.datetimepickerForm.$error},function(e){angular.isUndefined(e)||(Object.keys(t.$error).forEach(function(e){t.$setValidity(e,!0)}),Object.keys(e).forEach(function(e){t.$setValidity(e,!1)}))},!0),n.$watch(function(){return n.datetimepickerForm&&(n.datetimepickerForm.timepicker.$touched||n.datetimepickerForm.datepicker.$touched)},function(e){e&&t.$setTouched()}),n.$watch(function(){return n.datetimepickerForm&&n.datetimepickerForm.$dirty},function(e){e&&t.$setDirty()}),n.$watch("dateOpened",function(e){n.innerDateOpened=e}),n.$watch("innerDateOpened",function(e){angular.isDefined(n.dateOpened)&&(n.dateOpened=e)}),n.$watch("dateOptions.minDate",function(e){i()}),n.$watch("timeMin",function(e){i()}),n.$watch("dateOptions.maxDate",function(e){a()}),n.$watch("timeMax",function(e){a()})}}:{restrict:"EA",template:'<div class="alert alert-danger">Angular 1.4.4 or above is required for datetimepicker to work correctly</div>'}}]).directive("isolateForm",[function(){return{restrict:"A",require:"?form",link:function(e,t,n,r){if(r){var i={};angular.copy(r,i);var a=t.parent().controller("form");if(a){a.$removeControl(r);var o={$setValidity:function(e,t,n){i.$setValidity(e,t,n),a.$setValidity(e,!0,r)}};angular.extend(r,o)}}}}}]),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e;function h(){return e.apply(null,arguments)}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)g(t,n)&&(e[n]=t[n]);return g(t,"toString")&&(e.toString=t.toString),g(t,"valueOf")&&(e.valueOf=t.valueOf),e}function o(e,t,n,r){return Pe(e,t,n,r,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),e._pf}function c(e){if(null==e._isValid){var t=m(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=o(NaN);return null!=e?u(m(t),e):m(t).userInvalidated=!0,t}var a=h.momentProperties=[];function f(e,t){var n,r,i;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=m(t)),void 0!==t._locale&&(e._locale=t._locale),0<a.length)for(n in a)void 0!==(i=t[r=a[n]])&&(e[r]=i);return e}var t=!1;function p(e){f(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),!1===t&&(t=!0,h.updateOffset(this),t=!1)}function v(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function y(e){return e<0?Math.ceil(e):Math.floor(e)}function b(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=y(t)),n}function $(e,t,n){var r,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&b(e[r])!==b(t[r]))&&o++;return o+a}function n(){}var r,i={};function w(e){return e?e.toLowerCase().replace("_","-"):e}function S(e){var t=null;if(!i[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=r._abbr,require("./locale/"+e),x(t)}catch(e){}return i[e]}function x(e,t){var n;return e&&(n=void 0===t?E(e):C(e,t))&&(r=n),r._abbr}function C(e,t){return null!==t?(t.abbr=e,i[e]=i[e]||new n,i[e].set(t),x(e),i[e]):(delete i[e],null)}function E(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return r;if(!s(e)){if(t=S(e))return t;e=[e]}return function(e){for(var t,n,r,i,a=0;a<e.length;){for(t=(i=w(e[a]).split("-")).length,n=(n=w(e[a+1]))?n.split("-"):null;0<t;){if(r=S(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&$(i,n,!0)>=t-1)break;t--}a++}return null}(e)}var T={};function D(e,t){var n=e.toLowerCase();T[n]=T[n+"s"]=T[t]=e}function k(e){return"string"==typeof e?T[e]||T[e.toLowerCase()]:void 0}function R(e){var t,n,r={};for(n in e)g(e,n)&&(t=k(n))&&(r[t]=e[n]);return r}function M(t,n){return function(e){return null!=e?(N(this,t,e),h.updateOffset(this,n),this):A(this,t)}}function A(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function N(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function O(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if("function"==typeof this[e=k(e)])return this[e](t);return this}function I(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var _=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,H={},L={};function F(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(L[e]=i),t&&(L[t[0]]=function(){return I(i.apply(this,arguments),t[1],t[2])}),n&&(L[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function z(e,t){return e.isValid()?(t=U(t,e.localeData()),H[t]=H[t]||function(n){var r,i,e,a=n.match(_);for(r=0,i=a.length;r<i;r++)L[a[r]]?a[r]=L[a[r]]:a[r]=(e=a[r]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){var t="";for(r=0;r<i;r++)t+=a[r]instanceof Function?a[r].call(e,n):a[r];return t}}(t),H[t](e)):e.localeData().invalidDate()}function U(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;0<=n&&P.test(e);)e=e.replace(P,r),P.lastIndex=0,n-=1;return e}var B=/\d/,j=/\d\d/,V=/\d{3}/,W=/\d{4}/,q=/[+-]?\d{6}/,G=/\d\d?/,Y=/\d{1,3}/,K=/\d{1,4}/,X=/[+-]?\d{1,6}/,Z=/\d+/,J=/[+-]?\d+/,Q=/Z|[+-]\d\d:?\d\d/gi,ee=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,te={};function ne(e,t,n){var r;te[e]="function"==typeof(r=t)&&"[object Function]"===Object.prototype.toString.call(r)?t:function(e){return e&&n?n:t}}var re={};function ie(e,n){var t,r=n;for("string"==typeof e&&(e=[e]),"number"==typeof n&&(r=function(e,t){t[n]=b(e)}),t=0;t<e.length;t++)re[e[t]]=r}function ae(e,i){ie(e,function(e,t,n,r){n._w=n._w||{},i(e,n._w,n,r)})}var oe=0,se=1,le=2,ue=3,ce=4,de=5,fe=6;function pe(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),F("MMMM",0,0,function(e){return this.localeData().months(this,e)}),D("month","M"),ne("M",G),ne("MM",G,j),ne("MMM",ee),ne("MMMM",ee),ie(["M","MM"],function(e,t){t[se]=b(e)-1}),ie(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[se]=i:m(n).invalidMonth=e});var he="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var ge="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function me(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))||(n=Math.min(e.date(),pe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)),e}function ve(e){return null!=e?(me(this,e),h.updateOffset(this,!0),this):A(this,"Month")}function ye(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[se]<0||11<n[se]?se:n[le]<1||n[le]>pe(n[oe],n[se])?le:n[ue]<0||24<n[ue]||24===n[ue]&&(0!==n[ce]||0!==n[de]||0!==n[fe])?ue:n[ce]<0||59<n[ce]?ce:n[de]<0||59<n[de]?de:n[fe]<0||999<n[fe]?fe:-1,m(e)._overflowDayOfYear&&(t<oe||le<t)&&(t=le),m(e).overflow=t),e}function be(e){!1===h.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function $e(e,t){var n=!0;return u(function(){return n&&(be(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}var we={};h.suppressDeprecationWarnings=!1;var Se=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ce=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ee=/^\/?Date\((\-?\d+)/i;function Te(e){var t,n,r=e._i,i=Se.exec(r);if(i){for(m(e).iso=!0,t=0,n=xe.length;t<n;t++)if(xe[t][1].exec(r)){e._f=xe[t][0];break}for(t=0,n=Ce.length;t<n;t++)if(Ce[t][1].exec(r)){e._f+=(i[6]||" ")+Ce[t][0];break}r.match(Q)&&(e._f+="Z"),Ie(e)}else e._isValid=!1}function De(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function ke(e){return Re(e)?366:365}function Re(e){return e%4==0&&e%100!=0||e%400==0}h.createFromInputFallback=$e("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),D("year","y"),ne("Y",J),ne("YY",G,j),ne("YYYY",K,W),ne("YYYYY",X,q),ne("YYYYYY",X,q),ie(["YYYYY","YYYYYY"],oe),ie("YYYY",function(e,t){t[oe]=2===e.length?h.parseTwoDigitYear(e):b(e)}),ie("YY",function(e,t){t[oe]=h.parseTwoDigitYear(e)});var Me=M("FullYear",!(h.parseTwoDigitYear=function(e){return b(e)+(68<b(e)?1900:2e3)}));function Ae(e,t,n){var r,i=n-t,a=n-e.day();return i<a&&(a-=7),a<i-7&&(a+=7),r=He(e).add(a,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),ne("w",G),ne("ww",G,j),ne("W",G),ne("WW",G,j),ae(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=b(e)});function Ne(e,t,n){return null!=e?e:null!=t?t:n}function Oe(e){var t,n,r,i,a=[];if(!e._d){var o,s;for(o=e,s=new Date,r=o._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()],e._w&&null==e._a[le]&&null==e._a[se]&&function(e){var t,n,r,i,a,o,s;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,o=4,n=Ne(t.GG,e._a[oe],Ae(He(),1,4).year),r=Ne(t.W,1),i=Ne(t.E,1)):(a=e._locale._week.dow,o=e._locale._week.doy,n=Ne(t.gg,e._a[oe],Ae(He(),a,o).year),r=Ne(t.w,1),null!=t.d?(i=t.d)<a&&++r:i=null!=t.e?t.e+a:a);l=n,u=r,c=i,d=o,f=a,h=6+f-d,g=De(l,0,1+h).getUTCDay(),g<f&&(g+=7),s={year:0<(p=1+h+7*(u-1)-g+(c=null!=c?1*c:f))?l:l-1,dayOfYear:0<p?p:ke(l-1)+p},e._a[oe]=s.year,e._dayOfYear=s.dayOfYear;var l,u,c,d,f,p,h,g}(e),e._dayOfYear&&(i=Ne(e._a[oe],r[oe]),e._dayOfYear>ke(i)&&(m(e)._overflowDayOfYear=!0),n=De(i,0,e._dayOfYear),e._a[se]=n.getUTCMonth(),e._a[le]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ue]&&0===e._a[ce]&&0===e._a[de]&&0===e._a[fe]&&(e._nextDay=!0,e._a[ue]=0),e._d=(e._useUTC?De:function(e,t,n,r,i,a,o){var s=new Date(e,t,n,r,i,a,o);return e<1970&&s.setFullYear(e),s}).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ue]=24)}}function Ie(e){if(e._f!==h.ISO_8601){e._a=[],m(e).empty=!0;var t,n,r,i,a,o,s,l,u,c,d=""+e._i,f=d.length,p=0;for(r=U(e._f,e._locale).match(_)||[],t=0;t<r.length;t++)i=r[t],(n=(d.match((u=i,c=e,g(te,u)?te[u](c._strict,c._locale):new RegExp(u.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))))||[])[0])&&(0<(a=d.substr(0,d.indexOf(n))).length&&m(e).unusedInput.push(a),d=d.slice(d.indexOf(n)+n.length),p+=n.length),L[i]?(n?m(e).empty=!1:m(e).unusedTokens.push(i),o=i,l=e,null!=(s=n)&&g(re,o)&&re[o](s,l._a,l,o)):e._strict&&!n&&m(e).unusedTokens.push(i);m(e).charsLeftOver=f-p,0<d.length&&m(e).unusedInput.push(d),!0===m(e).bigHour&&e._a[ue]<=12&&0<e._a[ue]&&(m(e).bigHour=void 0),e._a[ue]=function(e,t,n){var r;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0)),t)}(e._locale,e._a[ue],e._meridiem),Oe(e),ye(e)}else Te(e)}function _e(e){var t,n,r,i,a=e._i,o=e._f;return e._locale=e._locale||E(e._l),null===a||void 0===o&&""===a?d({nullInput:!0}):("string"==typeof a&&(e._i=a=e._locale.preparse(a)),v(a)?new p(ye(a)):(s(o)?function(e){var t,n,r,i,a;if(0===e._f.length)return m(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)a=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Ie(t),c(t)&&(a+=m(t).charsLeftOver,a+=10*m(t).unusedTokens.length,m(t).score=a,(null==r||a<r)&&(r=a,n=t));u(e,n||t)}(e):o?Ie(e):l(a)?e._d=a:void 0===(n=(t=e)._i)?t._d=new Date:l(n)?t._d=new Date(+n):"string"==typeof n?(r=t,null===(i=Ee.exec(r._i))?(Te(r),!1===r._isValid&&(delete r._isValid,h.createFromInputFallback(r))):r._d=new Date(+i[1])):s(n)?(t._a=function(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}(n.slice(0),function(e){return parseInt(e,10)}),Oe(t)):"object"==typeof n?function(e){if(!e._d){var t=R(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],Oe(e)}}(t):"number"==typeof n?t._d=new Date(n):h.createFromInputFallback(t),e))}function Pe(e,t,n,r,i){var a,o={};return"boolean"==typeof n&&(r=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,(a=new p(ye(_e(o))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function He(e,t,n,r){return Pe(e,t,n,r,!1)}F("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),ne("DDD",Y),ne("DDDD",V),ie(["DDD","DDDD"],function(e,t,n){n._dayOfYear=b(e)}),h.ISO_8601=function(){};var Le=$e("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=He.apply(null,arguments);return e<this?this:e}),Fe=$e("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=He.apply(null,arguments);return this<e?this:e});function ze(e,t){var n,r;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return He();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Ue(e){var t=R(e),n=t.year||0,r=t.quarter||0,i=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*s,this._days=+o+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=E(),this._bubble()}function Be(e){return e instanceof Ue}function je(e,n){F(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+I(~~(e/60),2)+n+I(~~e%60,2)})}je("Z",":"),je("ZZ",""),ne("Z",Q),ne("ZZ",Q),ie(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=We(e)});var Ve=/([\+\-]|\d\d)/gi;function We(e){var t=(e||"").match(Q)||[],n=((t[t.length-1]||[])+"").match(Ve)||["-",0,0],r=60*n[1]+b(n[2]);return"+"===n[0]?r:-r}function qe(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(v(e)||l(e)?+e:+He(e))-+n,n._d.setTime(+n._d+r),h.updateOffset(n,!1),n):He(e).local()}function Ge(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ye(){return this._isUTC&&0===this._offset}h.updateOffset=function(){};var Ke=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Xe=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function Ze(e,t){var n,r,i,a=e,o=null;return Be(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(o=Ke.exec(e))?(n="-"===o[1]?-1:1,a={y:0,d:b(o[le])*n,h:b(o[ue])*n,m:b(o[ce])*n,s:b(o[de])*n,ms:b(o[fe])*n}):(o=Xe.exec(e))?(n="-"===o[1]?-1:1,a={y:Je(o[2],n),M:Je(o[3],n),d:Je(o[4],n),h:Je(o[5],n),m:Je(o[6],n),s:Je(o[7],n),w:Je(o[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=function(e,t){var n;t=qe(t,e),e.isBefore(t)?n=Qe(e,t):((n=Qe(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(He(a.from),He(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),r=new Ue(a),Be(e)&&g(e,"_locale")&&(r._locale=e._locale),r}function Je(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function et(a,o){return function(e,t){var n,r,i;return null===t||isNaN(+t)||(i="moment()."+(r=o)+"(period, number) is deprecated. Please use moment()."+o+"(number, period).",we[r]||(be(i),we[r]=!0),n=e,e=t,t=n),tt(this,Ze(e="string"==typeof e?+e:e,t),a),this}}function tt(e,t,n,r){var i=t._milliseconds,a=t._days,o=t._months;r=null==r||r,i&&e._d.setTime(+e._d+i*n),a&&N(e,"Date",A(e,"Date")+a*n),o&&me(e,A(e,"Month")+o*n),r&&h.updateOffset(e,a||o)}Ze.fn=Ue.prototype;var nt=et(1,"add"),rt=et(-1,"subtract");function it(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():z(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):z(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function at(e){var t;return void 0===e?this._locale._abbr:(null!=(t=E(e))&&(this._locale=t),this)}h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var ot=$e("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function st(){return this._locale}function lt(e,t){F(0,[e,e.length],0,t)}function ut(e,t,n){return Ae(He([e,11,31+t-n]),t,n).week}F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),lt("gggg","weekYear"),lt("ggggg","weekYear"),lt("GGGG","isoWeekYear"),lt("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),ne("G",J),ne("g",J),ne("GG",G,j),ne("gg",G,j),ne("GGGG",K,W),ne("gggg",K,W),ne("GGGGG",X,q),ne("ggggg",X,q),ae(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=b(e)}),ae(["gg","GG"],function(e,t,n,r){t[r]=h.parseTwoDigitYear(e)}),F("Q",0,0,"quarter"),D("quarter","Q"),ne("Q",B),ie("Q",function(e,t){t[se]=3*(b(e)-1)}),F("D",["DD",2],"Do","date"),D("date","D"),ne("D",G),ne("DD",G,j),ne("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),ie(["D","DD"],le),ie("Do",function(e,t){t[le]=b(e.match(G)[0])});var ct=M("Date",!0);F("d",0,"do","day"),F("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),F("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),F("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),ne("d",G),ne("e",G),ne("E",G),ne("dd",ee),ne("ddd",ee),ne("dddd",ee),ae(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:m(n).invalidWeekday=e}),ae(["d","e","E"],function(e,t,n,r){t[r]=b(e)});var dt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var ft="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var pt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function ht(e,t){F(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function gt(e,t){return t._meridiemParse}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,function(){return this.hours()%12||12}),ht("a",!0),ht("A",!1),D("hour","h"),ne("a",gt),ne("A",gt),ne("H",G),ne("h",G),ne("HH",G,j),ne("hh",G,j),ie(["H","HH"],ue),ie(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ie(["h","hh"],function(e,t,n){t[ue]=b(e),m(n).bigHour=!0});var mt=M("Hours",!0);F("m",["mm",2],0,"minute"),D("minute","m"),ne("m",G),ne("mm",G,j),ie(["m","mm"],ce);var vt=M("Minutes",!1);F("s",["ss",2],0,"second"),D("second","s"),ne("s",G),ne("ss",G,j),ie(["s","ss"],de);var yt,bt=M("Seconds",!1);for(F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),D("millisecond","ms"),ne("S",Y,B),ne("SS",Y,j),ne("SSS",Y,V),yt="SSSS";yt.length<=9;yt+="S")ne(yt,Z);function $t(e,t){t[fe]=b(1e3*("0."+e))}for(yt="S";yt.length<=9;yt+="S")ie(yt,$t);var wt=M("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var St=p.prototype;St.add=nt,St.calendar=function(e,t){var n=e||He(),r=qe(n,this).startOf("day"),i=this.diff(r,"days",!0),a=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(t&&t[a]||this.localeData().calendar(a,this,He(n)))},St.clone=function(){return new p(this)},St.diff=function(e,t,n){var r,i,a=qe(e,this),o=6e4*(a.utcOffset()-this.utcOffset());return"year"===(t=k(t))||"month"===t||"quarter"===t?(s=this,l=a,d=12*(l.year()-s.year())+(l.month()-s.month()),f=s.clone().add(d,"months"),c=l-f<0?(u=s.clone().add(d-1,"months"),(l-f)/(f-u)):(u=s.clone().add(d+1,"months"),(l-f)/(u-f)),i=-(d+c),"quarter"===t?i/=3:"year"===t&&(i/=12)):(r=this-a,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-o)/864e5:"week"===t?(r-o)/6048e5:r),n?i:y(i);var s,l,u,c,d,f},St.endOf=function(e){return void 0===(e=k(e))||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},St.format=function(e){var t=z(this,e||h.defaultFormat);return this.localeData().postformat(t)},St.from=function(e,t){return this.isValid()?Ze({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},St.fromNow=function(e){return this.from(He(),e)},St.to=function(e,t){return this.isValid()?Ze({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},St.toNow=function(e){return this.to(He(),e)},St.get=O,St.invalidAt=function(){return m(this).overflow},St.isAfter=function(e,t){return"millisecond"===(t=k(void 0!==t?t:"millisecond"))?+(e=v(e)?e:He(e))<+this:(v(e)?+e:+He(e))<+this.clone().startOf(t)},St.isBefore=function(e,t){var n;return"millisecond"===(t=k(void 0!==t?t:"millisecond"))?+this<+(e=v(e)?e:He(e)):(n=v(e)?+e:+He(e),+this.clone().endOf(t)<n)},St.isBetween=function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},St.isSame=function(e,t){var n;return"millisecond"===(t=k(t||"millisecond"))?+this==+(e=v(e)?e:He(e)):(n=+He(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},St.isValid=function(){return c(this)},St.lang=ot,St.locale=at,St.localeData=st,St.max=Fe,St.min=Le,St.parsingFlags=function(){return u({},m(this))},St.set=O,St.startOf=function(e){switch(e=k(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},St.subtract=rt,St.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},St.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},St.toDate=function(){return this._offset?new Date(+this):this._d},St.toISOString=it,St.toJSON=it,St.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},St.unix=function(){return Math.floor(+this/1e3)},St.valueOf=function(){return+this._d-6e4*(this._offset||0)},St.year=Me,St.isLeapYear=function(){return Re(this.year())},St.weekYear=function(e){var t=Ae(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},St.isoWeekYear=function(e){var t=Ae(this,1,4).year;return null==e?t:this.add(e-t,"y")},St.quarter=St.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},St.month=ve,St.daysInMonth=function(){return pe(this.year(),this.month())},St.week=St.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},St.isoWeek=St.isoWeeks=function(e){var t=Ae(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},St.weeksInYear=function(){var e=this.localeData()._week;return ut(this.year(),e.dow,e.doy)},St.isoWeeksInYear=function(){return ut(this.year(),1,4)},St.date=ct,St.day=St.days=function(e){var t,n,r=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-r,"d")):r},St.weekday=function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},St.isoWeekday=function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},St.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},St.hour=St.hours=mt,St.minute=St.minutes=vt,St.second=St.seconds=bt,St.millisecond=St.milliseconds=wt,St.utcOffset=function(e,t){var n,r=this._offset||0;return null!=e?("string"==typeof e&&(e=We(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(n=Ge(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!t||this._changeInProgress?tt(this,Ze(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Ge(this)},St.utc=function(e){return this.utcOffset(0,e)},St.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ge(this),"m")),this},St.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(We(this._i)),this},St.hasAlignedHourOffset=function(e){return e=e?He(e).utcOffset():0,(this.utcOffset()-e)%60==0},St.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},St.isDSTShifted=function(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var e={};if(f(e,this),(e=_e(e))._a){var t=e._isUTC?o(e._a):He(e._a);this._isDSTShifted=this.isValid()&&0<$(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted},St.isLocal=function(){return!this._isUTC},St.isUtcOffset=function(){return this._isUTC},St.isUtc=Ye,St.isUTC=Ye,St.zoneAbbr=function(){return this._isUTC?"UTC":""},St.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},St.dates=$e("dates accessor is deprecated. Use date instead.",ct),St.months=$e("months accessor is deprecated. Use month instead",ve),St.years=$e("years accessor is deprecated. Use year instead",Me),St.zone=$e("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()});var xt=St;function Ct(e){return e}var Et=n.prototype;function Tt(e,t,n,r){var i=E(),a=o().set(r,t);return i[n](a,e)}function Dt(e,t,n,r,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return Tt(e,t,n,i);var a,o=[];for(a=0;a<r;a++)o[a]=Tt(e,a,n,i);return o}Et._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Et.calendar=function(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.call(t,n):r},Et._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Et.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},Et._invalidDate="Invalid date",Et.invalidDate=function(){return this._invalidDate},Et._ordinal="%d",Et.ordinal=function(e){return this._ordinal.replace("%d",e)},Et._ordinalParse=/\d{1,2}/,Et.preparse=Ct,Et.postformat=Ct,Et._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Et.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},Et.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},Et.set=function(e){var t,n;for(n in e)"function"==typeof(t=e[n])?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},Et.months=function(e){return this._months[e.month()]},Et._months=he,Et.monthsShort=function(e){return this._monthsShort[e.month()]},Et._monthsShort=ge,Et.monthsParse=function(e,t,n){var r,i,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=o([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},Et.week=function(e){return Ae(e,this._week.dow,this._week.doy).week},Et._week={dow:0,doy:6},Et.firstDayOfYear=function(){return this._week.doy},Et.firstDayOfWeek=function(){return this._week.dow},Et.weekdays=function(e){return this._weekdays[e.day()]},Et._weekdays=dt,Et.weekdaysMin=function(e){return this._weekdaysMin[e.day()]},Et._weekdaysMin=pt,Et.weekdaysShort=function(e){return this._weekdaysShort[e.day()]},Et._weekdaysShort=ft,Et.weekdaysParse=function(e){var t,n,r;for(this._weekdaysParse=this._weekdaysParse||[],t=0;t<7;t++)if(this._weekdaysParse[t]||(n=He([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},Et.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Et._meridiemParse=/[ap]\.?m?\.?/i,Et.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===b(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),h.lang=$e("moment.lang is deprecated. Use moment.locale instead.",x),h.langData=$e("moment.langData is deprecated. Use moment.localeData instead.",E);var kt=Math.abs;function Rt(e,t,n,r){var i=Ze(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Mt(e){return e<0?Math.floor(e):Math.ceil(e)}function At(e){return 4800*e/146097}function Nt(e){return 146097*e/4800}function Ot(e){return function(){return this.as(e)}}var It=Ot("ms"),_t=Ot("s"),Pt=Ot("m"),Ht=Ot("h"),Lt=Ot("d"),Ft=Ot("w"),zt=Ot("M"),Ut=Ot("y");function Bt(e){return function(){return this._data[e]}}var jt=Bt("milliseconds"),Vt=Bt("seconds"),Wt=Bt("minutes"),qt=Bt("hours"),Gt=Bt("days"),Yt=Bt("months"),Kt=Bt("years");var Xt=Math.round,Zt={s:45,m:45,h:22,d:26,M:11};var Jt=Math.abs;function Qt(){var e,t,n=Jt(this._milliseconds)/1e3,r=Jt(this._days),i=Jt(this._months);t=y((e=y(n/60))/60),n%=60,e%=60;var a=y(i/12),o=i%=12,s=r,l=t,u=e,c=n,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(a?a+"Y":"")+(o?o+"M":"")+(s?s+"D":"")+(l||u||c?"T":"")+(l?l+"H":"")+(u?u+"M":"")+(c?c+"S":""):"P0D"}var en=Ue.prototype;return en.abs=function(){var e=this._data;return this._milliseconds=kt(this._milliseconds),this._days=kt(this._days),this._months=kt(this._months),e.milliseconds=kt(e.milliseconds),e.seconds=kt(e.seconds),e.minutes=kt(e.minutes),e.hours=kt(e.hours),e.months=kt(e.months),e.years=kt(e.years),this},en.add=function(e,t){return Rt(this,e,t,1)},en.subtract=function(e,t){return Rt(this,e,t,-1)},en.as=function(e){var t,n,r=this._milliseconds;if("month"===(e=k(e))||"year"===e)return t=this._days+r/864e5,n=this._months+At(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Nt(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},en.asMilliseconds=It,en.asSeconds=_t,en.asMinutes=Pt,en.asHours=Ht,en.asDays=Lt,en.asWeeks=Ft,en.asMonths=zt,en.asYears=Ut,en.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12)},en._bubble=function(){var e,t,n,r,i,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return 0<=a&&0<=o&&0<=s||a<=0&&o<=0&&s<=0||(a+=864e5*Mt(Nt(s)+o),s=o=0),l.milliseconds=a%1e3,e=y(a/1e3),l.seconds=e%60,t=y(e/60),l.minutes=t%60,n=y(t/60),l.hours=n%24,s+=i=y(At(o+=y(n/24))),o-=Mt(Nt(i)),r=y(s/12),s%=12,l.days=o,l.months=s,l.years=r,this},en.get=function(e){return this[(e=k(e))+"s"]()},en.milliseconds=jt,en.seconds=Vt,en.minutes=Wt,en.hours=qt,en.days=Gt,en.weeks=function(){return y(this.days()/7)},en.months=Yt,en.years=Kt,en.humanize=function(e){var t,n,r,i,a,o,s,l,u,c,d,f=this.localeData(),p=(n=!e,r=f,i=Ze(t=this).abs(),a=Xt(i.as("s")),o=Xt(i.as("m")),s=Xt(i.as("h")),l=Xt(i.as("d")),u=Xt(i.as("M")),c=Xt(i.as("y")),(d=a<Zt.s&&["s",a]||1===o&&["m"]||o<Zt.m&&["mm",o]||1===s&&["h"]||s<Zt.h&&["hh",s]||1===l&&["d"]||l<Zt.d&&["dd",l]||1===u&&["M"]||u<Zt.M&&["MM",u]||1===c&&["y"]||["yy",c])[2]=n,d[3]=0<+t,d[4]=r,function(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}.apply(null,d));return e&&(p=f.pastFuture(+this,p)),f.postformat(p)},en.toISOString=Qt,en.toString=Qt,en.toJSON=Qt,en.locale=at,en.localeData=st,en.toIsoString=$e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qt),en.lang=ot,F("X",0,0,"unix"),F("x",0,0,"valueOf"),ne("x",J),ne("X",/[+-]?\d+(\.\d{1,3})?/),ie("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ie("x",function(e,t,n){n._d=new Date(b(e))}),h.version="2.10.6",e=He,h.fn=xt,h.min=function(){return ze("isBefore",[].slice.call(arguments,0))},h.max=function(){return ze("isAfter",[].slice.call(arguments,0))},h.utc=o,h.unix=function(e){return He(1e3*e)},h.months=function(e,t){return Dt(e,t,"months",12,"month")},h.isDate=l,h.locale=x,h.invalid=d,h.duration=Ze,h.isMoment=v,h.weekdays=function(e,t){return Dt(e,t,"weekdays",7,"day")},h.parseZone=function(){return He.apply(null,arguments).parseZone()},h.localeData=E,h.isDuration=Be,h.monthsShort=function(e,t){return Dt(e,t,"monthsShort",12,"month")},h.weekdaysMin=function(e,t){return Dt(e,t,"weekdaysMin",7,"day")},h.defineLocale=C,h.weekdaysShort=function(e,t){return Dt(e,t,"weekdaysShort",7,"day")},h.normalizeUnits=k,h.relativeTimeThreshold=function(e,t){return void 0!==Zt[e]&&(void 0===t?Zt[e]:(Zt[e]=t,!0))},h}),function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(M,A){var N=M.fullCalendar={version:"2.7.3",internalApiVersion:4},c=N.views={};M.fn.fullCalendar=function(a){var o=Array.prototype.slice.call(arguments,1),s=this;return this.each(function(e,t){var n,r=M(t),i=r.data("fullCalendar");"string"==typeof a?i&&M.isFunction(i[a])&&(n=i[a].apply(i,o),e||(s=n),"destroy"===a&&r.removeData("fullCalendar")):i||(i=new qe(r,a),r.data("fullCalendar",i),i.render())}),s};var s=["header","buttonText","buttonIcons","themeButtonIcons"];function d(e){return U(e,s)}function a(e,t){t.left&&e.css({"border-left-width":1,"margin-left":t.left-1}),t.right&&e.css({"border-right-width":1,"margin-right":t.right-1})}function o(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function p(){M("body").addClass("fc-not-allowed")}function h(){M("body").removeClass("fc-not-allowed")}function n(i,e,t){var a=Math.floor(e/i.length),o=Math.floor(e-a*(i.length-1)),s=[],l=[],u=[],c=0;r(i),i.each(function(e,t){var n=e===i.length-1?o:a,r=M(t).outerHeight(!0);r<n?(s.push(t),l.push(r),u.push(M(t).height())):c+=r}),t&&(e-=c,a=Math.floor(e/s.length),o=Math.floor(e-a*(s.length-1))),M(s).each(function(e,t){var n=e===s.length-1?o:a,r=l[e],i=n-(r-u[e]);r<n&&M(t).height(i)})}function r(e){e.height("")}function e(e){var r=0;return e.find("> span").each(function(e,t){var n=M(t).outerWidth();r<n&&(r=n)}),r++,e.width(r),r}function t(e,t){var n,r=e.add(t);return r.css({position:"relative",left:-1}),n=e.outerHeight()-t.outerHeight(),r.css({position:"",left:""}),n}function f(e){var t=e.css("position"),n=e.parents().filter(function(){var e=M(this);return/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&n.length?n:M(e[0].ownerDocument||document)}function g(e,t){var n=e.offset(),r=n.left-(t?t.left:0),i=n.top-(t?t.top:0);return{left:r,right:r+e.outerWidth(),top:i,bottom:i+e.outerHeight()}}function i(e,t){var n=e.offset(),r=l(e),i=n.left+m(e,"border-left-width")+r.left-(t?t.left:0),a=n.top+m(e,"border-top-width")+r.top-(t?t.top:0);return{left:i,right:i+e[0].clientWidth,top:a,bottom:a+e[0].clientHeight}}function l(e){var t=e.innerWidth()-e[0].clientWidth,n={left:0,right:0,top:0,bottom:e.innerHeight()-e[0].clientHeight};return!function(){null===u&&(e=M("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),t=e.children().offset().left>e.offset().left,e.remove(),u=t);var e,t;return u}()||"rtl"!=e.css("direction")?n.right=t:n.left=t,n}N.intersectRanges=D,N.applyAll=W,N.debounce=Q,N.isInt=Z,N.htmlEscape=G,N.cssToStr=K,N.proxy=J,N.capitaliseFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},N.getOuterRect=g,N.getClientRect=i,N.getContentRect=function(e,t){var n=e.offset(),r=n.left+m(e,"border-left-width")+m(e,"padding-left")-(t?t.left:0),i=n.top+m(e,"border-top-width")+m(e,"padding-top")-(t?t.top:0);return{left:r,right:r+e.width(),top:i,bottom:i+e.height()}},N.getScrollbarWidths=l;var u=null;function m(e,t){return parseFloat(e.css(t))||0}function v(e){return 1==e.which&&!e.ctrlKey}function y(e){if(void 0!==e.pageX)return e.pageX;var t=e.originalEvent.touches;return t?t[0].pageX:void 0}function b(e){if(void 0!==e.pageY)return e.pageY;var t=e.originalEvent.touches;return t?t[0].pageY:void 0}function $(e){return/^touch/.test(e.type)}function w(e){e.preventDefault()}function S(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom&&n}function x(e){var t,n,r=[],i=[];for("string"==typeof e?i=e.split(/\s*,\s*/):"function"==typeof e?i=[e]:M.isArray(e)&&(i=e),t=0;t<i.length;t++)"string"==typeof(n=i[t])?r.push("-"==n.charAt(0)?{field:n.substring(1),order:-1}:{field:n,order:1}):"function"==typeof n&&r.push({func:n});return r}function C(e,t,n){var r,i;for(r=0;r<n.length;r++)if(i=E(e,t,n[r]))return i;return 0}function E(e,t,n){return n.func?n.func(e,t):T(e[n.field],t[n.field])*(n.order||1)}function T(e,t){return e||t?null==t?-1:null==e?1:"string"===M.type(e)||"string"===M.type(t)?String(e).localeCompare(String(t)):e-t:0}function D(e,t){var n,r,i,a,o=e.start,s=e.end,l=t.start,u=t.end;if(l<s&&o<u)return i=l<=o?(n=o.clone(),!0):(n=l.clone(),!1),a=s<=u?(r=s.clone(),!0):(r=u.clone(),!1),{start:n,end:r,isStart:i,isEnd:a}}N.preventDefault=w,N.intersectRects=S,N.parseFieldSpecs=x,N.compareByFieldSpecs=C,N.compareByFieldSpec=E,N.flexibleCompare=T,N.computeIntervalUnit=_,N.divideRangeByDuration=function(e,t,n){var r;if(L(n))return(t-e)/n;if(r=n.asMonths(),1<=Math.abs(r)&&Z(r))return t.diff(e,"months",!0)/r;return t.diff(e,"days",!0)/n.asDays()},N.divideDurationByDuration=H,N.multiplyDuration=function(e,t){var n;if(L(e))return A.duration(e*t);if(n=e.asMonths(),1<=Math.abs(n)&&Z(n))return A.duration({months:n*t});return A.duration({days:e.asDays()*t})},N.durationHasTime=L;var k=["sun","mon","tue","wed","thu","fri","sat"],R=["year","month","week","day","hour","minute","second","millisecond"];function O(e,t){return A.duration({days:e.clone().stripTime().diff(t.clone().stripTime(),"days"),ms:e.time()-t.time()})}function I(e,t,n){return A.duration(Math.round(e.diff(t,n,!0)),n)}function _(e,t){var n,r,i;for(n=0;n<R.length&&!(1<=(i=P(r=R[n],e,t))&&Z(i));n++);return r}function P(e,t,n){return null!=n?n.diff(t,e,!0):A.isDuration(t)?t.as(e):t.end.diff(t.start,e,!0)}function H(e,t){var n,r;return L(e)||L(t)?e/t:(n=e.asMonths(),r=t.asMonths(),1<=Math.abs(n)&&Z(n)&&1<=Math.abs(r)&&Z(r)?n/r:e.asDays()/t.asDays())}function L(e){return Boolean(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}function F(e){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}N.log=function(){var e=window.console;if(e&&e.log)return e.log.apply(e,arguments)},N.warn=function(){var e=window.console;return e&&e.warn?e.warn.apply(e,arguments):N.log.apply(N,arguments)};var z={}.hasOwnProperty;function U(e,t){var n,r,i,a,o,s,l={};if(t)for(n=0;n<t.length;n++){for(r=t[n],i=[],a=e.length-1;0<=a;a--)if("object"==typeof(o=e[a][r]))i.unshift(o);else if(void 0!==o){l[r]=o;break}i.length&&(l[r]=U(i))}for(n=e.length-1;0<=n;n--)for(r in s=e[n])r in l||(l[r]=s[r]);return l}function B(e){var t=function(){};return t.prototype=e,new t}function j(e,t){for(var n in e)V(e,n)&&(t[n]=e[n])}function V(e,t){return z.call(e,t)}function W(e,t,n){if(M.isFunction(e)&&(e=[e]),e){var r,i;for(r=0;r<e.length;r++)i=e[r].apply(t,n)||i;return i}}function q(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}function G(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Y(e){return e.replace(/&.*?;/g,"")}function K(e){var n=[];return M.each(e,function(e,t){null!=t&&n.push(e+":"+t)}),n.join(";")}function X(e,t){return e-t}function Z(e){return e%1==0}function J(e,t){var n=e[t];return function(){return n.apply(e,arguments)}}function Q(t,n,r){var i,a,o,s,l,u=function(){var e=+new Date-s;e<n?i=setTimeout(u,n-e):(i=null,r||(l=t.apply(o,a),o=a=null))};return function(){o=this,a=arguments,s=+new Date;var e=r&&!i;return i||(i=setTimeout(u,n)),e&&(l=t.apply(o,a),o=a=null),l}}var ee,te,ne,re=/^\s*\d{4}-\d\d$/,ie=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,ae=A.fn,oe=M.extend({},ae);function se(e,t,n){var r,i,a,o,s,l=e[0],u=1==e.length&&"string"==typeof l;return A.isMoment(l)?ue(l,o=A.apply(null,e)):(s=l,"[object Date]"===Object.prototype.toString.call(s)||s instanceof Date||void 0===l?o=A.apply(null,e):(i=r=!1,u?re.test(l)?(e=[l+="-01"],i=r=!0):(a=ie.exec(l))&&(r=!a[5],i=!0):M.isArray(l)&&(i=!0),o=t||r?A.utc.apply(A,e):A.apply(null,e),r?(o._ambigTime=!0,o._ambigZone=!0):n&&(i?o._ambigZone=!0:u&&(o.utcOffset?o.utcOffset(l):o.zone(l))))),o._fullCalendar=!0,o}function le(e,t){var n,r,i=!1,a=!1,o=e.length,s=[];for(n=0;n<o;n++)r=e[n],A.isMoment(r)||(r=N.moment.parseZone(r)),i=i||r._ambigTime,a=a||r._ambigZone,s.push(r);for(n=0;n<o;n++)r=s[n],t||!i||r._ambigTime?a&&!r._ambigZone&&(s[n]=r.clone().stripZone()):s[n]=r.clone().stripTime();return s}function ue(e,t){e._ambigTime?t._ambigTime=!0:t._ambigTime&&(t._ambigTime=!1),e._ambigZone?t._ambigZone=!0:t._ambigZone&&(t._ambigZone=!1)}function ce(e,t){e.year(t[0]||0).month(t[1]||0).date(t[2]||0).hours(t[3]||0).minutes(t[4]||0).seconds(t[5]||0).milliseconds(t[6]||0)}function de(e,t){return oe.format.call(e,t)}function fe(e,t){var n,r="";for(n=0;n<t.length;n++)r+=he(e,t[n]);return r}N.moment=function(){return se(arguments)},N.moment.utc=function(){var e=se(arguments,!0);return e.hasTime()&&e.utc(),e},N.moment.parseZone=function(){return se(arguments,!0,!0)},ae.clone=function(){var e=oe.clone.apply(this,arguments);return ue(this,e),this._fullCalendar&&(e._fullCalendar=!0),e},ae.week=ae.weeks=function(e){var t=(this._locale||this._lang)._fullCalendar_weekCalc;return null==e&&"function"==typeof t?t(this):"ISO"===t?oe.isoWeek.apply(this,arguments):oe.week.apply(this,arguments)},ae.time=function(e){if(!this._fullCalendar)return oe.time.apply(this,arguments);if(null==e)return A.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,A.isDuration(e)||A.isMoment(e)||(e=A.duration(e));var t=0;return A.isDuration(e)&&(t=24*Math.floor(e.asDays())),this.hours(t+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())},ae.stripTime=function(){var e;return this._ambigTime||(e=this.toArray(),this.utc(),te(this,e.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},ae.hasTime=function(){return!this._ambigTime},ae.stripZone=function(){var e,t;return this._ambigZone||(e=this.toArray(),t=this._ambigTime,this.utc(),te(this,e),this._ambigTime=t||!1,this._ambigZone=!0),this},ae.hasZone=function(){return!this._ambigZone},ae.local=function(){var e=this.toArray(),t=this._ambigZone;return oe.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,t&&ne(this,e),this},ae.utc=function(){return oe.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},M.each(["zone","utcOffset"],function(e,t){oe[t]&&(ae[t]=function(e){return null!=e&&(this._ambigTime=!1,this._ambigZone=!1),oe[t].apply(this,arguments)})}),ae.format=function(){return this._fullCalendar&&arguments[0]?(e=this,t=arguments[0],fe(e,be(t))):this._ambigTime?de(this,"YYYY-MM-DD"):this._ambigZone?de(this,"YYYY-MM-DD[T]HH:mm:ss"):oe.format.apply(this,arguments);var e,t},ae.toISOString=function(){return this._ambigTime?de(this,"YYYY-MM-DD"):this._ambigZone?de(this,"YYYY-MM-DD[T]HH:mm:ss"):oe.toISOString.apply(this,arguments)},ae.isWithin=function(e,t){var n=le([this,e,t]);return n[0]>=n[1]&&n[0]<n[2]},ae.isSame=function(e,t){var n;return this._fullCalendar?t?(n=le([this,e],!0),oe.isSame.call(n[0],n[1],t)):(e=N.moment.parseZone(e),oe.isSame.call(this,e)&&Boolean(this._ambigTime)===Boolean(e._ambigTime)&&Boolean(this._ambigZone)===Boolean(e._ambigZone)):oe.isSame.apply(this,arguments)},M.each(["isBefore","isAfter"],function(e,r){ae[r]=function(e,t){var n;return this._fullCalendar?(n=le([this,e]),oe[r].call(n[0],n[1],t)):oe[r].apply(this,arguments)}}),ee="_d"in A()&&"updateOffset"in A,te=ee?function(e,t){e._d.setTime(Date.UTC.apply(Date,t)),A.updateOffset(e,!1)}:ce,ne=ee?function(e,t){e._d.setTime(+new Date(t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0,t[6]||0)),A.updateOffset(e,!1)}:ce;var pe={t:function(e){return de(e,"a").charAt(0)},T:function(e){return de(e,"A").charAt(0)}};function he(e,t){var n,r;return"string"==typeof t?t:(n=t.token)?pe[n]?pe[n](e):de(e,n):t.maybe&&(r=fe(e,t.maybe)).match(/[1-9]/)?r:""}function ge(e,t,n,r,i){return r=r||" - ",function(e,t,n,r,i){var a,o,s,l,u=e.clone().stripZone(),c=t.clone().stripZone(),d="",f="",p="",h="",g="";for(o=0;o<n.length&&!1!==(a=ve(e,t,u,c,n[o]));o++)d+=a;for(s=n.length-1;o<s&&!1!==(a=ve(e,t,u,c,n[s]));s--)f=a+f;for(l=o;l<=s;l++)p+=he(e,n[l]),h+=he(t,n[l]);(p||h)&&(g=i?h+r+p:p+r+h);return d+g+f}(e=N.moment.parseZone(e),t=N.moment.parseZone(t),be(n=(e.localeData||e.lang).call(e).longDateFormat(n)||n),r,i)}N.formatRange=ge;var me={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function ve(e,t,n,r,i){var a,o;return"string"==typeof i?i:!!((a=i.token)&&(o=me[a.charAt(0)])&&n.isSame(r,o))&&de(e,a)}var ye={};function be(e){return e in ye?ye[e]:ye[e]=function e(t){var n=[];var r=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;var i;for(;i=r.exec(t);)i[1]?n.push(i[1]):i[2]?n.push({maybe:e(i[2])}):i[3]?n.push({token:i[3]}):i[5]&&n.push(i[5]);return n}(e)}function $e(){}function we(e,t){j(t,e.prototype)}(N.Class=$e).extend=function(){var e,t,n=arguments.length;for(e=0;e<n;e++)t=arguments[e],e<n-1&&we(this,t);return function(e,t){var n;V(t,"constructor")&&(n=t.constructor);"function"!=typeof n&&(n=t.constructor=function(){e.apply(this,arguments)});return n.prototype=B(e.prototype),j(t,n.prototype),function(e,t){var n,r,i=["constructor","toString","valueOf"];for(n=0;n<i.length;n++)e[r=i[n]]!==Object.prototype[r]&&(t[r]=e[r])}(t,n.prototype),j(e,n),n}(this,t||{})},$e.mixin=function(e){we(this,e)};var Se,xe=N.EmitterMixin={on:function(e,n){var t=function(e,t){return n.apply(t.context||this,t.args||[])};return n.guid||(n.guid=M.guid++),t.guid=n.guid,M(this).on(e,t),this},off:function(e,t){return M(this).off(e,t),this},trigger:function(e){var t=Array.prototype.slice.call(arguments,1);return M(this).triggerHandler(e,{args:t}),this},triggerWith:function(e,t,n){return M(this).triggerHandler(e,{context:t,args:n}),this}},Ce=N.ListenerMixin=(Se=0,{listenerId:null,listenTo:function(e,t,n){if("object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&this.listenTo(e,r,t[r]);else"string"==typeof t&&e.on(t+"."+this.getListenerNamespace(),M.proxy(n,this))},stopListeningTo:function(e,t){e.off((t||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){return null==this.listenerId&&(this.listenerId=Se++),"_listener"+this.listenerId}}),Ee={isIgnoringMouse:!1,delayUnignoreMouse:null,initMouseIgnoring:function(e){this.delayUnignoreMouse=Q(J(this,"unignoreMouse"),e||1e3)},tempIgnoreMouse:function(){this.isIgnoringMouse=!0,this.delayUnignoreMouse()},unignoreMouse:function(){this.isIgnoringMouse=!1}},Te=$e.extend(Ce,{isHidden:!0,options:null,el:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var e=this,t=this.options;this.el=M('<div class="fc-popover"/>').addClass(t.className||"").css({top:0,left:0}).append(t.content).appendTo(t.parentEl),this.el.on("click",".fc-close",function(){e.hide()}),t.autoHide&&this.listenTo(M(document),"mousedown",this.documentMousedown)},documentMousedown:function(e){this.el&&!M(e.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(M(document),"mousedown")},position:function(){var e,t,n,r,i,a=this.options,o=this.el.offsetParent().offset(),s=this.el.outerWidth(),l=this.el.outerHeight(),u=M(window),c=f(this.el);r=a.top||0,i=void 0!==a.left?a.left:void 0!==a.right?a.right-s:0,t=c.is(window)||c.is(document)?(c=u,e=0):(e=(n=c.offset()).top,n.left),e+=u.scrollTop(),t+=u.scrollLeft(),!1!==a.viewportConstrain&&(r=Math.min(r,e+c.outerHeight()-l-this.margin),r=Math.max(r,e+this.margin),i=Math.min(i,t+c.outerWidth()-s-this.margin),i=Math.max(i,t+this.margin)),this.el.css({top:r-o.top,left:i-o.left})},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}),De=N.CoordCache=$e.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(e){this.els=M(e.els),this.isHorizontal=e.isHorizontal,this.isVertical=e.isVertical,this.forcedOffsetParentEl=e.offsetParent?M(e.offsetParent):null},build:function(){var e=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=e.offset(),this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},queryBoundingRect:function(){var e=f(this.els.eq(0));if(!e.is(document))return i(e)},buildElHorizontals:function(){var a=[],o=[];this.els.each(function(e,t){var n=M(t),r=n.offset().left,i=n.outerWidth();a.push(r),o.push(r+i)}),this.lefts=a,this.rights=o},buildElVerticals:function(){var a=[],o=[];this.els.each(function(e,t){var n=M(t),r=n.offset().top,i=n.outerHeight();a.push(r),o.push(r+i)}),this.tops=a,this.bottoms=o},getHorizontalIndex:function(e){this.ensureBuilt();var t,n=this.boundingRect,r=this.lefts,i=this.rights,a=r.length;if(!n||e>=n.left&&e<n.right)for(t=0;t<a;t++)if(e>=r[t]&&e<i[t])return t},getVerticalIndex:function(e){this.ensureBuilt();var t,n=this.boundingRect,r=this.tops,i=this.bottoms,a=r.length;if(!n||e>=n.top&&e<n.bottom)for(t=0;t<a;t++)if(e>=r[t]&&e<i[t])return t},getLeftOffset:function(e){return this.ensureBuilt(),this.lefts[e]},getLeftPosition:function(e){return this.ensureBuilt(),this.lefts[e]-this.origin.left},getRightOffset:function(e){return this.ensureBuilt(),this.rights[e]},getRightPosition:function(e){return this.ensureBuilt(),this.rights[e]-this.origin.left},getWidth:function(e){return this.ensureBuilt(),this.rights[e]-this.lefts[e]},getTopOffset:function(e){return this.ensureBuilt(),this.tops[e]},getTopPosition:function(e){return this.ensureBuilt(),this.tops[e]-this.origin.top},getBottomOffset:function(e){return this.ensureBuilt(),this.bottoms[e]},getBottomPosition:function(e){return this.ensureBuilt(),this.bottoms[e]-this.origin.top},getHeight:function(e){return this.ensureBuilt(),this.bottoms[e]-this.tops[e]}}),ke=N.DragListener=$e.extend(Ce,Ee,{options:null,subjectEl:null,subjectHref:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,delay:null,delayTimeoutId:null,minDistance:null,handleTouchScrollProxy:null,constructor:function(e){this.options=e||{},this.handleTouchScrollProxy=J(this,"handleTouchScroll"),this.initMouseIgnoring(500)},startInteraction:function(e,t){var n=$(e);if("mousedown"===e.type){if(this.isIgnoringMouse)return;if(!v(e))return;e.preventDefault()}this.isInteracting||(t=t||{},this.delay=q(t.delay,this.options.delay,0),this.minDistance=q(t.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,this.isInteracting=!0,this.isTouch=n,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=y(e),this.originY=b(e),this.scrollEl=f(M(e.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(e),this.startDelay(e),this.minDistance||this.handleDistanceSurpassed(e))},handleInteractionStart:function(e){this.trigger("interactionStart",e)},endInteraction:function(e,t){this.isInteracting&&(this.endDrag(e),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(e,t),this.isTouch&&this.tempIgnoreMouse())},handleInteractionEnd:function(e,t){this.trigger("interactionEnd",e,t||!1)},bindHandlers:function(){var e,t=this,n=1;this.isTouch?(this.listenTo(M(document),{touchmove:this.handleTouchMove,touchend:this.endInteraction,touchcancel:this.endInteraction,touchstart:function(e){n?n--:t.endInteraction(e,!0)}}),e=this.handleTouchScrollProxy,window.addEventListener&&(window.addEventListener("scroll",e,!0),1)||!this.scrollEl||this.listenTo(this.scrollEl,"scroll",this.handleTouchScroll)):this.listenTo(M(document),{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(M(document),{selectstart:w,contextmenu:w})},unbindHandlers:function(){var e;this.stopListeningTo(M(document)),e=this.handleTouchScrollProxy,window.removeEventListener&&window.removeEventListener("scroll",e,!0),this.scrollEl&&this.stopListeningTo(this.scrollEl,"scroll")},startDrag:function(e,t){this.startInteraction(e,t),this.isDragging||(this.isDragging=!0,this.handleDragStart(e))},handleDragStart:function(e){this.trigger("dragStart",e),this.initHrefHack()},handleMove:function(e){var t=y(e)-this.originX,n=b(e)-this.originY,r=this.minDistance;this.isDistanceSurpassed||r*r<=t*t+n*n&&this.handleDistanceSurpassed(e),this.isDragging&&this.handleDrag(t,n,e)},handleDrag:function(e,t,n){this.trigger("drag",e,t,n),this.updateAutoScroll(n)},endDrag:function(e){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(e))},handleDragEnd:function(e){this.trigger("dragEnd",e),this.destroyHrefHack()},startDelay:function(e){var t=this;this.delay?this.delayTimeoutId=setTimeout(function(){t.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)},handleDelayEnd:function(e){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(e)},handleDistanceSurpassed:function(e){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(e)},handleTouchMove:function(e){this.isDragging&&e.preventDefault(),this.handleMove(e)},handleMouseMove:function(e){this.handleMove(e)},handleTouchScroll:function(e){this.isDragging||this.endInteraction(e,!0)},initHrefHack:function(){var e=this.subjectEl;(this.subjectHref=e?e.attr("href"):null)&&e.removeAttr("href")},destroyHrefHack:function(){var e=this.subjectEl,t=this.subjectHref;setTimeout(function(){t&&e.attr("href",t)},0)},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1)),this["_"+e]&&this["_"+e].apply(this,Array.prototype.slice.call(arguments,1))}});ke.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var e=this.scrollEl;this.isAutoScroll=this.options.scroll&&e&&!e.is(window)&&!e.is(document),this.isAutoScroll&&this.listenTo(e,"scroll",Q(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=g(this.scrollEl))},updateAutoScroll:function(e){var t,n,r,i,a=this.scrollSensitivity,o=this.scrollBounds,s=0,l=0;o&&(t=(a-(b(e)-o.top))/a,n=(a-(o.bottom-b(e)))/a,r=(a-(y(e)-o.left))/a,i=(a-(o.right-y(e)))/a,0<=t&&t<=1?s=t*this.scrollSpeed*-1:0<=n&&n<=1&&(s=n*this.scrollSpeed),0<=r&&r<=1?l=r*this.scrollSpeed*-1:0<=i&&i<=1&&(l=i*this.scrollSpeed)),this.setScrollVel(s,l)},setScrollVel:function(e,t){this.scrollTopVel=e,this.scrollLeftVel=t,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(J(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var e=this.scrollEl;this.scrollTopVel<0?e.scrollTop()<=0&&(this.scrollTopVel=0):0<this.scrollTopVel&&e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?e.scrollLeft()<=0&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&e.scrollTop(e.scrollTop()+this.scrollTopVel*t),this.scrollLeftVel&&e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var Re=ke.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(e,t){ke.call(this,t),this.component=e},handleInteractionStart:function(e){var t,n,r,i,a,o,s,l,u=this.subjectEl;this.computeCoords(),e?(r=n={left:y(e),top:b(e)},u&&(t=g(u),s=r,l=t,r={left:Math.min(Math.max(s.left,l.left),l.right),top:Math.min(Math.max(s.top,l.top),l.bottom)}),this.origHit=this.queryHit(r.left,r.top),u&&this.options.subjectCenter&&(this.origHit&&(t=S(this.origHit,t)||t),r={left:((o=t).left+o.right)/2,top:(o.top+o.bottom)/2}),this.coordAdjust=(a=n,{left:(i=r).left-a.left,top:i.top-a.top})):(this.origHit=null,this.coordAdjust=null),ke.prototype.handleInteractionStart.apply(this,arguments)},computeCoords:function(){this.component.prepareHits(),this.computeScrollBounds()},handleDragStart:function(e){var t;ke.prototype.handleDragStart.apply(this,arguments),(t=this.queryHit(y(e),b(e)))&&this.handleHitOver(t)},handleDrag:function(e,t,n){var r;ke.prototype.handleDrag.apply(this,arguments),Me(r=this.queryHit(y(n),b(n)),this.hit)||(this.hit&&this.handleHitOut(),r&&this.handleHitOver(r))},handleDragEnd:function(){this.handleHitDone(),ke.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(e){var t=Me(e,this.origHit);this.hit=e,this.trigger("hitOver",this.hit,t,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},handleInteractionEnd:function(){ke.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.releaseHits()},handleScrollEnd:function(){ke.prototype.handleScrollEnd.apply(this,arguments),this.computeCoords()},queryHit:function(e,t){return this.coordAdjust&&(e+=this.coordAdjust.left,t+=this.coordAdjust.top),this.component.queryHit(e,t)}});function Me(e,t){return!e&&!t||!(!e||!t)&&(e.component===t.component&&Ae(e,t)&&Ae(t,e))}function Ae(e,t){for(var n in e)if(!/^(component|left|right|top|bottom)$/.test(n)&&e[n]!==t[n])return!1;return!0}var Ne=$e.extend(Ce,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(e,t){this.options=t=t||{},this.sourceEl=e,this.parentEl=t.parentEl?M(t.parentEl):e.parent()},start:function(e){this.isFollowing||(this.isFollowing=!0,this.y0=b(e),this.x0=y(e),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),$(e)?this.listenTo(M(document),"touchmove",this.handleMove):this.listenTo(M(document),"mousemove",this.handleMove))},stop:function(e,t){var n=this,r=this.options.revertDuration;function i(){this.isAnimating=!1,n.removeElement(),this.top0=this.left0=null,t&&t()}this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(M(document)),e&&r&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:r,complete:i})):i())},getEl:function(){var e=this.el;return e||(this.sourceEl.width(),(e=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex})).addClass("fc-unselectable"),e.appendTo(this.parentEl)),e},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var e,t;this.getEl(),null===this.top0&&(this.sourceEl.width(),e=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=e.top-t.top,this.left0=e.left-t.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(e){this.topDelta=b(e)-this.y0,this.leftDelta=y(e)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Oe=N.Grid=$e.extend(Ce,Ee,{view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayDragListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(e){this.view=e,this.isRTL=e.opt("isRTL"),this.elsByFill={},this.dayDragListener=this.buildDayDragListener(),this.initMouseIgnoring()},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(e){this.start=e.start.clone(),this.end=e.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var e,t,n=this.view;this.eventTimeFormat=n.opt("eventTimeFormat")||n.opt("timeFormat")||this.computeEventTimeFormat(),null==(e=n.opt("displayEventTime"))&&(e=this.computeDisplayEventTime()),null==(t=n.opt("displayEventEnd"))&&(t=this.computeDisplayEventEnd()),this.displayEventTime=e,this.displayEventEnd=t},spanToSegs:function(e){},diffDates:function(e,t){return this.largeUnit?I(e,t,this.largeUnit):O(e,t)},prepareHits:function(){},releaseHits:function(){},queryHit:function(e,t){},getHitSpan:function(e){},getHitEl:function(e){},setElement:function(e){this.el=e,e.addClass("fc-unselectable").on("selectstart",w),this.bindDayHandler("touchstart",this.dayTouchStart),this.bindDayHandler("mousedown",this.dayMousedown),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(e,t){var n=this;this.el.on(e,function(e){if(!M(e.target).is(".fc-event-container *, .fc-more")&&!M(e.target).closest(".fc-popover").length)return t.call(n,e)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo(M(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo(M(document))},dayMousedown:function(e){this.isIgnoringMouse||this.dayDragListener.startInteraction(e,{})},dayTouchStart:function(e){var t=this.view;(t.isSelected||t.selectedEvent)&&this.tempIgnoreMouse(),this.dayDragListener.startInteraction(e,{delay:this.view.opt("longPressDelay")})},buildDayDragListener:function(){var r,i,a=this,n=this.view,o=n.opt("selectable"),e=new Re(this,{scroll:n.opt("dragScroll"),interactionStart:function(){r=e.origHit},dragStart:function(){n.unselect()},hitOver:function(e,t,n){n&&(t||(r=null),o&&((i=a.computeSelection(a.getHitSpan(n),a.getHitSpan(e)))?a.renderSelection(i):!1===i&&p()))},hitOut:function(){i=r=null,a.unrenderSelection(),h()},interactionEnd:function(e,t){t||(r&&!a.isIgnoringMouse&&n.triggerDayClick(a.getHitSpan(r),a.getHitEl(r),e),i&&n.reportSelection(i,e),h())}});return e},clearDragListeners:function(){this.dayDragListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(e,t){var n=this.fabricateHelperEvent(e,t);return this.renderHelper(n,t)},fabricateHelperEvent:function(e,t){var n=t?B(t.event):{};return n.start=e.start.clone(),n.end=e.end?e.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventDates(n),n.className=(n.className||[]).concat("fc-helper"),t||(n.editable=!1),n},renderHelper:function(e,t){},unrenderHelper:function(){},renderSelection:function(e){this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(e,t){var n=this.computeSelectionSpan(e,t);return!(n&&!this.view.calendar.isSelectionSpanAllowed(n))&&n},computeSelectionSpan:function(e,t){var n=[e.start,e.end,t.start,t.end];return n.sort(X),{start:n[0].clone(),end:n[3].clone()}},renderHighlight:function(e){this.renderFill("highlight",this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},renderFill:function(e,t){},unrenderFill:function(e){var t=this.elsByFill[e];t&&(t.remove(),delete this.elsByFill[e])},renderFillSegEls:function(e,i){var t,a=this,o=this[e+"SegEl"],n="",s=[];if(i.length){for(t=0;t<i.length;t++)n+=this.fillSegHtml(e,i[t]);M(n).each(function(e,t){var n=i[e],r=M(t);o&&(r=o.call(a,n,r)),r&&(r=M(r)).is(a.fillSegTag)&&(n.el=r,s.push(n))})}return s},fillSegTag:"div",fillSegHtml:function(e,t){var n=this[e+"SegClasses"],r=this[e+"SegCss"],i=n?n.call(this,t):[],a=K(r?r.call(this,t):{});return"<"+this.fillSegTag+(i.length?' class="'+i.join(" ")+'"':"")+(a?' style="'+a+'"':"")+" />"},getDayClasses:function(e){var t=this.view,n=t.calendar.getNow(),r=["fc-"+k[e.day()]];return 1==t.intervalDuration.as("months")&&e.month()!=t.intervalStart.month()&&r.push("fc-other-month"),e.isSame(n,"day")?r.push("fc-today",t.highlightStateClass):e<n?r.push("fc-past"):r.push("fc-future"),r}});function Ie(e){var t=_e(e);return"background"===t||"inverse-background"===t}function _e(e){return q((e.source||{}).rendering,e.rendering)}function Pe(e,t){return e.start-t.start}Oe.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(e){var t,n=[],r=[];for(t=0;t<e.length;t++)(Ie(e[t])?n:r).push(e[t]);this.segs=[].concat(this.renderBgEvents(n),this.renderFgEvents(r))},renderBgEvents:function(e){var t=this.eventsToSegs(e);return this.renderBgSegs(t)||t},renderFgEvents:function(e){var t=this.eventsToSegs(e);return this.renderFgSegs(t)||t},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(e){},unrenderFgSegs:function(){},renderFgSegEls:function(i,e){var t,a=this.view,n="",o=[];if(i.length){for(t=0;t<i.length;t++)n+=this.fgSegHtml(i[t],e);M(n).each(function(e,t){var n=i[e],r=a.resolveEventEl(n.event,M(t));r&&(r.data("fc-seg",n),n.el=r,o.push(n))})}return o},fgSegHtml:function(e,t){},renderBgSegs:function(e){return this.renderFill("bgEvent",e)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event,n=t.source||{};return["fc-bgevent"].concat(t.className,n.className||[])},bgEventSegCss:function(e){return{"background-color":this.getSegSkinCss(e)["background-color"]}},businessHoursSegClasses:function(e){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){this.bindSegHandler("touchstart",this.handleSegTouchStart),this.bindSegHandler("touchend",this.handleSegTouchEnd),this.bindSegHandler("mouseenter",this.handleSegMouseover),this.bindSegHandler("mouseleave",this.handleSegMouseout),this.bindSegHandler("mousedown",this.handleSegMousedown),this.bindSegHandler("click",this.handleSegClick)},bindSegHandler:function(e,n){var r=this;this.el.on(e,".fc-event-container > *",function(e){var t=M(this).data("fc-seg");if(t&&!r.isDraggingSeg&&!r.isResizingSeg)return n.call(r,t,e)})},handleSegClick:function(e,t){return this.view.trigger("eventClick",e.el[0],e.event,t)},handleSegMouseover:function(e,t){this.isIgnoringMouse||this.mousedOverSeg||((this.mousedOverSeg=e).el.addClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseover",e.el[0],e.event,t))},handleSegMouseout:function(e,t){t=t||{},this.mousedOverSeg&&(e=e||this.mousedOverSeg,this.mousedOverSeg=null,e.el.removeClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseout",e.el[0],e.event,t))},handleSegMousedown:function(e,t){!this.startSegResize(e,t,{distance:5})&&this.view.isEventDraggable(e.event)&&this.buildSegDragListener(e).startInteraction(t,{distance:5})},handleSegTouchStart:function(e,t){var n=this.view,r=e.event,i=n.isEventSelected(r),a=n.isEventDraggable(r),o=n.isEventResizable(r),s=!1;i&&o&&(s=this.startSegResize(e,t)),s||!a&&!o||(a?this.buildSegDragListener(e):this.buildSegSelectListener(e)).startInteraction(t,{delay:i?0:this.view.opt("longPressDelay")}),this.tempIgnoreMouse()},handleSegTouchEnd:function(e,t){this.tempIgnoreMouse()},startSegResize:function(e,t,n){return!!M(t.target).is(".fc-resizer")&&(this.buildSegResizeListener(e,M(t.target).is(".fc-start-resizer")).startInteraction(t,n),!0)},buildSegDragListener:function(i){var t,a,o,s=this,l=this.view,u=l.calendar,n=i.el,c=i.event;if(this.segDragListener)return this.segDragListener;var d=this.segDragListener=new Re(l,{scroll:l.opt("dragScroll"),subjectEl:n,subjectCenter:!0,interactionStart:function(e){t=!1,(a=new Ne(i.el,{additionalClass:"fc-dragging",parentEl:l.el,opacity:d.isTouch?null:l.opt("dragOpacity"),revertDuration:l.opt("dragRevertDuration"),zIndex:2})).hide(),a.start(e)},dragStart:function(e){d.isTouch&&!l.isEventSelected(c)&&l.selectEvent(c),t=!0,s.handleSegMouseout(i,e),s.segDragStart(i,e),l.hideEvent(c)},hitOver:function(e,t,n){var r;i.hit&&(n=i.hit),(o=s.computeEventDrop(n.component.getHitSpan(n),e.component.getHitSpan(e),c))&&!u.isEventSpanAllowed(s.eventToSpan(o),c)&&(p(),o=null),o&&(r=l.renderDrag(o,i))?(r.addClass("fc-dragging"),d.isTouch||s.applyDragOpacity(r),a.hide()):a.show(),t&&(o=null)},hitOut:function(){l.unrenderDrag(),a.show(),o=null},hitDone:function(){h()},interactionEnd:function(e){a.stop(!o,function(){t&&(l.unrenderDrag(),l.showEvent(c),s.segDragStop(i,e)),o&&l.reportEventDrop(c,o,this.largeUnit,n,e)}),s.segDragListener=null}});return d},buildSegSelectListener:function(e){var t=this,n=this.view,r=e.event;if(this.segDragListener)return this.segDragListener;var i=this.segDragListener=new ke({dragStart:function(e){i.isTouch&&!n.isEventSelected(r)&&n.selectEvent(r)},interactionEnd:function(e){t.segDragListener=null}});return i},segDragStart:function(e,t){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",e.el[0],e.event,t,{})},segDragStop:function(e,t){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",e.el[0],e.event,t,{})},computeEventDrop:function(e,t,n){var r,i,a=this.view.calendar,o=e.start,s=t.start;return o.hasTime()===s.hasTime()?(r=this.diffDates(s,o),n.allDay&&L(r)?(i={start:n.start.clone(),end:a.getEventEnd(n),allDay:!1},a.normalizeEventTimes(i)):i={start:n.start.clone(),end:n.end?n.end.clone():null,allDay:n.allDay},i.start.add(r),i.end&&i.end.add(r)):i={start:s.clone(),end:null,allDay:!s.hasTime()},i},applyDragOpacity:function(e){var n=this.view.opt("dragOpacity");null!=n&&e.each(function(e,t){t.style.opacity=n})},externalDragStart:function(e,t){var n,r,i=this.view;i.opt("droppable")&&(n=M((t?t.item:null)||e.target),r=i.opt("dropAccept"),(M.isFunction(r)?r.call(n[0],n):n.is(r))&&(this.isDraggingExternal||this.listenToExternalDrag(n,e,t)))},listenToExternalDrag:function(t,e,n){var r,i=this,a=this.view.calendar,o=function(e){var t,n,r,i,a=N.dataAttrPrefix;a&&(a+="-");(t=e.data(a+"event")||null)&&(t="object"==typeof t?M.extend({},t):{},null==(n=t.start)&&(n=t.time),r=t.duration,i=t.stick,delete t.start,delete t.time,delete t.duration,delete t.stick);null==n&&(n=e.data(a+"start"));null==n&&(n=e.data(a+"time"));null==r&&(r=e.data(a+"duration"));null==i&&(i=e.data(a+"stick"));return n=null!=n?A.duration(n):null,r=null!=r?A.duration(r):null,i=Boolean(i),{eventProps:t,startTime:n,duration:r,stick:i}}(t);(i.externalDragListener=new Re(this,{interactionStart:function(){i.isDraggingExternal=!0},hitOver:function(e){(r=i.computeExternalDrop(e.component.getHitSpan(e),o))&&!a.isExternalSpanAllowed(i.eventToSpan(r),r,o.eventProps)&&(p(),r=null),r&&i.renderDrag(r)},hitOut:function(){r=null},hitDone:function(){h(),i.unrenderDrag()},interactionEnd:function(e){r&&i.view.reportExternalDrop(o,r,t,e,n),i.isDraggingExternal=!1,i.externalDragListener=null}})).startDrag(e)},computeExternalDrop:function(e,t){var n={start:this.view.calendar.applyTimezone(e.start),end:null};return t.startTime&&!n.start.hasTime()&&n.start.time(t.startTime),t.duration&&(n.end=n.start.clone().add(t.duration)),n},renderDrag:function(e,t){},unrenderDrag:function(){},buildSegResizeListener:function(a,o){var t,s,l=this,u=this.view,c=u.calendar,n=a.el,d=a.event,f=c.getEventEnd(d);return this.segResizeListener=new Re(this,{scroll:u.opt("dragScroll"),subjectEl:n,interactionStart:function(){t=!1},dragStart:function(e){t=!0,l.handleSegMouseout(a,e),l.segResizeStart(a,e)},hitOver:function(e,t,n){var r=l.getHitSpan(n),i=l.getHitSpan(e);(s=o?l.computeEventStartResize(r,i,d):l.computeEventEndResize(r,i,d))&&(c.isEventSpanAllowed(l.eventToSpan(s),d)?s.start.isSame(d.start)&&s.end.isSame(f)&&(s=null):(p(),s=null)),s&&(u.hideEvent(d),l.renderEventResize(s,a))},hitOut:function(){s=null},hitDone:function(){l.unrenderEventResize(),u.showEvent(d),h()},interactionEnd:function(e){t&&l.segResizeStop(a,e),s&&u.reportEventResize(d,s,this.largeUnit,n,e),l.segResizeListener=null}})},segResizeStart:function(e,t){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",e.el[0],e.event,t,{})},segResizeStop:function(e,t){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",e.el[0],e.event,t,{})},computeEventStartResize:function(e,t,n){return this.computeEventResize("start",e,t,n)},computeEventEndResize:function(e,t,n){return this.computeEventResize("end",e,t,n)},computeEventResize:function(e,t,n,r){var i,a,o=this.view.calendar,s=this.diffDates(n[e],t[e]);return(i={start:r.start.clone(),end:o.getEventEnd(r),allDay:r.allDay}).allDay&&L(s)&&(i.allDay=!1,o.normalizeEventTimes(i)),i[e].add(s),i.start.isBefore(i.end)||(a=this.minResizeDuration||(r.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration),"start"==e?i.start=i.end.clone().subtract(a):i.end=i.start.clone().add(a)),i},renderEventResize:function(e,t){},unrenderEventResize:function(){},getEventTimeText:function(e,t,n){return null==t&&(t=this.eventTimeFormat),null==n&&(n=this.displayEventEnd),this.displayEventTime&&e.start.hasTime()?n&&e.end?this.view.formatRange(e,t):e.start.format(t):""},getSegClasses:function(e,t,n){var r=this.view,i=e.event,a=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(i.className,i.source?i.source.className:[]);return t&&a.push("fc-draggable"),n&&a.push("fc-resizable"),r.isEventSelected(i)&&a.push("fc-selected"),a},getSegSkinCss:function(e){var t=e.event,n=this.view,r=t.source||{},i=t.color,a=r.color,o=n.opt("eventColor");return{"background-color":t.backgroundColor||i||r.backgroundColor||a||n.opt("eventBackgroundColor")||o,"border-color":t.borderColor||i||r.borderColor||a||n.opt("eventBorderColor")||o,color:t.textColor||r.textColor||n.opt("eventTextColor")}},eventToSegs:function(e){return this.eventsToSegs([e])},eventToSpan:function(e){return this.eventToSpans(e)[0]},eventToSpans:function(e){var t=this.eventToRange(e);return this.eventRangeToSpans(t,e)},eventsToSegs:function(e,i){var a=this,t=function(e){var t,n,r={};for(t=0;t<e.length;t++)n=e[t],(r[n._id]||(r[n._id]=[])).push(n);return r}(e),o=[];return M.each(t,function(e,t){var n,r=[];for(n=0;n<t.length;n++)r.push(a.eventToRange(t[n]));if("inverse-background"===_e(t[0]))for(r=a.invertRanges(r),n=0;n<r.length;n++)o.push.apply(o,a.eventRangeToSegs(r[n],t[0],i));else for(n=0;n<r.length;n++)o.push.apply(o,a.eventRangeToSegs(r[n],t[n],i))}),o},eventToRange:function(e){return{start:e.start.clone().stripZone(),end:(e.end?e.end.clone():this.view.calendar.getDefaultEventEnd(null!=e.allDay?e.allDay:!e.start.hasTime(),e.start)).stripZone()}},eventRangeToSegs:function(e,t,n){var r,i=this.eventRangeToSpans(e,t),a=[];for(r=0;r<i.length;r++)a.push.apply(a,this.eventSpanToSegs(i[r],t,n));return a},eventRangeToSpans:function(e,t){return[M.extend({},e)]},eventSpanToSegs:function(e,t,n){var r,i,a=n?n(e):this.spanToSegs(e);for(r=0;r<a.length;r++)(i=a[r]).event=t,i.eventStartMS=+e.start,i.eventDurationMS=e.end-e.start;return a},invertRanges:function(e){var t,n,r=this.view,i=r.start.clone(),a=r.end.clone(),o=[],s=i;for(e.sort(Pe),t=0;t<e.length;t++)(n=e[t]).start>s&&o.push({start:s,end:n.start}),s=n.end;return s<a&&o.push({start:s,end:a}),o},sortEventSegs:function(e){e.sort(J(this,"compareEventSegs"))},compareEventSegs:function(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||C(e.event,t.event,this.view.eventOrderSpecs)}}),N.isBgEvent=Ie,N.dataAttrPrefix="";var He=N.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var e,t,n,r=this.view,i=this.start.clone(),a=-1,o=[],s=[];i.isBefore(this.end);)r.isHiddenDay(i)?o.push(a+.5):(a++,o.push(a),s.push(i.clone())),i.add(1,"days");if(this.breakOnWeeks){for(t=s[0].day(),e=1;e<s.length&&s[e].day()!=t;e++);n=Math.ceil(s.length/e)}else n=1,e=s.length;this.dayDates=s,this.dayIndices=o,this.daysPerRow=e,this.rowCnt=n,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(e,t){return this.dayDates[this.getCellDayIndex(e,t)].clone()},getCellRange:function(e,t){var n=this.getCellDate(e,t),r=n.clone().add(1,"days");return{start:n,end:r}},getCellDayIndex:function(e,t){return e*this.daysPerRow+this.getColDayIndex(t)},getColDayIndex:function(e){return this.isRTL?this.colCnt-1-e:e},getDateDayIndex:function(e){var t=this.dayIndices,n=e.diff(this.start,"days");return n<0?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]},computeColHeadFormat:function(){return 1<this.rowCnt||10<this.colCnt?"ddd":1<this.colCnt?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(e){var t,n,r,i,a,o=this.daysPerRow,s=this.view.computeDayRange(e),l=this.getDateDayIndex(s.start),u=this.getDateDayIndex(s.end.clone().subtract(1,"days")),c=[];for(t=0;t<this.rowCnt;t++)r=(n=t*o)+o-1,i=Math.max(l,n),a=Math.min(u,r),(i=Math.ceil(i))<=(a=Math.floor(a))&&c.push({row:t,firstRowDayIndex:i-n,lastRowDayIndex:a-n,isStart:i===l,isEnd:a===u});return c},sliceRangeByDay:function(e){var t,n,r,i,a,o,s=this.daysPerRow,l=this.view.computeDayRange(e),u=this.getDateDayIndex(l.start),c=this.getDateDayIndex(l.end.clone().subtract(1,"days")),d=[];for(t=0;t<this.rowCnt;t++)for(r=(n=t*s)+s-1,i=n;i<=r;i++)a=Math.max(u,i),o=Math.min(c,i),(a=Math.ceil(a))<=(o=Math.floor(o))&&d.push({row:t,firstRowDayIndex:a-n,lastRowDayIndex:o-n,isStart:a===u,isEnd:o===c});return d},renderHeadHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var e,t,n=[];for(e=0;e<this.colCnt;e++)t=this.getCellDate(0,e),n.push(this.renderHeadDateCellHtml(t));return n.join("")},renderHeadDateCellHtml:function(e,t,n){return'<th class="fc-day-header '+this.view.widgetHeaderClass+" fc-"+k[e.day()]+'"'+(1==this.rowCnt?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(1<t?' colspan="'+t+'"':"")+(n?" "+n:"")+">"+G(e.format(this.colHeadFormat))+"</th>"},renderBgTrHtml:function(e){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(e))+this.renderBgCellsHtml(e)+(this.isRTL?this.renderBgIntroHtml(e):"")+"</tr>"},renderBgIntroHtml:function(e){return this.renderIntroHtml()},renderBgCellsHtml:function(e){var t,n,r=[];for(t=0;t<this.colCnt;t++)n=this.getCellDate(e,t),r.push(this.renderBgCellHtml(n));return r.join("")},renderBgCellHtml:function(e,t){var n=this.view,r=this.getDayClasses(e);return r.unshift("fc-day",n.widgetContentClass),'<td class="'+r.join(" ")+'" data-date="'+e.format("YYYY-MM-DD")+'"'+(t?" "+t:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(e){var t=this.renderIntroHtml();t&&(this.isRTL?e.append(t):e.prepend(t))}},Le=N.DayGrid=Oe.extend(He,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(e){var t,n,r=this.view,i=this.rowCnt,a=this.colCnt,o="";for(t=0;t<i;t++)o+=this.renderDayRowHtml(t,e);for(this.el.html(o),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new De({els:this.rowEls,isVertical:!0}),this.colCoordCache=new De({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),t=0;t<i;t++)for(n=0;n<a;n++)r.trigger("dayRender",null,this.getCellDate(t,n),this.getCellEl(t,n))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents(!0),t=this.eventsToSegs(e);this.renderFill("businessHours",t,"bgevent")},renderDayRowHtml:function(e,t){var n=["fc-row","fc-week",this.view.widgetContentClass];return t&&n.push("fc-rigid"),'<div class="'+n.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(e)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(e){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(e))+this.renderNumberCellsHtml(e)+(this.isRTL?this.renderNumberIntroHtml(e):"")+"</tr>"},renderNumberIntroHtml:function(e){return this.renderIntroHtml()},renderNumberCellsHtml:function(e){var t,n,r=[];for(t=0;t<this.colCnt;t++)n=this.getCellDate(e,t),r.push(this.renderNumberCellHtml(n));return r.join("")},renderNumberCellHtml:function(e){var t;return this.view.dayNumbersVisible?((t=this.getDayClasses(e)).unshift("fc-day-number"),'<td class="'+t.join(" ")+'" data-date="'+e.format()+'">'+e.date()+"</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(e){var t,n,r=this.sliceRangeByRow(e);for(t=0;t<r.length;t++)n=r[t],this.isRTL?(n.leftCol=this.daysPerRow-1-n.lastRowDayIndex,n.rightCol=this.daysPerRow-1-n.firstRowDayIndex):(n.leftCol=n.firstRowDayIndex,n.rightCol=n.lastRowDayIndex);return r},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(e,t){var n=this.colCoordCache.getHorizontalIndex(e),r=this.rowCoordCache.getVerticalIndex(t);if(null!=r&&null!=n)return this.getCellHit(r,n)},getHitSpan:function(e){return this.getCellRange(e.row,e.col)},getHitEl:function(e){return this.getCellEl(e.row,e.col)},getCellHit:function(e,t){return{row:e,col:t,component:this,left:this.colCoordCache.getLeftOffset(t),right:this.colCoordCache.getRightOffset(t),top:this.rowCoordCache.getTopOffset(e),bottom:this.rowCoordCache.getBottomOffset(e)}},getCellEl:function(e,t){return this.cellEls.eq(e*this.colCnt+t)},renderDrag:function(e,t){if(this.renderHighlight(this.eventToSpan(e)),t&&!t.el.closest(this.el).length)return this.renderEventLocationHelper(e,t)},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(e,t){return this.renderHighlight(this.eventToSpan(e)),this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(e,a){var o,s=[],t=this.eventToSegs(e);return t=this.renderFgSegEls(t),o=this.renderSegRows(t),this.rowEls.each(function(e,t){var n,r=M(t),i=M('<div class="fc-helper-skeleton"><table/></div>');n=a&&a.row===e?a.el.position().top:r.find(".fc-content-skeleton tbody").position().top,i.css("top",n).find("table").append(o[e].tbodyEl),r.append(i),s.push(i[0])}),this.helperEls=M(s)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(e,t,n){var r,i,a,o=[];for(t=this.renderFillSegEls(e,t),r=0;r<t.length;r++)i=t[r],a=this.renderFillRow(e,i,n),this.rowEls.eq(i.row).append(a),o.push(a[0]);return this.elsByFill[e]=M(o),t},renderFillRow:function(e,t,n){var r,i,a=this.colCnt,o=t.leftCol,s=t.rightCol+1;return n=n||e.toLowerCase(),i=(r=M('<div class="fc-'+n+'-skeleton"><table><tr/></table></div>')).find("tr"),0<o&&i.append('<td colspan="'+o+'"/>'),i.append(t.el.attr("colspan",s-o)),s<a&&i.append('<td colspan="'+(a-s)+'"/>'),this.bookendCells(i),r}});function Fe(e,t){var n,r;for(n=0;n<t.length;n++)if((r=t[n]).leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0;return!1}function ze(e,t){return e.leftCol-t.leftCol}Le.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),Oe.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return Oe.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(e){var t=M.grep(e,function(e){return e.event.allDay});return Oe.prototype.renderBgSegs.call(this,t)},renderFgSegs:function(e){var n;return e=this.renderFgSegEls(e),n=this.rowStructs=this.renderSegRows(e),this.rowEls.each(function(e,t){M(t).find(".fc-content-skeleton > table").append(n[e].tbodyEl)}),e},unrenderFgSegs:function(){for(var e,t=this.rowStructs||[];e=t.pop();)e.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(e){var t,n,r=[];for(t=this.groupSegRows(e),n=0;n<t.length;n++)r.push(this.renderSegRow(n,t[n]));return r},fgSegHtml:function(e,t){var n,r,i=this.view,a=e.event,o=i.isEventDraggable(a),s=!t&&a.allDay&&e.isStart&&i.isEventResizableFromStart(a),l=!t&&a.allDay&&e.isEnd&&i.isEventResizableFromEnd(a),u=this.getSegClasses(e,o,s||l),c=K(this.getSegSkinCss(e)),d="";return u.unshift("fc-day-grid-event","fc-h-event"),e.isStart&&(n=this.getEventTimeText(a))&&(d='<span class="fc-time">'+G(n)+"</span>"),r='<span class="fc-title">'+(G(a.title||"")||"&nbsp;")+"</span>",'<a class="'+u.join(" ")+'"'+(a.url?' href="'+G(a.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(this.isRTL?r+" "+d:d+" "+r)+"</div>"+(s?'<div class="fc-resizer fc-start-resizer" />':"")+(l?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(e,t){var n,r,i,a,o,s,l,u=this.colCnt,c=this.buildSegLevels(t),d=Math.max(1,c.length),f=M("<tbody/>"),p=[],h=[],g=[];function m(e){for(;i<e;)(l=(g[n-1]||[])[i])?l.attr("rowspan",parseInt(l.attr("rowspan")||1,10)+1):(l=M("<td/>"),a.append(l)),h[n][i]=l,g[n][i]=l,i++}for(n=0;n<d;n++){if(r=c[n],i=0,a=M("<tr/>"),p.push([]),h.push([]),g.push([]),r)for(o=0;o<r.length;o++){for(m((s=r[o]).leftCol),l=M('<td class="fc-event-container"/>').append(s.el),s.leftCol!=s.rightCol?l.attr("colspan",s.rightCol-s.leftCol+1):g[n][i]=l;i<=s.rightCol;)h[n][i]=l,p[n][i]=s,i++;a.append(l)}m(u),this.bookendCells(a),f.append(a)}return{row:e,tbodyEl:f,cellMatrix:h,segMatrix:p,segLevels:c,segs:t}},buildSegLevels:function(e){var t,n,r,i=[];for(this.sortEventSegs(e),t=0;t<e.length;t++){for(n=e[t],r=0;r<i.length&&Fe(n,i[r]);r++);(i[n.level=r]||(i[r]=[])).push(n)}for(r=0;r<i.length;r++)i[r].sort(ze);return i},groupSegRows:function(e){var t,n=[];for(t=0;t<this.rowCnt;t++)n.push([]);for(t=0;t<e.length;t++)n[e[t].row].push(e[t]);return n}}),Le.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(e){var t,n,r=this.rowStructs||[];for(t=0;t<r.length;t++)this.unlimitRow(t),!1!==(n=!!e&&("number"==typeof e?e:this.computeRowLevelLimit(t)))&&this.limitRow(t,n)},computeRowLevelLimit:function(e){var t,n,r,i=this.rowEls.eq(e).height(),a=this.rowStructs[e].tbodyEl.children();function o(e,t){r=Math.max(r,M(t).outerHeight())}for(t=0;t<a.length;t++)if(n=a.eq(t).removeClass("fc-limited"),r=0,n.find("> td > :first-child").each(o),n.position().top+r>i)return t;return!1},limitRow:function(t,n){var e,r,i,a,o,s,l,u,c,d,f,p,h,g,m,v=this,y=this.rowStructs[t],b=[],$=0;function w(e){for(;$<e;)(s=v.getCellSegs(t,$,n)).length&&(c=r[n-1][$],m=v.renderMoreLink(t,$,s),g=M("<div/>").append(m),c.append(g),b.push(g[0])),$++}if(n&&n<y.segLevels.length){for(e=y.segLevels[n-1],r=y.cellMatrix,i=y.tbodyEl.children().slice(n).addClass("fc-limited").get(),a=0;a<e.length;a++){for(w((o=e[a]).leftCol),u=[],l=0;$<=o.rightCol;)s=this.getCellSegs(t,$,n),u.push(s),l+=s.length,$++;if(l){for(d=(c=r[n-1][o.leftCol]).attr("rowspan")||1,f=[],p=0;p<u.length;p++)h=M('<td class="fc-more-cell"/>').attr("rowspan",d),s=u[p],m=this.renderMoreLink(t,o.leftCol+p,[o].concat(s)),g=M("<div/>").append(m),h.append(g),f.push(h[0]),b.push(h[0]);c.addClass("fc-limited").after(M(f)),i.push(c[0])}}w(this.colCnt),y.moreEls=M(b),y.limitedEls=M(i)}},unlimitRow:function(e){var t=this.rowStructs[e];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(l,u,c){var d=this,f=this.view;return M('<a class="fc-more"/>').text(this.getMoreLinkText(c.length)).on("click",function(e){var t=f.opt("eventLimitClick"),n=d.getCellDate(l,u),r=M(this),i=d.getCellEl(l,u),a=d.getCellSegs(l,u),o=d.resliceDaySegs(a,n),s=d.resliceDaySegs(c,n);"function"==typeof t&&(t=f.trigger("eventLimitClick",null,{date:n,dayEl:i,moreEl:r,segs:o,hiddenSegs:s},e)),"popover"===t?d.showSegPopover(l,u,r,o):"string"==typeof t&&f.calendar.zoomTo(n,t)})},showSegPopover:function(e,t,n,r){var i,a,o=this,s=this.view,l=n.parent();i=1==this.rowCnt?s.el:this.rowEls.eq(e),a={className:"fc-more-popover",content:this.renderSegPopoverContent(e,t,r),parentEl:this.el,top:i.offset().top,autoHide:!0,viewportConstrain:s.opt("popoverViewportConstrain"),hide:function(){o.segPopover.removeElement(),o.segPopover=null,o.popoverSegs=null}},this.isRTL?a.right=l.offset().left+l.outerWidth()+1:a.left=l.offset().left-1,this.segPopover=new Te(a),this.segPopover.show()},renderSegPopoverContent:function(e,t,n){var r,i=this.view,a=i.opt("theme"),o=this.getCellDate(e,t).format(i.opt("dayPopoverFormat")),s=M('<div class="fc-header '+i.widgetHeaderClass+'"><span class="fc-close '+(a?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+G(o)+'</span><div class="fc-clear"/></div><div class="fc-body '+i.widgetContentClass+'"><div class="fc-event-container"></div></div>'),l=s.find(".fc-event-container");for(n=this.renderFgSegEls(n,!0),this.popoverSegs=n,r=0;r<n.length;r++)this.prepareHits(),n[r].hit=this.getCellHit(e,t),this.releaseHits(),l.append(n[r].el);return s},resliceDaySegs:function(e,t){var n=M.map(e,function(e){return e.event}),r=t.clone(),i=r.clone().add(1,"days"),a={start:r,end:i};return e=this.eventsToSegs(n,function(e){var t=D(e,a);return t?[t]:[]}),this.sortEventSegs(e),e},getMoreLinkText:function(e){var t=this.view.opt("eventLimitText");return"function"==typeof t?t(e):"+"+e+" "+t},getCellSegs:function(e,t,n){for(var r,i=this.rowStructs[e].segMatrix,a=n||0,o=[];a<i.length;)(r=i[a][t])&&o.push(r),a++;return o}});var Ue=N.TimeGrid=Oe.extend(He,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){Oe.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatContainerEl=this.el.find(".fc-slats"),this.slatEls=this.slatContainerEl.find("tr"),this.colCoordCache=new De({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new De({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var e,t,n,r=this.view,i=this.isRTL,a="",o=A.duration(+this.minTime);o<this.maxTime;)e=this.start.clone().time(o),t=Z(H(o,this.labelInterval)),n='<td class="fc-axis fc-time '+r.widgetContentClass+'" '+r.axisStyleAttr()+">"+(t?"<span>"+G(e.format(this.labelFormat))+"</span>":"")+"</td>",a+='<tr data-time="'+e.format("HH:mm:ss")+'"'+(t?"":' class="fc-minor"')+">"+(i?"":n)+'<td class="'+r.widgetContentClass+'"/>'+(i?n:"")+"</tr>",o.add(this.slotDuration);return a},processOptions:function(){var e,t=this.view,n=t.opt("slotDuration"),r=t.opt("snapDuration");n=A.duration(n),r=r?A.duration(r):n,this.slotDuration=n,this.snapDuration=r,this.snapsPerSlot=n/r,this.minResizeDuration=r,this.minTime=A.duration(t.opt("minTime")),this.maxTime=A.duration(t.opt("maxTime")),e=t.opt("slotLabelFormat"),M.isArray(e)&&(e=e[e.length-1]),this.labelFormat=e||t.opt("axisFormat")||t.opt("smallTimeFormat"),e=t.opt("slotLabelInterval"),this.labelInterval=e?A.duration(e):this.computeLabelInterval(n)},computeLabelInterval:function(e){var t,n,r;for(t=ct.length-1;0<=t;t--)if(Z(r=H(n=A.duration(ct[t]),e))&&1<r)return n;return A.duration(e)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(e,t){var n=this.snapsPerSlot,r=this.colCoordCache,i=this.slatCoordCache,a=r.getHorizontalIndex(e),o=i.getVerticalIndex(t);if(null!=a&&null!=o){var s=i.getTopOffset(o),l=i.getHeight(o),u=(t-s)/l,c=Math.floor(u*n),d=s+c/n*l,f=s+(c+1)/n*l;return{col:a,snap:o*n+c,component:this,left:r.getLeftOffset(a),right:r.getRightOffset(a),top:d,bottom:f}}},getHitSpan:function(e){var t,n=this.getCellDate(0,e.col),r=this.computeSnapTime(e.snap);return n.time(r),t=n.clone().add(this.snapDuration),{start:n,end:t}},getHitEl:function(e){return this.colEls.eq(e.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(e){return A.duration(this.minTime+this.snapDuration*e)},spanToSegs:function(e){var t,n=this.sliceRangeByTimes(e);for(t=0;t<n.length;t++)this.isRTL?n[t].col=this.daysPerRow-1-n[t].dayIndex:n[t].col=n[t].dayIndex;return n},sliceRangeByTimes:function(e){var t,n,r,i=[];for(n=0;n<this.daysPerRow;n++)(t=D(e,{start:(r=this.dayDates[n].clone()).clone().time(this.minTime),end:r.clone().time(this.maxTime)}))&&(t.dayIndex=n,i.push(t));return i},updateSize:function(e){this.slatCoordCache.build(),e&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(e,t){return this.computeTimeTop(A.duration(e-t.clone().stripTime()))},computeTimeTop:function(e){var t,n,r=this.slatEls.length,i=(e-this.minTime)/this.slotDuration;return i=Math.max(0,i),i=Math.min(r,i),t=Math.floor(i),n=i-(t=Math.min(t,r-1)),this.slatCoordCache.getTopPosition(t)+this.slatCoordCache.getHeight(t)*n},renderDrag:function(e,t){if(t)return this.renderEventLocationHelper(e,t);this.renderHighlight(this.eventToSpan(e))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(e,t){return this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(e,t){return this.renderHelperSegs(this.eventToSegs(e),t)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents(),t=this.eventsToSegs(e);this.renderBusinessSegs(t)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(e){var t,n=this.spanToSegs({start:e,end:e}),r=this.computeDateTop(e,e),i=[];for(t=0;t<n.length;t++)i.push(M('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",r).appendTo(this.colContainerEls.eq(n[t].col))[0]);0<n.length&&i.push(M('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",r).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=M(i)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(e){this.view.opt("selectHelper")?this.renderEventLocationHelper(e):this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(e){this.renderHighlightSegs(this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});function Be(e){var t,n,r=e.forwardSegs,i=0;if(void 0===e.forwardPressure){for(t=0;t<r.length;t++)Be(n=r[t]),i=Math.max(i,1+n.forwardPressure);e.forwardPressure=i}}function je(e,t,n){n=n||[];for(var r=0;r<t.length;r++)i=e,a=t[r],i.bottom>a.top&&i.top<a.bottom&&n.push(t[r]);var i,a;return n}Ue.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var e,t,n="";for(e=0;e<this.colCnt;e++)n+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';t=M('<div class="fc-content-skeleton"><table><tr>'+n+"</tr></table></div>"),this.colContainerEls=t.find(".fc-content-col"),this.helperContainerEls=t.find(".fc-helper-container"),this.fgContainerEls=t.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=t.find(".fc-bgevent-container"),this.highlightContainerEls=t.find(".fc-highlight-container"),this.businessContainerEls=t.find(".fc-business-container"),this.bookendCells(t.find("tr")),this.el.append(t)},renderFgSegs:function(e){return e=this.renderFgSegsIntoContainers(e,this.fgContainerEls),this.fgSegs=e},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(e,t){var n,r,i,a=[];for(e=this.renderFgSegsIntoContainers(e,this.helperContainerEls),n=0;n<e.length;n++)r=e[n],t&&t.col===r.col&&(i=t.el,r.el.css({left:i.css("left"),right:i.css("right"),"margin-left":i.css("margin-left"),"margin-right":i.css("margin-right")})),a.push(r.el[0]);return this.helperSegs=e,M(a)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(e){return e=this.renderFillSegEls("bgEvent",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.bgContainerEls),this.bgSegs=e},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(e){e=this.renderFillSegEls("highlight",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.highlightContainerEls),this.highlightSegs=e},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(e){e=this.renderFillSegEls("businessHours",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.businessContainerEls),this.businessSegs=e},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(e){var t,n=[];for(t=0;t<this.colCnt;t++)n.push([]);for(t=0;t<e.length;t++)n[e[t].col].push(e[t]);return n},attachSegsByCol:function(e,t){var n,r,i;for(n=0;n<this.colCnt;n++)for(r=e[n],i=0;i<r.length;i++)t.eq(n).append(r[i].el)},unrenderNamedSegs:function(e){var t,n=this[e];if(n){for(t=0;t<n.length;t++)n[t].el.remove();this[e]=null}},renderFgSegsIntoContainers:function(e,t){var n,r;for(e=this.renderFgSegEls(e),n=this.groupSegsByCol(e),r=0;r<this.colCnt;r++)this.updateFgSegCoords(n[r]);return this.attachSegsByCol(n,t),e},fgSegHtml:function(e,t){var n,r,i,a=this.view,o=e.event,s=a.isEventDraggable(o),l=!t&&e.isStart&&a.isEventResizableFromStart(o),u=!t&&e.isEnd&&a.isEventResizableFromEnd(o),c=this.getSegClasses(e,s,l||u),d=K(this.getSegSkinCss(e));return c.unshift("fc-time-grid-event","fc-v-event"),a.isMultiDayEvent(o)?(e.isStart||e.isEnd)&&(n=this.getEventTimeText(e),r=this.getEventTimeText(e,"LT"),i=this.getEventTimeText(e,null,!1)):(n=this.getEventTimeText(o),r=this.getEventTimeText(o,"LT"),i=this.getEventTimeText(o,null,!1)),'<a class="'+c.join(" ")+'"'+(o.url?' href="'+G(o.url)+'"':"")+(d?' style="'+d+'"':"")+'><div class="fc-content">'+(n?'<div class="fc-time" data-start="'+G(i)+'" data-full="'+G(r)+'"><span>'+G(n)+"</span></div>":"")+(o.title?'<div class="fc-title">'+G(o.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(u?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(e){this.computeSegVerticals(e),this.assignSegVerticals(e)},computeSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},assignSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).el.css(this.generateSegVerticalCss(n))},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},updateFgSegCoords:function(e){this.computeSegVerticals(e),this.computeFgSegHorizontals(e),this.assignSegVerticals(e),this.assignFgSegHorizontals(e)},computeFgSegHorizontals:function(e){var t,n,r;if(this.sortEventSegs(e),function(e){var t,n,r,i,a;for(t=0;t<e.length;t++)for(n=e[t],r=0;r<n.length;r++)for((i=n[r]).forwardSegs=[],a=t+1;a<e.length;a++)je(i,e[a],i.forwardSegs)}(t=function(e){var t,n,r,i=[];for(t=0;t<e.length;t++){for(n=e[t],r=0;r<i.length&&je(n,i[r]).length;r++);n.level=r,(i[r]||(i[r]=[])).push(n)}return i}(e)),n=t[0]){for(r=0;r<n.length;r++)Be(n[r]);for(r=0;r<n.length;r++)this.computeFgSegForwardBack(n[r],0,0)}},computeFgSegForwardBack:function(e,t,n){var r,i=e.forwardSegs;if(void 0===e.forwardCoord)for(i.length?(this.sortForwardSegs(i),this.computeFgSegForwardBack(i[0],t+1,n),e.forwardCoord=i[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1),r=0;r<i.length;r++)this.computeFgSegForwardBack(i[r],0,e.forwardCoord)},sortForwardSegs:function(e){e.sort(J(this,"compareForwardSegs"))},compareForwardSegs:function(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||this.compareEventSegs(e,t)},assignFgSegHorizontals:function(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).el.css(this.generateFgSegHorizontalCss(n)),n.bottom-n.top<30&&n.el.addClass("fc-short")},generateFgSegHorizontalCss:function(e){var t,n,r=this.view.opt("slotEventOverlap"),i=e.backwardCoord,a=e.forwardCoord,o=this.generateSegVerticalCss(e);return r&&(a=Math.min(1,i+2*(a-i))),n=this.isRTL?(t=1-a,i):(t=i,1-a),o.zIndex=e.level+1,o.left=100*t+"%",o.right=100*n+"%",r&&e.forwardPressure&&(o[this.isRTL?"marginLeft":"marginRight"]=20),o}});var Ve=N.View=$e.extend(xe,Ce,{type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(e,t,n,r){this.calendar=e,this.type=this.name=t,this.options=n,this.intervalDuration=r||A.duration(1,"day"),this.nextDayThreshold=A.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=x(this.opt("eventOrder")),this.initialize()},initialize:function(){},opt:function(e){return this.options[e]},trigger:function(e,t){var n=this.calendar;return n.trigger.apply(n,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(e){this.setRange(this.computeRange(e))},setRange:function(e){M.extend(this,e),this.updateTitle()},computeRange:function(e){var t,n,r=_(this.intervalDuration),i=e.clone().startOf(r),a=i.clone().add(this.intervalDuration);return/year|month|week|day/.test(r)?(i.stripTime(),a.stripTime()):(i.hasTime()||(i=this.calendar.time(0)),a.hasTime()||(a=this.calendar.time(0))),t=i.clone(),t=this.skipHiddenDays(t),n=a.clone(),{intervalUnit:r,intervalStart:i,intervalEnd:a,start:t,end:n=this.skipHiddenDays(n,-1,!0)}},computePrevDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(e,t){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(e)&&(e=this.skipHiddenDays(e,t)).startOf("day"),e},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):1<this.intervalDuration.as("days")?"ll":"LL"},formatRange:function(e,t,n){var r=e.end;return r.hasTime()||(r=r.clone().subtract(1)),ge(e.start,r,t,n,this.opt("isRTL"))},setElement:function(e){this.el=e,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(e){var t=this,n=null;return this.displaying&&(n=this.queryScroll()),this.calendar.freezeContentHeight(),this.clear().then(function(){return t.displaying=M.when(t.displayView(e)).then(function(){t.forceScroll(t.computeInitialScroll(n)),t.calendar.unfreezeContentHeight(),t.triggerRender()})})},clear:function(){var e=this,t=this.displaying;return t?t.then(function(){return e.displaying=null,e.clearEvents(),e.clearView()}):M.when()},displayView:function(e){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),e&&this.setDate(e),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator()},clearView:function(){this.unselect(),this.stopNowIndicator(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo(M(document),"mousedown",this.handleDocumentMousedown),this.listenTo(M(document),"touchstart",this.processUnselect)},unbindGlobalHandlers:function(){this.stopListeningTo(M(document))},initThemingProps:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header",this.widgetContentClass=e+"-widget-content",this.highlightStateClass=e+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var e,t,n,r=this;this.opt("nowIndicator")&&(e=this.getNowIndicatorUnit())&&(t=J(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,n=this.initialNowDate.clone().startOf(e).add(1,e)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){r.nowIndicatorTimeoutID=null,t(),n=+A.duration(1,e),n=Math.max(100,n),r.nowIndicatorIntervalID=setInterval(t,n)},n))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},updateSize:function(e){var t;e&&(t=this.queryScroll()),this.updateHeight(e),this.updateWidth(e),this.updateNowIndicator(),e&&this.setScroll(t)},updateWidth:function(e){},updateHeight:function(e){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(e,t){},computeInitialScroll:function(e){return 0},queryScroll:function(){},setScroll:function(e){},forceScroll:function(e){var t=this;this.setScroll(e),setTimeout(function(){t.setScroll(e)},0)},displayEvents:function(e){var t=this.queryScroll();this.clearEvents(),this.renderEvents(e),this.isEventsRendered=!0,this.setScroll(t),this.triggerEventRender()},clearEvents:function(){var e;this.isEventsRendered&&(e=this.queryScroll(),this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.setScroll(e),this.isEventsRendered=!1)},renderEvents:function(e){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(e){this.trigger("eventAfterRender",e.event,e.event,e.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(e){this.trigger("eventDestroy",e.event,e.event,e.el)})},resolveEventEl:function(e,t){var n=this.trigger("eventRender",e,e,t);return!1===n?t=null:n&&!0!==n&&(t=M(n)),t},showEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","hidden")},e)},renderedEventSegEach:function(e,t){var n,r=this.getEventSegs();for(n=0;n<r.length;n++)t&&r[n].event._id!==t._id||r[n].el&&e.call(this,r[n])},getEventSegs:function(){return[]},isEventDraggable:function(e){var t=e.source||{};return q(e.startEditable,t.startEditable,this.opt("eventStartEditable"),e.editable,t.editable,this.opt("editable"))},reportEventDrop:function(e,t,n,r,i){var a=this.calendar,o=a.mutateEvent(e,t,n);this.triggerEventDrop(e,o.dateDelta,function(){o.undo(),a.reportEventChange()},r,i),a.reportEventChange()},triggerEventDrop:function(e,t,n,r,i){this.trigger("eventDrop",r[0],e,t,n,i,{})},reportExternalDrop:function(e,t,n,r,i){var a,o,s=e.eventProps;s&&(a=M.extend({},s,t),o=this.calendar.renderEvent(a,e.stick)[0]),this.triggerExternalDrop(o,t,n,r,i)},triggerExternalDrop:function(e,t,n,r,i){this.trigger("drop",n[0],t.start,r,i),e&&this.trigger("eventReceive",null,e)},renderDrag:function(e,t){},unrenderDrag:function(){},isEventResizableFromStart:function(e){return this.opt("eventResizableFromStart")&&this.isEventResizable(e)},isEventResizableFromEnd:function(e){return this.isEventResizable(e)},isEventResizable:function(e){var t=e.source||{};return q(e.durationEditable,t.durationEditable,this.opt("eventDurationEditable"),e.editable,t.editable,this.opt("editable"))},reportEventResize:function(e,t,n,r,i){var a=this.calendar,o=a.mutateEvent(e,t,n);this.triggerEventResize(e,o.durationDelta,function(){o.undo(),a.reportEventChange()},r,i),a.reportEventChange()},triggerEventResize:function(e,t,n,r,i){this.trigger("eventResize",r[0],e,t,n,i,{})},select:function(e,t){this.unselect(t),this.renderSelection(e),this.reportSelection(e,t)},renderSelection:function(e){},reportSelection:function(e,t){this.isSelected=!0,this.triggerSelect(e,t)},triggerSelect:function(e,t){this.trigger("select",null,this.calendar.applyTimezone(e.start),this.calendar.applyTimezone(e.end),t)},unselect:function(e){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,e))},unrenderSelection:function(){},selectEvent:function(e){this.selectedEvent&&this.selectedEvent===e||(this.unselectEvent(),this.renderedEventSegEach(function(e){e.el.addClass("fc-selected")},e),this.selectedEvent=e)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(e){e.el.removeClass("fc-selected")},this.selectedEvent),this.selectedEvent=null)},isEventSelected:function(e){return this.selectedEvent&&this.selectedEvent._id===e._id},handleDocumentMousedown:function(e){v(e)&&this.processUnselect(e)},processUnselect:function(e){this.processRangeUnselect(e),this.processEventUnselect(e)},processRangeUnselect:function(e){var t;this.isSelected&&this.opt("unselectAuto")&&((t=this.opt("unselectCancel"))&&M(e.target).closest(t).length||this.unselect(e))},processEventUnselect:function(e){this.selectedEvent&&(M(e.target).closest(".fc-selected").length||this.unselectEvent())},triggerDayClick:function(e,t,n){this.trigger("dayClick",t,this.calendar.applyTimezone(e.start),n)},initHiddenDays:function(){var e,t=this.opt("hiddenDays")||[],n=[],r=0;for(!1===this.opt("weekends")&&t.push(0,6),e=0;e<7;e++)(n[e]=-1!==M.inArray(e,t))||r++;if(!r)throw"invalid hiddenDays";this.isHiddenDayHash=n},isHiddenDay:function(e){return A.isMoment(e)&&(e=e.day()),this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,n){var r=e.clone();for(t=t||1;this.isHiddenDayHash[(r.day()+(n?t:0)+7)%7];)r.add(t,"days");return r},computeDayRange:function(e){var t,n=e.start.clone().stripTime(),r=e.end,i=null;return r&&(i=r.clone().stripTime(),(t=+r.time())&&t>=this.nextDayThreshold&&i.add(1,"days")),(!r||i<=n)&&(i=n.clone().add(1,"days")),{start:n,end:i}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return 1<t.end.diff(t.start,"days")}}),We=N.Scroller=$e.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(e){e=e||{},this.overflowX=e.overflowX||e.overflow||"auto",this.overflowY=e.overflowY||e.overflow||"auto"},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=M('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto"),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(e){var t=this.overflowX,n=this.overflowY;e=e||this.getScrollbarWidths(),"auto"===t&&(t=e.top||e.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===n&&(n=e.left||e.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":t,"overflow-y":n})},setHeight:function(e){this.scrollEl.height(e)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(e){this.scrollEl.scrollTop(e)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return l(this.scrollEl)}}),qe=N.Calendar=$e.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:function(e,t){var i=this;i.initOptions(t||{});var r=this.options;i.render=function(){u?$()&&(x(),w()):function(){r.theme?"ui":"fc",e.addClass("fc"),r.isRTL?e.addClass("fc-rtl"):e.addClass("fc-ltr");r.theme?e.addClass("ui-widget"):e.addClass("fc-unthemed");u=M("<div class='fc-view-container'/>").prependTo(e),s=i.header=new Qe(i,r),(l=s.render())&&e.prepend(l);w(r.defaultView),r.handleWindowResize&&(f=Q(E,r.windowResizeDelay),M(window).resize(f))}()},i.destroy=function(){c&&c.removeElement();s.removeElement(),u.remove(),e.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),f&&M(window).unbind("resize",f)},i.refetchEvents=function(){k(),c.clearEvents(),R(),D()},i.reportEvents=function(e){b=e,T()},i.reportEventChange=function(){T()},i.rerenderEvents=T,i.changeView=w,i.select=function(e,t){c.select(i.buildSelectSpan.apply(i,arguments))},i.unselect=function(){c&&c.unselect()},i.prev=function(){p=c.computePrevDate(p),w()},i.next=function(){p=c.computeNextDate(p),w()},i.prevYear=function(){p.add(-1,"years"),w()},i.nextYear=function(){p.add(1,"years"),w()},i.today=function(){p=i.getNow(),w()},i.gotoDate=function(e){p=i.moment(e).stripZone(),w()},i.incrementDate=function(e){p.add(A.duration(e)),w()},i.zoomTo=function(e,t){var n;t=t||"day",n=i.getViewSpec(t)||i.getUnitViewSpec(t),p=e.clone(),w(n?n.type:null)},i.getDate=function(){return i.applyTimezone(p)},i.getCalendar=function(){return i},i.getView=function(){return c},i.option=function(e,t){if(void 0===t)return r[e];"height"!=e&&"contentHeight"!=e&&"aspectRatio"!=e||(r[e]=t,S(!0))},i.trigger=function(e,t){var n=Array.prototype.slice.call(arguments,2);if(t=t||m,this.triggerWith(e,t,n),r[e])return r[e].apply(t,n)};var n=B(Je(r.lang));r.monthNames&&(n._months=r.monthNames);r.monthNamesShort&&(n._monthsShort=r.monthNamesShort);r.dayNames&&(n._weekdays=r.dayNames);r.dayNamesShort&&(n._weekdaysShort=r.dayNamesShort);if(null!=r.firstDay){var a=B(n._week);a.dow=r.firstDay,n._week=a}n._fullCalendar_weekCalc=(o=r.weekNumberCalculation,"function"==typeof o?o:"local"===o?o:"iso"===o||"ISO"===o?"ISO":void 0),i.defaultAllDayEventDuration=A.duration(r.defaultAllDayEventDuration),i.defaultTimedEventDuration=A.duration(r.defaultTimedEventDuration),i.moment=function(){var e;return"local"===r.timezone?(e=N.moment.apply(null,arguments)).hasTime()&&e.local():e="UTC"===r.timezone?N.moment.utc.apply(null,arguments):N.moment.parseZone.apply(null,arguments),"_locale"in e?e._locale=n:e._lang=n,e},i.getIsAmbigTimezone=function(){return"local"!==r.timezone&&"UTC"!==r.timezone},i.applyTimezone=function(e){if(!e.hasTime())return e.clone();var t,n=i.moment(e.toArray()),r=e.time()-n.time();return r&&(t=n.clone().add(r),e.time()-t.time()==0&&(n=t)),n},i.getNow=function(){var e=r.now;return"function"==typeof e&&(e=e()),i.moment(e).stripZone()},i.getEventEnd=function(e){return e.end?e.end.clone():i.getDefaultEventEnd(e.allDay,e.start)},i.getDefaultEventEnd=function(e,t){var n=t.clone();return e?n.stripTime().add(i.defaultAllDayEventDuration):n.add(i.defaultTimedEventDuration),i.getIsAmbigTimezone()&&n.stripZone(),n},i.humanizeDuration=function(e){return(e.locale||e.lang).call(e,r.lang).humanize()},function(m){var b=this;b.isFetchNeeded=function(e,t){return!v||e<v||y<t},b.fetchEvents=function(e,t){v=e,y=t,c=[];var n=++l,r=a.length;u=r;for(var i=0;i<r;i++)d(a[i],n)},b.addEventSource=function(e){var t=r(e);t&&(a.push(t),u++,d(t,l))},b.removeEventSource=function(t){a=M.grep(a,function(e){return!n(e,t)}),c=M.grep(c,function(e){return!n(e.source,t)}),s(c)},b.updateEvent=function(e){e.start=b.moment(e.start),e.end?e.end=b.moment(e.end):e.end=null;g(e,(t=e,r={},M.each(t,function(e,t){var n;f(e)&&void 0!==t&&(n=t,/undefined|null|boolean|number|string/.test(M.type(n)))&&(r[e]=t)}),r)),s(c);var t,r},b.renderEvent=function(e,t){var n,r,i,a=w(e);if(a){for(n=S(a),r=0;r<n.length;r++)(i=n[r]).source||(t&&(o.events.push(i),i.source=o),c.push(i));return s(c),n}return[]},b.removeEvents=function(e){var t,n;null==e?e=function(){return!0}:M.isFunction(e)||(t=e+"",e=function(e){return e._id==t});for(c=M.grep(c,e,!0),n=0;n<a.length;n++)M.isArray(a[n].events)&&(a[n].events=M.grep(a[n].events,e,!0));s(c)},b.clientEvents=$,b.mutateEvent=g,b.normalizeEventDates=h,b.normalizeEventTimes=t;var v,y,s=b.reportEvents,o={events:[]},a=[o],l=0,u=0,c=[];function d(a,o){!function e(t,n){var r;var i=N.sourceFetchers;var a;for(r=0;r<i.length;r++){if(!0===(a=i[r].call(b,t,v.clone(),y.clone(),m.timezone,n)))return;if("object"==typeof a)return void e(a,n)}var o=t.events;if(o)M.isFunction(o)?(b.pushLoading(),o.call(b,v.clone(),y.clone(),m.timezone,function(e){n(e),b.popLoading()})):M.isArray(o)?n(o):n();else{var s=t.url;if(s){var l,u=t.success,c=t.error,d=t.complete;l=M.isFunction(t.data)?t.data():t.data;var f=M.extend({},l||{}),p=q(t.startParam,m.startParam),h=q(t.endParam,m.endParam),g=q(t.timezoneParam,m.timezoneParam);p&&(f[p]=v.format()),h&&(f[h]=y.format()),m.timezone&&"local"!=m.timezone&&(f[g]=m.timezone),b.pushLoading(),M.ajax(M.extend({},et,t,{data:f,success:function(e){e=e||[];var t=W(u,this,arguments);M.isArray(t)&&(e=t),n(e)},error:function(){W(c,this,arguments),n()},complete:function(){W(d,this,arguments),b.popLoading()}}))}else n()}}(a,function(e){var t,n,r,i=M.isArray(a.events);if(o==l){if(e)for(t=0;t<e.length;t++)n=e[t],(r=i?n:w(n,a))&&c.push.apply(c,S(r));--u||s(c)}})}function r(e){var t,n,r=N.sourceNormalizers;if(M.isFunction(e)||M.isArray(e)?t={events:e}:"string"==typeof e?t={url:e}:"object"==typeof e&&(t=M.extend({},e)),t){for(t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[],M.isArray(t.events)&&(t.origArray=t.events,t.events=M.map(t.events,function(e){return w(e,t)})),n=0;n<r.length;n++)r[n].call(b,t);return t}}function n(e,t){return e&&t&&i(e)==i(t)}function i(e){return("object"==typeof e?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function f(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function $(t){return M.isFunction(t)?M.grep(c,t):null!=t?(t+="",M.grep(c,function(e){return e._id==t})):c}function w(e,t){var n,r,i,a={};if(m.eventDataTransform&&(e=m.eventDataTransform(e)),t&&t.eventDataTransform&&(e=t.eventDataTransform(e)),M.extend(a,e),t&&(a.source=t),a._id=e._id||(void 0===e.id?"_fc"+tt++:e.id+""),e.className?"string"==typeof e.className?a.className=e.className.split(/\s+/):a.className=e.className:a.className=[],n=e.start||e.date,r=e.end,F(n)&&(n=A.duration(n)),F(r)&&(r=A.duration(r)),e.dow||A.isDuration(n)||A.isDuration(r))a.start=n?A.duration(n):null,a.end=r?A.duration(r):null,a._recurring=!0;else{if(n&&!(n=b.moment(n)).isValid())return!1;r&&((r=b.moment(r)).isValid()||(r=null)),void 0===(i=e.allDay)&&(i=q(t?t.allDayDefault:void 0,m.allDayDefault)),p(n,r,i,a)}return b.normalizeEvent(a),a}function p(e,t,n,r){r.start=e,r.end=t,r.allDay=n,h(r),nt(r)}function h(e){t(e),e.end&&!e.end.isAfter(e.start)&&(e.end=null),e.end||(m.forceEventDuration?e.end=b.getDefaultEventEnd(e.allDay,e.start):e.end=null)}function t(e){null==e.allDay&&(e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())),e.allDay?(e.start.stripTime(),e.end&&e.end.stripTime()):(e.start.hasTime()||(e.start=b.applyTimezone(e.start.time(0))),e.end&&!e.end.hasTime()&&(e.end=b.applyTimezone(e.end.time(0))))}function S(e,t,n){var r,i,a,o,s,l,u,c,d,f=[];if(t=t||v,n=n||y,e)if(e._recurring){if(i=e.dow)for(r={},a=0;a<i.length;a++)r[i[a]]=!0;for(o=t.clone().stripTime();o.isBefore(n);)r&&!r[o.day()]||(s=e.start,l=e.end,u=o.clone(),c=null,s&&(u=u.time(s)),l&&(c=o.clone().time(l)),d=M.extend({},e),p(u,c,!s&&!l,d),f.push(d)),o.add(1,"days")}else f.push(e);return f}function g(e,i,a){var t,n,r,o,s,l={};function u(e,t){return a?I(e,t,a):i.allDay?(n=e,r=t,A.duration({days:n.clone().stripTime().diff(r.clone().stripTime(),"days")})):O(e,t);var n,r}return(i=i||{}).start||(i.start=e.start.clone()),void 0===i.end&&(i.end=e.end?e.end.clone():null),null==i.allDay&&(i.allDay=e.allDay),h(i),h(t={start:e._start.clone(),end:e._end?e._end.clone():b.getDefaultEventEnd(e._allDay,e._start),allDay:i.allDay}),n=null!==e._end&&null===i.end,r=u(i.start,t.start),o=i.end?u(i.end,t.end).subtract(r):null,M.each(i,function(e,t){f(e)&&void 0!==t&&(l[e]=t)}),s=function(e,i,a,o,s,l){var u=b.getIsAmbigTimezone(),c=[];o&&!o.valueOf()&&(o=null);s&&!s.valueOf()&&(s=null);return M.each(e,function(e,t){var n,r;n={start:t.start.clone(),end:t.end?t.end.clone():null,allDay:t.allDay},M.each(l,function(e){n[e]=t[e]}),h(r={start:t._start,end:t._end,allDay:a}),i?r.end=null:s&&!r.end&&(r.end=b.getDefaultEventEnd(r.allDay,r.start)),o&&(r.start.add(o),r.end&&r.end.add(o)),s&&r.end.add(s),u&&!r.allDay&&(o||s)&&(r.start.stripZone(),r.end&&r.end.stripZone()),M.extend(t,l,r),nt(t),c.push(function(){M.extend(t,n),nt(t)})}),function(){for(var e=0;e<c.length;e++)c[e]()}}($(e._id),n,i.allDay,r,o,l),{dateDelta:r,durationDelta:o,undo:s}}function x(e){var t,n=m.businessHours,r=b.getView();return n&&(t=M.extend({},{className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},"object"==typeof n?n:{})),t?(e&&(t.start=null,t.end=null),S(w(t),r.start,r.end)):[]}function C(e,t){var n=t.source||{},r=q(t.constraint,n.constraint,m.eventConstraint),i=q(t.overlap,n.overlap,m.eventOverlap);return T(e,r,i,t)}function E(e){return T(e,m.selectConstraint,m.selectOverlap)}function T(e,t,n,r){var i,a,o,s,l,u,c,d,f,p,h,g,m,v,y;if(null!=t){for(i="businessHours"!==(h=t)?"object"!=typeof h?$(h):S(w(h)):x(),a=!1,s=0;s<i.length;s++)if(c=i[s],d=e,void 0,f=c.start.clone().stripZone(),p=b.getEventEnd(c).stripZone(),d.start>=f&&d.end<=p){a=!0;break}if(!a)return!1}for(o=b.getPeerEvents(e,r),s=0;s<o.length;s++)if(l=o[s],m=e,void 0,v=(g=l).start.clone().stripZone(),y=b.getEventEnd(g).stripZone(),m.start<y&&m.end>v){if(!1===n)return!1;if("function"==typeof n&&!n(l,r))return!1;if(r){if(!1===(u=q(l.overlap,(l.source||{}).overlap)))return!1;if("function"==typeof u&&!u(r,l))return!1}}return!0}M.each((m.events?[m.events]:[]).concat(m.eventSources||[]),function(e,t){var n=r(t);n&&a.push(n)}),b.getBusinessHoursEvents=x,b.isEventSpanAllowed=C,b.isExternalSpanAllowed=function(e,t,n){var r,i;n&&(r=M.extend({},n,t),i=S(w(r))[0]);return i?C(e,i):E(e)},b.isSelectionSpanAllowed=E,b.getEventCache=function(){return c}}.call(i,r);var o;var s,l,u,c,d,f,p,h=i.isFetchNeeded,g=i.fetchEvents,m=e[0],v={},y=0,b=[];p=null!=r.defaultDate?i.moment(r.defaultDate).stripZone():i.getNow();function $(){return e.is(":visible")}function w(e){y++,c&&e&&c.type!==e&&(s.deactivateButton(c.type),k(),c.removeElement(),c=i.view=null),!c&&e&&((c=i.view=v[e]||(v[e]=i.instantiateView(e))).setElement(M("<div class='fc-view fc-"+e+"-view' />").appendTo(u)),s.activateButton(e)),c&&(p=c.massageCurrentDate(p),c.displaying&&p.isWithin(c.intervalStart,c.intervalEnd)||$()&&(c.display(p),R(),s.updateTitle(c.title),i.getNow().isWithin(c.intervalStart,c.intervalEnd)?s.disableButton("today"):s.enableButton("today"),!r.lazyFetching||h(c.start,c.end)?D():T())),R(),y--}function S(e){if($())return e&&C(),y++,c.updateSize(!0),y--,!0}function x(){$()&&C()}function C(){d="number"==typeof r.contentHeight?r.contentHeight:"number"==typeof r.height?r.height-(l?l.outerHeight(!0):0):Math.round(u.width()/Math.max(r.aspectRatio,.5))}function E(e){!y&&e.target===window&&c.start&&S(!0)&&c.trigger("windowResize",m)}function T(){$()&&(k(),c.displayEvents(b),R())}function D(){g(c.start,c.end)}function k(){u.css({width:"100%",height:u.height(),overflow:"hidden"})}function R(){u.css({width:"",height:"",overflow:""})}i.getSuggestedViewHeight=function(){return void 0===d&&x(),d},i.isHeightAuto=function(){return"auto"===r.contentHeight||"auto"===r.height},i.freezeContentHeight=k,i.unfreezeContentHeight=R,i.initialize()},initialize:function(){},initOptions:function(e){var t,n,r,i,a,o;o={views:(i=e).views||{}},M.each(i,function(n,e){"views"!=n&&(M.isPlainObject(e)&&!/(time|duration|interval)$/i.test(n)&&-1==M.inArray(n,s)?(a=null,M.each(e,function(e,t){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(e)?(o.views[e]||(o.views[e]={}),o.views[e][n]=t):(a||(a={}),a[e]=t)}),a&&(o[n]=a)):o[n]=e)}),t=(e=o).lang,(n=Ge[t])||(t=qe.defaults.lang,n=Ge[t]||{}),r=q(e.isRTL,n.isRTL,qe.defaults.isRTL)?qe.rtlDefaults:{},this.dirDefaults=r,this.langDefaults=n,this.overrides=e,this.options=d([qe.defaults,r,n,e]),Ze(this.options),this.viewSpecCache={}},getViewSpec:function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))},getUnitViewSpec:function(e){var t,n,r;if(-1!=M.inArray(e,R))for(t=this.header.getViewsWithButtons(),M.each(N.views,function(e){t.push(e)}),n=0;n<t.length;n++)if((r=this.getViewSpec(t[n]))&&r.singleUnit==e)return r},buildViewSpec:function(e){for(var t,n,r,i,a=this.overrides.views||{},o=[],s=[],l=[],u=e;u;)t=c[u],n=a[u],u=null,"function"==typeof t&&(t={class:t}),t&&(o.unshift(t),s.unshift(t.defaults||{}),r=r||t.duration,u=u||t.type),n&&(l.unshift(n),r=r||n.duration,u=u||n.type);return(t=U(o)).type=e,!!t.class&&(r&&(r=A.duration(r)).valueOf()&&(i=_(t.duration=r),1===r.as(i)&&(t.singleUnit=i,l.unshift(a[i]||{}))),t.defaults=d(s),t.overrides=d(l),this.buildViewSpecOptions(t),this.buildViewSpecButtonText(t,e),t)},buildViewSpecOptions:function(e){e.options=d([qe.defaults,e.defaults,this.dirDefaults,this.langDefaults,this.overrides,e.overrides]),Ze(e.options)},buildViewSpecButtonText:function(n,r){function e(e){var t=e.buttonText||{};return t[r]||(n.singleUnit?t[n.singleUnit]:null)}n.buttonTextOverride=e(this.overrides)||n.overrides.buttonText,n.buttonTextDefault=e(this.langDefaults)||e(this.dirDefaults)||n.defaults.buttonText||e(qe.defaults)||(n.duration?this.humanizeDuration(n.duration):null)||r},instantiateView:function(e){var t=this.getViewSpec(e);return new t.class(this,e,t.options,t.duration)},isValidViewType:function(e){return Boolean(this.getViewSpec(e))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectSpan:function(e,t){var n,r=this.moment(e).stripZone();return n=t?this.moment(t).stripZone():r.hasTime()?r.clone().add(this.defaultTimedEventDuration):r.clone().add(this.defaultAllDayEventDuration),{start:r,end:n}}});qe.mixin(xe),qe.defaults={titleRangeSeparator:"  ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200,longPressDelay:1e3},qe.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},qe.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var Ge=N.langs={};N.datepickerLang=function(e,t,n){var r=Ge[e]||(Ge[e]={});r.isRTL=n.isRTL,r.weekNumberTitle=n.weekHeader,M.each(Ye,function(e,t){r[e]=t(n)}),M.datepicker&&(M.datepicker.regional[t]=M.datepicker.regional[e]=n,M.datepicker.regional.en=M.datepicker.regional[""],M.datepicker.setDefaults(n))},N.lang=function(e,t){var n,r;n=Ge[e]||(Ge[e]={}),t&&(n=Ge[e]=d([n,t])),r=Je(e),M.each(Ke,function(e,t){null==n[e]&&(n[e]=t(r,n))}),qe.defaults.lang=e};var Ye={buttonText:function(e){return{prev:Y(e.prevText),next:Y(e.nextText),today:Y(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}},Ke={dayOfMonthFormat:function(e,t){var n=e.longDateFormat("l");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),t.isRTL?n+=" ddd":n="ddd "+n,n},mediumTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(e){return e.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}},Xe={smallDayDateFormat:function(e){return e.isRTL?"D dd":"dd D"},weekFormat:function(e){return e.isRTL?"w[ "+e.weekNumberTitle+"]":"["+e.weekNumberTitle+" ]w"},smallWeekFormat:function(e){return e.isRTL?"w["+e.weekNumberTitle+"]":"["+e.weekNumberTitle+"]w"}};function Ze(n){M.each(Xe,function(e,t){null==n[e]&&(n[e]=t(n))})}function Je(e){var t=A.localeData||A.langData;return t.call(A,e)||t.call(A,"en")}function Qe(p,h){this.render=function(){var e=h.header;if(g=h.theme?"ui":"fc",e)return t=M("<div class='fc-toolbar'/>").append(n("left")).append(n("right")).append(n("center")).append('<div class="fc-clear"/>')},this.removeElement=function(){t.remove(),t=M()},this.updateTitle=function(e){t.find("h2").text(e)},this.activateButton=function(e){t.find(".fc-"+e+"-button").addClass(g+"-state-active")},this.deactivateButton=function(e){t.find(".fc-"+e+"-button").removeClass(g+"-state-active")},this.disableButton=function(e){t.find(".fc-"+e+"-button").attr("disabled","disabled").addClass(g+"-state-disabled")},this.enableButton=function(e){t.find(".fc-"+e+"-button").removeAttr("disabled").removeClass(g+"-state-disabled")},this.getViewsWithButtons=function(){return m};var g,t=M(),m=[];function n(e){var n=M('<div class="fc-'+e+'"/>'),t=h.header[e];return t&&M.each(t.split(" "),function(e){var t,d=M(),f=!0;M.each(this.split(","),function(e,t){var n,r,i,a,o,s,l,u,c;"title"==t?(d=d.add(M("<h2>&nbsp;</h2>")),f=!1):((n=(p.options.customButtons||{})[t])?(i=function(e){n.click&&n.click.call(c[0],e)},a="",o=n.text):(r=p.getViewSpec(t))?(i=function(){p.changeView(t)},m.push(t),a=r.buttonTextOverride,o=r.buttonTextDefault):p[t]&&(i=function(){p[t]()},a=(p.overrides.buttonText||{})[t],o=h.buttonText[t]),i&&(s=n?n.themeIcon:h.themeButtonIcons[t],l=n?n.icon:h.buttonIcons[t],u=a?G(a):s&&h.theme?"<span class='ui-icon ui-icon-"+s+"'></span>":l&&!h.theme?"<span class='fc-icon fc-icon-"+l+"'></span>":G(o),c=M('<button type="button" class="'+["fc-"+t+"-button",g+"-button",g+"-state-default"].join(" ")+'">'+u+"</button>").click(function(e){c.hasClass(g+"-state-disabled")||(i(e),(c.hasClass(g+"-state-active")||c.hasClass(g+"-state-disabled"))&&c.removeClass(g+"-state-hover"))}).mousedown(function(){c.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){c.removeClass(g+"-state-down")}).hover(function(){c.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){c.removeClass(g+"-state-hover").removeClass(g+"-state-down")}),d=d.add(c)))}),f&&d.first().addClass(g+"-corner-left").end().last().addClass(g+"-corner-right").end(),1<d.length?(t=M("<div/>"),f&&t.addClass("fc-button-group"),t.append(d),n.append(t)):n.append(d)}),n}}N.lang("en",qe.englishDefaults),N.sourceNormalizers=[];var et={dataType:"json",cache:!(N.sourceFetchers=[])},tt=1;function nt(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}qe.prototype.normalizeEvent=function(e){},qe.prototype.getPeerEvents=function(e,t){var n,r,i=this.getEventCache(),a=[];for(n=0;n<i.length;n++)r=i[n],t&&t._id===r._id||a.push(r);return a};var rt=N.BasicView=Ve.extend({scroller:null,dayGridClass:Le,dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new We({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){return new(this.dayGridClass.extend(it))(this)},setRange:function(e){Ve.prototype.setRange.call(this,e),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(e)},computeRange:function(e){var t=Ve.prototype.computeRange.call(this,e);return/year|month/.test(t.intervalUnit)&&(t.start.startOf("week"),t.start=this.skipHiddenDays(t.start),t.end.weekday()&&(t.end.add(1,"week").startOf("week"),t.end=this.skipHiddenDays(t.end,-1,!0))),t},renderDates:function(){this.dayNumbersVisible=1<this.dayGrid.rowCnt,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var e=this.scroller.el.addClass("fc-day-grid-container"),t=M('<div class="fc-day-grid" />').appendTo(e);this.el.find(".fc-body > tr > td").append(e),this.dayGrid.setElement(t),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&"number"!=typeof e},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=e(this.el.find(".fc-week-number")))},setHeight:function(e,t){var n,r,i=this.opt("eventLimit");this.scroller.clear(),o(this.headRowEl),this.dayGrid.removeSegPopover(),i&&"number"==typeof i&&this.dayGrid.limitRows(i),n=this.computeScrollerHeight(e),this.setGridHeight(n,t),i&&"number"!=typeof i&&this.dayGrid.limitRows(i),t||(this.scroller.setHeight(n),((r=this.scroller.getScrollbarWidths()).left||r.right)&&(a(this.headRowEl,r),n=this.computeScrollerHeight(e),this.scroller.setHeight(n)),this.scroller.lockOverflow(r))},computeScrollerHeight:function(e){return e-t(this.el,this.scroller.el)},setGridHeight:function(e,t){t?r(this.dayGrid.rowEls):n(this.dayGrid.rowEls,e,!0)},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(e){this.scroller.setScrollTop(e)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(e,t){return this.dayGrid.queryHit(e,t)},getHitSpan:function(e){return this.dayGrid.getHitSpan(e)},getHitEl:function(e){return this.dayGrid.getHitEl(e)},renderEvents:function(e){this.dayGrid.renderEvents(e),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),it={renderHeadIntroHtml:function(){var e=this.view;return e.weekNumbersVisible?'<th class="fc-week-number '+e.widgetHeaderClass+'" '+e.weekNumberStyleAttr()+"><span>"+G(e.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(e){var t=this.view;return t.weekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+"><span>"+this.getCellDate(e,0).format("w")+"</span></td>":""},renderBgIntroHtml:function(){var e=this.view;return e.weekNumbersVisible?'<td class="fc-week-number '+e.widgetContentClass+'" '+e.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var e=this.view;return e.weekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+"></td>":""}},at=N.MonthView=rt.extend({computeRange:function(e){var t,n=rt.prototype.computeRange.call(this,e);return this.isFixedWeeks()&&(t=Math.ceil(n.end.diff(n.start,"weeks",!0)),n.end.add(6-t,"weeks")),n},setGridHeight:function(e,t){(t=t||"variable"===this.opt("weekMode"))&&(e*=this.rowCnt/6),n(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){var e=this.opt("weekMode");return e?"fixed"===e:this.opt("fixedWeekCount")}});c.basic={class:rt},c.basicDay={type:"basic",duration:{days:1}},c.basicWeek={type:"basic",duration:{weeks:1}},c.month={class:at,duration:{months:1},defaults:{fixedWeekCount:!0}};var ot=N.AgendaView=Ve.extend({scroller:null,timeGridClass:Ue,timeGrid:null,dayGridClass:Le,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new We({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){return new(this.timeGridClass.extend(st))(this)},instantiateDayGrid:function(){return new(this.dayGridClass.extend(lt))(this)},setRange:function(e){Ve.prototype.setRange.call(this,e),this.timeGrid.setRange(e),this.dayGrid&&this.dayGrid.setRange(e)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var e=this.scroller.el.addClass("fc-time-grid-container"),t=M('<div class="fc-time-grid" />').appendTo(e);this.el.find(".fc-body > tr > td").append(e),this.timeGrid.setElement(t),this.timeGrid.renderDates(),this.bottomRuleEl=M('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td></tr></tbody></table>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(e){this.timeGrid.renderNowIndicator(e)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(e){this.timeGrid.updateSize(e),Ve.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=e(this.el.find(".fc-axis"))},setHeight:function(e,t){var n,r,i;this.bottomRuleEl.hide(),this.scroller.clear(),o(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),(n=this.opt("eventLimit"))&&"number"!=typeof n&&(n=ut),n&&this.dayGrid.limitRows(n)),t||(r=this.computeScrollerHeight(e),this.scroller.setHeight(r),((i=this.scroller.getScrollbarWidths()).left||i.right)&&(a(this.noScrollRowEls,i),r=this.computeScrollerHeight(e),this.scroller.setHeight(r)),this.scroller.lockOverflow(i),this.timeGrid.getTotalSlatHeight()<r&&this.bottomRuleEl.show())},computeScrollerHeight:function(e){return e-t(this.el,this.scroller.el)},computeInitialScroll:function(){var e=A.duration(this.opt("scrollTime")),t=this.timeGrid.computeTimeTop(e);return(t=Math.ceil(t))&&t++,t},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(e){this.scroller.setScrollTop(e)},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(e,t){var n=this.timeGrid.queryHit(e,t);return!n&&this.dayGrid&&(n=this.dayGrid.queryHit(e,t)),n},getHitSpan:function(e){return e.component.getHitSpan(e)},getHitEl:function(e){return e.component.getHitEl(e)},renderEvents:function(e){var t,n=[],r=[];for(t=0;t<e.length;t++)e[t].allDay?n.push(e[t]):r.push(e[t]);this.timeGrid.renderEvents(r),this.dayGrid&&this.dayGrid.renderEvents(n),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return e.start.hasTime()?this.timeGrid.renderDrag(e,t):this.dayGrid?this.dayGrid.renderDrag(e,t):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(e){e.start.hasTime()||e.end.hasTime()?this.timeGrid.renderSelection(e):this.dayGrid&&this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),st={renderHeadIntroHtml:function(){var e,t=this.view;return t.opt("weekNumbers")?(e=this.start.format(t.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+t.widgetHeaderClass+'" '+t.axisStyleAttr()+"><span>"+G(e)+"</span></th>"):'<th class="fc-axis '+t.widgetHeaderClass+'" '+t.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},lt={renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"><span>"+(e.opt("allDayHtml")||G(e.opt("allDayText")))+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},ut=5,ct=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return c.agenda={class:ot,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},c.agendaDay={type:"agenda",duration:{days:1}},c.agendaWeek={type:"agenda",duration:{weeks:1}},N}),angular.module("ui.calendar",[]).constant("uiCalendarConfig",{calendars:{}}).controller("uiCalendarCtrl",["$scope","$locale",function(i,r){var e=i.eventSources,a=i.calendarWatchEvent?i.calendarWatchEvent:angular.noop,o=1;this.eventFingerprint=function(e){e._id||(e._id=o++);var t=a({event:e})||"",n=moment.isMoment(e.start)?e.start.unix():e.start?moment(e.start).unix():"",r=moment.isMoment(e.end)?e.end.unix():e.end?moment(e.end).unix():"";return[e._id,e.id||"",e.title||"",e.url||"",n,r,e.allDay||"",e.className||"",t].join("")};var s=1,l=1;this.sourceFingerprint=function(e){var t=""+(e.__id||(e.__id=s++)),n=angular.isObject(e)&&e.events;return n&&(t=t+"-"+(n.__id||(n.__id=l++))),t},this.allEvents=function(){return Array.prototype.concat.apply([],(e||[]).reduce(function(e,t){if(angular.isArray(t))e.push(t);else if(angular.isObject(t)&&angular.isArray(t.events)){var n=Object.keys(t).filter(function(e){return"_id"!==e&&"events"!==e});t.events.forEach(function(e){angular.extend(e,n)}),e.push(t.events)}return e},[]))},this.changeWatcher=function(e,c){var d,t=function(){return((angular.isFunction(e)?e():e)||[]).reduce(function(e,t){var n=c(t);return p[n]=t,e.push(n),e},[])},f=function(e,t){var n=(t||[]).reduce(function(e,t){return e[t]=!0,e},Object.create(null));return(e||[]).filter(function(e){return!n[e]})},p={};return d={subscribe:function(e,n){e.$watch(t,function(e,t){!(n&&!1===n(e,t))&&function(e,t){var n,r,i={},a=f(t,e);for(n=0;n<a.length;n++){var o=a[n],s=p[o];delete p[o];var l=c(s);l===o?d.onRemoved(s):(i[l]=o,d.onChanged(s))}var u=f(e,t);for(n=0;n<u.length;n++)i[r=u[n]]||d.onAdded(p[r])}(e,t)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(e,t){var r={};return angular.extend(r,t),angular.extend(r,e),angular.forEach(r,function(e,t){var n;"function"==typeof e&&(r[t]=(n=r[t],function(){if(i.$root.$$phase)return n.apply(this,arguments);var e=arguments,t=this;return i.$root.$apply(function(){return n.apply(t,e)})}))}),r},this.getLocaleConfig=function(e){if(e.lang&&!e.useNgLocale)return{};var t=function(n){return(Object.keys(n)||[]).reduce(function(e,t){return e.push(n[t]),e},[])},n=r.DATETIME_FORMATS;return{monthNames:t(n.MONTH),monthNamesShort:t(n.SHORTMONTH),dayNames:t(n.DAY),dayNamesShort:t(n.SHORTDAY)}}}]).directive("uiCalendar",["uiCalendarConfig",function(c){return{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarCtrl",link:function(a,e,o,s){var i,l=a.eventSources,t=!1,n=s.changeWatcher(l,s.sourceFingerprint),r=s.changeWatcher(s.allEvents,s.eventFingerprint),u=null;a.destroyCalendar=function(){i&&i.fullCalendar&&i.fullCalendar("destroy"),i=o.calendar?c.calendars[o.calendar]=angular.element(e).html(""):angular.element(e).html("")},a.initCalendar=function(){i||(i=angular.element(e).html("")),i.fullCalendar(u),o.calendar&&(c.calendars[o.calendar]=i)},a.$on("$destroy",function(){a.destroyCalendar()}),n.onAdded=function(e){i&&i.fullCalendar&&(i.fullCalendar(u),o.calendar&&(c.calendars[o.calendar]=i),i.fullCalendar("addEventSource",e),t=!0)},n.onRemoved=function(e){i&&i.fullCalendar&&(i.fullCalendar("removeEventSource",e),t=!0)},n.onChanged=function(){i&&i.fullCalendar&&(i.fullCalendar("refetchEvents"),t=!0)},r.onAdded=function(e){i&&i.fullCalendar&&i.fullCalendar("renderEvent",e,!!e.stick)},r.onRemoved=function(e){i&&i.fullCalendar&&i.fullCalendar("removeEvents",e._id)},r.onChanged=function(e){if(i&&i.fullCalendar)for(var t=i.fullCalendar("clientEvents",e._id),n=0;n<t.length;n++){var r=t[n];r=angular.extend(r,e),i.fullCalendar("updateEvent",r)}},n.subscribe(a),r.subscribe(a,function(){if(!0===t)return t=!1}),a.$watch(function(){var e=o.uiCalendar?a.$parent.$eval(o.uiCalendar):{},t=s.getFullCalendarConfig(e,c),n=s.getLocaleConfig(t);angular.extend(n,t),u={eventSources:l},angular.extend(u,n),u.calendars=null;var r={};for(var i in u)"eventSources"!==i&&(r[i]=u[i]);return JSON.stringify(r)},function(e,t){e!==t?(a.destroyCalendar(),a.initCalendar()):e&&angular.isUndefined(i)&&a.initCalendar()})}}}]),function(u){"use strict";var e="socialshare",c=["facebook","facebook-messenger","sms","twitter","linkedin","google","pinterest","tumblr","reddit","stumbleupon","buffer","digg","delicious","vk","pocket","wordpress","flipboard","xing","hackernews","evernote","whatsapp","telegram","viber","skype","email","ok","weibo"],r=function(e,t){var n;t.socialshareType&&"feed"===t.socialshareType?(n="https://www.facebook.com/dialog/feed?",t.socialshareVia&&(n+="&app_id="+encodeURIComponent(t.socialshareVia)),t.socialshareRedirectUri&&(n+="&redirect_uri="+encodeURIComponent(t.socialshareRedirectUri)),t.socialshareUrl&&(n+="&link="+encodeURIComponent(t.socialshareUrl)),t.socialshareTo&&(n+="&to="+encodeURIComponent(t.socialshareTo)),t.socialshareQuote&&(n+="&quote="+encodeURIComponent(t.socialshareQuote)),t.socialshareHashtags&&(n+="&hashtag="+encodeURIComponent(t.socialshareHashtags)),t.socialshareDisplay&&(n+="&display="+encodeURIComponent(t.socialshareDisplay)),t.socialshareRef&&(n+="&ref="+encodeURIComponent(t.socialshareRef)),t.socialshareFrom&&(n+="&from="+encodeURIComponent(t.socialshareFrom)),t.socialshareDescription&&(n+="&description="+encodeURIComponent(t.socialshareDescription)),t.socialshareText&&(n+="&name="+encodeURIComponent(t.socialshareText)),t.socialshareCaption&&(n+="&caption="+encodeURIComponent(t.socialshareCaption)),t.socialshareMedia&&(n+="&picture="+encodeURIComponent(t.socialshareMedia)),t.socialshareSource&&(n+="&source="+encodeURIComponent(t.socialshareSource)),e.open(n,"Facebook","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)):t.socialshareType&&"share"===t.socialshareType?(n="https://www.facebook.com/dialog/share?",t.socialshareVia&&(n+="&app_id="+encodeURIComponent(t.socialshareVia)),t.socialshareTitle&&(n+="&title="+encodeURIComponent(t.socialshareTitle)),t.socialshareUrl&&(n+="&href="+encodeURIComponent(t.socialshareUrl)),t.socialshareQuote&&(n+="&quote="+encodeURIComponent(t.socialshareQuote)),t.socialshareDisplay&&(n+="&display="+encodeURIComponent(t.socialshareDisplay)),t.socialshareMobileiframe&&(n+="&mobile_iframe="+encodeURIComponent(t.socialshareMobileiframe)),t.socialshareDescription&&(n+="&description="+encodeURIComponent(t.socialshareDescription)),t.socialshareHashtags&&(n+="&hashtag="+encodeURIComponent(t.socialshareHashtags)),t.socialshareCaption&&(n+="&caption="+encodeURIComponent(t.socialshareCaption)),t.socialshareMedia&&(n+="&picture="+encodeURIComponent(t.socialshareMedia)),e.open(n,"Facebook","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)):t.socialshareType&&"send"===t.socialshareType?(n="https://www.facebook.com/dialog/send?",t.socialshareVia&&(n+="&app_id="+encodeURIComponent(t.socialshareVia)),t.socialshareRedirectUri&&(n+="&redirect_uri="+encodeURIComponent(t.socialshareRedirectUri)),t.socialshareUrl&&(n+="&link="+encodeURIComponent(t.socialshareUrl)),t.socialshareTo&&(n+="&to="+encodeURIComponent(t.socialshareTo)),t.socialshareDisplay&&(n+="&display="+encodeURIComponent(t.socialshareDisplay)),t.socialshareRef&&(n+="&ref="+encodeURIComponent(t.socialshareRef)),e.open(n,"Facebook","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)):e.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t.socialshareUrl||e.location.href),"Facebook","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},i=function(e,t){var n="mailto:";t.socialshareTo&&(n+=encodeURIComponent(t.socialshareTo)),n+="?",t.socialshareBody&&(n+="body="+encodeURIComponent(t.socialshareBody)),t.socialshareSubject&&(n+="&subject="+encodeURIComponent(t.socialshareSubject)),t.socialshareCc&&(n+="&cc="+encodeURIComponent(t.socialshareCc)),t.socialshareBcc&&(n+="&bcc="+encodeURIComponent(t.socialshareBcc)),e.self!==e.top?e.open(n,"_blank"):e.open(n,"_self")},a=function(e,t){var n="https://www.twitter.com/intent/tweet?";t.socialshareText&&(n+="text="+encodeURIComponent(t.socialshareText)),t.socialshareVia&&(n+="&via="+encodeURIComponent(t.socialshareVia)),t.socialshareHashtags&&(n+="&hashtags="+encodeURIComponent(t.socialshareHashtags)),n+="&url="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(n,"Twitter","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},o=function(e,t){e.open("https://plus.google.com/share?url="+encodeURIComponent(t.socialshareUrl||e.location.href),"Google+","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},s=function(e,t){var n="https://www.reddit.com/";n+=t.socialshareSubreddit?"r/"+t.socialshareSubreddit+"/submit?url=":"submit?url=",t.socialsharePopupWidth<900&&(t.socialsharePopupWidth=900),t.socialsharePopupHeight<650&&(t.socialsharePopupHeight=650),e.open(n+encodeURIComponent(t.socialshareUrl||e.location.href)+"&title="+encodeURIComponent(t.socialshareText),"Reddit","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},l=function(e,t){e.open("https://www.stumbleupon.com/submit?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&title="+encodeURIComponent(t.socialshareText),"StumbleUpon","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},d=function(e,t){var n="https://www.linkedin.com/shareArticle?mini=true";n+="&url="+encodeURIComponent(t.socialshareUrl||e.location.href),t.socialshareText&&(n+="&title="+encodeURIComponent(t.socialshareText)),t.socialshareDescription&&(n+="&summary="+encodeURIComponent(t.socialshareDescription)),t.socialshareSource&&(n+="&source="+encodeURIComponent(t.socialshareSource)),e.open(n,"Linkedin","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},f=function(e,t){e.open("https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&media="+encodeURIComponent(t.socialshareMedia)+"&description="+encodeURIComponent(t.socialshareText),"Pinterest","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},p=function(e,t){e.open("https://www.digg.com/submit?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&title="+encodeURIComponent(t.socialshareText),"Digg","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},h=function(e,t){if(t.socialshareMedia){var n="https://www.tumblr.com/share/photo?source="+encodeURIComponent(t.socialshareMedia);t.socialshareText&&(n+="&caption="+encodeURIComponent(t.socialshareText)),e.open(n,"Tumblr","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)}else e.open("https://www.tumblr.com/share/link?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&description="+encodeURIComponent(t.socialshareText),"Tumblr","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},g=function(e,t){var n="https://www.vk.com/share.php?url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(n+="&title="+encodeURIComponent(t.socialshareText)),t.socialshareMedia&&(n+="&image="+encodeURIComponent(t.socialshareMedia)),t.socialshareDescription&&(n+="&description="+encodeURIComponent(t.socialshareDescription)),e.open(n,"Vk","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},m=function(e,t){e.open("http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st._surl="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&st.comments="+encodeURIComponent(t.socialshareText),"Ok","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},v=function(e,t){e.open("https://www.delicious.com/save?v=5&noui&jump=close&url="+encodeURIComponent(t.socialshareUrl||e.location.href)+"&title="+encodeURIComponent(t.socialshareText),"Delicious","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},y=function(e,t){var n="https://bufferapp.com/add?";t.socialshareText&&(n+="text="+encodeURIComponent(t.socialshareText)),t.socialshareVia&&(n+="&via="+encodeURIComponent(t.socialshareVia)),t.socialshareMedia&&(n+="&picture="+encodeURIComponent(t.socialshareMedia)),n+="&url="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(n,"Buffer","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},b=function(e,t){var n="https://news.ycombinator.com/submitlink?";t.socialshareText&&(n+="t="+encodeURIComponent(t.socialshareText)+"&"),n+="u="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(n,"Hackernews","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},$=function(e,t){var n="https://share.flipboard.com/bookmarklet/popout?v=2&";t.socialshareText&&(n+="title="+encodeURIComponent(t.socialshareText)+"&"),n+="url="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(n,"Flipboard","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},w=function(e,t){var n="https://getpocket.com/save?";t.socialshareText&&(n+="text="+encodeURIComponent(t.socialshareText)+"&"),n+="url="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(n,"Pocket","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},S=function(e,t){var n="http://wordpress.com/press-this.php?";t.socialshareText&&(n+="t="+encodeURIComponent(t.socialshareText)+"&"),t.socialshareMedia&&(n+="i="+encodeURIComponent(t.socialshareMedia)+"&"),n+="u="+encodeURIComponent(t.socialshareUrl||e.location.href),e.open(n,"Wordpress","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},x=function(e,t){var n="";t.socialshareFollow&&(n="&follow_url="+encodeURIComponent(t.socialshareFollow)),e.open("https://www.xing.com/spi/shares/new?url="+encodeURIComponent(t.socialshareUrl||e.location.href)+n,"Xing","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},C=function(e,t){var n="http://www.evernote.com/clip.action?url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(n+="&title="+encodeURIComponent(t.socialshareText)),e.open(n,"Evernote","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},E=function(e,t,n){0<=t.socialshareText.indexOf("%")&&$log.warn('sending sms text with "%" sign is not supported');var r,i=encodeURIComponent(t.socialshareText.replace("%","")),a=t.socialshareTo||"";t.socialshareUrl&&(i+=encodeURIComponent(t.socialshareUrl)),r="sms:"+a+"?&body="+i,n.attr("href",r),n.attr("target","_blank")},T=function(e,t){var n="https://telegram.me/share/url?url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(n+="&text="+encodeURIComponent(t.socialshareText)),e.open(n,"Telegram","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},D=function(e,t){var n="https://web.skype.com/share?source=button&url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(n+="&text="+encodeURIComponent(t.socialshareText)),e.open(n,"Skype","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},k=function(e,t){var n="http://service.weibo.com/share/share.php?url="+encodeURIComponent(t.socialshareUrl||e.location.href);t.socialshareText&&(n+="&title="+encodeURIComponent(t.socialshareText)),e.open(n,"Weibo","toolbar=0,status=0,resizable=yes,width="+t.socialsharePopupWidth+",height="+t.socialsharePopupHeight+",top="+(e.innerHeight-t.socialsharePopupHeight)/2+",left="+(e.innerWidth-t.socialsharePopupWidth)/2)},t=["$window","$log",function(t,n){this.emailShare=i,this.facebookShare=r,this.twitterShare=a,this.stumbleuponShare=l,this.pinterestShare=f,this.googleShare=o,this.bufferShare=y,this.hackernewsShare=b,this.okShare=m,this.deliciousShare=v,this.pocketShare=w,this.vkShare=g,this.flipboardShare=$,this.xingShare=x,this.diggShare=p,this.linkedinShare=d,this.wordpressShare=S,this.telegramShare=T,this.redditShare=s,this.evernoteShare=C,this.tumblrShare=h,this.skypeShare=D,this.smsShare=E,this.weiboShare=k,this.share=function(e){switch(e.provider){case"email":this.emailShare(t,e.attrs);break;case"sms":this.smsShare(t,n,e.attrs);break;case"facebook":this.facebookShare(t,e.attrs);break;case"twitter":this.twitterShare(t,e.attrs);break;case"pinterest":this.pinterestShare(t,e.attrs);break;case"ok":this.okShare(t,e.attrs);break;case"vk":this.vkShare(t,e.attrs);break;case"delicious":this.deliciousShare(t,e.attrs);break;case"digg":this.diggShare(t,e.attrs);break;case"google":this.googleShare(t,e.attrs);break;case"reddit":this.redditShare(t,e.attrs);break;case"hackernews":this.hackernewsShare(t,e.attrs);break;case"skype":this.skypeShare(t,e.attrs);break;case"evernote":this.evernoteShare(t,e.attrs);break;case"pocket":this.pocketShare(t,e.attrs);break;case"tumblr":this.tumblrShare(t,e.attrs);break;case"telegram":this.telegramShare(t,e.attrs);break;case"xing":this.xingShare(t,e.attrs);break;case"buffer":this.bufferShare(t,e.attrs);break;case"stumbleupon":this.stumbleuponShare(t,e.attrs);break;case"linkedin":this.linkedinShare(t,e.attrs);break;case"wordpress":this.wordpressShare(t,e.attrs);break;case"flipboard":this.flipboardShare(t,e.attrs);break;case"weibo":this.weiboShare(t,e.attrs);break;default:return}}}],n=["$window","socialshareConf","Socialshare","$log",function(o,s,l){return{restrict:"A",link:function(e,t,n){for(var r,i=0,a=function(){return!(n.socialshareProvider in R)||void R[n.socialshareProvider](o,n,t)};i<s.length;i+=1)if(s[i].provider===n.socialshareProvider){r=s[i];break}-1===c.indexOf(r.provider)&&l.warn("Invalid Provider Name : "+n.socialshareProvider),n.socialshareMobileiframe=n.socialshareMobileiframe||r.conf.mobile_iframe,n.socialshareQuote=n.socialshareQuote||r.conf.quote,n.socialshareTitle=n.socialshareTitle||r.conf.title,n.socialshareUrl=n.socialshareUrl||r.conf.url||r.conf.href,n.socialshareText=n.socialshareText||r.conf.text,n.socialshareMedia=n.socialshareMedia||r.conf.media,n.socialshareType=n.socialshareType||r.conf.type,n.socialshareVia=n.socialshareVia||r.conf.via,n.socialshareTo=n.socialshareTo||r.conf.to,n.socialshareFrom=n.socialshareFrom||r.conf.from,n.socialshareRef=n.socialshareRef||r.conf.ref,n.socialshareDislay=n.socialshareDislay||r.conf.display,n.socialshareSource=n.socialshareSource||r.conf.source,n.socialshareCaption=n.socialshareCaption||r.conf.caption,n.socialshareRedirectUri=n.socialshareRedirectUri||r.conf.redirectUri,n.socialshareTrigger=n.socialshareTrigger||r.conf.trigger,n.socialsharePopupHeight=n.socialsharePopupHeight||r.conf.popupHeight,n.socialsharePopupWidth=n.socialsharePopupWidth||r.conf.popupWidth,n.socialshareSubreddit=n.socialshareSubreddit||r.conf.subreddit,n.socialshareDescription=n.socialshareDescription||r.conf.description,n.socialshareFollow=n.socialshareFollow||r.conf.follow,n.socialshareHashtags=n.socialshareHashtags||r.conf.hashtags,n.socialshareBody=n.socialshareBody||r.conf.body,n.socialshareSubject=n.socialshareSubject||r.conf.subject,n.socialshareCc=n.socialshareCc||r.conf.cc,n.socialshareBcc=n.socialshareBcc||r.conf.bcc,n.socialshareTrigger?t.bind(n.socialshareTrigger,a):a()}}}],R={email:i,facebook:r,"facebook-messenger":function(e,t,n){var r="fb-messenger://share?link="+encodeURIComponent(t.socialshareUrl||e.location.href);n.attr("href",r),n.attr("target","_top")},twitter:a,google:o,reddit:s,stumbleupon:l,linkedin:d,pinterest:f,digg:p,tumblr:h,vk:g,ok:m,delicious:v,buffer:y,hackernews:b,flipboard:$,pocket:w,wordpress:S,xing:x,evernote:C,whatsapp:function(e,t,n){var r="whatsapp://send?text="+encodeURIComponent(t.socialshareText)+encodeURIComponent(t.socialshareUrl||e.location.href);n.attr("href",r),n.attr("target","_top")},sms:E,telegram:T,viber:function(e,t,n){var r="viber://forward?text="+encodeURIComponent(t.socialshareText)+encodeURIComponent(t.socialshareUrl||e.location.href);n.attr("href",r),n.attr("target","_top")},skype:D,weibo:k};u.module("720kb.socialshare",[]).provider(e+"Conf",function(){var l=[{provider:"email",conf:{subject:"",body:"",to:"",cc:"",bcc:"",trigger:"click"}},{provider:"facebook",conf:{url:"",title:"",href:"",quote:"",hashtags:"",text:"",media:"",mobile_iframe:"",type:"",via:"",to:"",from:"",ref:"",display:"",source:"",caption:"",redirectUri:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"facebook-messenger",conf:{url:""}},{provider:"twitter",conf:{url:"",text:"",via:"",hashtags:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"linkedin",conf:{url:"",text:"",description:"",source:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"reddit",conf:{url:"",text:"",subreddit:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"vk",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"ok",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"digg",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"delicious",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"stumbleupon",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"pinterest",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"google",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"tumblr",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"buffer",conf:{url:"",text:"",via:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"pocket",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"flipboard",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"hackernews",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"wordpress",conf:{url:"",text:"",media:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"xing",conf:{url:"",text:"",media:"",follow:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"evernote",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"whatsapp",conf:{url:"",text:""}},{provider:"sms",conf:{url:"",text:"",to:"",trigger:"click"}},{provider:"telegram",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"viber",conf:{url:"",text:""}},{provider:"skype",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}},{provider:"weibo",conf:{url:"",text:"",trigger:"click",popupHeight:600,popupWidth:500}}];return{configure:function(e){var t,n,r,i,a=0,o=0,s=u.injector(["ng"]).get("$log");if(e&&0<e.length)for(;a<e.length;a+=1)if(e[a].provider&&-1<c.indexOf(e[a].provider)){for(;o<l.length;o+=1)if((i=l[o])&&i.provider&&e[a].provider===i.provider){for(t=Object.keys(i.conf),n=0;n<t.length;n+=1)(r=t[n])&&e[a].conf[r]&&(i.conf[r]=e[a].conf[r]);o=0;break}}else s.warn("Invalid provider at element "+a+" with name:"+e[a].provider)},$get:function(){return l}}}).service("Socialshare",t).directive(e,n)}(angular);var saveAs=saveAs||function(s){"use strict";if(!(void 0===s||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=s.document,l=function(){return s.URL||s.webkitURL||s},u=e.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in u,d=/constructor/i.test(s.HTMLElement)||s.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),p=function(e){(s.setImmediate||s.setTimeout)(function(){throw e},0)},h=function(e){setTimeout(function(){"string"==typeof e?l().revokeObjectURL(e):e.remove()},4e4)},g=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},r=function(e,n,t){t||(e=g(e));var r,i=this,a="application/octet-stream"===e.type,o=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){p(e)}}}(i,"writestart progress write writeend".split(" "))};if(i.readyState=i.INIT,c)return r=l().createObjectURL(e),void setTimeout(function(){var e,t;u.href=r,u.download=n,e=u,t=new MouseEvent("click"),e.dispatchEvent(t),o(),h(r),i.readyState=i.DONE});!function(){if((f||a&&d)&&s.FileReader){var t=new FileReader;return t.onloadend=function(){var e=f?t.result:t.result.replace(/^data:[^;]*;/,"data:attachment/file;");s.open(e,"_blank")||(s.location.href=e),e=void 0,i.readyState=i.DONE,o()},t.readAsDataURL(e),i.readyState=i.INIT}r||(r=l().createObjectURL(e)),a?s.location.href=r:s.open(r,"_blank")||(s.location.href=r);i.readyState=i.DONE,o(),h(r)}()},t=r.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=g(e)),navigator.msSaveOrOpenBlob(e,t)}:(t.abort=function(){},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,function(e,t,n){return new r(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs}),angular.module("infinite-scroll",[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(w,S,x,C){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(r,i,e){var t,a,o,s,n,l,u,c,d,f,p,h,g,m,v,y,b,$;return $=angular.element(S),a=b=!(p=!(s=o=v=m=null)),f=function(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight},h=function(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+g(e)},g=function(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset},d=function(){var e,t,n;return n=s===$?(e=f(s)+g(s[0].document.documentElement),h(i)+f(i)):(e=f(s),void(t=0)!==h(s)&&(t=h(s)),h(i)-t+f(i)),b&&(n=f((i[0].ownerDocument||i[0].document).documentElement)),n-e<=f(s)*m+1?(o=!0,v?r.$$phase||w.$$phase?r.infiniteScroll():r.$apply(r.infiniteScroll):void 0):(a&&x.cancel(a),o=!1)},(y=null)!=C&&(d=function(n,r){var i,a,o;return o=null,a=0,i=function(){return a=(new Date).getTime(),x.cancel(o),o=null,n.call()},function(){var e,t;return e=(new Date).getTime(),(t=r-(e-a))<=0?(x.cancel(o),o=null,a=e,n.call()):o?void 0:o=x(i,t,1)}}(d,C)),r.$on("$destroy",function(){if(s.unbind("scroll",d),null!=y&&(y(),y=null),a)return x.cancel(a)}),u=function(e){return m=parseFloat(e)||0},r.$watch("infiniteScrollDistance",u),u(r.infiniteScrollDistance),l=function(e){if((v=!e)&&o)return o=!1,d()},r.$watch("infiniteScrollDisabled",l),l(r.infiniteScrollDisabled),c=function(e){return b=e},r.$watch("infiniteScrollUseDocumentBottom",c),c(r.infiniteScrollUseDocumentBottom),(t=function(e){if(null!=s&&s.unbind("scroll",d),null!=(s=e))return s.bind("scroll",d)})($),r.infiniteScrollListenForEvent&&(y=w.$on(r.infiniteScrollListenForEvent,d)),n=function(e){if(null!=e&&0!==e.length){if(e.nodeType&&1===e.nodeType?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=angular.element(document.querySelector(e))),null!=e)return t(e);throw new Error("invalid infinite-scroll-container attribute.")}},r.$watch("infiniteScrollContainer",n),n(r.infiniteScrollContainer||[]),null!=e.infiniteScrollParent&&t(angular.element(i.parent())),null!=e.infiniteScrollImmediateCheck&&(p=r.$eval(e.infiniteScrollImmediateCheck)),a=x(function(){return p&&d(),x.cancel(a)})}}}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="infinite-scroll"),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["angular"],t):e.hasOwnProperty("angular")?t(e.angular):"object"==typeof exports&&(module.exports=t(require("angular")))}(this,function(g){"use strict";function m(e,t){var n;try{n=e[t]}catch(e){n=!1}if(n){var r="__"+Math.round(1e7*Math.random());try{e[t].setItem(r,r),e[t].removeItem(r,r)}catch(e){n=!1}}return n}return(g=g&&g.module?g:window.angular).module("ngStorage",[]).provider("$localStorage",e("localStorage")).provider("$sessionStorage",e("sessionStorage"));function e(h){var n=m(window,h);return function(){var d="ngStorage-";this.setKeyPrefix=function(e){if("string"!=typeof e)throw new TypeError("[ngStorage] - "+h+"Provider.setKeyPrefix() expects a String.");d=e};var f=g.toJson,p=g.fromJson;this.setSerializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+h+"Provider.setSerializer expects a function.");f=e},this.setDeserializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+h+"Provider.setDeserializer expects a function.");p=e},this.supported=function(){return!!n},this.get=function(e){return n&&p(n.getItem(d+e))},this.set=function(e,t){return n&&n.setItem(d+e,f(t))},this.remove=function(e){n&&n.removeItem(d+e)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(n,e,t,r,i){var a,o,s=d.length,l=m(e,h),u=l||(t.warn("This browser does not support Web Storage!"),{setItem:g.noop,getItem:g.noop,removeItem:g.noop}),c={$default:function(e){for(var t in e)g.isDefined(c[t])||(c[t]=g.copy(e[t]));return c.$sync(),c},$reset:function(e){for(var t in c)"$"===t[0]||delete c[t]&&u.removeItem(d+t);return c.$default(e)},$sync:function(){for(var e,t=0,n=u.length;t<n;t++)(e=u.key(t))&&d===e.slice(0,s)&&(c[e.slice(s)]=p(u.getItem(e)))},$apply:function(){var n;if(o=null,!g.equals(c,a)){for(var e in n=g.copy(a),g.forEach(c,function(e,t){g.isDefined(e)&&"$"!==t[0]&&(u.setItem(d+t,f(e)),delete n[t])}),n)u.removeItem(d+e);a=g.copy(c)}},$supported:function(){return!!l}};return c.$sync(),a=g.copy(c),n.$watch(function(){o||(o=r(c.$apply,100,!1))}),e.addEventListener&&e.addEventListener("storage",function(e){if(e.key){var t=i[0];t.hasFocus&&t.hasFocus()||d!==e.key.slice(0,s)||(e.newValue?c[e.key.slice(s)]=p(e.newValue):delete c[e.key.slice(s)],a=g.copy(c),n.$apply())}}),e.addEventListener&&e.addEventListener("beforeunload",function(){c.$apply()}),c}]}}}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(r){return function(e,t){if("__setXHR_"===e){var n=t(this);n instanceof Function&&n(this)}else r.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.2.13",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(s,e,l){var u=this;u.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var c=this.isResumeSupported();function t(n){n.method=n.method||"POST",n.headers=n.headers||{};var r=n._deferred=n._deferred||e.defer(),i=r.promise;function a(e){r.notify&&r.notify(e),i.progressFunc&&l(function(){i.progressFunc(e)})}function t(e){return null!=n._start&&c?{loaded:e.loaded+n._start,total:n._file&&n._file.size||e.total,type:e.type,config:n,lengthComputable:!0,target:e.target}:e}function o(){s(n).then(function(e){if(c&&n._chunkSize&&!n._finished&&n._file){var t=n._file&&n._file.size||0;a({loaded:Math.min(n._end,t),total:t,config:n,type:"progress"}),u.upload(n,!0)}else n._finished&&delete n._finished,r.resolve(e)},function(e){r.reject(e)},function(e){r.notify(e)})}return n.disableProgress||(n.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=n,a(t(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=n,a(t(e)))},!1))}}),c?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,o()):n.resumeSizeUrl?s.get(n.resumeSizeUrl).then(function(e){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(e.data):n._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),o()},function(e){throw e}):n.resumeSize?n.resumeSize().then(function(e){n._start=e,n._chunkSize&&(n._end=n._start+n._chunkSize),o()},function(e){throw e}):(n._chunkSize&&(n._start=0,n._end=n._start+n._chunkSize),o()):o(),i.success=function(t){return i.then(function(e){t(e.data,e.status,e.headers,n)}),i},i.error=function(t){return i.then(null,function(e){t(e.data,e.status,e.headers,n)}),i},i.progress=function(t){return i.progressFunc=t,i.then(null,null,function(e){t(e)}),i},i.abort=i.pause=function(){return n.__XHR&&l(function(){n.__XHR.abort()}),i},i.xhr=function(e){var t;return n.xhrFn=(t=n.xhrFn,function(){t&&t.apply(i,arguments),e.apply(i,arguments)}),i},u.promisesCount++,i.finally&&i.finally instanceof Function&&i.finally(function(){u.promisesCount--}),i}function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}this.isUploadInProgress=function(){return 0<u.promisesCount},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(s,e){function l(e,t,n){if(void 0!==t)if(angular.isDate(t)&&(t=t.toISOString()),angular.isString(t))e.append(n,t);else if(u.isFile(t)){var r=function(e,t){if(e._ngfBlob)return e;if(s._file=s._file||e,null!=s._start&&c){s._end&&s._end>=e.size&&(s._finished=!0,s._end=e.size);var n=e.slice(s._start,s._end||e.size);return n.name=e.name,n.ngfName=e.ngfName,s._chunkSize&&(t.append("_chunkSize",s._chunkSize),t.append("_currentChunkSize",s._end-s._start),t.append("_chunkNumber",Math.floor(s._start/s._chunkSize)),t.append("_totalSize",s._file.size)),n}return e}(t,e),i=n.split(",");i[1]&&(r.ngfName=i[1].replace(/^\s+|\s+$/g,""),n=i[0]),s._fileKey=s._fileKey||n,e.append(n,r,r.ngfName||r.name)}else if(angular.isObject(t)){if(t.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+n;t.$$ngfCircularDetection=!0;try{for(var a in t)if(t.hasOwnProperty(a)&&"$$ngfCircularDetection"!==a){var o=null==s.objectKey?"[i]":s.objectKey;t.length&&-1<parseInt(a)&&(o=null==s.arrayKey?o:s.arrayKey),l(e,t[a],n+o.replace(/[ik]/g,a))}}finally{delete t.$$ngfCircularDetection}}else e.append(n,t)}return e||(s=n(s)),s._isDigested||(s._isDigested=!0,s._chunkSize=u.translateScalars(s.resumeChunkSize),s._chunkSize=s._chunkSize?parseInt(s._chunkSize.toString()):null,s.headers=s.headers||{},s.headers["Content-Type"]=void 0,s.transformRequest=s.transformRequest?angular.isArray(s.transformRequest)?s.transformRequest:[s.transformRequest]:[],s.transformRequest.push(function(e){var t,n=new window.FormData;for(t in e=e||s.fields||{},s.file&&(e.file=s.file),e)if(e.hasOwnProperty(t)){var r=e[t];s.formDataAppender?s.formDataAppender(n,t,r):l(n,r,t)}return n})),t(s)},this.http=function(e){return(e=n(e)).transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof window.Blob?e:s.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=u.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,t(e)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(a){var o=e.defer();return s({url:a,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),n=e.headers("content-type")||"image/WebP",r=new window.Blob([t],{type:n}),i=a.match(/.*\/(.+?)(\?.*)?$/);1<i.length&&(r.name=i[1]),o.resolve(r)},function(e){o.reject(e)}),o.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(S,x,e,C,t){var E=t;function T(r,i,a,o,s){var l=[E.emptyPromise()];function e(n,t){if(0===n.type.indexOf("image")){if(r.pattern&&!E.validatePattern(n,r.pattern))return;r.resizeIf=function(e,t){return E.attrGetter("ngfResizeIf",a,o,{$width:e,$height:t,$file:n})};var e=E.resize(n,r);l.push(e),e.then(function(e){i.splice(t,1,e)},function(e){n.$error="resize",(n.$errorMessages=n.$errorMessages||{}).resize=!0,n.$errorParam=(e?(e.message?e.message:e)+": ":"")+(n&&n.name),s.$ngfValidations.push({name:"resize",valid:!1}),E.applyModelValidation(s,i)})}}for(var t=0;t<i.length;t++)e(i[t],t);return C.all(l)}return E.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=E.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},E.attrGetter=function(t,e,n,r){var i=this.getAttrWithDefaults(e,t);if(!n)return i;try{return r?S(i)(n,r):S(i)(n)}catch(e){if(t.search(/min|max|pattern/i))return i;throw e}},E.shouldUpdateOn=function(e,t,n){var r=E.attrGetter("ngfModelOptions",t,n);return!r||!r.updateOn||-1<r.updateOn.split(" ").indexOf(e)},E.emptyPromise=function(){var e=C.defer(),t=arguments;return x(function(){e.resolve.apply(e,t)}),e.promise},E.rejectPromise=function(){var e=C.defer(),t=arguments;return x(function(){e.reject.apply(e,t)}),e.promise},E.happyPromise=function(e,t){var n=C.defer();return e.then(function(e){n.resolve(e)},function(e){x(function(){throw e}),n.resolve(t)}),n.promise},E.updateModel=function(l,u,c,d,o,f,t){function s(e,t,n,r,i){u.$$ngfPrevValidFiles=e,u.$$ngfPrevInvalidFiles=t;var a=e&&e.length?e[0]:null,o=t&&t.length?t[0]:null;l&&(E.applyModelValidation(l,e),l.$setViewValue(i?a:e)),d&&S(d)(c,{$files:e,$file:a,$newFiles:n,$duplicateFiles:r,$invalidFiles:t,$invalidFile:o,$event:f});var s=E.attrGetter("ngfModelInvalid",u);s&&x(function(){S(s).assign(c,i?o:t)}),x(function(){})}var p,a,h,e,g=[],m=[],v=[];function y(){function r(){x(function(){s(n?a.concat(v):v,n?h.concat(m):m,o,g,b)},w&&w.debounce?w.debounce.change||w.debounce:0)}var i=$?p:v;(function(t,n,r,i){var e=E.attrGetter("ngfResize",n,r);if(!e||!E.isResizeSupported()||!t.length)return E.emptyPromise();if(e instanceof Function){var a=C.defer();return e(t).then(function(e){T(e,t,n,r,i).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})}return T(e,t,n,r,i)})(i,u,c,l).then(function(){$?E.validate(p,n?a.length:0,l,u,c).then(function(e){v=e.validsFiles,m=e.invalidsFiles,r()}):r()},function(){for(var e=0;e<i.length;e++){var t=i[e];if("resize"===t.$error){var n=v.indexOf(t);-1<n&&(v.splice(n,1),m.push(t)),r()}}})}a=u.$$ngfPrevValidFiles||[],h=u.$$ngfPrevInvalidFiles||[],l&&l.$modelValue&&(e=l.$modelValue,a=angular.isArray(e)?e:[e]);var n=E.attrGetter("ngfKeep",u,c);p=(o||[]).slice(0),"distinct"!==n&&!0!==E.attrGetter("ngfKeepDistinct",u,c)||function(){function n(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}function e(e){var t;for(t=0;t<a.length;t++)if(n(e,a[t]))return!0;for(t=0;t<h.length;t++)if(n(e,h[t]))return!0;return!1}if(o){p=[],g=[];for(var t=0;t<o.length;t++)e(o[t])?g.push(o[t]):p.push(o[t])}}();var b=!n&&!E.attrGetter("ngfMultiple",u,c)&&!E.attrGetter("multiple",u);if(!n||p.length){E.attrGetter("ngfBeforeModelChange",u,c,{$files:o,$file:o&&o.length?o[0]:null,$newFiles:p,$duplicateFiles:g,$event:f});var $=E.attrGetter("ngfValidateAfterResize",u,c),w=E.attrGetter("ngfModelOptions",u,c);E.validate(p,n?a.length:0,l,u,c).then(function(e){var n,r,i,a;t?s(p,[],o,g,b):(w&&w.allowInvalid||$?v=p:(v=e.validFiles,m=e.invalidFiles),E.attrGetter("ngfFixOrientation",u,c)&&E.isExifSupported()?(n=v,r=u,i=c,a=[E.emptyPromise()],angular.forEach(n,function(e,t){0===e.type.indexOf("image/jpeg")&&E.attrGetter("ngfFixOrientation",r,i,{$file:e})&&a.push(E.happyPromise(E.applyExifRotation(e),e).then(function(e){n.splice(t,1,e)}))}),C.all(a)).then(function(){y()}):y())})}},E}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,i,t,v){var y=[];function a(i,a,o,s,e,t,n,l){var r=function(e,t){return l.attrGetter(e,o,t)};function u(){return"input"===a[0].tagName.toLowerCase()&&o.type&&"file"===o.type.toLowerCase()}function c(){return r("ngfChange")||r("ngfSelect")}function d(e){if(l.shouldUpdateOn("change",o,i)){var t=e.__files_||e.target&&e.target.files,n=[];if(!t)return;for(var r=0;r<t.length;r++)n.push(t[r]);l.updateModel(s,o,i,c(),n.length?n:null,e)}}l.registerModelChangeValidator(s,o,i);var f=[];r("ngfMultiple")&&f.push(i.$watch(r("ngfMultiple"),function(){g.attr("multiple",r("ngfMultiple",i))})),r("ngfCapture")&&f.push(i.$watch(r("ngfCapture"),function(){g.attr("capture",r("ngfCapture",i))})),r("ngfAccept")&&f.push(i.$watch(r("ngfAccept"),function(){g.attr("accept",r("ngfAccept",i))})),f.push(o.$observe("accept",function(){g.attr("accept",r("accept"))}));var p=0,h=0;var g=a;function m(e){l.shouldUpdateOn("click",o,i)&&g.val()&&(g.val(null),l.updateModel(s,o,i,c(),null,e,!0))}u()||(g=function(){if(u())return a;var e=angular.element('<input type="file">'),t=angular.element("<label>upload</label>");return t.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),function(t,n){function e(e){t.attr("id","ngf-"+e),n.attr("id","ngf-label-"+e)}for(var r=0;r<a[0].attributes.length;r++){var i=a[0].attributes[r];"type"!==i.name&&"class"!==i.name&&"style"!==i.name&&("id"===i.name?(e(i.value),f.push(o.$observe("id",e))):t.attr(i.name,i.value||"required"!==i.name&&"multiple"!==i.name?i.value:i.name))}}(e,t),y.push({el:a,ref:t}),document.body.appendChild(t.append(e)[0]),e}()),g.bind("change",d),u()?a.bind("click",m):a.bind("click touchstart touchend",function(e){if(a.attr("disabled"))return!1;if(!r("ngfSelectDisabled",i)){var t=function(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if(t){if("touchstart"===e.type)return h=t[0].clientX,p=t[0].clientY,!0;if("touchend"===e.type){var n=t[0].clientX,r=t[0].clientY;if(20<Math.abs(n-h)||20<Math.abs(r-p))return e.stopPropagation(),e.preventDefault(),!1}return!0}}(e);if(null!=t)return t;m(e);try{u()||document.body.contains(g[0])||(y.push({el:a,ref:g.parent()}),document.body.appendChild(g.parent()[0]),g.bind("change",d))}catch(e){}return function(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&2<t.length){var n=v.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}(navigator.userAgent)?setTimeout(function(){g[0].click()},0):g[0].click(),!1}}),-1!==navigator.appVersion.indexOf("MSIE 10")&&g.bind("click",function e(t){if(g&&!g.attr("__ngf_ie10_Fix_")){if(!g[0].parentNode)return void(g=null);t.preventDefault(),t.stopPropagation(),g.unbind("click");var n=g.clone();return g.replaceWith(n),(g=n).attr("__ngf_ie10_Fix_","true"),g.bind("change",d),g.bind("click",e),g[0].click(),!1}g.removeAttr("__ngf_ie10_Fix_")}),s&&s.$formatters.push(function(e){return null!=e&&0!==e.length||g.val()&&g.val(null),e}),i.$on("$destroy",function(){u()||g.parent().remove(),angular.forEach(f,function(e){e()})}),t(function(){for(var e=0;e<y.length;e++){var t=y[e];document.body.contains(t.el[0])||(y.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(a,g,d)}return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){a(e,t,n,r,0,i,0,v)}}}]),function(){function o(i,e,a,o,s,l,u,c){function d(t){var n=i.attrGetter("ngfNoObjectUrl",s,a);i.dataUrl(t,n).finally(function(){e(function(){var e=(n?t.$ngfDataUrl:t.$ngfBlobUrl)||t.$ngfDataUrl;c?o.css("background-image","url('"+(e||"")+"')"):o.attr("src",e),e?o.removeClass("ng-hide"):o.addClass("ng-hide")})})}e(function(){var e=a.$watch(s[l],function(n){var e,t=u;if("ngfThumbnail"===l&&(t||(t={width:o[0].naturalWidth||o[0].clientWidth,height:o[0].naturalHeight||o[0].clientHeight}),0===t.width&&window.getComputedStyle)){var r=getComputedStyle(o[0]);r.width&&-1<r.width.indexOf("px")&&r.height&&-1<r.height.indexOf("px")&&(t={width:parseInt(r.width.slice(0,-2)),height:parseInt(r.height.slice(0,-2))})}if(angular.isString(n))return o.removeClass("ng-hide"),c?o.css("background-image","url('"+n+"')"):o.attr("src",n);!n||!n.type||0!==n.type.search("img"===(e=o[0]).tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./)||c&&0!==n.type.indexOf("image")?o.addClass("ng-hide"):t&&i.isResizeSupported()?(t.resizeIf=function(e,t){return i.attrGetter("ngfResizeIf",s,a,{$width:e,$height:t,$file:n})},i.resize(n,t).then(function(e){d(e)},function(e){throw e})):d(n)});a.$on("$destroy",function(){e()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,n,s){var l=e;return l.base64DataUrl=function(n){if(angular.isArray(n)){var r=s.defer(),i=0;return angular.forEach(n,function(e){l.dataUrl(e,!0).finally(function(){if(++i===n.length){var t=[];angular.forEach(n,function(e){t.push(e.$ngfDataUrl)}),r.resolve(t,n)}})}),r.promise}return l.dataUrl(n,!0)},l.dataUrl=function(a,t){if(!a)return l.emptyPromise(a,a);if(t&&null!=a.$ngfDataUrl||!t&&null!=a.$ngfBlobUrl)return l.emptyPromise(t?a.$ngfDataUrl:a.$ngfBlobUrl,a);var e=t?a.$$ngfDataUrlPromise:a.$$ngfBlobUrlPromise;if(e)return e;var o=s.defer();return n(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var r=window.URL||window.webkitURL;if(r&&r.createObjectURL&&!t){var i;try{i=r.createObjectURL(a)}catch(e){return void n(function(){a.$ngfBlobUrl="",o.reject()})}n(function(){if(a.$ngfBlobUrl=i){o.resolve(i,a),l.blobUrls=l.blobUrls||[],l.blobUrlsTotalSize=l.blobUrlsTotalSize||0,l.blobUrls.push({url:i,size:a.size}),l.blobUrlsTotalSize+=a.size||0;for(var e=l.defaults.blobUrlsMaxMemory||268435456,t=l.defaults.blobUrlsMaxQueueSize||200;(l.blobUrlsTotalSize>e||l.blobUrls.length>t)&&1<l.blobUrls.length;){var n=l.blobUrls.splice(0,1)[0];r.revokeObjectURL(n.url),l.blobUrlsTotalSize-=n.size}}})}else{var e=new FileReader;e.onload=function(e){n(function(){a.$ngfDataUrl=e.target.result,o.resolve(e.target.result,a),n(function(){delete a.$ngfDataUrl},1e3)})},e.onerror=function(){n(function(){a.$ngfDataUrl="",o.reject()})},e.readAsDataURL(a)}}else n(function(){a[t?"$ngfDataUrl":"$ngfBlobUrl"]="",o.reject()})}),(e=t?a.$$ngfDataUrlPromise=o.promise:a.$$ngfBlobUrlPromise=o.promise).finally(function(){delete a[t?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),e},l}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(r,i){return{restrict:"AE",link:function(e,t,n){o(r,i,e,t,n,"ngfSrc",r.attrGetter("ngfResize",n,e),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(r,i){return{restrict:"AE",link:function(e,t,n){o(r,i,e,t,n,"ngfBackground",r.attrGetter("ngfResize",n,e),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(i,a){return{restrict:"AE",link:function(e,t,n){var r=i.attrGetter("ngfSize",n,e);o(i,a,e,t,n,"ngfThumbnail",r,i.attrGetter("ngfAsBackground",n,e))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(i,a){return function(e,t,n){if(angular.isString(e))return a.trustAsResourceUrl(e);var r=e&&((t?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl);return e&&!r?(!e.$ngfDataUrlFilterInProgress&&angular.isObject(e)&&(e.$ngfDataUrlFilterInProgress=!0,i.dataUrl(e,t)),""):(e&&delete e.$ngfDataUrlFilterInProgress,(e&&r?n?a.trustAsResourceUrl(r):r:e)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,v,s){var y=e;return y.validatePattern=function(e,t){if(!t)return!0;var n=function e(t){var n="",r=[];if(2<t.length&&"/"===t[0]&&"/"===t[t.length-1])n=t.substring(1,t.length-1);else{var i=t.split(",");if(1<i.length)for(var a=0;a<i.length;a++){var o=e(i[a]);o.regexp?(n+="("+o.regexp+")",a<i.length-1&&(n+="|")):r=r.concat(o.excludes)}else 0===t.indexOf("!")?r.push("^((?!"+e(t.substring(1)).regexp+").)*$"):(0===t.indexOf(".")&&(t="*"+t),n=(n="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:n,excludes:r}}(t),r=!0;if(n.regexp&&n.regexp.length){var i=new RegExp(n.regexp,"i");r=null!=e.type&&i.test(e.type)||null!=e.name&&i.test(e.name)}for(var a=n.excludes.length;a--;){var o=new RegExp(n.excludes[a],"i");r=r&&(null==e.type||o.test(e.type))&&(null==e.name||o.test(e.name))}return r},y.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=-1<n?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},y.registerModelChangeValidator=function(n,r,i){n&&n.$formatters.push(function(e){if(n.$dirty){var t=e;e&&!angular.isArray(e)&&(t=[e]),y.validate(t,0,n,r,i).then(function(){y.applyModelValidation(n,t)})}return e})},y.applyModelValidation=function(t,e){var n;n=t,null==e||n.$dirty||(n.$setDirty?n.$setDirty():n.$dirty=!0),angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)})},y.getValidationAttr=function(e,t,n,r,i){var a="ngf"+n[0].toUpperCase()+n.substr(1),o=y.attrGetter(a,e,t,{$file:i});if(null==o&&(o=y.attrGetter("ngfValidate",e,t,{$file:i}))){var s=(r||n).split(".");o=o[s[0]],1<s.length&&(o=o&&o[s[1]])}return o},y.validate=function(u,r,c,d,f){(c=c||{}).$ngfValidations=c.$ngfValidations||[],angular.forEach(c.$ngfValidations,function(e){e.valid=!0});var p=function(e,t){return y.attrGetter(e,d,f,t)},h=(y.attrGetter("ngfIgnoreInvalid",d,f)||"").split(" "),g=y.attrGetter("ngfRunAllValidations",d,f);if(null==u||0===u.length)return y.emptyPromise({validFiles:u,invalidFiles:[]});u=void 0===u.length?[u]:u.slice(0);var m=[];function t(e,t,n){if(u){for(var r=u.length,i=null;r--;){var a=u[r];if(a){var o=y.getValidationAttr(d,f,e,t,a);null!=o&&(n(a,o,r)||(-1===h.indexOf(e)?(a.$error=e,(a.$errorMessages=a.$errorMessages||{})[e]=!0,a.$errorParam=o,-1===m.indexOf(a)&&m.push(a),g||u.splice(r,1),i=!1):u.splice(r,1)))}}null!==i&&c.$ngfValidations.push({name:e,valid:i})}}t("pattern",null,y.validatePattern),t("minSize","size.min",function(e,t){return e.size+.1>=y.translateScalars(t)}),t("maxSize","size.max",function(e,t){return e.size-.1<=y.translateScalars(t)});var n=0;if(t("maxTotalSize",null,function(e,t){return!((n+=e.size)>y.translateScalars(t))||(u.splice(0,u.length),!1)}),t("validateFn",null,function(e,t){return!0===t||null===t||""===t}),!u.length)return y.emptyPromise({validFiles:[],invalidFiles:m});function e(o,e,r,n,s){function i(r,i,a){function t(e){if(e())if(-1===h.indexOf(o)){if(i.$error=o,(i.$errorMessages=i.$errorMessages||{})[o]=!0,i.$errorParam=a,-1===m.indexOf(i)&&m.push(i),!g){var t=u.indexOf(i);-1<t&&u.splice(t,1)}r.resolve(!1)}else{var n=u.indexOf(i);-1<n&&u.splice(n,1),r.resolve(!0)}else r.resolve(!0)}null!=a?n(i,a).then(function(e){t(function(){return!s(e,a)})},function(){t(function(){return p("ngfValidateForce",{$file:i})})}):r.resolve(!0)}var a=[y.emptyPromise(!0)];u&&(u=void 0===u.length?[u]:u,angular.forEach(u,function(t){var n=v.defer();a.push(n.promise),!r||null!=t.type&&0===t.type.search(r)?"dimensions"===o&&null!=y.attrGetter("ngfDimensions",d)?y.imageDimensions(t).then(function(e){i(n,t,p("ngfDimensions",{$file:t,$width:e.width,$height:e.height}))},function(){n.resolve(!1)}):"duration"===o&&null!=y.attrGetter("ngfDuration",d)?y.mediaDuration(t).then(function(e){i(n,t,p("ngfDuration",{$file:t,$duration:e}))},function(){n.resolve(!1)}):i(n,t,y.getValidationAttr(d,f,o,e,t)):n.resolve(!0)}));var l=v.defer();return v.all(a).then(function(e){for(var t=!0,n=0;n<e.length;n++)if(!e[n]){t=!1;break}c.$ngfValidations.push({name:o,valid:t}),l.resolve(t)}),l.promise}var i=v.defer(),a=[];return a.push(e("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t})),a.push(e("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t})),a.push(e("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t})),a.push(e("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t})),a.push(e("dimensions",null,/image/,function(e,t){return y.emptyPromise(t)},function(e){return e})),a.push(e("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),r=!1,i=0;i<n.length;i++)Math.abs(e.width/e.height-y.ratioToFloat(n[i]))<.01&&(r=!0);return r})),a.push(e("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-y.ratioToFloat(t)<1e-4})),a.push(e("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return-1e-4<e.width/e.height-y.ratioToFloat(t)})),a.push(e("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=y.translateScalars(t)})),a.push(e("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=y.translateScalars(t)})),a.push(e("duration",null,/audio|video/,function(e,t){return y.emptyPromise(t)},function(e){return e})),a.push(e("validateAsyncFn",null,null,function(e,t){return t},function(e){return!0===e||null===e||""===e})),v.all(a).then(function(){if(g)for(var e=0;e<u.length;e++){u[e].$error&&u.splice(e--,1)}g=!1,t("maxFiles",null,function(e,t,n){return r+n<t}),i.resolve({validFiles:u,invalidFiles:m})}),i.promise},y.imageDimensions=function(a){if(a.$ngfWidth&&a.$ngfHeight){var e=v.defer();return s(function(){e.resolve({width:a.$ngfWidth,height:a.$ngfHeight})}),e.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var o=v.defer();return s(function(){0===a.type.indexOf("image")?y.dataUrl(a).then(function(e){var n=angular.element("<img>").attr("src",e).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function t(){var e=n[0].naturalWidth||n[0].clientWidth,t=n[0].naturalHeight||n[0].clientHeight;n.remove(),a.$ngfWidth=e,a.$ngfHeight=t,o.resolve({width:e,height:t})}function r(){n.remove(),o.reject("load error")}n.on("load",t),n.on("error",r);var i=0;!function e(){s(function(){n[0].parentNode&&(n[0].clientWidth?t():10<i++?r():e())},1e3)}(),angular.element(document.getElementsByTagName("body")[0]).append(n)},function(){o.reject("load error")}):o.reject("not image")}),a.$ngfDimensionPromise=o.promise,a.$ngfDimensionPromise.finally(function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},y.mediaDuration=function(a){if(a.$ngfDuration){var e=v.defer();return s(function(){e.resolve(a.$ngfDuration)}),e.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var o=v.defer();return s(function(){0===a.type.indexOf("audio")||0===a.type.indexOf("video")?y.dataUrl(a).then(function(e){var t=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",e).css("visibility","none").css("position","fixed");function n(){var e=t[0].duration;a.$ngfDuration=e,t.remove(),o.resolve(e)}function r(){t.remove(),o.reject("load error")}t.on("loadedmetadata",n),t.on("error",r);var i=0;!function e(){s(function(){t[0].parentNode&&(t[0].duration?n():10<i?r():e())},1e3)}(),angular.element(document.body).append(t)},function(){o.reject("load error")}):o.reject("not media")}),a.$ngfDurationPromise=o.promise,a.$ngfDurationPromise.finally(function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},y}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){var b=e,o=function(e,u,c,d,f,p,h,g){var m=t.defer(),v=document.createElement("canvas"),y=document.createElement("img");return y.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(y),y.onload=function(){var e,t,n,r,i,a=y.width,o=y.height;if(y.parentNode.removeChild(y),null==g||!1!==g(a,o))try{if(p){var s=b.ratioToFloat(p);a/o<s?c=(u=a)/s:u=(c=o)*s}u||(u=a),c||(c=o);var l=(e=a,t=o,n=u,r=c,i=h?Math.max(n/e,r/t):Math.min(n/e,r/t),{width:e*i,height:t*i,marginX:e*i-n,marginY:t*i-r});v.width=Math.min(l.width,u),v.height=Math.min(l.height,c),v.getContext("2d").drawImage(y,Math.min(0,-l.marginX/2),Math.min(0,-l.marginY/2),l.width,l.height),m.resolve(v.toDataURL(f||"image/WebP",d||.934))}catch(e){m.reject(e)}else m.reject("resizeIf")},y.onerror=function(){y.parentNode.removeChild(y),m.reject()},y.src=e,m.promise};return b.dataUrltoBlob=function(e,t,n){for(var r=e.split(","),i=r[0].match(/:(.*?);/)[1],a=atob(r[1]),o=a.length,s=new Uint8Array(o);o--;)s[o]=a.charCodeAt(o);var l=new window.Blob([s],{type:i});return l.name=t,l.$ngfOrigSize=n,l},b.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},b.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),b.resize=function(r,i){if(0!==r.type.indexOf("image"))return b.emptyPromise(r);var a=t.defer();return b.dataUrl(r,!0).then(function(n){o(n,i.width,i.height,i.quality,i.type||r.type,i.ratio,i.centerCrop,i.resizeIf).then(function(e){if("image/jpeg"===r.type&&!1!==i.restoreExif)try{e=b.restoreExif(n,e)}catch(e){setTimeout(function(){throw e},1)}try{var t=b.dataUrltoBlob(e,r.name,r.size);a.resolve(t)}catch(e){a.reject(e)}},function(e){"resizeIf"===e&&a.resolve(r),a.reject(e)})},function(e){a.reject(e)}),a.promise},b}]),function(){function p(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(i,a,o,s,e,l){return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){!function(v,n,y,r,e,i,b,$,t,w){var a=p(),S=function(e,t,n){return $.attrGetter(e,y,t,n)};S("dropAvailable")&&i(function(){v[S("dropAvailable")]?v[S("dropAvailable")].value=a:v[S("dropAvailable")]=a});if(!a)return!0===S("ngfHideOnDropNotAvailable",v)&&n.css("display","none");function o(){return n.attr("disabled")||S("ngfDropDisabled",v)}null==S("ngfSelect")&&$.registerModelChangeValidator(r,y,v);var s,l=null,u=e(S("ngfStopPropagation")),c=1;n[0].addEventListener("dragover",function(t){if(!o()&&$.shouldUpdateOn("drop",y,v)){if(t.preventDefault(),u(v)&&t.stopPropagation(),-1<navigator.userAgent.indexOf("Chrome")){var e=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}i.cancel(l),s||(s="C",function(e,t,n,r){var i=S("ngfDragOverClass",e,{$event:n}),a="dragover";if(angular.isString(i))a=i;else if(i&&(i.delay&&(c=i.delay),i.accept||i.reject)){var o=n.dataTransfer.items;if(null!=o&&o.length)for(var s=i.pattern||S("ngfPattern",e,{$event:n}),l=o.length;l--;){if(!$.validatePattern(o[l],s)){a=i.reject;break}a=i.accept}else a=i.accept}r(a)}(v,0,t,function(e){s=e,n.addClass(s),S("ngfDrag",v,{$isDragging:!0,$class:s,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(e){!o()&&$.shouldUpdateOn("drop",y,v)&&(e.preventDefault(),u(v)&&e.stopPropagation())},!1),n[0].addEventListener("dragleave",function(e){!o()&&$.shouldUpdateOn("drop",y,v)&&(e.preventDefault(),u(v)&&e.stopPropagation(),l=i(function(){s&&n.removeClass(s),s=null,S("ngfDrag",v,{$isDragging:!1,$event:e})},c||100))},!1),n[0].addEventListener("drop",function(e){!o()&&$.shouldUpdateOn("drop",y,v)&&(e.preventDefault(),u(v)&&e.stopPropagation(),s&&n.removeClass(s),s=null,d(e.dataTransfer,e,"dropUrl"))},!1),n[0].addEventListener("paste",function(e){-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&S("ngfEnableFirefoxPaste",v)&&e.preventDefault(),!o()&&$.shouldUpdateOn("paste",y,v)&&d(e.clipboardData||e.originalEvent.clipboardData,e,"pasteUrl")},!1),-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&S("ngfEnableFirefoxPaste",v)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}));function d(e,t,n){if(e){var r;try{r=e&&e.getData&&e.getData("text/html")}catch(e){}(function(e,t,n,r){var l=$.getValidationAttr(y,v,"maxFiles");null==l&&(l=Number.MAX_VALUE);var u=$.getValidationAttr(y,v,"maxTotalSize");null==u&&(u=Number.MAX_VALUE);var c=S("ngfIncludeDir",v),d=[],f=0;function p(t,n){var r=w.defer();if(null!=t)if(t.isDirectory){var i=[$.emptyPromise()];if(c){var e={type:"directory"};e.name=e.path=(n||"")+t.name,d.push(e)}var a=t.createReader(),o=[],s=function(){a.readEntries(function(e){try{e.length?(o=o.concat(Array.prototype.slice.call(e||[],0)),s()):(angular.forEach(o.slice(0),function(e){d.length<=l&&f<=u&&i.push(p(e,(n||"")+t.name+"/"))}),w.all(i).then(function(){r.resolve()},function(e){r.reject(e)}))}catch(e){r.reject(e)}},function(e){r.reject(e)})};s()}else t.file(function(e){try{e.path=(n||"")+e.name,c&&(e=$.rename(e,e.path)),d.push(e),f+=e.size,r.resolve()}catch(e){r.reject(e)}},function(e){r.reject(e)});return r.promise}var i=[$.emptyPromise()];if(e&&0<e.length&&"file:"!==b.location.protocol)for(var a=0;a<e.length;a++){if(e[a].webkitGetAsEntry&&e[a].webkitGetAsEntry()&&e[a].webkitGetAsEntry().isDirectory){var o=e[a].webkitGetAsEntry();if(o.isDirectory&&!n)continue;null!=o&&i.push(p(o))}else{var s=e[a].getAsFile();null!=s&&(d.push(s),f+=s.size)}if(d.length>l||u<f||!r&&0<d.length)break}else if(null!=t)for(var h=0;h<t.length;h++){var g=t.item(h);if((g.type||0<g.size)&&(d.push(g),f+=g.size),d.length>l||u<f||!r&&0<d.length)break}var m=w.defer();return w.all(i).then(function(){if(r||c||!d.length)m.resolve(d);else{for(var e=0;d[e]&&"directory"===d[e].type;)e++;m.resolve([d[e]])}},function(e){m.reject(e)}),m.promise})(e.items,e.files,!1!==S("ngfAllowDir",v),S("multiple")||S("ngfMultiple",v)).then(function(e){e.length?f(e,t):function(e,t){if(!$.shouldUpdateOn(e,y,v)||"string"!=typeof t)return $.rejectPromise([]);var r=[];t.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){r.push(n)});var n=[],i=[];if(r.length){angular.forEach(r,function(e){n.push($.urlToBlob(e).then(function(e){i.push(e)}))});var a=w.defer();return w.all(n).then(function(){a.resolve(i)},function(e){a.reject(e)}),a.promise}return $.emptyPromise()}(n,r).then(function(e){f(e,t)})})}}function f(e,t){$.updateModel(r,y,v,S("ngfChange")||S("ngfDrop"),e,t)}}(e,t,n,r,i,a,o,s,0,l)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,t){p()&&t.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(i,a,o){return function(e,t,n){if(p()){var r=i(o.attrGetter("ngfDropAvailable",n));a(function(){r(e),r.assign&&r.assign(e,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,r){var l=e;return l.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&l.isResizeSupported()},l.readOrientation=function(e){var c=r.defer(),t=new FileReader,n=e.slice?e.slice(0,65536):e;return t.readAsArrayBuffer(n),t.onerror=function(e){return c.reject(e)},t.onload=function(e){var t={orientation:1},n=new DataView(this.result);if(65496!==n.getUint16(0,!1))return c.resolve(t);for(var r=n.byteLength,i=2;i<r;){var a=n.getUint16(i,!1);if(i+=2,65505===a){if(1165519206!==n.getUint32(i+=2,!1))return c.resolve(t);var o=18761===n.getUint16(i+=6,!1);i+=n.getUint32(i+4,o);var s=n.getUint16(i,o);i+=2;for(var l=0;l<s;l++)if(274===n.getUint16(i+12*l,o)){var u=n.getUint16(i+12*l+8,o);return 2<=u&&u<=8&&(n.setUint16(i+12*l+8,1,o),t.fixedArrayBuffer=e.target.result),t.orientation=u,c.resolve(t)}}else{if(65280!=(65280&a))break;i+=n.getUint16(i,!1)}}return c.resolve(t)},c.promise},l.applyExifRotation=function(o){if(0!==o.type.indexOf("image/jpeg"))return l.emptyPromise(o);var s=r.defer();return l.readOrientation(o).then(function(a){if(a.orientation<2||8<a.orientation)return s.resolve(o);l.dataUrl(o,!0).then(function(e){var r=document.createElement("canvas"),i=document.createElement("img");i.onload=function(){try{r.width=4<a.orientation?i.height:i.width,r.height=4<a.orientation?i.width:i.height;var e=r.getContext("2d");!function(e,t,n,r){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:e.transform(0,-1,1,0,0,n)}}(e,a.orientation,i.width,i.height),e.drawImage(i,0,0);var t=r.toDataURL(o.type||"image/WebP",.934);t=l.restoreExif(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}(a.fixedArrayBuffer),t);var n=l.dataUrltoBlob(t,o.name);s.resolve(n)}catch(e){return s.reject(e)}},i.onerror=function(){s.reject()},i.src=e},function(e){s.reject(e)})},function(e){s.reject(e)}),s.promise},l.restoreExif=function(e,t){var n={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(e){for(var t,n,r,i,a,o="",s="",l="",u=0;r=(t=e[u++])>>2,i=(3&t)<<4|(n=e[u++])>>4,a=(15&n)<<2|(s=e[u++])>>6,l=63&s,isNaN(n)?a=l=64:isNaN(s)&&(l=64),o=o+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l),t=n=s="",r=i=a=l="",u<e.length;);return o},restore:function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(i)},exifManipulation:function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},getExifArray:function(e){for(var t,n=0;n<e.length;n++)if(255===(t=e[n])[0]&225===t[1])return t;return[]},insertExif:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),i=r.indexOf(255,3),a=r.slice(0,i),o=r.slice(i),s=a;return s=(s=s.concat(t)).concat(o)},slice2Segments:function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var r=t+(256*e[t+2]+e[t+3])+2,i=e.slice(t,r);n.push(i),t=r}if(t>e.length)break}return n},decode64:function(e){var t,n,r,i,a="",o="",s=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(s++))<<2|(r=this.KEY_STR.indexOf(e.charAt(s++)))>>4,n=(15&r)<<4|(i=this.KEY_STR.indexOf(e.charAt(s++)))>>2,a=(3&i)<<6|(o=this.KEY_STR.indexOf(e.charAt(s++))),l.push(t),64!==i&&l.push(n),64!==o&&l.push(a),t=n=a="",r=i=o="",s<e.length;);return l}};return n.restore(e,t)},l}]),function(e,t){"use strict";if("function"!=typeof define||!define.amd)return t(e);define(["angular"],function(e){return t(e)})}(window.angular||null,function(C){"use strict";return C.module("ngTable",[]),C.module("ngTable").value("ngTableDefaults",{params:{},settings:{}}),function(){function e(l){var e={};return e=t("pagesChanged",e=t("datasetChanged",e=t("afterReloadData",e=t("afterCreated",e))));function t(e,t){var n,r,i=e.charAt(0).toUpperCase()+e.substring(1),a={};return a["on"+i]=(n=e,function(o){var s=C.identity,e=l;if(2===arguments.length?C.isFunction(arguments[1].$new)?e=arguments[1]:s=arguments[1]:2<arguments.length&&(e=arguments[1],s=arguments[2]),C.isObject(s)){var t=s;s=function(e){return e===t}}return e.$on("ngTable:"+n,function(e,t){if(!t.isNullInstance){var n,r,i=(n=arguments,r=2,Array.prototype.slice.call(n,null==r?1:r)),a=[t].concat(i);s.apply(this,a)&&o.apply(this,a)}})}),a["publish"+i]=(r=e,function(){var e=["ngTable:"+r].concat(Array.prototype.slice.call(arguments));l.$broadcast.apply(l,e)}),C.extend(t,a)}}C.module("ngTable").factory("ngTableEventsChannel",e),e.$inject=["$rootScope"]}(),function(){function e(){var r,e={defaultBaseUrl:"ng-table/filters/",defaultExt:".html",aliasUrls:{}};function t(){r=e}function n(){var e,n={config:e,getTemplateUrl:function(e,t){C.isObject(e)&&(e=e.id);return-1===e.indexOf("/")?n.getUrlForAlias(e,t):e},getUrlForAlias:function(e){return r.aliasUrls[e]||r.defaultBaseUrl+e+r.defaultExt}};return Object.defineProperty(n,"config",{get:function(){return e=e||C.copy(r)},enumerable:!0}),n}this.$get=n,this.resetConfigs=t,this.setConfig=function(e){var t=C.extend({},r,e);t.aliasUrls=C.extend({},r.aliasUrls,e.aliasUrls),r=t},t(),n.$inject=[]}C.module("ngTable").provider("ngTableFilterConfig",e),e.$inject=[]}(),function(){function e(){var r=this;function e(n){var l={applyFilter:!0,applySort:!0,applyPaging:!0};return e.applyPaging=d,e.getFilterFn=u,e.getOrderByFn=c,e;function u(e){var t=e.settings().filterOptions;return C.isFunction(t.filterFn)?t.filterFn:n(t.filterFilterName||r.filterFilterName)}function c(){return n(r.sortingFilterName)}function d(e,t){var n=e.slice((t.page()-1)*t.count(),t.page()*t.count());return t.total(e.length),n}function e(e,t){if(null==e)return[];var n,r,i,a=C.extend({},l,t.settings().dataOptions),o=a.applyFilter?function(e,t){if(!t.hasFilter())return e;var l=t.filter(!0),n=Object.keys(l).reduce(function(e,t){var n,r,i,a,o,s;return n=e,r=l[t],i=t.split("."),a=n,o=i[i.length-1],s=a,i.slice(0,i.length-1).forEach(function(e){s.hasOwnProperty(e)||(s[e]={}),s=s[e]}),s[o]=r,e=a},{});return u(t).call(t,e,n,t.settings().filterOptions.filterComparator)}(e,t):e,s=a.applySort?(n=o,r=t.orderBy(),i=c(),r.length?i(n,r):n):o;return a.applyPaging?d(s,t):s}}r.$get=e,r.filterFilterName="filter",r.sortingFilterName="orderBy",e.$inject=["$filter"]}C.module("ngTable").provider("ngTableDefaultGetData",e),e.$inject=[]}(),C.module("ngTable").factory("ngTableColumn",[function(){return{buildColumn:function(r,i,a){var o=Object.create(r),e={class:n(""),filter:n(!1),groupable:n(!1),filterData:C.noop,headerTemplateURL:n(!1),headerTitle:n(""),sortable:n(!1),show:n(!0),title:n(""),titleAlt:n("")};for(var t in e)void 0===o[t]&&(o[t]=e[t]),C.isFunction(o[t])||function(n){var e=function e(){if(1!==arguments.length||s(arguments[0]))return r[n];e.assign(null,arguments[0])};e.assign=function(e,t){r[n]=t},o[n]=e}(t),function(e){var n=o[e];o[e]=function(){if(1!==arguments.length||s(arguments[0])){var e=arguments[0]||i,t=Object.create(e);return C.extend(t,{$column:o,$columns:a}),n.call(r,t)}n.assign(null,arguments[0])},n.assign&&(o[e].assign=n.assign)}(t);return o}};function n(e){var n=e,t=function e(){if(1!==arguments.length||s(arguments[0]))return n;e.assign(null,arguments[0])};return t.assign=function(e,t){n=t},t}function s(e){return null!=e&&C.isFunction(e.$new)}}]),C.module("ngTable").factory("NgTableParams",["$q","$log","$filter","ngTableDefaults","ngTableDefaultGetData","ngTableEventsChannel",function(y,b,e,$,w,S){var x=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};return function(e,t){"boolean"==typeof e&&(this.isNullInstance=!0);var r,i,n,a=this,o=!1,s=[],c=function(){v.debugMode&&b.debug&&b.debug.apply(b,arguments)},l={filterComparator:void 0,filterDelay:500,filterDelayThreshold:1e4,filterFilterName:void 0,filterFn:void 0,filterLayout:"stack"},u={getData:function(e){return w(e.settings().dataset,e)},getGroups:function(i){var a,e=i.group(),o=void 0;if(C.isFunction(e))o=(a=e).sortDirection;else{var t=Object.keys(e)[0];o=e[t],a=function(e){return function e(t,n){if("string"==typeof n&&(n=n.split(".")),void 0!==t){if(0===n.length)return t;if(null!==t)return e(t[n[0]],n.slice(1))}}(e,t)}}var s=i.settings(),n=s.dataOptions;return s.dataOptions={applyPaging:!1},y.when(s.getData(i)).then(function(e){var n={};C.forEach(e,function(e){var t=a(e);n[t]=n[t]||{data:[],$hideRows:!s.groupOptions.isExpanded,value:t},n[t].data.push(e)});var t=[];for(var r in n)t.push(n[r]);return o&&(t=w.getOrderByFn()(t,f({value:o}))),w.applyPaging(t,i)}).finally(function(){s.dataOptions=n})}};function d(e){var t=v.groupOptions&&v.groupOptions.defaultSort;if(C.isFunction(e))return null==e.sortDirection&&(e.sortDirection=t),e;if(C.isString(e)){var n={};return n[e]=t,n}if(C.isObject(e)){for(var r in e)null==e[r]&&(e[r]=t);return e}return e}function f(e){var t=[];for(var n in e)t.push(("asc"===e[n]?"+":"-")+n);return t}function p(){var e={params:m};return C.isFunction(m.group)&&(e.groupSortDirection=m.group.sortDirection),e}function h(){var e=m.filter&&m.filter.$,t=r&&r.params.filter&&r.params.filter.$;return!C.equals(e,t)}function g(e){return(v.interceptors||[]).reduce(function(e,t){var n=t.response&&t.response.bind(t)||y.when,r=t.responseError&&t.responseError.bind(t)||y.reject;return e.then(function(e){return n(e,a)},function(e){return r(e,a)})},e)}this.data=[],this.parameters=function(e,t){if(t=t||!1,C.isDefined(e)){for(var n in e){var r=e[n];if(t&&0<=n.indexOf("[")){for(var i=n.split(/\[(.*)\]/).reverse(),a="",o=0,s=i.length;o<s;o++){var l=i[o];if(""!==l){var u=r;(r={})[a=l]=x(u)?parseFloat(u):u}}"sorting"===a&&(m[a]={}),m[a]=C.extend(m[a]||{},r[a])}else m[n]="group"===n?d(e[n]):x(e[n])?parseFloat(e[n]):e[n]}return c("ngTable: set parameters",m),this}return m},this.settings=function(e){if(C.isDefined(e)){e.filterOptions&&(e.filterOptions=C.extend({},v.filterOptions,e.filterOptions)),e.groupOptions&&(e.groupOptions=C.extend({},v.groupOptions,e.groupOptions)),C.isArray(e.dataset)&&(e.total=e.dataset.length);var t=v.dataset;if(v=C.extend(v,e),C.isArray(e.dataset)&&v.filterOptions.filterDelay===l.filterDelay&&v.total<=v.filterOptions.filterDelayThreshold&&v.getData===u.getData&&(v.filterOptions.filterDelay=0),e.hasOwnProperty("dataset")&&e.dataset!=t){o&&this.page(1),o=!1;var n=function(){S.publishDatasetChanged(a,e.dataset,t)};s?s.push(n):n()}return c("ngTable: set settings",v),this}return v},this.page=function(e){return C.isDefined(e)?this.parameters({page:e}):m.page},this.total=function(e){return C.isDefined(e)?this.settings({total:e}):v.total},this.count=function(e){return C.isDefined(e)?this.parameters({count:e,page:1}):m.count},this.filter=function(e){if(C.isDefined(e)&&C.isObject(e))return this.parameters({filter:e,page:1});if(!0!==e)return m.filter;for(var t=Object.keys(m.filter),n={},r=0;r<t.length;r++){var i=m.filter[t[r]];null!=i&&""!==i&&(n[t[r]]=i)}return n},this.group=function(e,t){if(!C.isDefined(e))return m.group;var n={page:1};if(C.isFunction(e)&&C.isDefined(t))e.sortDirection=t,n.group=e;else if(C.isDefined(e)&&C.isDefined(t)){var r={};r[e]=t,n.group=r}else n.group=e;return this.parameters(n),this},this.sorting=function(e){if(2!=arguments.length)return C.isDefined(e)?this.parameters({sorting:e}):m.sorting;var t={};return t[e]=arguments[1],this.parameters({sorting:t}),this},this.isSortBy=function(e,t){return void 0!==t?C.isDefined(m.sorting[e])&&m.sorting[e]==t:C.isDefined(m.sorting[e])},this.orderBy=function(){return f(m.sorting)},this.generatePagesArray=function(e,t,n,r){var i,a,o,s,l;if(arguments.length||(e=this.page(),t=this.total(),n=this.count()),r=r&&r<6?6:r,l=[],1<(s=Math.ceil(t/n))){l.push({type:"prev",number:Math.max(1,e-1),active:1<e}),l.push({type:"first",number:1,active:1<e,current:1===e}),a=Math.round((v.paginationMaxBlocks-v.paginationMinBlocks)/2),o=Math.max(2,e-a),i=Math.min(s-1,e+2*a-(e-o));for(var u=o=Math.max(2,o-(2*a-(i-o)));u<=i;)u===o&&2!==u||u===i&&u!==s-1?l.push({type:"more",active:!1}):l.push({type:"page",number:u,active:e!==u,current:e===u}),u++;l.push({type:"last",number:s,active:e!==s,current:e===s}),l.push({type:"next",number:Math.min(s,e+1),active:e<s})}return l},this.isDataReloadRequired=function(){return!o||!C.equals(p(),r)||h()},this.hasFilter=function(){return 0<Object.keys(this.filter(!0)).length},this.hasGroup=function(e,t){return null==e?C.isFunction(m.group)||0<Object.keys(m.group).length:C.isFunction(e)?null==t?m.group===e:m.group===e&&e.sortDirection===t:null==t?-1!==Object.keys(m.group).indexOf(e):m.group[e]===t},this.hasFilterChanges=function(){var e=r&&r.params.filter;return!C.equals(m.filter,e)||h()},this.url=function(n){var r=(n=n||!1)?[]:{};for(var e in m)if(m.hasOwnProperty(e)){var t=m[e],i=encodeURIComponent(e);if("object"==typeof t){for(var a in t)if(l(t[a],e)){var o=i+"["+encodeURIComponent(a)+"]";s(t[a],o)}}else!C.isFunction(t)&&l(t,e)&&s(t,i)}return r;function s(e,t){n?r.push(t+"="+encodeURIComponent(e)):r[t]=encodeURIComponent(e)}function l(e,t){return"group"===t||C.isDefined(e)&&""!==e}},this.reload=function(){var t=this,e=null;v.$loading=!0,r=C.copy(p()),o=!0,e=t.hasGroup()?g(y.when(v.getGroups(t))):g(y.when(v.getData(t))),c("ngTable: reload data");var n=t.data;return e.then(function(e){return v.$loading=!1,i=null,t.data=e,S.publishAfterReloadData(t,e,n),t.reloadPages(),e}).catch(function(e){return i=r,y.reject(e)})},this.hasErrorState=function(){return!(!i||!C.equals(i,p()))},this.reloadPages=function(){var e=n,t=a.generatePagesArray(a.page(),a.total(),a.count());C.equals(e,t)||(n=t,S.publishPagesChanged(this,t,e))};var m={page:1,count:10,filter:{},sorting:{},group:{}};C.extend(m,$.params);var v={$loading:!1,dataset:null,total:0,defaultSort:"desc",filterOptions:C.copy(l),groupOptions:C.copy({defaultSort:"asc",isExpanded:!0}),counts:[10,25,50,100],interceptors:[],paginationMaxBlocks:11,paginationMinBlocks:5,sortingIndicator:"span"};return this.settings(u),this.settings($.settings),this.settings(t),this.parameters(e,!0),S.publishAfterCreated(this),C.forEach(s,function(e){e()}),s=null,this}}]),C.module("ngTable").controller("ngTableController",["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","ngTableColumn","ngTableEventsChannel",function(i,e,n,r,a,o,s,l,t){i.$filterRow={},i.$loading=!1,i.hasOwnProperty("params")||(i.params=new e(!0)),i.params.settings().$scope=i;var u,c=(u=0,function(e,t){n.cancel(u),u=n(e,t)});function d(){return!!i.$columns&&function(e,t){for(var n=!1,r=0;r<e.length;r++){var i=e[r];if(t(i)){n=!0;break}}return n}(i.$columns,function(e){return e.show(i)&&e.filter(i)})}i.$watch("params",function(e,t){e!==t&&e&&e.reload()},!1),i.$watch("params.isDataReloadRequired()",function(e){if(e&&!i.params.hasErrorState()){var t=(i.params.settings().$scope=i).params,n=t.settings().filterOptions;if(t.hasFilterChanges()){var r=function(){t.page(1),t.reload()};n.filterDelay?c(r,n.filterDelay):r()}else t.reload()}}),this.compileDirectiveTemplates=function(){if(!s.hasClass("ng-table")){i.templates={header:o.templateHeader?o.templateHeader:"ng-table/header.html",pagination:o.templatePagination?o.templatePagination:"ng-table/pager.html"},s.addClass("ng-table");var e=null,t=!1;C.forEach(s.children(),function(e){"THEAD"===e.tagName&&(t=!0)}),t||(e=C.element(document.createElement("thead")).attr("ng-include","templates.header"),s.prepend(e));var n=C.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"});s.after(n),e&&a(e)(i),a(n)(i)}},this.loadFilterData=function(e){C.forEach(e,function(t){var e;if(e=t.filterData(i)){if(C.isObject(e)&&(C.isObject(e.promise)||C.isFunction(e.then))){var n=C.isFunction(e.then)?e:e.promise;return delete t.filterData,n.then(function(e){C.isArray(e)||C.isFunction(e)||C.isObject(e)||(e=[]),t.data=e})}return t.data=e}delete t.filterData})},this.buildColumns=function(e){var t=[];return(e||[]).forEach(function(e){t.push(l.buildColumn(e,i,t))}),t},this.parseNgTableDynamicExpr=function(e){if(!e||-1<e.indexOf(" with ")){var t=e.split(/\s+with\s+/);return{tableParams:t[0],columns:t[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')")},this.setupBindingsToInternalScope=function(e){var t=r(e);i.$watch(t,function(e){C.isUndefined(e)||(i.paramsModel=t,i.params=e)},!1),o.showFilter?i.$parent.$watch(o.showFilter,function(e){i.show_filter=e}):i.$watch(d,function(e){i.show_filter=e}),o.disableFilter&&i.$parent.$watch(o.disableFilter,function(e){i.$filterRow.disabled=e}),function(){if(i.$groupRow={},o.showGroup){var t=r(o.showGroup);i.$parent.$watch(t,function(e){i.$groupRow.show=e}),t.assign&&i.$watch("$groupRow.show",function(e){t.assign(i.$parent,e)})}else i.$watch("params.hasGroup()",function(e){i.$groupRow.show=e})}()},function(){function e(e){return i.params===e}t.onAfterReloadData(function(e,t){var n=(i.$columns||[]).filter(function(e){return e.show(i)});e.hasGroup()?(i.$groups=t||[],i.$groups.visibleColumnCount=n.length):(i.$data=t||[],i.$data.visibleColumnCount=n.length)},i,e),t.onPagesChanged(function(e,t){i.pages=t},i,e)}()}]),C.module("ngTable").directive("ngTable",["$q","$parse",function(e,c){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(e){var t,s,l=[],u=0,n=[];if(C.forEach(e.find("tr"),function(e){n.push(C.element(e))}),t=n.filter(function(e){return!e.hasClass("ng-table-group")})[0],s=n.filter(function(e){return e.hasClass("ng-table-group")})[0],t)return C.forEach(t.find("td"),function(e){var t=C.element(e);if(!t.attr("ignore-cell")||"true"!==t.attr("ignore-cell")){var n,r,a=function(e){return t.attr("x-data-"+e)||t.attr("data-"+e)||t.attr(e)},i=function(e){var r=a(e);if(r){var i,t=function(e){return void 0!==i?i:c(r)(e)};return t.assign=function(e,t){var n=c(r);n.assign?n.assign(e.$parent,t):i=t},t}},o=a("title-alt")||a("title");o&&t.attr("data-title-text","{{"+o+"}}"),l.push({id:u++,title:i("title"),titleAlt:i("title-alt"),headerTitle:i("header-title"),sortable:i("sortable"),class:i("header-class"),filter:i("filter"),groupable:i("groupable"),headerTemplateURL:i("header"),filterData:i("filter-data"),show:t.attr("ng-if")?i("ng-if"):void 0}),(s||t.attr("ng-if"))&&(n="ng-if",r="$columns["+(l.length-1)+"].show(this)",t.attr("x-data-"+n)?t.attr("x-data-"+n,r):t.attr("data"+n)?t.attr("data"+n,r):t.attr(n,r))}}),function(e,t,n,r){e.$columns=l=r.buildColumns(l),r.setupBindingsToInternalScope(n.ngTable),r.loadFilterData(l),r.compileDirectiveTemplates()}}}}]),C.module("ngTable").directive("ngTableDynamic",[function(){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(e){var t;if(C.forEach(e.find("tr"),function(e){(e=C.element(e)).hasClass("ng-table-group")||t||(t=e)}),t)return C.forEach(t.find("td"),function(e){var t,n=C.element(e);t="title",n.attr("x-data-"+t)||n.attr("data-"+t)||n.attr(t)||n.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}"),n.attr("ng-if")||n.attr("ng-if","$columns[$index].show(this)")}),function(t,e,n,r){var i=r.parseNgTableDynamicExpr(n.ngTableDynamic);r.setupBindingsToInternalScope(i.tableParams),r.compileDirectiveTemplates(),t.$watchCollection(i.columns,function(e){t.$columns=r.buildColumns(e),r.loadFilterData(t.$columns)})}}}}]),function(){function e(i){return{restrict:"A",require:"ngTable",link:function(n,e,t){var r=i(t.ngTableColumnsBinding).assign;r&&n.$watch("$columns",function(e){var t=(e||[]).slice(0);r(n,t)})}}}C.module("ngTable").directive("ngTableColumnsBinding",e),e.$inject=["$parse"]}(),C.module("ngTable").directive("ngTablePagination",["$compile","ngTableEventsChannel",function(i,e){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(n,r){e.onAfterReloadData(function(e){n.pages=e.generatePagesArray()},n,function(e){return e===n.params}),n.$watch("templateUrl",function(e){if(!C.isUndefined(e)){var t=C.element(document.createElement("div"));t.attr({"ng-include":"templateUrl"}),r.append(t),i(t)(n)}})}}}]),function(){function e(e,t){e.config=t,e.getFilterCellCss=function(e,t){if("horizontal"!==t)return"s12";var n=Object.keys(e).length;return"s"+parseInt(12/n,10)},e.getFilterPlaceholderValue=function(e){return C.isObject(e)?e.placeholder:""}}C.module("ngTable").controller("ngTableFilterRowController",e),e.$inject=["$scope","ngTableFilterConfig"]}(),function(){function e(){return{restrict:"E",replace:!0,templateUrl:"ng-table/filterRow.html",scope:!0,controller:"ngTableFilterRowController"}}C.module("ngTable").directive("ngTableFilterRow",e),e.$inject=[]}(),function(){function e(i){var a=[];function o(t){return i.$columns.filter(function(e){return e.groupable(i)===t})[0]}function e(e){return C.isFunction(e)?e.title:e.title(i)}function t(){var e=i.$columns.filter(function(e){return e.groupable(i)});return a.concat(e)}function n(){return i.$columns.filter(function(e){return e.show(i)})}function r(e){var t;s(e)?(t=i.params.hasGroup(i.$selGroup,"asc")?"desc":i.params.hasGroup(i.$selGroup,"desc")?"":"asc",i.params.group(i.$selGroup,t)):e.groupable?i.params.group(e.groupable(i)):i.params.group(e)}function s(e){return e.groupable?e.groupable(i)===i.$selGroup:e===i.$selGroup}function l(e){var t=o(i.$selGroup);if(t&&t.show.assign&&t.show.assign(i,!0),C.isFunction(e))a=[e],i.$selGroup=e,i.$selGroupTitle=e.title;else{var n=Object.keys(e||{})[0],r=o(n);r&&(i.$selGroupTitle=r.title(i),i.$selGroup=n,r.show.assign&&r.show.assign(i,!1))}}function u(){return i.params.settings().groupOptions.isExpanded=!i.params.settings().groupOptions.isExpanded,i.params.reload()}i.getGroupables=t,i.getGroupTitle=e,i.getVisibleColumns=n,i.groupBy=r,i.isSelectedGroup=s,i.toggleDetail=u,i.$watch("params.group()",l,!0)}C.module("ngTable").controller("ngTableGroupRowController",e),e.$inject=["$scope"]}(),function(){function e(){return{restrict:"E",replace:!0,templateUrl:"ng-table/groupRow.html",scope:!0,controller:"ngTableGroupRowController",controllerAs:"dctrl"}}C.module("ngTable").directive("ngTableGroupRow",e),e.$inject=[]}(),function(){function e(s){s.sortBy=function(e,t){var n=e.sortable&&e.sortable();if(!n)return;var r=s.params.settings().defaultSort,i="asc"===r?"desc":"asc",a=s.params.sorting()&&s.params.sorting()[n]&&s.params.sorting()[n]===r,o=t.ctrlKey||t.metaKey?s.params.sorting():{};o[n]=a?i:r,s.params.parameters({sorting:o})}}C.module("ngTable").controller("ngTableSorterRowController",e),e.$inject=["$scope"]}(),function(){function e(){return{restrict:"E",replace:!0,templateUrl:"ng-table/sorterRow.html",scope:!0,controller:"ngTableSorterRowController"}}C.module("ngTable").directive("ngTableSorterRow",e),e.$inject=[]}(),function(){function e(){return{restrict:"A",controller:t}}function t(n,e,t,r){var i={};function a(){var e,t;(e=i,t=C.isFunction(e.data)?e.data():e.data,r.when(t)).then(function(e){e&&!function(e){for(var t,n=0;n<e.length;n++){var r=e[n];if(r&&""===r.id){t=!0;break}}return t}(e)&&e.unshift({id:"",title:""}),e=e||[],n.$selectData=e})}i=e(t.ngTableSelectFilterDs)(n),n.$watch(function(){return i.data},a)}C.module("ngTable").directive("ngTableSelectFilterDs",e),e.$inject=[],t.$inject=["$scope","$parse","$attrs","$q"]}(),C.module("ngTable").run(["$templateCache",function(e){e.put("ng-table/filterRow.html",'<tr ng-show="show_filter" class="ng-table-filters"> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-if="$column.show(this)" class="filter {{$column.class(this)}}" ng-class="params.settings().filterOptions.filterLayout===\'horizontal\' ? \'filter-horizontal\' : \'\'"> <div ng-repeat="(name, filter) in $column.filter(this)" ng-include="config.getTemplateUrl(filter)" class="filter-cell" ng-class="[getFilterCellCss($column.filter(this), params.settings().filterOptions.filterLayout), $last ? \'last\' : \'\']"> </div> </th> </tr> '),e.put("ng-table/filters/number.html",'<input type="number" name="{{name}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> '),e.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" multiple ng-multiple="true" ng-model="params.filter()[name]" class="filter filter-select-multiple form-control" name="{{name}}"> </select> '),e.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in $selectData" ng-table-select-filter-ds="$column" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" class="filter filter-select form-control" name="{{name}}"> <option style="display:none" value=""></option> </select> '),e.put("ng-table/filters/text.html",'<input type="text" name="{{name}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> '),e.put("ng-table/groupRow.html",'<tr ng-if="params.hasGroup()" ng-show="$groupRow.show" class="ng-table-group-header"> <th colspan="{{getVisibleColumns().length}}" class="sortable" ng-class="{ \'sort-asc\': params.hasGroup($selGroup, \'asc\'), \'sort-desc\':params.hasGroup($selGroup, \'desc\') }"> <a href="" ng-click="isSelectorOpen=!isSelectorOpen" class="ng-table-group-selector"> <strong class="sort-indicator">{{$selGroupTitle}}</strong> <button class="btn btn-default btn-xs ng-table-group-close" ng-click="$groupRow.show=false; $event.preventDefault(); $event.stopPropagation();"> <span class="glyphicon glyphicon-remove"></span> </button> <button class="btn btn-default btn-xs ng-table-group-toggle" ng-click="toggleDetail(); $event.preventDefault(); $event.stopPropagation();"> <span class="glyphicon" ng-class="{ \'glyphicon-resize-small\': params.settings().groupOptions.isExpanded, \'glyphicon-resize-full\': !params.settings().groupOptions.isExpanded }"></span> </button> </a> <div class="list-group" ng-if="isSelectorOpen"> <a href="" class="list-group-item" ng-repeat="group in getGroupables()" ng-click="groupBy(group)"> <strong>{{ getGroupTitle(group)}}</strong> <strong ng-class="isSelectedGroup(group) && \'sort-indicator\'"></strong> </a> </div> </th> </tr> '),e.put("ng-table/header.html","<ng-table-group-row></ng-table-group-row> <ng-table-sorter-row></ng-table-sorter-row> <ng-table-filter-row></ng-table-filter-row> "),e.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager" ng-if="params.data.length"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button> </div> <ul ng-if="pages.length" class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div> '),e.put("ng-table/sorterRow.html",'<tr class="ng-table-sort-header"> <th title="{{$column.headerTitle(this)}}" ng-repeat="$column in $columns" ng-class="{ \'sortable\': $column.sortable(this), \'sort-asc\': params.sorting()[$column.sortable(this)]==\'asc\', \'sort-desc\': params.sorting()[$column.sortable(this)]==\'desc\' }" ng-click="sortBy($column, $event)" ng-if="$column.show(this)" ng-init="template=$column.headerTemplateURL(this)" class="header {{$column.class(this)}}"> <div ng-if="!template" class="ng-table-header" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'div\'}"> <span ng-bind="$column.title(this)" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'span\'}"></span> </div> <div ng-if="template" ng-include="template"></div> </th> </tr> ')}]),C.module("ngTable")}),function(){"use strict";var m=8,d=9,v=13,f=27,y=32,p=38,h=40,b=37,$=39,w=46,S=188,o=9007199254740991,t=["text","email","url"],e=angular.module("ngTagsInput",[]);e.directive("tagsInput",["$timeout","$document","$window","$q","tagsInputConfig","tiUtil",function(f,p,h,c,r,g){function i(r,n,i,t){var a,o,s,l,u={};return a=function(e){return g.safeToString(e[r.displayProperty])},o=function(e,t){e[r.displayProperty]=t},s=function(e){var t=a(e),n=t&&t.length>=r.minLength&&t.length<=r.maxLength&&r.allowedTagsPattern.test(t)&&!g.findInObjectArray(u.items,e,r.keyProperty||r.displayProperty);return c.when(n&&i({$tag:e})).then(g.promisifyValue)},l=function(e){return c.when(t({$tag:e})).then(g.promisifyValue)},u.items=[],u.addText=function(e){var t={};return o(t,e),u.add(t)},u.add=function(e){var t=a(e);return r.replaceSpacesWithDashes&&(t=g.replaceSpacesWithDashes(t)),o(e,t),s(e).then(function(){u.items.push(e),n.trigger("tag-added",{$tag:e})}).catch(function(){t&&n.trigger("invalid-tag",{$tag:e})})},u.remove=function(e){var t=u.items[e];return l(t).then(function(){return u.items.splice(e,1),u.clearSelection(),n.trigger("tag-removed",{$tag:t}),t})},u.select=function(e){e<0?e=u.items.length-1:e>=u.items.length&&(e=0),u.index=e,u.selected=u.items[e]},u.selectPrior=function(){u.select(--u.index)},u.selectNext=function(){u.select(++u.index)},u.removeSelected=function(){return u.remove(u.index)},u.clearSelection=function(){u.selected=null,u.index=-1},u.clearSelection(),u}function a(e){return-1!==t.indexOf(e)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",templateScope:"=?",tagClass:"&",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(n,e,t){n.events=g.simplePubSub(),r.load("tagsInput",n,e,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",a],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,o],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,o],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),n.tagList=new i(n.options,n.events,g.handleUndefinedResult(n.onTagAdding,!0),g.handleUndefinedResult(n.onTagRemoving,!0)),this.registerAutocomplete=function(){t.find("input");return{addTag:function(e){return n.tagList.add(e)},getTags:function(){return n.tagList.items},getCurrentTagText:function(){return n.newTag.text()},getOptions:function(){return n.options},getTemplateScope:function(){return n.templateScope},on:function(e,t){return n.events.on(e,t,!0),this}}},this.registerTagItem=function(){return{getOptions:function(){return n.options},removeTag:function(e){n.disabled||n.tagList.remove(e)}}}}],link:function(s,r,e,t){var n,i,l=[v,S,y,m,w,b,$],u=s.tagList,a=s.events,c=s.options,o=r.find("input"),d=["minTags","maxTags","allowLeftoverText"];n=function(){t.$setValidity("maxTags",u.items.length<=c.maxTags),t.$setValidity("minTags",u.items.length>=c.minTags),t.$setValidity("leftoverText",!(!s.hasFocus&&!c.allowLeftoverText)||!s.newTag.text())},i=function(){f(function(){o[0].focus()})},t.$isEmpty=function(e){return!e||!e.length},s.newTag={text:function(e){if(!angular.isDefined(e))return s.text||"";s.text=e,a.trigger("input-change",e)},invalid:null},s.track=function(e){return e[c.keyProperty||c.displayProperty]},s.getTagClass=function(e,t){var n=e===u.selected;return[s.tagClass({$tag:e,$index:t,$selected:n}),{selected:n}]},s.$watch("tags",function(e){e?(u.items=g.makeObjectArray(e,c.displayProperty),s.tags=u.items):u.items=[]}),s.$watch("tags.length",function(){n(),t.$validate()}),e.$observe("disabled",function(e){s.disabled=e}),s.eventHandlers={input:{keydown:function(e){a.trigger("input-keydown",e)},focus:function(){s.hasFocus||(s.hasFocus=!0,a.trigger("input-focus"))},blur:function(){f(function(){var e=p.prop("activeElement"),t=e===o[0],n=r[0].contains(e);!t&&n||(s.hasFocus=!1,a.trigger("input-blur"))})},paste:function(t){t.getTextData=function(){var e=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData;return e?e.getData("text/plain"):h.clipboardData.getData("Text")},a.trigger("input-paste",t)}},host:{click:function(){s.disabled||i()}},tag:{click:function(e){a.trigger("tag-clicked",{$tag:e})}}},a.on("tag-added",s.onTagAdded).on("invalid-tag",s.onInvalidTag).on("tag-removed",s.onTagRemoved).on("tag-clicked",s.onTagClicked).on("tag-added",function(){s.newTag.text("")}).on("tag-added tag-removed",function(){s.tags=u.items,t.$setDirty(),i()}).on("invalid-tag",function(){s.newTag.invalid=!0}).on("option-change",function(e){-1!==d.indexOf(e.name)&&n()}).on("input-change",function(){u.clearSelection(),s.newTag.invalid=null}).on("input-focus",function(){r.triggerHandler("focus"),t.$setValidity("leftoverText",!0)}).on("input-blur",function(){c.addOnBlur&&!c.addFromAutocompleteOnly&&u.addText(s.newTag.text()),r.triggerHandler("blur"),n()}).on("input-keydown",function(e){var t,n,r,i,a=e.keyCode,o={};g.isModifierOn(e)||-1===l.indexOf(a)||(o[v]=c.addOnEnter,o[S]=c.addOnComma,o[y]=c.addOnSpace,t=!c.addFromAutocompleteOnly&&o[a],n=(a===m||a===w)&&u.selected,i=a===m&&0===s.newTag.text().length&&c.enableEditingLastTag,r=(a===m||a===b||a===$)&&0===s.newTag.text().length&&!c.enableEditingLastTag,t?u.addText(s.newTag.text()):i?(u.selectPrior(),u.removeSelected().then(function(e){e&&s.newTag.text(e[c.displayProperty])})):n?u.removeSelected():r&&(a===b||a===m?u.selectPrior():a===$&&u.selectNext()),(t||r||n||i)&&e.preventDefault())}).on("input-paste",function(e){if(c.addOnPaste){var t=e.getTextData().split(c.pasteSplitPattern);1<t.length&&(t.forEach(function(e){u.addText(e)}),e.preventDefault())}})}}}]),e.directive("tiTagItem",["tiUtil",function(o){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{$scope:"=scope",data:"="},link:function(t,e,n,r){var i=r.registerTagItem(),a=i.getOptions();t.$$template=a.template,t.$$removeTagSymbol=a.removeTagSymbol,t.$getDisplayText=function(){return o.safeToString(t.data[a.displayProperty])},t.$removeTag=function(){i.removeTag(t.$index)},t.$watch("$parent.$index",function(e){t.$index=e})}}}]),e.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(e,t,n,u,r,c){function i(r,i,t){var a,o,s,l={};return s=function(){return i.tagsInput.keyProperty||i.tagsInput.displayProperty},a=function(e,t){return e.filter(function(e){return!c.findInObjectArray(t,e,s(),function(e,t){return i.tagsInput.replaceSpacesWithDashes&&(e=c.replaceSpacesWithDashes(e),t=c.replaceSpacesWithDashes(t)),c.defaultComparer(e,t)})})},l.reset=function(){o=null,l.items=[],l.visible=!1,l.index=-1,l.selected=null,l.query=null},l.show=function(){i.selectFirstMatch?l.select(0):l.selected=null,l.visible=!0},l.load=c.debounce(function(e,t){l.query=e;var n=u.when(r({$query:e}));(o=n).then(function(e){n===o&&(e=c.makeObjectArray(e.data||e,s()),e=a(e,t),l.items=e.slice(0,i.maxResultsToShow),0<l.items.length?l.show():l.reset())})},i.debounceDelay),l.selectNext=function(){l.select(++l.index)},l.selectPrior=function(){l.select(--l.index)},l.select=function(e){e<0?e=l.items.length-1:e>=l.items.length&&(e=0),l.index=e,l.selected=l.items[e],t.trigger("suggestion-selected",e)},l.reset(),l}return{restrict:"E",require:"^tagsInput",scope:{source:"&",matchClass:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(e,t,n){e.events=c.simplePubSub(),r.load("autoComplete",e,n,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),e.suggestionList=new i(e.source,e.options,e.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return e.options},getQuery:function(){return e.suggestionList.query}}}}],link:function(r,l,e,t){var n,i=[v,d,f,p,h],a=r.suggestionList,o=t.registerAutocomplete(),s=r.options,u=r.events;s.tagsInput=o.getOptions(),n=function(e){return e&&e.length>=s.minLength||!e&&s.loadOnEmpty},r.templateScope=o.getTemplateScope(),r.addSuggestionByIndex=function(e){a.select(e),r.addSuggestion()},r.addSuggestion=function(){var e=!1;return a.selected&&(o.addTag(angular.copy(a.selected)),a.reset(),e=!0),e},r.track=function(e){return e[s.tagsInput.keyProperty||s.tagsInput.displayProperty]},r.getSuggestionClass=function(e,t){var n=e===a.selected;return[r.matchClass({$match:e,$index:t,$selected:n}),{selected:n}]},o.on("tag-added tag-removed invalid-tag input-blur",function(){a.reset()}).on("input-change",function(e){n(e)?a.load(e,o.getTags()):a.reset()}).on("input-focus",function(){var e=o.getCurrentTagText();s.loadOnFocus&&n(e)&&a.load(e,o.getTags())}).on("input-keydown",function(e){var t=e.keyCode,n=!1;if(!c.isModifierOn(e)&&-1!==i.indexOf(t))return a.visible?t===h?(a.selectNext(),n=!0):t===p?(a.selectPrior(),n=!0):t===f?(a.reset(),n=!0):t!==v&&t!==d||(n=r.addSuggestion()):t===h&&r.options.loadOnDownArrow&&(a.load(o.getCurrentTagText(),o.getTags()),n=!0),n?(e.preventDefault(),e.stopImmediatePropagation(),!1):void 0}),u.on("suggestion-selected",function(e){var t,n,r,i,a,o,s;t=e,n=l.find("li").eq(t),r=n.parent(),i=n.prop("offsetTop"),a=n.prop("offsetHeight"),o=r.prop("clientHeight"),s=r.prop("scrollTop"),i<s?r.prop("scrollTop",i):o+s<i+a&&r.prop("scrollTop",i+a-o)})}}}]),e.directive("tiAutocompleteMatch",["$sce","tiUtil",function(o,s){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{$scope:"=scope",data:"="},link:function(e,t,n,r){var i=r.registerAutocompleteMatch(),a=i.getOptions();e.$$template=a.template,e.$index=e.$parent.$index,e.$highlight=function(e){return a.highlightMatchedText&&(e=s.safeHighlight(e,i.getQuery())),o.trustAsHtml(e)},e.$getDisplayText=function(){return s.safeToString(e.data[a.displayProperty||a.tagsInput.displayProperty])}}}}]),e.directive("tiTranscludeAppend",function(){return function(e,t,n,r,i){i(function(e){t.append(e)})}}),e.directive("tiAutosize",["tagsInputConfig",function(s){return{restrict:"A",require:"ngModel",link:function(e,r,i,t){var a,n,o=s.getTextAutosizeThreshold();(a=angular.element('<span class="input"></span>')).css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),r.parent().append(a),n=function(e){var t,n=e;return angular.isString(n)&&0===n.length&&(n=i.placeholder),n&&(a.text(n),a.css("display",""),t=a.prop("offsetWidth"),a.css("display","none")),r.css("width",t?t+o+"px":""),e},t.$parsers.unshift(n),t.$formatters.unshift(n),i.$observe("placeholder",function(e){t.$modelValue||n(e)})}}}]),e.directive("tiBindAttrs",function(){return function(e,t,n){e.$watch(n.tiBindAttrs,function(e){angular.forEach(e,function(e,t){n.$set(t,e)})},!0)}}),e.provider("tagsInputConfig",function(){var h={},g={},t=3;this.setDefaults=function(e,t){return h[e]=t,this},this.setActiveInterpolation=function(e,t){return g[e]=t,this},this.setTextAutosizeThreshold=function(e){return t=e,this},this.$get=["$interpolate",function(f){var p={};return p[String]=function(e){return e},p[Number]=function(e){return parseInt(e,10)},p[Boolean]=function(e){return"true"===e.toLowerCase()},p[RegExp]=function(e){return new RegExp(e)},{load:function(l,u,c,e){var d=function(){return!0};u.options={},angular.forEach(e,function(e,t){var n,r,i,a,o,s;n=e[0],r=e[1],i=e[2]||d,a=p[n],o=function(){var e=h[l]&&h[l][t];return angular.isDefined(e)?e:r},s=function(e){u.options[t]=e&&i(e)?a(e):o()},g[l]&&g[l][t]?c.$observe(t,function(e){s(e),u.events.trigger("option-change",{name:t,newValue:e})}):s(c[t]&&f(c[t])(u.$parent))})},getTextAutosizeThreshold:function(){return t}}}]}),e.factory("tiUtil",["$timeout","$q",function(i,t){var a={debounce:function(t,n){var r;return function(){var e=arguments;i.cancel(r),r=i(function(){t.apply(null,e)},n)}},makeObjectArray:function(e,n){if(!angular.isArray(e)||0===e.length||angular.isObject(e[0]))return e;var r=[];return e.forEach(function(e){var t={};t[n]=e,r.push(t)}),r},findInObjectArray:function(e,t,n,r){var i=null;return r=r||a.defaultComparer,e.some(function(e){if(r(e[n],t[n]))return i=e,!0}),i},defaultComparer:function(e,t){return a.safeToString(e).toLowerCase()===a.safeToString(t).toLowerCase()},safeHighlight:function(e,t){if(!t)return e;e=a.encodeHTML(e),t=a.encodeHTML(t);var n=new RegExp("&[^;]+;|"+t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi");return e.replace(n,function(e){return e.toLowerCase()===t.toLowerCase()?"<em>"+e+"</em>":e})},safeToString:function(e){return angular.isUndefined(e)||null==e?"":e.toString().trim()},encodeHTML:function(e){return a.safeToString(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},handleUndefinedResult:function(t,n){return function(){var e=t.apply(null,arguments);return angular.isUndefined(e)?n:e}},replaceSpacesWithDashes:function(e){return a.safeToString(e).replace(/\s/g,"-")},isModifierOn:function(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey},promisifyValue:function(e){return e=!!angular.isUndefined(e)||e,t[e?"when":"reject"]()},simplePubSub:function(){var r={};return{on:function(e,t,n){return e.split(" ").forEach(function(e){r[e]||(r[e]=[]),(n?[].unshift:[].push).call(r[e],t)}),this},trigger:function(e,t){return(r[e]||[]).every(function(e){return a.handleUndefinedResult(e,!0)(t)}),this}}}};return a}]),e.run(["$templateCache",function(e){e.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="getTagClass(tag, $index)" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item scope="templateScope" data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),e.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),e.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="getSuggestionClass(item, $index)" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match scope="templateScope" data="::item"></ti-autocomplete-match></li></ul></div>'),e.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}(),function(e,t){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e():t.rangy=e()}(function(){var r="object",i="function",n="undefined",l=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],u=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],t=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],a=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function c(e,t){var n=typeof e[t];return n==i||!(n!=r||!e[t])||"unknown"==n}function o(e,t){return!(typeof e[t]!=r||!e[t])}function e(e,t){return typeof e[t]!=n}function s(r){return function(e,t){for(var n=t.length;n--;)if(!r(e,t[n]))return!1;return!0}}var d=s(c),f=s(o),p=s(e);function h(e){return e&&d(e,a)&&p(e,t)}function g(e){return o(e,"body")?e.body:e.getElementsByTagName("body")[0]}var m,v,y={},b=typeof window!=n&&typeof document!=n,$={isHostMethod:c,isHostObject:o,isHostProperty:e,areHostMethods:d,areHostObjects:f,areHostProperties:p,isTextRange:h,getBody:g,forEach:[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n],n)}},w={version:"1.3.0",initialized:!1,isBrowser:b,supported:!0,util:$,features:{},modules:y,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==n||rangyAutoInitialize}};function S(e){typeof console!=n&&c(console,"log")&&console.log(e)}function x(e,t){b&&t?alert(e):S(e)}function C(e){w.initialized=!0,w.supported=!1,x("Rangy is not supported in this environment. Reason: "+e,w.config.alertOnFail)}w.fail=C,w.warn=function(e){x("Rangy warning: "+e,w.config.alertOnWarn)},!{}.hasOwnProperty?C("hasOwnProperty not supported"):($.extend=m=function(e,t,n){var r,i;for(var a in t)t.hasOwnProperty(a)&&(r=e[a],i=t[a],n&&null!==r&&"object"==typeof r&&null!==i&&"object"==typeof i&&m(r,i,!0),e[a]=i);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},$.createOptions=function(e,t){var n={};return m(n,t),e&&m(n,e),n}),b||C("Rangy can only run in a browser"),function(){var e;if(b){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e[n];return t}),$.toArray=e}(),b&&(c(document,"addEventListener")?v=function(e,t,n){e.addEventListener(t,n,!1)}:c(document,"attachEvent")?v=function(e,t,n){e.attachEvent("on"+t,n)}:C("Document does not have required addEventListener or attachEvent method"),$.addListener=v);var E=[];function T(e){return e.message||e.description||String(e)}function D(){if(b&&!w.initialized){var e,t=!1,n=!1;c(document,"createRange")&&(e=document.createRange(),d(e,u)&&p(e,l)&&(t=!0));var r=g(document);if(r&&"body"==r.nodeName.toLowerCase())if(r&&c(r,"createTextRange")&&h(e=r.createTextRange())&&(n=!0),t||n){var i;for(var a in w.initialized=!0,w.features={implementsDomRange:t,implementsTextRange:n},y)(i=y[a])instanceof A&&i.init(i,w);for(var o=0,s=E.length;o<s;++o)try{E[o](w)}catch(e){S("Rangy init listener threw an exception. Continuing. Detail: "+T(e))}}else C("Neither Range nor TextRange are available");else C("No body element found")}}function k(e,t,n){n&&(e+=" in module "+n.name),w.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function R(e,t,n,r){e[t]=function(){return k(t,n,r),e[n].apply(e,$.toArray(arguments))}}$.deprecationNotice=k,$.createAliasForDeprecatedMethod=R,w.init=D,w.addInitListener=function(e){w.initialized?e(w):E.push(e)};var M=[];function A(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function N(t,e,n){var r=new A(t,e,function(e){if(!e.initialized){e.initialized=!0;try{n(w,e),e.supported=!0}catch(e){S("Module '"+t+"' failed to load: "+T(e)),e.stack&&S(e.stack)}}});return y[t]=r}function O(){}w.addShimListener=function(e){M.push(e)},b&&(w.shim=w.createMissingNativeApi=function(e){e=e||window,D();for(var t=0,n=M.length;t<n;++t)M[t](e)},R(w,"createMissingNativeApi","shim")),A.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,i=n.length;r<i;++r){if(t=n[r],!((e=y[t])&&e instanceof A))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){w.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){w.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},w.createModule=function(e){var t,n=N(e,2==arguments.length?(t=arguments[1],[]):(t=arguments[2],arguments[1]),t);w.initialized&&w.supported&&n.init()},w.createCoreModule=function(e,t,n){N(e,t,n)},w.RangePrototype=O,w.rangePrototype=new O,w.selectionPrototype=new function(){},w.createCoreModule("DomUtil",[],function(n,u){var r="undefined",i=n.util,o=i.getBody;i.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||u.fail("document missing a Node creation method"),i.isHostMethod(document,"getElementsByTagName")||u.fail("document missing getElementsByTagName method");var e=document.createElement("div");i.areHostMethods(e,["insertBefore","appendChild","cloneNode"])||u.fail("Incomplete Element implementation"),i.isHostProperty(e,"innerHTML")||u.fail("Element is missing innerHTML property");var t=document.createTextNode("test");i.areHostMethods(t,["splitText","deleteData","insertData","appendData","cloneNode"])||u.fail("Incomplete Text Node implementation");var a=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};function c(e){for(var t=0;e=e.previousSibling;)++t;return t}function d(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(a(r,n))return n;return null}function s(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function f(e,t,n){for(var r,i=n?e:e.parentNode;i;){if((r=i.parentNode)===t)return i;i=r}return null}function l(e){var t=e.nodeType;return 3==t||4==t||8==t}function p(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=r)return e.ownerDocument;if(typeof e.document!=r)return e.document;if(e.parentNode)return h(e.parentNode);throw u.createError("getDocument: no document found for node")}function g(e){var t=h(e);if(typeof t.defaultView!=r)return t.defaultView;if(typeof t.parentWindow!=r)return t.parentWindow;throw u.createError("Cannot get a window object for node")}function m(e){if(typeof e.contentDocument!=r)return e.contentDocument;if(typeof e.contentWindow!=r)return e.contentWindow.document;throw u.createError("getIframeDocument: No Document object found for iframe element")}function v(e){return e&&i.isHostMethod(e,"setTimeout")&&i.isHostObject(e,"document")}var y,b=!1;function $(e){try{return e.parentNode,!1}catch(e){return!0}}function w(e){if(!e)return"[No node]";if(b&&$(e))return"[Broken node]";if(l(e))return'"'+e.data+'"';if(1!=e.nodeType)return e.nodeName;var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+c(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}function S(e){this.root=e,this._next=e}function x(e,t){this.node=e,this.offset=t}function C(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}!function(){var e=document.createElement("b");e.innerHTML="1";var t=e.firstChild;e.innerHTML="<br />",b=$(t),n.features.crashyTextNodes=b}(),typeof window.getComputedStyle!=r?y=function(e,t){return g(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=r?y=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:u.fail("No means of obtaining computed style properties found"),S.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},x.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+w(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},(C.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24}).toString=function(){return this.message},n.dom={arrayContains:a,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==r||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){var t=e.parentNode;return 1==t.nodeType?t:null},getNodeIndex:c,getNodeLength:function(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}},getCommonAncestor:d,isAncestorOf:s,isOrIsAncestorOf:function(e,t){return s(e,t,!0)},getClosestAncestorIn:f,isCharacterDataNode:l,isTextOrCommentNode:function(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t},insertAfter:p,splitDataNode:function(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),p(r,e),n)for(var i,a=0;i=n[a++];)i.node==e&&i.offset>t?(i.node=r,i.offset-=t):i.node==e.parentNode&&i.offset>c(e)&&++i.offset;return r},getDocument:h,getWindow:g,getIframeWindow:function(e){if(typeof e.contentWindow!=r)return e.contentWindow;if(typeof e.contentDocument!=r)return e.contentDocument.defaultView;throw u.createError("getIframeWindow: No Window object found for iframe element")},getIframeDocument:m,getBody:o,isWindow:v,getContentDocument:function(e,t,n){var r;if(e?i.isHostProperty(e,"nodeType")?r=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?m(e):h(e):v(e)&&(r=e.document):r=document,!r)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return r},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,t,n,r){var i,a,o,s,l;if(e==n)return t===r?0:t<r?-1:1;if(i=f(n,e,!0))return t<=c(i)?-1:1;if(i=f(e,n,!0))return c(i)<r?-1:1;if(!(a=d(e,n)))throw new Error("comparePoints error: nodes have no common ancestor");if((o=e===a?a:f(e,a,!0))===(s=n===a?a:f(n,a,!0)))throw u.createError("comparePoints got to case 4 and childA and childB are the same!");for(l=a.firstChild;l;){if(l===o)return-1;if(l===s)return 1;l=l.nextSibling}},isBrokenNode:$,inspectNode:w,getComputedStyleProperty:y,createTestElement:function(e,t,n){var r=o(e),i=e.createElement("div");i.contentEditable=""+!!n,t&&(i.innerHTML=t);var a=r.firstChild;return a?r.insertBefore(i,a):r.appendChild(i),i},removeNode:function(e){return e.parentNode.removeChild(e)},fragmentFromNodeChildren:function(e){for(var t,n=h(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},createIterator:function(e){return new S(e)},DomPosition:x},n.DOMException=C}),w.createCoreModule("DomRange",["DomUtil"],function(o,e){var s=o.dom,r=o.util,t=s.DomPosition,l=o.DOMException,d=s.isCharacterDataNode,f=s.getNodeIndex,u=s.isOrIsAncestorOf,i=s.getDocument,p=s.comparePoints,c=s.splitDataNode,h=s.getClosestAncestorIn,g=s.getNodeLength,a=s.arrayContains,m=s.getRootContainer,n=o.features.crashyTextNodes,v=s.removeNode;function y(e,t){return 3!=e.nodeType&&(u(e,t.startContainer)||u(e,t.endContainer))}function b(e){return e.document||i(e.startContainer)}function $(e){return new t(e.parentNode,f(e))}function w(e){return new t(e.parentNode,f(e)+1)}function S(e,t,n){var r=11==e.nodeType?e.firstChild:e;return d(t)?n==t.length?s.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:c(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function x(e,t,n){if(W(e),W(t),b(t)!=b(e))throw new l("WRONG_DOCUMENT_ERR");var r=p(e.startContainer,e.startOffset,t.endContainer,t.endOffset),i=p(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?r<=0&&0<=i:r<0&&0<i}function C(e,t,n){var r,i,a,o;for(n=n||{stop:!1};a=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(a))return void(n.stop=!0);if(C(o=e.getSubtreeIterator(),t,n),o.detach(),n.stop)return}else for(r=s.createIterator(a);i=r.next();)if(!1===t(i))return void(n.stop=!0)}function E(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(E(t=e.getSubtreeIterator()),t.detach()):e.remove()}function T(e){for(var t,n,r=b(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(T(n)),n.detach()):e.remove(),10==t.nodeType)throw new l("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function D(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+s.inspectNode(e.startContainer)+":"+e.startOffset+", "+s.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function k(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&d(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||d(this.sc)?h(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||d(this.ec)?h(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}k.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,d(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!d(n)||n!==this.sc&&n!==this.ec?n.parentNode&&v(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return y(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new fe(b(this.range));var t=this._current,n=t,r=0,i=t,a=g(t);u(t,this.sc)&&(n=this.sc,r=this.so),u(t,this.ec)&&(i=this.ec,a=this.eo),de(e,n,r,i,a)}return new k(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var R=[1,3,4,5,7,8,10],M=[2,9,11],A=[1,3,4,5,7,8,10,11],N=[1,3,4,5,7,8];function O(i){return function(e,t){for(var n,r=t?e:e.parentNode;r;){if(n=r.nodeType,a(i,n))return r;r=r.parentNode}return null}}var I=O([9,11]),_=O([5,6,10,12]),P=O([6,10,12]);function H(e,t){if(P(e,t))throw new l("INVALID_NODE_TYPE_ERR")}function L(e,t){if(!a(t,e.nodeType))throw new l("INVALID_NODE_TYPE_ERR")}function F(e,t){if(t<0||t>(d(e)?e.length:e.childNodes.length))throw new l("INDEX_SIZE_ERR")}function z(e,t){if(I(e,!0)!==I(t,!0))throw new l("WRONG_DOCUMENT_ERR")}function U(e){if(_(e,!0))throw new l("NO_MODIFICATION_ALLOWED_ERR")}function B(e,t){if(!e)throw new l(t)}function j(e,t){return t<=(d(e)?e.length:e.childNodes.length)}function V(e){return!!e.startContainer&&!!e.endContainer&&!(n&&(s.isBrokenNode(e.startContainer)||s.isBrokenNode(e.endContainer)))&&m(e.startContainer)==m(e.endContainer)&&j(e.startContainer,e.startOffset)&&j(e.endContainer,e.endOffset)}function W(e){if(!V(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}var q=document.createElement("style"),G=!1;try{q.innerHTML="<b>x</b>",G=3==q.firstChild.nodeType}catch(e){}var Y=(o.features.htmlParsingConforms=G)?function(e){var t=this.startContainer,n=i(t);if(!t)throw new l("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:d(t)&&(r=s.parentElement(t)),(r=null===r||"HTML"==r.nodeName&&s.isHtmlNamespace(i(r).documentElement)&&s.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1)).innerHTML=e,s.fragmentFromNodeChildren(r)}:function(e){var t=b(this).createElement("body");return t.innerHTML=e,s.fragmentFromNodeChildren(t)};function K(e,t){W(e);var n=e.startContainer,r=e.startOffset,i=e.endContainer,a=e.endOffset,o=n===i;d(i)&&0<a&&a<i.length&&c(i,a,t),d(n)&&0<r&&r<n.length&&(n=c(n,r,t),o?(a-=r,i=n):i==n.parentNode&&a>=f(n)&&a++,r=0),e.setStartAndEnd(n,r,i,a)}function X(e){W(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var Z=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],J=0,Q=1,ee=2,te=3,ne=0,re=1,ie=2,ae=3;function oe(e){e.START_TO_START=J,e.START_TO_END=Q,e.END_TO_END=ee,e.END_TO_START=te,e.NODE_BEFORE=ne,e.NODE_AFTER=re,e.NODE_BEFORE_AND_AFTER=ie,e.NODE_INSIDE=ae}function se(e){oe(e),oe(e.prototype)}function le(o,s){return function(){W(this);var e,t=this.startContainer,n=this.startOffset,r=this.commonAncestorContainer,i=new k(this,!0);t!==r&&(t=(e=w(h(t,r,!0))).node,n=e.offset),C(i,U),i.reset();var a=o(i);return i.detach(),s(this,t,n,t,n),a}}function ue(e,c){function t(n,r){return function(e){L(e,R),L(m(e),M);var t=(n?$:w)(e);(r?i:a)(this,t.node,t.offset)}}function i(e,t,n){var r=e.endContainer,i=e.endOffset;t===e.startContainer&&n===e.startOffset||(m(t)==m(r)&&1!=p(t,n,r,i)||(r=t,i=n),c(e,t,n,r,i))}function a(e,t,n){var r=e.startContainer,i=e.startOffset;t===e.endContainer&&n===e.endOffset||(m(t)==m(r)&&-1!=p(t,n,r,i)||(r=t,i=n),c(e,r,i,t,n))}var n=function(){};n.prototype=o.rangePrototype,e.prototype=new n,r.extend(e.prototype,{setStart:function(e,t){H(e,!0),F(e,t),i(this,e,t)},setEnd:function(e,t){H(e,!0),F(e,t),a(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],r=t,i=n;switch(e.length){case 3:i=e[2];break;case 4:r=e[2],i=e[3]}c(this,t,n,r,i)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:t(!0,!0),setStartAfter:t(!1,!0),setEndBefore:t(!0,!1),setEndAfter:t(!1,!1),collapse:function(e){W(this),e?c(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):c(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){H(e,!0),c(this,e,0,e,g(e))},selectNode:function(e){H(e,!1),L(e,R);var t=$(e),n=w(e);c(this,t.node,t.offset,n.node,n.offset)},extractContents:le(T,c),deleteContents:le(E,c),canSurroundContents:function(){W(this),U(this.startContainer),U(this.endContainer);var e=new k(this,!0),t=e._first&&y(e._first,this)||e._last&&y(e._last,this);return e.detach(),!t},splitBoundaries:function(){K(this)},splitBoundariesPreservingPositions:function(e){K(this,e)},normalizeBoundaries:function(){W(this);var e,i=this.startContainer,a=this.startOffset,o=this.endContainer,s=this.endOffset,t=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(s=(o=e).length,e.appendData(t.data),v(t))},n=function(e){var t=e.previousSibling;if(t&&t.nodeType==e.nodeType){var n=(i=e).length;if(a=t.length,e.insertData(0,t.data),v(t),i==o)s+=a,o=i;else if(o==e.parentNode){var r=f(e);s==r?(o=e,s=n):r<s&&s--}}},r=!0;if(d(o))s==o.length?t(o):0==s&&(e=o.previousSibling)&&e.nodeType==o.nodeType&&(s=e.length,i==o&&(r=!1),e.appendData(o.data),v(o),o=e);else{if(0<s){var l=o.childNodes[s-1];l&&d(l)&&t(l)}r=!this.collapsed}if(r){if(d(i))0==a?n(i):a==i.length&&(e=i.nextSibling)&&e.nodeType==i.nodeType&&(o==e&&(s+=(o=i).length),i.appendData(e.data),v(e));else if(a<i.childNodes.length){var u=i.childNodes[a];u&&d(u)&&n(u)}}else i=o,a=s;c(this,i,a,o,s)},collapseToPoint:function(e,t){H(e,!0),F(e,t),this.setStartAndEnd(e,t)}}),se(e)}function ce(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:s.getCommonAncestor(e.startContainer,e.endContainer)}function de(e,t,n,r,i){e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=i,e.document=s.getDocument(t),ce(e)}function fe(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,ce(this)}r.extend(o.rangePrototype,{compareBoundaryPoints:function(e,t){var n,r,i,a;W(this),z(this.startContainer,t.startContainer);var o=e==te||e==J?"start":"end",s=e==Q||e==J?"start":"end";return n=this[o+"Container"],r=this[o+"Offset"],i=t[s+"Container"],a=t[s+"Offset"],p(n,r,i,a)},insertNode:function(e){if(W(this),L(e,A),U(this.startContainer),u(e,this.startContainer))throw new l("HIERARCHY_REQUEST_ERR");var t=S(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(W(this),this.collapsed)return b(this).createDocumentFragment();if(this.startContainer===this.endContainer&&d(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=b(this).createDocumentFragment()).appendChild(e),t;var n=new k(this,!0);return e=function e(t){for(var n,r,i,a=b(t.range).createDocumentFragment();r=t.next();){if(n=t.isPartiallySelectedSubtree(),r=r.cloneNode(!n),n&&(i=t.getSubtreeIterator(),r.appendChild(e(i)),i.detach()),10==r.nodeType)throw new l("HIERARCHY_REQUEST_ERR");a.appendChild(r)}return a}(n),n.detach(),e},canSurroundContents:function(){W(this),U(this.startContainer),U(this.endContainer);var e=new k(this,!0),t=e._first&&y(e._first,this)||e._last&&y(e._last,this);return e.detach(),!t},surroundContents:function(e){if(L(e,N),!this.canSurroundContents())throw new l("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);S(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){W(this);for(var e,t=new fe(b(this)),n=Z.length;n--;)t[e=Z[n]]=this[e];return t},toString:function(){W(this);var e=this.startContainer;if(e===this.endContainer&&d(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new k(this,!0);return C(n,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){W(this);var t=e.parentNode,n=f(e);if(!t)throw new l("NOT_FOUND_ERR");var r=this.comparePoint(t,n),i=this.comparePoint(t,n+1);return r<0?0<i?ie:ne:0<i?re:ae},comparePoint:function(e,t){return W(this),B(e,"HIERARCHY_REQUEST_ERR"),z(e,this.startContainer),p(e,t,this.startContainer,this.startOffset)<0?-1:0<p(e,t,this.endContainer,this.endOffset)?1:0},createContextualFragment:Y,toHtml:function(){return X(this)},intersectsNode:function(e,t){if(W(this),m(e)!=m(this.startContainer))return!1;var n=e.parentNode,r=f(e);if(!n)return!0;var i=p(n,r,this.endContainer,this.endOffset),a=p(n,r+1,this.startContainer,this.startOffset);return t?i<=0&&0<=a:i<0&&0<a},isPointInRange:function(e,t){return W(this),B(e,"HIERARCHY_REQUEST_ERR"),z(e,this.startContainer),0<=p(e,t,this.startContainer,this.startOffset)&&p(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return x(this,e,!1)},intersectsOrTouchesRange:function(e){return x(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=p(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=p(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==p(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==p(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new l("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==ae},containsNodeContents:function(e){return 0<=this.comparePoint(e,0)&&this.comparePoint(e,g(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(0<n.length){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return W(this),function(r,e,i){var a,o=!(!e||!e.length),s=!!i;o&&(a=new RegExp("^("+e.join("|")+")$"));var l=[];return C(new k(r,!1),function(e){if((!o||a.test(e.nodeType))&&(!s||i(e))){var t=r.startContainer;if(e!=t||!d(t)||r.startOffset!=t.length){var n=r.endContainer;e==n&&d(n)&&0==r.endOffset||l.push(e)}}}),l}(this,e,t)},getDocument:function(){return b(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(e){var t=b(this),n=o.createRange(t);e=e||s.getBody(t),n.selectNodeContents(e);var r=this.intersection(n),i=0,a=0;return r&&(n.setEnd(r.startContainer,r.startOffset),a=(i=n.toString().length)+r.toString().length),{start:i,end:a,containerNode:e}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,i,a,o,s=[t],l=!1,u=!1;!u&&(r=s.pop());)if(3==r.nodeType)i=n+r.length,!l&&e.start>=n&&e.start<=i&&(this.setStart(r,e.start-n),l=!0),l&&e.end>=n&&e.end<=i&&(this.setEnd(r,e.end-n),u=!0),n=i;else for(a=(o=r.childNodes).length;a--;)s.push(o[a])},getName:function(){return"DomRange"},equals:function(e){return fe.rangesEqual(this,e)},isValid:function(){return V(this)},inspect:function(){return D(this)},detach:function(){}}),ue(fe,de),r.extend(fe,{rangeProperties:Z,RangeIterator:k,copyComparisonConstants:se,createPrototypeRange:ue,inspect:D,toHtml:X,getRangeDocument:b,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),o.DomRange=fe}),w.createCoreModule("WrappedRange",["DomRange"],function(c,d){var f,e,S=c.dom,p=c.util,x=S.DomPosition,h=c.DomRange,g=S.getBody,m=S.getContentDocument,C=S.isCharacterDataNode;if(c.features.implementsDomRange&&function(){var t,n,r=h.rangeProperties;function i(e){for(var t,n=r.length;n--;)e[t=r[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}f=function(e){if(!e)throw d.createError("WrappedRange: Range must be specified");this.nativeRange=e,i(this)},h.createPrototypeRange(f,function(e,t,n,r,i){var a=e.startContainer!==t||e.startOffset!=n,o=e.endContainer!==r||e.endOffset!=i,s=!e.equals(e.nativeRange);(a||o||s)&&(e.setEnd(r,i),e.setStart(t,n))}),(t=f.prototype).selectNode=function(e){this.nativeRange.selectNode(e),i(this)},t.cloneContents=function(){return this.nativeRange.cloneContents()},t.surroundContents=function(e){this.nativeRange.surroundContents(e),i(this)},t.collapse=function(e){this.nativeRange.collapse(e),i(this)},t.cloneRange=function(){return new f(this.nativeRange.cloneRange())},t.refresh=function(){i(this)},t.toString=function(){return this.nativeRange.toString()};var e=document.createTextNode("test");g(document).appendChild(e);var a=document.createRange();a.setStart(e,0),a.setEnd(e,0);try{a.setStart(e,1),t.setStart=function(e,t){this.nativeRange.setStart(e,t),i(this)},t.setEnd=function(e,t){this.nativeRange.setEnd(e,t),i(this)},n=function(t){return function(e){this.nativeRange[t](e),i(this)}}}catch(e){t.setStart=function(t,n){try{this.nativeRange.setStart(t,n)}catch(e){this.nativeRange.setEnd(t,n),this.nativeRange.setStart(t,n)}i(this)},t.setEnd=function(t,n){try{this.nativeRange.setEnd(t,n)}catch(e){this.nativeRange.setStart(t,n),this.nativeRange.setEnd(t,n)}i(this)},n=function(n,r){return function(t){try{this.nativeRange[n](t)}catch(e){this.nativeRange[r](t),this.nativeRange[n](t)}i(this)}}}t.setStartBefore=n("setStartBefore","setEndBefore"),t.setStartAfter=n("setStartAfter","setEndAfter"),t.setEndBefore=n("setEndBefore","setStartBefore"),t.setEndAfter=n("setEndAfter","setStartAfter"),t.selectNodeContents=function(e){this.setStartAndEnd(e,0,S.getNodeLength(e))},a.selectNodeContents(e),a.setEnd(e,3);var o=document.createRange();o.selectNodeContents(e),o.setEnd(e,4),o.setStart(e,2),-1==a.compareBoundaryPoints(a.START_TO_END,o)&&1==a.compareBoundaryPoints(a.END_TO_START,o)?t.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:t.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var s=document.createElement("div");s.innerHTML="123";var l=s.firstChild,u=g(document);u.appendChild(s),a.setStart(l,1),a.setEnd(l,2),a.deleteContents(),"13"==l.data&&(t.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},t.extractContents=function(){var e=this.nativeRange.extractContents();return i(this),e}),u.removeChild(s),u=null,p.isHostMethod(a,"createContextualFragment")&&(t.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),g(document).removeChild(e),t.getName=function(){return"WrappedRange"},c.WrappedRange=f,c.createNativeRange=function(e){return(e=m(e,d,"createNativeRange")).createRange()}}(),c.features.implementsTextRange){var a=function(e,t,n,r,i){var a=e.duplicate();a.collapse(n);var o=a.parentElement();if(S.isOrIsAncestorOf(t,o)||(o=t),!o.canHaveHTML){var s=new x(o.parentNode,S.getNodeIndex(o));return{boundaryPosition:s,nodeInfo:{nodeIndex:s.offset,containerElement:s.node}}}var l=S.getDocument(o).createElement("span");l.parentNode&&S.removeNode(l);for(var u,c,d,f,p,h=n?"StartToStart":"StartToEnd",g=i&&i.containerElement==o?i.nodeIndex:0,m=o.childNodes.length,v=m,y=v;y==m?o.appendChild(l):o.insertBefore(l,o.childNodes[y]),a.moveToElementText(l),0!=(u=a.compareEndPoints(h,e))&&g!=v;){if(-1==u){if(v==g+1)break;g=y}else v=v==g+1?g:y;y=Math.floor((g+v)/2),o.removeChild(l)}if(p=l.nextSibling,-1==u&&p&&C(p)){var b;if(a.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(p.data)){var $=a.duplicate(),w=$.text.replace(/\r\n/g,"\r").length;for(b=$.moveStart("character",w);-1==(u=$.compareEndPoints("StartToEnd",$));)b++,$.moveStart("character",1)}else b=a.text.length;f=new x(p,b)}else c=(r||!n)&&l.previousSibling,f=(d=(r||n)&&l.nextSibling)&&C(d)?new x(d,0):c&&C(c)?new x(c,c.data.length):new x(o,S.getNodeIndex(l));return S.removeNode(l),{boundaryPosition:f,nodeInfo:{nodeIndex:y,containerElement:o}}},i=function(e,t){var n,r,i,a,o=e.offset,s=S.getDocument(e.node),l=g(s).createTextRange(),u=C(e.node);return r=u?(n=e.node).parentNode:(n=o<(a=e.node.childNodes).length?a[o]:null,e.node),(i=s.createElement("span")).innerHTML="&#feff;",n?r.insertBefore(i,n):r.appendChild(i),l.moveToElementText(i),l.collapse(!t),r.removeChild(i),u&&l[t?"moveStart":"moveEnd"]("character",o),l};((e=function(e){this.textRange=e,this.refresh()}).prototype=new h(document)).refresh=function(){var e,t,n,r,i=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();(n=e.duplicate()).collapse(!1);var i=n.parentElement(),a=r==i?r:S.getCommonAncestor(r,i);return a==t?a:S.getCommonAncestor(t,a)}(this.textRange);t=0==(r=this.textRange).compareEndPoints("StartToEnd",r)?e=a(this.textRange,i,!0,!0).boundaryPosition:(e=(n=a(this.textRange,i,!0,!1)).boundaryPosition,a(this.textRange,i,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},e.prototype.getName=function(){return"WrappedTextRange"},h.copyComparisonConstants(e);var t=function(e){if(e.collapsed)return i(new x(e.startContainer,e.startOffset),!0);var t=i(new x(e.startContainer,e.startOffset),!0),n=i(new x(e.endContainer,e.endOffset),!1),r=g(h.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(e.rangeToTextRange=t,e.prototype.toTextRange=function(){return t(this)},c.WrappedTextRange=e,!c.features.implementsDomRange||c.config.preferTextRange){var n=Function("return this;")();void 0===n.Range&&(n.Range=e),c.createNativeRange=function(e){return e=m(e,d,"createNativeRange"),g(e).createTextRange()},c.WrappedRange=e}}c.createRange=function(e){return e=m(e,d,"createRange"),new c.WrappedRange(c.createNativeRange(e))},c.createRangyRange=function(e){return e=m(e,d,"createRangyRange"),new h(e)},p.createAliasForDeprecatedMethod(c,"createIframeRange","createRange"),p.createAliasForDeprecatedMethod(c,"createIframeRangyRange","createRangyRange"),c.addShimListener(function(e){var t=e.document;void 0===t.createRange&&(t.createRange=function(){return c.createRange(t)}),t=e=null})}),w.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(d,l){d.config.checkSelectionRanges=!0;var i,a,e="number",f=d.dom,t=d.util,n=t.isHostMethod,s=d.DomRange,o=d.WrappedRange,r=d.DOMException,u=f.DomPosition,c=d.features,p="Control",h=f.getDocument,g=f.getBody,m=s.rangesEqual;function v(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function y(e,t){if(e){if(f.isWindow(e))return e;if(e instanceof V)return e.win;var n=f.getContentDocument(e,l,t);return f.getWindow(n)}return window}function b(e){return y(e,"getDocSelection").document.selection}function $(e){var t=!1;return e.anchorNode&&(t=1==f.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}var w=n(window,"getSelection"),S=t.isHostObject(document,"selection");c.implementsWinGetSelection=w;var x=(c.implementsDocSelection=S)&&(!w||d.config.preferTextRange);if(x)i=b,d.isSelectionValid=function(e){var t=y(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||h(n.createRange().parentElement())==t};else{if(!w)return l.fail("Neither document.selection or window.getSelection() detected."),!1;i=function(e){return y(e,"getWinSelection").getSelection()},d.isSelectionValid=function(){return!0}}var C=(d.getNativeSelection=i)();if(!C)return l.fail("Native selection was null (possibly issue 138?)"),!1;var E=d.createNativeRange(document),T=g(document),D=t.areHostProperties(C,["anchorNode","focusNode","anchorOffset","focusOffset"]);c.selectionHasAnchorAndFocus=D;var k=n(C,"extend");c.selectionHasExtend=k;var R=typeof C.rangeCount==e;c.selectionHasRangeCount=R;var M=!1,A=!0,N=k?function(e,t){var n=s.getRangeDocument(t),r=d.createRange(n);r.collapseToPoint(t.endContainer,t.endOffset),e.addRange(L(r)),e.extend(t.startContainer,t.startOffset)}:null;t.areHostMethods(C,["addRange","getRangeAt","removeAllRanges"])&&typeof C.rangeCount==e&&c.implementsDomRange&&function(){var e=window.getSelection();if(e){for(var t=e.rangeCount,n=1<t,r=[],i=$(e),a=0;a<t;++a)r[a]=e.getRangeAt(a);var o=f.createTestElement(document,"",!1),s=o.appendChild(document.createTextNode("")),l=document.createRange();if(l.setStart(s,1),l.collapse(!0),e.removeAllRanges(),e.addRange(l),A=1==e.rangeCount,e.removeAllRanges(),!n){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&36<=parseInt(u[1]))M=!1;else{var c=l.cloneRange();l.setStart(s,0),c.setEnd(s,3),c.setStart(s,2),e.addRange(l),e.addRange(c),M=2==e.rangeCount}}for(f.removeNode(o),e.removeAllRanges(),a=0;a<t;++a)0==a&&i?N?N(e,r[a]):(d.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),e.addRange(r[a])):e.addRange(r[a])}}(),c.selectionSupportsMultipleRanges=M,c.collapsedNonEditableSelectionsSupported=A;var O,I,_=!1;function P(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function H(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function L(e){var t;return e instanceof s?((t=d.createNativeRange(e.getDocument())).setEnd(e.endContainer,e.endOffset),t.setStart(e.startContainer,e.startOffset)):e instanceof o?t=e.nativeRange:c.implementsDomRange&&e instanceof f.getWindow(e.startContainer).Range&&(t=e),t}function F(e){var t=e.getNodes();if(!function(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!f.isAncestorOf(e[0],e[t]))return!1;return!0}(t))throw l.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function z(e){return!!e&&void 0!==e.text}function U(e,t){var n=new o(t);e._ranges=[n],P(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function B(e){if(e._ranges.length=0,"None"==e.docSelection.type)H(e);else{var t=e.docSelection.createRange();if(z(t))U(e,t);else{e.rangeCount=t.length;for(var n,r=h(t.item(0)),i=0;i<e.rangeCount;++i)(n=d.createRange(r)).selectNode(t.item(i)),e._ranges.push(n);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,P(e,e._ranges[e.rangeCount-1],!1)}}}function j(e,t){for(var n=e.docSelection.createRange(),r=F(t),i=h(n.item(0)),a=g(i).createControlRange(),o=0,s=n.length;o<s;++o)a.add(n.item(o));try{a.add(r)}catch(e){throw l.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),B(e)}function V(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function W(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}T&&n(T,"createControlRange")&&(O=T.createControlRange(),t.areHostProperties(O,["item","add"])&&(_=!0)),c.implementsControlRange=_,a=D?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},n(C,"getRangeAt")?I=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:D&&(I=function(e){var t=h(e.anchorNode),n=d.createRange(t);return n.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),n.collapsed!==this.isCollapsed&&n.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),n}),V.prototype=d.selectionPrototype;var q=[];function G(e,t){for(var n,r,i=q.length;i--;)if(r=(n=q[i]).selection,"deleteAll"==t)W(r);else if(n.win==e)return"delete"==t?(q.splice(i,1),!0):r;return"deleteAll"==t&&(q.length=0),null}var Y=function(e){if(e&&e instanceof V)return e.refresh(),e;var t=G(e=y(e,"getNativeSelection")),n=i(e),r=S?b(e):null;return t?(t.nativeSelection=n,t.docSelection=r,t.refresh()):(t=new V(n,r,e),q.push({win:e,selection:t})),t};d.getSelection=Y,t.createAliasForDeprecatedMethod(d,"getIframeSelection","getSelection");var K,X=V.prototype;function Z(e,t){for(var n,r=h(t[0].startContainer),i=g(r).createControlRange(),a=0,o=t.length;a<o;++a){n=F(t[a]);try{i.add(n)}catch(e){throw l.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),B(e)}if(!x&&D&&t.areHostMethods(C,["removeAllRanges","addRange"])){X.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),H(this)};var J=function(e,t){N(e.nativeSelection,t),e.refresh()};X.addRange=R?function(e,t){if(_&&S&&this.docSelection.type==p)j(this,e);else if(v(t)&&k)J(this,e);else{var n;n=M?this.rangeCount:(this.removeAllRanges(),0);var r=L(e).cloneRange();try{this.nativeSelection.addRange(r)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==n+1){if(d.config.checkSelectionRanges){var i=I(this.nativeSelection,this.rangeCount-1);i&&!m(i,e)&&(e=new o(i))}this._ranges[this.rangeCount-1]=e,P(this,e,Q(this.nativeSelection)),this.isCollapsed=a(this)}else this.refresh()}}:function(e,t){v(t)&&k?J(this,e):(this.nativeSelection.addRange(L(e)),this.refresh())},X.setRanges=function(e){if(_&&S&&1<e.length)Z(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(n(C,"empty")&&n(E,"select")&&_&&x))return l.fail("No means of selecting a Range or TextRange was found"),!1;X.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=h(this.anchorNode);else if(this.docSelection.type==p){var t=this.docSelection.createRange();t.length&&(e=h(t.item(0)))}if(e)g(e).createTextRange().select(),this.docSelection.empty()}}catch(e){}H(this)},X.addRange=function(e){this.docSelection.type==p?j(this,e):(d.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,P(this,e,!1))},X.setRanges=function(e){this.removeAllRanges();var t=e.length;1<t?Z(this,e):t&&this.addRange(e[0])}}if(X.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new r("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},x)K=function(e){var t;d.isSelectionValid(e.win)?t=e.docSelection.createRange():(t=g(e.win.document).createTextRange()).collapse(!0),e.docSelection.type==p?B(e):z(t)?U(e,t):H(e)};else if(n(C,"getRangeAt")&&typeof C.rangeCount==e)K=function(e){if(_&&S&&e.docSelection.type==p)B(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var t=0,n=e.rangeCount;t<n;++t)e._ranges[t]=new d.WrappedRange(e.nativeSelection.getRangeAt(t));P(e,e._ranges[e.rangeCount-1],Q(e.nativeSelection)),e.isCollapsed=a(e)}else H(e)};else{if(!D||"boolean"!=typeof C.isCollapsed||"boolean"!=typeof E.collapsed||!c.implementsDomRange)return l.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;K=function(e){var t,n,r,i=e.nativeSelection;i.anchorNode?(t=I(i,0),e._ranges=[t],e.rangeCount=1,r=(n=e).nativeSelection,n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset,e.isCollapsed=a(e)):H(e)}}X.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(K(this),e){var i=t.length;if(i!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;i--;)if(!m(t[i],this._ranges[i]))return!0;return!1}};var Q,ee=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,i=n.length;r<i;++r)m(t,n[r])||e.addRange(n[r]);e.rangeCount||H(e)};function te(e,t){if(e.win.document!=h(t))throw new r("WRONG_DOCUMENT_ERR")}function ne(r){return function(e,t){var n;this.rangeCount?(n=this.getRangeAt(0))["set"+(r?"Start":"End")](e,t):(n=d.createRange(this.win.document)).setStartAndEnd(e,t),this.setSingleRange(n,this.isBackward())}}function re(e){var t=[],n=new u(e.anchorNode,e.anchorOffset),r=new u(e.focusNode,e.focusOffset),i="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var a=0,o=e.rangeCount;a<o;++a)t[a]=s.inspect(e.getRangeAt(a));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}X.removeRange=_&&S?function(e){if(this.docSelection.type==p){for(var t=this.docSelection.createRange(),n=F(e),r=h(t.item(0)),i=g(r).createControlRange(),a=!1,o=0,s=t.length;o<s;++o)t.item(o)!==n||a?i.add(t.item(o)):a=!0;i.select(),B(this)}else ee(this,e)}:function(e){ee(this,e)},!x&&D&&c.implementsDomRange?(Q=$,X.isBackward=function(){return Q(this)}):Q=X.isBackward=function(){return!1},X.isBackwards=X.isBackward,X.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},X.collapse=function(e,t){te(this,e);var n=d.createRange(e);n.collapseToPoint(e,t),this.setSingleRange(n),this.isCollapsed=!0},X.collapseToStart=function(){if(!this.rangeCount)throw new r("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},X.collapseToEnd=function(){if(!this.rangeCount)throw new r("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},X.selectAllChildren=function(e){te(this,e);var t=d.createRange(e);t.selectNodeContents(e),this.setSingleRange(t)},X.deleteFromDocument=function(){if(_&&S&&this.docSelection.type==p){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),f.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,i=n.length;r<i;++r)n[r].deleteContents();this.addRange(n[i-1])}}},X.eachRange=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(e(this.getRangeAt(n)))return t},X.getAllRanges=function(){var t=[];return this.eachRange(function(e){t.push(e)}),t},X.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},X.callMethodOnEachRange=function(t,n){var r=[];return this.eachRange(function(e){r.push(e[t].apply(e,n||[]))}),r},X.setStart=ne(!0),X.setEnd=ne(!1),d.rangePrototype.select=function(e){Y(this.getDocument()).setSingleRange(this,e)},X.changeEachRange=function(t){var n=[],e=this.isBackward();this.eachRange(function(e){t(e),n.push(e)}),this.removeAllRanges(),e&&1==n.length?this.addRange(n[0],"backward"):this.setRanges(n)},X.containsNode=function(t,n){return this.eachRange(function(e){return e.containsNode(t,n)},!0)||!1},X.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},X.moveToBookmark=function(e){for(var t,n,r=[],i=0;t=e.rangeBookmarks[i++];)(n=d.createRange(this.win)).moveToBookmark(t),r.push(n);e.backward?this.setSingleRange(r[0],"backward"):this.setRanges(r)},X.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},X.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},X.toHtml=function(){var t=[];return this.eachRange(function(e){t.push(s.toHtml(e))}),t.join("")},c.implementsTextRange&&(X.getNativeTextRange=function(){var e;if(e=this.docSelection){var t=e.createRange();if(z(t))return t;throw l.createError("getNativeTextRange: selection is a control selection")}if(0<this.rangeCount)return d.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw l.createError("getNativeTextRange: selection contains no range")}),X.getName=function(){return"WrappedSelection"},X.inspect=function(){return re(this)},X.detach=function(){G(this.win,"delete"),W(this)},V.detachAll=function(){G(null,"deleteAll")},V.inspect=re,V.isDirectionBackward=v,d.Selection=V,d.selectionPrototype=X,d.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return Y(e)}),e=null})});var I=!1,_=function(e){I||(I=!0,!w.initialized&&w.config.autoInitialize&&D())};return b&&("complete"==document.readyState?_():(c(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",_,!1),v(window,"load",_))),w},this),function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("ClassApplier",["WrappedSelection"],function(r,p){var h=r.dom,a=h.DomPosition,o=h.arrayContains,e=r.util,g=e.forEach,s=e.isHostMethod(document,"createElementNS");function f(e,t){for(var n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))return!1;return!0}function m(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function l(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function u(e,t){return"object"==typeof e.classList?e.classList.contains(t):l("string"==typeof e.className?e.className:e.getAttribute("class"),t)}function d(e,t){if("object"==typeof e.classList)e.classList.add(t);else{var n="string"==typeof e.className,r=n?e.className:e.getAttribute("class");r?l(r,t)||(r+=" "+t):r=t,n?e.className=r:e.setAttribute("class",r)}}var v=function(){function i(e,t,n){return t&&n?" ":""}return function(e,t){if("object"==typeof e.classList)e.classList.remove(t);else{var n="string"==typeof e.className,r=n?e.className:e.getAttribute("class");r=r.replace(new RegExp("(^|\\s)"+t+"(\\s|$)"),i),n?e.className=r:e.setAttribute("class",r)}}}();function t(e){return"string"==typeof e.className?e.className:e.getAttribute("class")}function y(e){return e&&e.split(/\s+/).sort().join(" ")}function n(e){return y(t(e))}function c(e,t){return n(e)==n(t)}function b(e,t){for(var n=t.split(/\s+/),r=0,i=n.length;r<i;++r)if(!u(e,m(n[r])))return!1;return!0}function $(e,c,d,t){-1==d&&(d=c.childNodes.length);var f=e.parentNode,p=h.getNodeIndex(e);g(t,function(e){var t,n,r,i,a,o,s,l,u;n=f,r=p,i=c,a=d,o=(t=e).node,s=t.offset,u=s,(l=o)==i&&a<s&&++u,o!=n||s!=r&&s!=r+1||(l=i,u+=a-r),o==n&&r+1<s&&--u,t.node=l,t.offset=u}),c.childNodes.length==d?c.appendChild(e):c.insertBefore(e,c.childNodes[d])}function w(e,t){var i=e.parentNode,a=h.getNodeIndex(e);g(t,function(e){var t,n,r;n=i,r=a,(t=e).node==n&&t.offset>r&&--t.offset}),h.removeNode(e)}function S(e,t){return function(e,t,n,r,i){for(var a,o=[];a=e.firstChild;)$(a,t,n++,i),o.push(a);return r&&w(e,i),o}(e,e.parentNode,h.getNodeIndex(e),!0,t)}function x(e,t){var n=e.cloneRange();n.selectNodeContents(t);var r=n.intersection(e);return""!=(r?r.toString():"")}function C(e){for(var t,n=e.getNodes([3]),r=0;(t=n[r])&&!x(e,t);)++r;for(var i=n.length-1;(t=n[i])&&!x(e,t);)--i;return n.slice(r,i+1)}function E(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,r,i,a=0,o=e.attributes.length;a<o;++a)if("class"!=(i=(n=e.attributes[a]).name)){if(null===n!=(null===(r=t.attributes.getNamedItem(i))))return!1;if(n.specified!=r.specified)return!1;if(n.specified&&n.nodeValue!==r.nodeValue)return!1}return!0}function T(e,t){for(var n,r=0,i=e.attributes.length;r<i;++r)if(n=e.attributes[r].name,(!t||!o(t,n))&&e.attributes[r].specified&&"class"!=n)return!0;return!1}var D=h.getComputedStyleProperty,k="boolean"==typeof document.createElement("div").isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||k(e.parentNode))};function R(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||k(e)&&!k(e.parentNode))}function M(e){return(k(e)||1!=e.nodeType&&k(e.parentNode))&&!R(e)}var A=/^inline(-block|-table)?$/i;function N(e){return e&&1==e.nodeType&&!A.test(D(e,"display"))}var O=/[^\r\n\t\f \u200B]/;function I(e){var t,n,r=[];for(t=0;n=e[t++];)r.push(new a(n.startContainer,n.startOffset),new a(n.endContainer,n.endOffset));return r}function _(e,t){for(var n,r,i,a=0,o=e.length;a<o;++a)n=e[a],r=t[2*a],i=t[2*a+1],n.setStartAndEnd(r.node,r.offset,i.node,i.offset)}function P(e,t,n,r){var i,a,o,s,l=0==n;if(h.isAncestorOf(t,e))return e;if(h.isCharacterDataNode(t)){var u=h.getNodeIndex(t);if(0==n)n=u;else{if(n!=t.length)throw p.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+n+" in "+t.data);n=u+1}t=t.parentNode}if(o=t,s=n,h.isCharacterDataNode(o)?0==s?o.previousSibling:s!=o.length||o.nextSibling:0<s&&s<o.childNodes.length){i=t.cloneNode(!1),a=t.parentNode,i.id&&i.removeAttribute("id");for(var c,d=0;c=t.childNodes[n];)$(c,i,d++,r);return $(i,a,h.getNodeIndex(t)+1,r),t==e?i:P(e,a,h.getNodeIndex(i),r)}if(e==t)return e;i=t.parentNode;var f=h.getNodeIndex(t);return l||f++,P(e,i,f,r)}function H(s){var l=s?"nextSibling":"previousSibling";return function(e,t){var n,r,i=e.parentNode,a=e[l];if(a){if(a&&3==a.nodeType)return a}else if(t&&(a=i[l])&&1==a.nodeType&&(r=a,(n=i).namespaceURI==r.namespaceURI&&n.tagName.toLowerCase()==r.tagName.toLowerCase()&&c(n,r)&&E(n,r)&&"inline"==D(n,"display")&&"inline"==D(r,"display"))){var o=a[s?"firstChild":"lastChild"];if(o&&3==o.nodeType)return o}return null}}var L=H(!1),F=H(!0);function z(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];var t=this.isElementMerge?e.lastChild:e;t&&(this.textNodes[0]=t)}var U=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],B={};function j(e,t,n){var r,i,a,o,s=this;s.cssClass=s.className=e;var l=null,u={};if("object"==typeof t&&null!==t){for(void 0!==t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),n=t.tagNames,l=t.elementProperties,u=t.elementAttributes,i=0;o=U[i++];)t.hasOwnProperty(o)&&(s[o]=t[o]);r=t.normalize}else r=t;s.normalize=void 0===r||r,s.attrExceptions=[];var c=document.createElement(s.elementTagName);s.elementProperties=s.copyPropertiesToElement(l,c,!0),f(u,function(e,t){s.attrExceptions.push(e),u[e]=""+t}),s.elementAttributes=u,s.elementSortedClassName=s.elementProperties.hasOwnProperty("className")?y(s.elementProperties.className+" "+e):e,s.applyToAnyTagName=!1;var d=typeof n;if("string"==d)"*"==n?s.applyToAnyTagName=!0:s.tagNames=m(n.toLowerCase()).split(/\s*,\s*/);else if("object"==d&&"number"==typeof n.length)for(s.tagNames=[],i=0,a=n.length;i<a;++i)"*"==n[i]?s.applyToAnyTagName=!0:s.tagNames.push(n[i].toLowerCase());else s.tagNames=[s.elementTagName]}j.prototype={elementTagName:"span",elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!(z.prototype={doMerge:function(e){var t=this.textNodes,r=t[0];if(1<t.length){var i,a=h.getNodeIndex(r),o=[],s=0;g(t,function(t,n){i=t.parentNode,0<n&&(i.removeChild(t),i.hasChildNodes()||h.removeNode(i),e&&g(e,function(e){e.node==t&&(e.node=r,e.offset+=s),e.node==i&&e.offset>a&&(--e.offset,e.offset==a+1&&n<len-1&&(e.node=r,e.offset=s))})),o[n]=t.data,s+=t.data.length}),r.data=o.join("")}return r.data},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var n=[];return g(this.textNodes,function(e,t){n[t]="'"+e.data+"'"}),"[Merge("+n.join(",")+")]"}}),useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(e,t,n){var r,i,a,o,s,l,u={};for(var c in e)if(e.hasOwnProperty(c))if(o=e[c],s=t[c],"className"==c)d(t,o),d(t,this.className),t[c]=y(t[c]),n&&(u[c]=o);else if("style"==c){for(r in i=s,n&&(u[c]=a={}),e[c])e[c].hasOwnProperty(r)&&(i[r]=o[r],n&&(a[r]=i[r]));this.attrExceptions.push(c)}else t[c]=o,n&&(u[c]=t[c],l=B.hasOwnProperty(c)?B[c]:c,this.attrExceptions.push(l));return n?u:""},copyAttributesToElement:function(e,t){for(var n in e)e.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&t.setAttribute(n,e[n])},appliesToElement:function(e){return o(this.tagNames,e.tagName.toLowerCase())},getEmptyElements:function(e){var t=this;return e.getNodes([1],function(e){return t.appliesToElement(e)&&!e.hasChildNodes()})},hasClass:function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&u(e,this.className)},getSelfOrAncestorWithClass:function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},isModifiable:function(e){return!this.applyToEditableOnly||M(e)},isIgnorableWhiteSpaceNode:function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&function(e){if(0==e.data.length)return!0;if(O.test(e.data))return!1;switch(D(e.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return N(e.previousSibling)||N(e.nextSibling)}(e)},postApply:function(e,t,n,r){var a,o,s=e[0],l=e[e.length-1],u=[],c=s,d=l,f=0,p=l.length;g(e,function(e){(o=L(e,!r))?(a||(a=new z(o),u.push(a)),a.textNodes.push(e),e===s&&(c=a.textNodes[0],f=c.length),e===l&&(d=a.textNodes[0],p=a.getLength())):a=null});var h=F(l,!r);if(h&&(a||(a=new z(l),u.push(a)),a.textNodes.push(h)),u.length){for(i=0,len=u.length;i<len;++i)u[i].doMerge(n);t.setStartAndEnd(c,f,d,p)}},createContainer:function(e){var t=h.getDocument(e),n=s&&!h.isHtmlNamespace(e)&&e.namespaceURI?t.createElementNS(e.namespaceURI,this.elementTagName):t.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,n,!1),this.copyAttributesToElement(this.elementAttributes,n),d(n,this.className),this.onElementCreate&&this.onElementCreate(n,this),n},elementHasProperties:function(n,e){var r=this;return f(e,function(e,t){if("className"==e)return b(n,t);if("object"==typeof t){if(!r.elementHasProperties(n[e],t))return!1}else if(n[e]!==t)return!1})},elementHasAttributes:function(n,e){return f(e,function(e,t){if(n.getAttribute(e)!==t)return!1})},applyToTextNode:function(e,t){if((a=e.parentNode)&&1==a.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(a.nodeName)){var n=e.parentNode;if(1==n.childNodes.length&&this.useExistingElements&&this.appliesToElement(n)&&this.elementHasProperties(n,this.elementProperties)&&this.elementHasAttributes(n,this.elementAttributes))d(n,this.className);else{var r=e.parentNode,i=this.createContainer(r);r.insertBefore(i,e),i.appendChild(e)}}var a},isRemovable:function(e){return e.tagName.toLowerCase()==this.elementTagName&&n(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!T(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},isEmptyContainer:function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},removeEmptyContainers:function(e){var t=this,n=e.getNodes([1],function(e){return t.isEmptyContainer(e)}),r=[e],i=I(r);g(n,function(e){w(e,i)}),_(r,i)},undoToTextNode:function(e,t,n,r){if(!t.containsNode(n)){var i=t.cloneRange();i.selectNode(n),i.isPointInRange(t.endContainer,t.endOffset)&&(P(n,t.endContainer,t.endOffset,r),t.setEndAfter(n)),i.isPointInRange(t.startContainer,t.startOffset)&&(n=P(n,t.startContainer,t.startOffset,r))}this.isRemovable(n)?S(n,r):v(n,this.className)},splitAncestorWithClass:function(e,t,n){var r=this.getSelfOrAncestorWithClass(e);r&&P(r,e,t,n)},undoToAncestor:function(e,t){this.isRemovable(e)?S(e,t):v(e,this.className)},applyToRange:function(e,t){var n=this,r=I((t=t||[])||[]);e.splitBoundariesPreservingPositions(r),n.removeEmptyElements&&n.removeEmptyContainers(e);var i=C(e);if(i.length){g(i,function(e){n.isIgnorableWhiteSpaceNode(e)||n.getSelfOrAncestorWithClass(e)||!n.isModifiable(e)||n.applyToTextNode(e,r)});var a=i[i.length-1];e.setStartAndEnd(i[0],0,a,a.length),n.normalize&&n.postApply(i,e,r,!1),_(t,r)}var o=n.getEmptyElements(e);g(o,function(e){d(e,n.className)})},applyToRanges:function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},applyToSelection:function(e){var t=r.getSelection(e);t.setRanges(this.applyToRanges(t.getAllRanges()))},undoToRange:function(e,t){var n=this,r=I(t=t||[]);e.splitBoundariesPreservingPositions(r),n.removeEmptyElements&&n.removeEmptyContainers(e,r);var i,a,o=C(e),s=o[o.length-1];if(o.length){n.splitAncestorWithClass(e.endContainer,e.endOffset,r),n.splitAncestorWithClass(e.startContainer,e.startOffset,r);for(var l=0,u=o.length;l<u;++l)i=o[l],(a=n.getSelfOrAncestorWithClass(i))&&n.isModifiable(i)&&n.undoToAncestor(a,r);e.setStartAndEnd(o[0],0,s,s.length),n.normalize&&n.postApply(o,e,r,!0),_(t,r)}var c=n.getEmptyElements(e);g(c,function(e){v(e,n.className)})},undoToRanges:function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},undoToSelection:function(e){var t=r.getSelection(e),n=r.getSelection(e).getAllRanges();this.undoToRanges(n),t.setRanges(n)},isAppliedToRange:function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var n,r=0;n=t[r++];)if(!this.isIgnorableWhiteSpaceNode(n)&&x(e,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},isAppliedToSelection:function(e){var t=r.getSelection(e);return this.isAppliedToRanges(t.getAllRanges())},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},toggleSelection:function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},getElementsWithClassIntersectingRange:function(e){var n=[],r=this;return e.getNodes([3],function(e){var t=r.getSelfOrAncestorWithClass(e);t&&!o(n,t)&&n.push(t)}),n},detach:function(){}},j.util={hasClass:u,addClass:d,removeClass:v,getClass:t,hasSameClasses:c,hasAllClasses:b,replaceWithOwnChildren:S,elementsHaveSameNonClassAttributes:E,elementHasNonClassAttributes:T,splitNodeAt:P,isEditableElement:k,isEditingHost:R,isEditable:M},r.CssClassApplier=r.ClassApplier=j,r.createClassApplier=function(e,t,n){return new j(e,t,n)},e.createAliasForDeprecatedMethod(r,"createCssClassApplier","createClassApplier",p)}),e},this),function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("Highlighter",["ClassApplier"],function(x,e){var t=x.dom,i=t.arrayContains,l=t.getBody,C=x.util.createOptions,E=x.util.forEach,o=1;function n(e,t){return e.characterRange.start-t.characterRange.start}function g(e,t){return t?e.getElementById(t):l(e)}var r={};function a(e,t){this.type=e,this.converterCreator=t}function s(e,t){r[e]=new a(e,t)}function m(e){var t=r[e];if(t instanceof a)return t.create();throw new Error("Highlighter type '"+e+"' is not valid")}function T(e,t){this.start=e,this.end=t}a.prototype.create=function(){var e=this.converterCreator();return e.type=this.type,e},x.registerHighlighterType=s,T.prototype={intersects:function(e){return this.start<e.end&&this.end>e.start},isContiguousWith:function(e){return this.start==e.end||this.end==e.start},union:function(e){return new T(Math.min(this.start,e.start),Math.max(this.end,e.end))},intersection:function(e){return new T(Math.max(this.start,e.start),Math.min(this.end,e.end))},getComplements:function(e){var t=[];if(this.start>=e.start){if(this.end<=e.end)return[];t.push(new T(e.end,this.end))}else t.push(new T(this.start,Math.min(this.end,e.start))),this.end>e.end&&t.push(new T(e.end,this.end));return t},toString:function(){return"[CharacterRange("+this.start+", "+this.end+")]"}},T.fromCharacterRange=function(e){return new T(e.start,e.end)};var u,c={rangeToCharacterRange:function(e,t){var n=e.getBookmark(t);return new T(n.start,n.end)},characterRangeToRange:function(e,t,n){var r=x.createRange(e);return r.moveToBookmark({start:t.start,end:t.end,containerNode:n}),r},serializeSelection:function(e,t){for(var n=e.getAllRanges(),r=[],i=1==n.length&&e.isBackward(),a=0,o=n.length;a<o;++a)r[a]={characterRange:this.rangeToCharacterRange(n[a],t),backward:i};return r},restoreSelection:function(e,t,n){e.removeAllRanges();for(var r,i,a=e.win.document,o=0,s=t.length;o<s;++o)(i=t[o]).characterRange,r=this.characterRangeToRange(a,i.characterRange,n),e.addRange(r,i.backward)}};function D(e,t,n,r,i,a){i?(this.id=i,o=Math.max(o,i+1)):this.id=o++,this.characterRange=t,this.doc=e,this.classApplier=n,this.converter=r,this.containerElementId=a||null,this.applied=!1}function d(e,t){t=t||"textContent",this.doc=e||document,this.classAppliers={},this.highlights=[],this.converter=m(t)}s("textContent",function(){return c}),s("TextRange",function(){if(!u){var e=x.modules.TextRange;if(!e)throw new Error("TextRange module is missing.");if(!e.supported)throw new Error("TextRange module is present but not supported.");u={rangeToCharacterRange:function(e,t){return T.fromCharacterRange(e.toCharacterRange(t))},characterRangeToRange:function(e,t,n){var r=x.createRange(e);return r.selectCharacters(n,t.start,t.end),r},serializeSelection:function(e,t){return e.saveCharacterRanges(t)},restoreSelection:function(e,t,n){e.restoreCharacterRanges(n,t)}}}return u}),D.prototype={getContainerElement:function(){return g(this.doc,this.containerElementId)},getRange:function(){return this.converter.characterRangeToRange(this.doc,this.characterRange,this.getContainerElement())},fromRange:function(e){this.characterRange=this.converter.rangeToCharacterRange(e,this.getContainerElement())},getText:function(){return this.getRange().toString()},containsElement:function(e){return this.getRange().containsNodeContents(e.firstChild)},unapply:function(){this.classApplier.undoToRange(this.getRange()),this.applied=!1},apply:function(){this.classApplier.applyToRange(this.getRange()),this.applied=!0},getHighlightElements:function(){return this.classApplier.getElementsWithClassIntersectingRange(this.getRange())},toString:function(){return"[Highlight(ID: "+this.id+", class: "+this.classApplier.className+", character range: "+this.characterRange.start+" - "+this.characterRange.end+")]"}},d.prototype={addClassApplier:function(e){this.classAppliers[e.className]=e},getHighlightForElement:function(e){for(var t=this.highlights,n=0,r=t.length;n<r;++n)if(t[n].containsElement(e))return t[n];return null},removeHighlights:function(e){for(var t,n=0,r=this.highlights.length;n<r;++n)t=this.highlights[n],i(e,t)&&(t.unapply(),this.highlights.splice(n--,1))},removeAllHighlights:function(){this.removeHighlights(this.highlights)},getIntersectingHighlights:function(e){var n=[],r=this.highlights;return E(e,function(t){E(r,function(e){t.intersectsRange(e.getRange())&&!i(n,e)&&n.push(e)})}),n},highlightCharacterRanges:function(e,t,n){var r,i,a,o,s,l,u,c,d,f,p,h,g=this.highlights,m=this.converter,v=this.doc,y=[],b=e?this.classAppliers[e]:null,$=(n=C(n,{containerElementId:null,exclusive:!0})).containerElementId,w=n.exclusive;for($&&(o=this.doc.getElementById($))&&((s=x.createRange(this.doc)).selectNodeContents(o),l=new T(0,s.toString().length)),r=0,i=t.length;r<i;++r)if(u=t[r],p=[],l&&(u=u.intersection(l)),u.start!=u.end){for(a=0;a<g.length;++a)d=!1,$==g[a].containerElementId&&(c=g[a].characterRange,h=!(f=b==g[a].classApplier)&&w,(c.intersects(u)||c.isContiguousWith(u))&&(f||h)&&(h&&E(c.getComplements(u),function(e){p.push(new D(v,e,g[a].classApplier,m,null,$))}),d=!0,f&&(u=c.union(u)))),d?(y.push(g[a]),g[a]=new D(v,c.union(u),b,m,null,$)):p.push(g[a]);b&&p.push(new D(v,u,b,m,null,$)),this.highlights=g=p}E(y,function(e){e.unapply()});var S=[];return E(g,function(e){e.applied||(e.apply(),S.push(e))}),S},highlightRanges:function(e,t,n){var r,i=[],a=this.converter,o=(n=C(n,{containerElement:null,exclusive:!0})).containerElement,s=o?o.id:null;return o&&(r=x.createRange(o)).selectNodeContents(o),E(t,function(e){var t=o?r.intersection(e):e;i.push(a.rangeToCharacterRange(t,o||l(e.getDocument())))}),this.highlightCharacterRanges(e,i,{containerElementId:s,exclusive:n.exclusive})},highlightSelection:function(e,t){var n=this.converter,r=!!e&&this.classAppliers[e],i=(t=C(t,{containerElementId:null,selection:x.getSelection(this.doc),exclusive:!0})).containerElementId,a=t.exclusive,o=t.selection,s=g(o.win.document,i);if(!r&&!1!==e)throw new Error("No class applier found for class '"+e+"'");var l=n.serializeSelection(o,s),u=[];E(l,function(e){u.push(T.fromCharacterRange(e.characterRange))});var c=this.highlightCharacterRanges(e,u,{containerElementId:i,exclusive:a});return n.restoreSelection(o,l,s),c},unhighlightSelection:function(e){e=e||x.getSelection(this.doc);var t=this.getIntersectingHighlights(e.getAllRanges());return this.removeHighlights(t),e.removeAllRanges(),t},getHighlightsInSelection:function(e){return e=e||x.getSelection(this.doc),this.getIntersectingHighlights(e.getAllRanges())},selectionOverlapsHighlight:function(e){return 0<this.getHighlightsInSelection(e).length},serialize:function(i){var e,a,o,s,l=this,t=l.highlights;return t.sort(n),e=(i=C(i,{serializeHighlightText:!1,type:l.converter.type})).type,(o=e!=l.converter.type)&&(s=m(e)),a=["type:"+e],E(t,function(e){var t,n=e.characterRange;o&&(t=e.getContainerElement(),n=s.rangeToCharacterRange(l.converter.characterRangeToRange(l.doc,n,t),t));var r=[n.start,n.end,e.id,e.classApplier.className,e.containerElementId];i.serializeHighlightText&&r.push(e.getText()),a.push(r.join("$"))}),a.join("|")},deserialize:function(e){var t,n,r,i,a,o,s,l,u=e.split("|"),c=[],d=u[0],f=!1;if(!d||!(t=/^type:(\w+)$/.exec(d)))throw new Error("Serialized highlights are invalid.");(n=t[1])!=this.converter.type&&(r=m(n),f=!0),u.shift();for(var p,h=u.length;0<h--;){if(o=new T(+(p=u[h].split("$"))[0],+p[1]),s=p[4]||null,f&&(l=g(this.doc,s),o=this.converter.rangeToCharacterRange(r.characterRangeToRange(this.doc,o,l),l)),!(i=this.classAppliers[p[3]]))throw new Error("No class applier found for class '"+p[3]+"'");(a=new D(this.doc,o,i,this.converter,parseInt(p[2]),s)).apply(),c.push(a)}this.highlights=c}},x.Highlighter=d,x.createHighlighter=function(e,t){return new d(e,t)}}),e},this),function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("SaveRestore",["WrappedRange"],function(l,o){var s=l.dom,u=s.removeNode,c=l.Selection.isDirectionBackward,d="\ufeff";function f(e,t){return(t||document).getElementById(e)}function p(e,t){var n,r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),i=s.getDocument(e.startContainer),a=e.cloneRange();return a.collapse(t),(n=i.createElement("span")).id=r,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(i.createTextNode(d)),a.insertNode(n),n}function h(e,t,n,r){var i=f(n,e);i?(t[r?"setStartBefore":"setEndBefore"](i),u(i)):o.warn("Marker element has been removed. Cannot restore selection.")}function g(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function m(e,t){var n,r=l.DomRange.getRangeDocument(e),i=e.toString(),a=c(t);return e.collapsed?{document:r,markerId:(n=p(e,!1)).id,collapsed:!0}:(n=p(e,!1),{document:r,startMarkerId:p(e,!0).id,endMarkerId:n.id,collapsed:!1,backward:a,toString:function(){return"original text: '"+i+"', new text: '"+e.toString()+"'"}})}function r(e,t){var n=e.document;void 0===t&&(t=!0);var r=l.createRange(n);if(e.collapsed){var i=f(e.markerId,n);if(i){i.style.display="inline";var a=i.previousSibling;a&&3==a.nodeType?(u(i),r.collapseToPoint(a,a.length)):(r.collapseBefore(i),u(i))}else o.warn("Marker element has been removed. Cannot restore selection.")}else h(n,r,e.startMarkerId,!0),h(n,r,e.endMarkerId,!1);return t&&r.normalizeBoundaries(),r}function a(e,t){var n,r,i=[],a=c(t);(e=e.slice(0)).sort(g);for(var o=0,s=e.length;o<s;++o)i[o]=m(e[o],a);for(o=s-1;0<=o;--o)n=e[o],r=l.DomRange.getRangeDocument(n),n.collapsed?n.collapseAfter(f(i[o].markerId,r)):(n.setEndBefore(f(i[o].endMarkerId,r)),n.setStartAfter(f(i[o].startMarkerId,r)));return i}function v(e){for(var t=[],n=e.length-1;0<=n;n--)t[n]=r(e[n],!0);return t}function y(e,t){var n=f(t,e);n&&u(n)}l.util.extend(l,{saveRange:m,restoreRange:r,saveRanges:a,restoreRanges:v,saveSelection:function(e){if(!l.isSelectionValid(e))return o.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var t=l.getSelection(e),n=t.getAllRanges(),r=1==n.length&&t.isBackward(),i=a(n,r);return r?t.setSingleRange(n[0],r):t.setRanges(n),{win:e,rangeInfos:i,restored:!1}},restoreSelection:function(e,t){if(!e.restored){var n=e.rangeInfos,r=l.getSelection(e.win),i=v(n);1==n.length&&t&&l.features.selectionHasExtend&&n[0].backward?(r.removeAllRanges(),r.addRange(i[0],!0)):r.setRanges(i),e.restored=!0}},removeMarkerElement:y,removeMarkers:function(e){for(var t,n=e.rangeInfos,r=0,i=n.length;r<i;++r)(t=n[r]).collapsed?y(e.doc,t.markerId):(y(e.doc,t.startMarkerId),y(e.doc,t.endMarkerId))}})}),e},this),function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("Serializer",["WrappedSelection"],function(u,c){var e=u.util;"undefined"!=typeof encodeURIComponent&&"undefined"!=typeof decodeURIComponent||c.fail("encodeURIComponent and/or decodeURIComponent method is missing");var o,n=(o=null,function(e){for(var t=function(e){for(var t,n=[],r=0,i=e.length;r<i;++r)(t=e.charCodeAt(r))<128?n.push(t):t<2048?n.push(t>>6|192,63&t|128):n.push(t>>12|224,t>>6&63|128,63&t|128);return n}(e),n=-1,r=(o||(o=function(){for(var e,t,n=[],r=0;r<256;++r){for(t=r,e=8;e--;)1==(1&t)?t=t>>>1^3988292384:t>>>=1;n[r]=t>>>0}return n}()),o),i=0,a=t.length;i<a;++i)n=n>>>8^r[255&(n^t[i])];return(-1^n)>>>0}),d=u.dom;function f(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(e,t){t=t||[];var n=e.nodeType,r=e.childNodes,i=r.length,a=[n,e.nodeName,i].join(":"),o="",s="";switch(n){case 3:o=f(e.nodeValue);break;case 8:o="\x3c!--"+f(e.nodeValue)+"--\x3e";break;default:o="<"+a+">",s="</>"}o&&t.push(o);for(var l=0;l<i;++l)p(r[l],t);return s&&t.push(s),t}function h(e){var t=p(e).join("");return n(t).toString(16)}function i(e,t,n){var r=[],i=e;for(n=n||d.getDocument(e).documentElement;i&&i!=n;)r.push(d.getNodeIndex(i,!0)),i=i.parentNode;return r.join("/")+":"+t}function g(e,t,n){t||(t=(n||document).documentElement);for(var r,i=e.split(":"),a=t,o=i[0]?i[0].split("/"):[],s=o.length;s--;){if(!((r=parseInt(o[s],10))<a.childNodes.length))throw c.createError("deserializePosition() failed: node "+d.inspectNode(a)+" has no child with index "+r+", "+s);a=a.childNodes[r]}return new d.DomPosition(a,parseInt(i[1],10))}function s(e,t,n){if(n=n||u.DomRange.getRangeDocument(e).documentElement,!d.isOrIsAncestorOf(n,e.commonAncestorContainer))throw c.createError("serializeRange(): range "+e.inspect()+" is not wholly contained within specified root node "+d.inspectNode(n));var r=i(e.startContainer,e.startOffset,n)+","+i(e.endContainer,e.endOffset,n);return t||(r+="{"+h(n)+"}"),r}var m=/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/;function l(e,t,n){t?n=n||d.getDocument(t):t=(n=n||document).documentElement;var r=m.exec(e),i=r[4];if(i){var a=h(t);if(i!==a)throw c.createError("deserializeRange(): checksums of serialized range root node ("+i+") and target root node ("+a+") do not match")}var o=g(r[1],t,n),s=g(r[2],t,n),l=u.createRange(n);return l.setStartAndEnd(o.node,o.offset,s.node,s.offset),l}function v(e,t,n){t||(t=(n||document).documentElement);var r=m.exec(e)[3];return!r||r===h(t)}function y(e,t,n){for(var r=(e=u.getSelection(e)).getAllRanges(),i=[],a=0,o=r.length;a<o;++a)i[a]=s(r[a],t,n);return i.join("|")}function r(e,t,n){t?n=n||d.getWindow(t):t=(n=n||window).document.documentElement;for(var r=e.split("|"),i=u.getSelection(n),a=[],o=0,s=r.length;o<s;++o)a[o]=l(r[o],t,n.document);return i.setRanges(a),i}var b="rangySerializedSelection";e.extend(u,{serializePosition:i,deserializePosition:g,serializeRange:s,deserializeRange:l,canDeserializeRange:v,serializeSelection:y,deserializeSelection:r,canDeserializeSelection:function(e,t,n){var r;t?r=n?n.document:d.getDocument(t):t=(n=n||window).document.documentElement;for(var i=e.split("|"),a=0,o=i.length;a<o;++a)if(!v(i[a],t,r))return!1;return!0},restoreSelectionFromCookie:function(e){var t=function(e){for(var t,n,r=e.split(/[;,]/),i=0,a=r.length;i<a;++i)if((t=r[i].split("="))[0].replace(/^\s+/,"")==b&&(n=t[1]))return decodeURIComponent(n.replace(/\s+$/,""));return null}((e=e||window).document.cookie);t&&r(t,e.doc)},saveSelectionCookie:function(e,t){e=e||window;var n=(t="object"==typeof t?t:{}).expires?";expires="+t.expires.toUTCString():"",r=t.path?";path="+t.path:"",i=t.domain?";domain="+t.domain:"",a=t.secure?";secure":"",o=y(u.getSelection(e));e.document.cookie=encodeURIComponent(b)+"="+encodeURIComponent(o)+n+r+i+a},getElementChecksum:h,nodeToInfoString:p}),e.crc32=n}),e},this),function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("TextRange",["WrappedSelection"],function(v,t){var e,n,r,g="character",m="word",l=v.dom,i=v.util,o=i.extend,s=i.createOptions,u=l.getBody,a=/^[ \t\f\r\n]+$/,c=/^[ \t\f\r]+$/,f=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,d=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,p="en",y=v.Selection.isDirectionBackward,h=!1,b=!1;function $(e,t){for(var n=e.slice(t.start,t.end),r={isWord:t.isWord,chars:n,toString:function(){return n.join("")}},i=0,a=n.length;i<a;++i)n[i].token=r;return r}function w(e,t,n){for(var r,i=n(e,t),a=[],o=0;r=i[o++];)a.push($(e,r));return a}e=l.createTestElement(document,"<p>1 </p><p></p>",!0),n=e.firstChild,(r=v.getSelection()).collapse(n.lastChild,2),r.setStart(n.firstChild,0),e.innerHTML="1 <br />",r.collapse(e,2),r.setStart(e.firstChild,0),h=1==(""+r).length,e.innerHTML="1 <p>1</p>",r.collapse(e,2),r.setStart(e.firstChild,0),b=1==(""+r).length,l.removeNode(e),r.removeAllRanges();var S={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""};var x={includeBlockContentTrailingSpace:!1,includeSpaceBeforeBr:!h,includeSpaceBeforeBlock:!b,includePreLineTrailingSpace:!0},C={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:function(e,t){var n,r=e.join(""),i=[];function a(e,t,n){i.push({start:e,end:t,isWord:n})}for(var o,s,l=0;n=t.wordRegex.exec(r);){if(s=(o=n.index)+n[0].length,l<o&&a(l,o,!1),t.includeTrailingSpace)for(;d.test(e[s]);)++s;a(o,s,!0),l=s}return l<e.length&&a(l,e.length,!1),i}}},E={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},T={wordOptions:null,characterOptions:null},D={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},k={wordOptions:null,characterOptions:null,direction:"forward"};function R(e,t){var n,r,i,a=s(e,t);return t.hasOwnProperty("wordOptions")&&(a.wordOptions=(n=a.wordOptions)?(r=n.language||p,o(i={},C[r]||C[p]),o(i,n),i):C[p]),t.hasOwnProperty("characterOptions")&&(a.characterOptions=s(a.characterOptions,S)),a}var M,A,N,O=l.getComputedStyleProperty;A=document.createElement("table"),(N=u(document)).appendChild(A),M="block"==O(A,"display"),N.removeChild(A);var I={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};function _(e,t){var n=O(e,"display",t),r=e.tagName.toLowerCase();return"block"==n&&M&&I.hasOwnProperty(r)?I[r]:n}function P(e){for(var t,n=function(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}(t=e).concat([t]),r=0,i=n.length;r<i;++r)if(1==n[r].nodeType&&"none"==_(n[r]))return!0;return!1}function H(e,t){return!t&&e.hasChildNodes()?e.firstChild:function(e){for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}(e)}function L(e){var t=e.previousSibling;if(t){for(e=t;e.hasChildNodes();)e=e.lastChild;return e}var n=e.parentNode;return n&&1==n.nodeType?n:null}function F(e){if(!e||3!=e.nodeType)return!1;var t=e.data;if(""===t)return!0;var n=e.parentNode;if(!n||1!=n.nodeType)return!1;var r=O(e.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(r)||/^[\t\r ]+$/.test(t)&&"pre-line"==r}function z(e){return""===e.data||!!F(e)&&(!e.parentNode||!!P(e))}function U(e){var t,n,r=e.nodeType;return 7==r||8==r||P(e)||/^(script|style)$/i.test(e.nodeName)||3==(t=e).nodeType&&(n=t.parentNode)&&"hidden"==O(n,"visibility")||z(e)}function B(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==_(e,t)}function j(){this.store={}}j.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}};function V(r,i,a){return function(e){var t=this.cache;if(t.hasOwnProperty(r))return 0,t[r];0;var n=i.call(this,a?this[a]:this,e);return t[r]=n}}function W(e,t){this.node=e,this.session=t,this.cache=new j,this.positions=new j}var q={getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new te(this,e))},toString:function(){return"[NodeWrapper("+l.inspectNode(this.node)+")]"}},G="NON_SPACE",Y="UNCOLLAPSIBLE_SPACE",K="COLLAPSIBLE_SPACE",X="TRAILING_SPACE_BEFORE_BLOCK",Z="TRAILING_SPACE_IN_BLOCK",J="TRAILING_SPACE_BEFORE_BR",Q="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",ee="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";function te(e,t){this.offset=t,this.nodeWrapper=e,this.node=e.node,this.session=e.session,this.cache=new j}o(W.prototype=q,{isCharacterDataNode:V("isCharacterDataNode",l.isCharacterDataNode,"node"),getNodeIndex:V("nodeIndex",l.getNodeIndex,"node"),getLength:V("nodeLength",l.getNodeLength,"node"),containsPositions:V("containsPositions",function(e){return l.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)},"node"),isWhitespace:V("isWhitespace",F,"node"),isCollapsedWhitespace:V("isCollapsedWhitespace",z,"node"),getComputedDisplay:V("computedDisplay",_,"node"),isCollapsed:V("collapsed",U,"node"),isIgnored:V("ignored",B,"node"),next:V("nextPos",H,"node"),previous:V("previous",L,"node"),getTextNodeInfo:V("textNodeInfo",function(e){var t=null,n=!1,r=O(e.parentNode,"whiteSpace"),i="pre-line"==r;return i?(t=c,n=!0):"normal"!=r&&"nowrap"!=r||(t=a,n=!0),{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:i}},"node"),hasInnerText:V("hasInnerText",function(e,t){for(var n=this.session,r=n.getPosition(e.parentNode,this.getNodeIndex()+1),i=n.getPosition(e,0),a=t?r:i,o=t?i:r;a!==o;){if(a.prepopulateChar(),a.isDefinitelyNonEmpty())return!0;a=t?a.previousVisible():a.nextVisible()}return!1},"node"),isRenderedBlock:V("isRenderedBlock",function(e){for(var t=e.getElementsByTagName("br"),n=0,r=t.length;n<r;++n)if(!U(t[n]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:V("trailingSpace",function(e){if("br"==e.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var t=e.lastChild;t;){if(!B(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:V("leadingSpace",function(e){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var ne={character:"",characterType:"EMPTY",isBr:!1,prepopulateChar:function(){var e=this;if(!e.prepopulatedChar){var t=e.node,n=e.offset,r="",i="EMPTY",a=!1;if(0<n)if(3==t.nodeType){var o=t.data,s=o.charAt(n-1),l=e.nodeWrapper.getTextNodeInfo(),u=l.spaceRegex;l.collapseSpaces?u.test(s)?1<n&&u.test(o.charAt(n-2))||(i=l.preLine&&"\n"===o.charAt(n)?(r=" ",Q):(r=" ",K)):(r=s,i=G,a=!0):(r=s,i=Y,a=!0)}else{var c=t.childNodes[n-1];if(c&&1==c.nodeType&&!U(c)&&("br"==c.tagName.toLowerCase()?(r="\n",e.isBr=!0,a=!(i=K)):e.checkForTrailingSpace=!0),!r){var d=t.childNodes[n];d&&1==d.nodeType&&!U(d)&&(e.checkForLeadingSpace=!0)}}e.prepopulatedChar=!0,e.character=r,e.characterType=i,e.isCharInvariant=a}},isDefinitelyNonEmpty:function(){var e=this.characterType;return e==G||e==Y},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();e&&(this.isTrailingSpace=!0,this.character=e,this.characterType=K),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();t&&(this.isLeadingSpace=!0,this.character=t,this.characterType=K),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(e){for(var t=this;t=t.previousVisible();)if(""!==t.getCharacter(e))return t;return null},getCharacter:function(e){this.resolveLeadingAndTrailingSpaces();var t,n,r,i=this.character,a=(t=e.ignoreCharacters,(r="string"==typeof(n=t||"")?n.split(""):n).sort(function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)}),r.join("").replace(/(.)\1+/g,"$1")),o=""!==i&&-1<a.indexOf(i);if(this.isCharInvariant)return o?"":i;var s=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,a].join("_"),l=this.cache.get(s);if(null!==l)return l;var u,c,d="",f=this.characterType==K,p=!1,h=this;function g(){return p||(c=h.getPrecedingUncollapsedPosition(e),p=!0),c}return f&&(this.type==ee?d="\n":" "==i&&(!g()||c.isTrailingSpace||"\n"==c.character||" "==c.character&&c.characterType==K)||("\n"==i&&this.isLeadingSpace?g()&&"\n"!=c.character&&(d="\n"):(u=this.nextUncollapsed())&&(u.isBr?this.type=J:u.isTrailingSpace&&"\n"==u.character?this.type=Z:u.isLeadingSpace&&"\n"==u.character&&(this.type=X),"\n"==u.character?(this.type!=J||e.includeSpaceBeforeBr)&&(this.type!=X||e.includeSpaceBeforeBlock)&&(this.type==Z&&u.isTrailingSpace&&!e.includeBlockContentTrailingSpace||(this.type!=Q||u.type!=G||e.includePreLineTrailingSpace)&&("\n"==i?u.isTrailingSpace?this.isTrailingSpace||this.isBr&&(u.type="TRAILING_LINE_BREAK_AFTER_BR",g()&&c.isLeadingSpace&&!c.isTrailingSpace&&"\n"==c.character?u.character="":u.type=ee):d="\n":" "==i&&(d=" "))):d=i))),-1<a.indexOf(d)&&(d=""),this.cache.set(s,d),d},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:function(){return"[Position("+l.inspectNode(this.node)+":"+this.offset+")]"},toString:function(){return this.character}};o(te.prototype=ne,{next:V("nextPos",function(e){var t,n,r,i=e.nodeWrapper,a=e.node,o=e.offset,s=i.session;return a?(n=o==i.getLength()?(t=a.parentNode)?i.getNodeIndex()+1:0:i.isCharacterDataNode()?(t=a,o+1):(r=a.childNodes[o],s.getNodeWrapper(r).containsPositions()?(t=r,0):(t=a,o+1)),t?s.getPosition(t,n):null):null}),previous:V("previous",function(e){var t,n,r,i=e.nodeWrapper,a=e.node,o=e.offset,s=i.session;return n=0==o?(t=a.parentNode)?i.getNodeIndex():0:i.isCharacterDataNode()?(t=a,o-1):(r=a.childNodes[o-1],s.getNodeWrapper(r).containsPositions()?(t=r,l.getNodeLength(r)):(t=a,o-1)),t?s.getPosition(t,n):null}),nextVisible:V("nextVisible",function(e){var t=e.next();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex()+1)),i}),nextUncollapsed:V("nextUncollapsed",function(e){for(var t=e;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),""!==t.character)return t;return null}),previousVisible:V("previousVisible",function(e){var t=e.previous();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex())),i})});var re=null,ie=function(){function e(i){var a=new j;return{get:function(e){var t=a.get(e[i]);if(t)for(var n,r=0;n=t[r++];)if(n.node===e)return n;return null},set:function(e){var t=e.node[i];(a.get(t)||a.set(t,[])).push(e)}}}var n=i.isHostProperty(document.documentElement,"uniqueID");function t(){this.initCaches()}return t.prototype={initCaches:function(){var t;this.elementCache=n?(t=new j,{get:function(e){return t.get(e.uniqueID)},set:function(e){t.set(e.node.uniqueID,e)}}):e("tagName"),this.textNodeCache=e("data"),this.otherNodeCache=e("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);return n||(n=new W(e,this),t.set(n)),n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){var n=t?"start":"end";return this.getPosition(e[n+"Container"],e[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},t}();function ae(){return re||(oe(),re=new ie)}function oe(){re&&re.detach(),re=null}function se(e,n,r,i){r&&(n?U(r.node)&&(r=e.previousVisible()):U(r.node)&&(r=r.nextVisible()));var a=e,o=!1;var s,l=!1;return{next:function(){if(l)return l=!1,s;for(var e;t=void 0,t=null,n?(t=a,o||(a=a.previousVisible(),o=!a||r&&a.equals(r))):o||(t=a=a.nextVisible(),o=!a||r&&a.equals(r)),o&&(a=null),e=t;)if(e.getCharacter(i))return s=e;return null;var t},rewind:function(){if(!s)throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");l=!0},dispose:function(){e=r=null}}}o(l,{nextNode:H,previousNode:L});var le=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1};function ue(e,t,n){var s=se(e,!1,null,t),l=se(e,!0,null,t),r=n.tokenizer;function i(e){for(var t,n,r=[],i=e?s:l,a=!1,o=!1;t=i.next();){if(n=t.character,f.test(n))o&&(a=!(o=!1));else{if(a){i.rewind();break}o=!0}r.push(t)}return r}var a=i(!0),o=i(!1).reverse(),u=w(o.concat(a),n,r),c=a.length?u.slice(le(u,a[0].token)):[],d=o.length?u.slice(0,le(u,o.pop().token)+1):[];return{nextEndToken:function(){for(var e,t;1==c.length&&!(e=c[0]).isWord&&0<(t=i(!0)).length;)c=w(e.chars.concat(t),n,r);return c.shift()},previousStartToken:function(){for(var e,t;1==d.length&&!(e=d[0]).isWord&&0<(t=i(!1)).length;)d=w(t.reverse().concat(e.chars),n,r);return d.pop()},dispose:function(){s.dispose(),l.dispose(),c=d=null}}}function ce(e,t,n,r){var i=e.getRangeBoundaryPosition(t,!0),a=e.getRangeBoundaryPosition(t,!1);return se(r?a:i,!!r,r?i:a,n)}function de(e,t,n,r,l){var i,a,o,s,u,c,d=y(l.direction),f=se(e,d,e.session.getRangeBoundaryPosition(r,d),l.characterOptions),p="",h=[],g=null;function m(e,t){var n,r,i,a,o=h[e].previousVisible(),s=h[t-1];return{startPos:o,endPos:s,valid:!l.wholeWordsOnly||(n=o,r=s,i=l.wordOptions,(a=v.createRange(n.node)).setStartAndEnd(n.node,n.offset,r.node,r.offset),!a.expand("word",{wordOptions:i}))}}for(;i=f.next();)if(a=i.character,n||l.caseSensitive||(a=a.toLowerCase()),d?(h.unshift(i),p=a+p):(h.push(i),p+=a),n){if(u=t.exec(p))if(s=(o=u.index)+u[0].length,c){if(!d&&s<p.length||d&&0<o){g=m(o,s);break}}else c=!0}else if(-1!=(o=p.indexOf(t))){g=m(o,o+t.length);break}return c&&(g=m(o,s)),f.dispose(),g}function fe(r){return function(){var e=!!re,t=[ae()].concat(i.toArray(arguments)),n=r.apply(this,t);return e||oe(),n}}function pe(s,l){return fe(function(e,t,n,r){void 0===n&&(n=t,t=g),r=R(r,T);var i=s;l&&(i=0<=n,this.collapse(!i));var a=function(e,t,n,r,i){var a,o,s,l,u=0,c=e,d=Math.abs(n);if(0!==n){var f=n<0;switch(t){case g:for(o=se(e,f,null,r);(a=o.next())&&u<d;)++u,c=a;s=a,o.dispose();break;case m:for(var p=ue(e,r,i),h=f?p.previousStartToken:p.nextEndToken;(l=h())&&u<d;)l.isWord&&(++u,c=f?l.chars[0]:l.chars[l.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}f?(c=c.previousVisible(),u=-u):c&&c.isLeadingSpace&&!c.isTrailingSpace&&(t==m&&(s=(o=se(e,!1,null,r)).next(),o.dispose()),s&&(c=s.previousVisible()))}return{position:c,unitsMoved:u}}(e.getRangeBoundaryPosition(this,i),t,n,r.characterOptions,r.wordOptions),o=a.position;return this[i?"setStart":"setEnd"](o.node,o.offset),a.unitsMoved})}function he(o){return fe(function(e,t){for(var n,r=ce(e,this,t=s(t,S),!o),i=0;(n=r.next())&&f.test(n.character);)++i;r.dispose();var a=0<i;return a&&this[o?"moveStart":"moveEnd"]("character",o?i:-i,{characterOptions:t}),a})}function ge(r){return fe(function(e,t){var n=!1;return this.changeEachRange(function(e){n=e[r](t)||n}),n})}o(v.rangePrototype,{moveStart:pe(!0,!1),moveEnd:pe(!1,!1),move:pe(!0,!0),trimStart:he(!0),trimEnd:he(!1),trim:fe(function(e,t){var n=this.trimStart(t),r=this.trimEnd(t);return n||r}),expand:fe(function(e,t,n){var r=!1,i=(n=R(n,D)).characterOptions;if(t||(t=g),t!=m)return this.moveEnd(g,1,n);var a,o,s=n.wordOptions,l=e.getRangeBoundaryPosition(this,!0),u=e.getRangeBoundaryPosition(this,!1),c=ue(l,i,s).nextEndToken(),d=c.chars[0].previousVisible();return o=(a=this.collapsed?c:ue(u,i,s).previousStartToken()).chars[a.chars.length-1],d.equals(l)||(this.setStart(d.node,d.offset),r=!0),o&&!o.equals(u)&&(this.setEnd(o.node,o.offset),r=!0),n.trim&&(n.trimStart&&(r=this.trimStart(i)||r),n.trimEnd&&(r=this.trimEnd(i)||r)),r}),text:fe(function(e,t){return this.collapsed?"":function(e,t,n){for(var r,i=[],a=ce(e,t,n);r=a.next();)i.push(r);return a.dispose(),i}(e,this,s(t,S)).join("")}),selectCharacters:fe(function(e,t,n,r,i){var a={characterOptions:i};t||(t=u(this.getDocument())),this.selectNodeContents(t),this.collapse(!0),this.moveStart("character",n,a),this.collapse(!0),this.moveEnd("character",r-n,a)}),toCharacterRange:fe(function(e,t,n){t||(t=u(this.getDocument()));var r,i=t.parentNode,a=l.getNodeIndex(t),o=-1==l.comparePoints(this.startContainer,this.endContainer,i,a),s=this.cloneRange();return{start:r=o?(s.setStartAndEnd(this.startContainer,this.startOffset,i,a),-s.text(n).length):(s.setStartAndEnd(i,a,this.startContainer,this.startOffset),s.text(n).length),end:r+this.text(n).length}}),findText:fe(function(e,t,n){(n=R(n,E)).wholeWordsOnly&&(n.wordOptions.includeTrailingSpace=!1);var r=y(n.direction),i=n.withinRange;i||(i=v.createRange()).selectNodeContents(this.getDocument());var a=t,o=!1;"string"==typeof a?n.caseSensitive||(a=a.toLowerCase()):o=!0;var s=e.getRangeBoundaryPosition(this,!r),l=i.comparePoint(s.node,s.offset);-1===l?s=e.getRangeBoundaryPosition(i,!0):1===l&&(s=e.getRangeBoundaryPosition(i,!1));for(var u,c=s,d=!1;;)if(u=de(c,a,o,i,n)){if(u.valid)return this.setStartAndEnd(u.startPos.node,u.startPos.offset,u.endPos.node,u.endPos.offset),!0;c=r?u.startPos:u.endPos}else{if(!n.wrap||d)return!1;i=i.cloneRange(),c=e.getRangeBoundaryPosition(i,!r),i.setBoundary(s.node,s.offset,r),d=!0}}),pasteHtml:function(e){if(this.deleteContents(),e){var t=this.createContextualFragment(e),n=t.lastChild;this.insertNode(t),this.collapseAfter(n)}}}),o(v.selectionPrototype,{expand:fe(function(e,t,n){this.changeEachRange(function(e){e.expand(t,n)})}),move:fe(function(e,t,n,r){var i=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var a=this.getRangeAt(0);r||(r={}),r.characterOptions=s(r.characterOptions,x),i=a.move(t,n,r),this.setSingleRange(a)}return i}),trimStart:ge("trimStart"),trimEnd:ge("trimEnd"),trim:ge("trim"),selectCharacters:fe(function(e,t,n,r,i,a){var o=v.createRange(t);o.selectCharacters(t,n,r,a),this.setSingleRange(o,i)}),saveCharacterRanges:fe(function(e,t,n){for(var r=this.getAllRanges(),i=[],a=1==r.length&&this.isBackward(),o=0,s=r.length;o<s;++o)i[o]={characterRange:r[o].toCharacterRange(t,n),backward:a,characterOptions:n};return i}),restoreCharacterRanges:fe(function(e,t,n){this.removeAllRanges();for(var r,i,a,o=0,s=n.length;o<s;++o)a=(i=n[o]).characterRange,(r=v.createRange(t)).selectCharacters(t,a.start,a.end,i.characterOptions),this.addRange(r,i.backward)}),text:fe(function(e,t){for(var n=[],r=0,i=this.rangeCount;r<i;++r)n[r]=this.getRangeAt(r).text(t);return n.join("")})}),v.innerText=function(e,t){var n=v.createRange(e);return n.selectNodeContents(e),n.text(t)},v.createWordIterator=function(e,t,n){var r=ae();n=R(n,k);var i=ue(r.getPosition(e,t),n.characterOptions,n.wordOptions),a=y(n.direction);return{next:function(){return a?i.previousStartToken():i.nextEndToken()},dispose:function(){i.dispose(),this.next=function(){}}}},v.noMutation=function(e){e(ae()),oe()},v.noMutation.createEntryPointFunction=fe,v.textRange={isBlockNode:function(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(_(e))||9==e.nodeType||11==e.nodeType)},isCollapsedWhitespaceNode:z,createPosition:fe(function(e,t,n){return e.getPosition(t,n)})}}),e},this);var textAngularVersion="v1.5.16",_browserDetect={ie:function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return 4<e?e:void 0}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent),isFirefox:-1<navigator.userAgent.toLowerCase().indexOf("firefox")},performance=performance||{};function stripHtmlToText(e){var t=document.createElement("DIV");t.innerHTML=e;var n=t.textContent||t.innerText||"";return n.replace("",""),n=n.trim()}function getDomFromHtml(e){var t=document.createElement("DIV");return t.innerHTML=e,t}performance.now=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};var sheet,addCSSRule,removeCSSRule,_addCSSRule,_removeCSSRule,_getRuleIndex,BLOCKELEMENTS=/^(address|article|aside|audio|blockquote|canvas|center|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,LISTELEMENTS=/^(ul|li|ol)$/i,VALIDELEMENTS=/^(#text|span|address|article|aside|audio|blockquote|canvas|center|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),8<_browserDetect.ie||void 0===_browserDetect.ie){for(var _sheets=document.styleSheets,i=0;i<_sheets.length;i++)if((0===_sheets[i].media.length||_sheets[i].media.mediaText.match(/(all|screen)/gi))&&_sheets[i].href&&_sheets[i].href.match(/textangular\.(min\.|)css/gi)){sheet=_sheets[i];break}sheet||(sheet=function(){var e=document.createElement("style");return _browserDetect.webkit&&e.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(e),e.sheet}()),addCSSRule=function(e,t){return _addCSSRule(sheet,e,t)},_addCSSRule=function(e,t,n){var r,i;return e.cssRules?r=Math.max(e.cssRules.length-1,0):e.rules&&(r=Math.max(e.rules.length-1,0)),e.insertRule?e.insertRule(t+"{"+n+"}",r):e.addRule(t,n,r),sheet.rules?i=sheet.rules[r]:sheet.cssRules&&(i=sheet.cssRules[r]),i},_getRuleIndex=function(e,t){var n,r;for(n=0;n<t.length;n++)if(t[n].cssText===e.cssText){r=n;break}return r},removeCSSRule=function(e){_removeCSSRule(sheet,e)},_removeCSSRule=function(e,t){var n=e.cssRules||e.rules;if(n&&0!==n.length){var r=_getRuleIndex(t,n);e.removeRule?e.removeRule(r):e.deleteRule(r)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(e){return e?""===e?void 0===_browserDetect.ie?"div":_browserDetect.ie<=8?"P":"p":_browserDetect.ie<=8?e.toUpperCase():e:_browserDetect.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(t,r){return function(e){var n=angular.element("<div></div>");return n[0].innerHTML=e,angular.forEach(t,function(t){var e=[];t.selector&&""!==t.selector?e=n.find(t.selector):t.customAttribute&&""!==t.customAttribute&&(e=r.getByAttribute(n,t.customAttribute)),angular.forEach(e,function(e){e=angular.element(e),t.selector&&""!==t.selector&&t.customAttribute&&""!==t.customAttribute?void 0!==e.attr(t.customAttribute)&&t.renderLogic(e):t.renderLogic(e)})}),n[0].innerHTML}}]).factory("taFixChrome",function(){return function(e,t){if(!e||!angular.isString(e)||e.length<=0)return e;for(var n,r,i,a=/style\s?=\s?(["'])(?:(?=(\\?))\2.)*?\1/gi,o=/<span class="Apple-converted-space">([^<]+)<\/span>/gi,s="",l=0;n=o.exec(e);)i=(i=n[1]).replace(/&nbsp;/gi," "),s+=e.substring(l,n.index)+i,l=n.index+n[0].length;if(l&&(e=s+=e.substring(l),s="",l=0),!t){for(;n=a.exec(e);)s+=e.substring(l,n.index-1),r=n[0],(n=/font-family: inherit;|line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;|color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);|background-color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);/gi.exec(r))?8<(r=r.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;|( |)color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);|( |)background-color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);/gi,"")).length&&(s+=" "+r):s+=" "+r,l=a.lastIndex;s+=e.substring(l)}return 0<l?s.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):e}}).factory("taSanitize",["$sanitize",function(c){for(var h=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],e=[],t=0;t<h.length;t++){for(var n="("+h[t].property+":\\s*(",r=0;r<h[t].values.length;r++)0<r&&(n+="|"),n+=h[t].values[r];n+=");)",e.push(n)}var g="("+e.join("|")+")";function m(e,t){for(var n,r=0,i=0,a=/<[^>]*>/gi;n=a.exec(e);)if(i=n.index,"/"===n[0].substr(1,1)){if(0===r)break;r--}else r++;return t+e.substring(0,i)+angular.element(t)[0].outerHTML.substring(t.length)+e.substring(i)}var d=new RegExp(/<span id="selectionBoundary_\d+_\d+" class="rangySelectionBoundary">[^<>]+?<\/span>/gi),f=new RegExp(/<span class="rangySelectionBoundary" id="selectionBoundary_\d+_\d+">[^<>]+?<\/span>/gi),p=new RegExp(/<span id="selectionBoundary_\d+_\d+" class="rangySelectionBoundary">[^<>]+?<\/span>/gi);return function(e,t,n){if(!n)try{e=function e(t){if(!t||!angular.isString(t)||t.length<=0)return t;for(var n,r,i,a,o,s,l=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,u="",c="",d=0;r=l.exec(t);){a=r[3]||r[4];var f=new RegExp(g,"i");if(angular.isString(a)&&f.test(a)){o="";for(var p=new RegExp(g,"ig");i=p.exec(a);)for(n=0;n<h.length;n++)i[2*n+2]&&(o+="<"+h[n].tag+">");s=e(t.substring(d,r.index)),0<u.length?c+=m(s,u):c+=s,a=a.replace(new RegExp(g,"ig"),""),c+="<"+r[1].trim(),0<a.length&&(c+=' style="'+a+'"'),c+=r[5]+">",d=r.index+r[0].length,u=o}}return 0<u.length?c+=m(t.substring(d),u):c+=t.substring(d),c}(e)}catch(e){}if(e=function(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var t,n=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,r="",i=0;t=n.exec(e);){r+=e.substring(i,t.index),i=t.index+t[0].length;var a="<"+t[1]+t[5];/style=("([^"]+)"|'([^']+)')/gi.test(a)?a=a.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(t[3]||t[4])+';"'):a+=' style="text-align:'+(t[3]||t[4])+';"',r+=a+=">"}return r+e.substring(i)}(e))try{e=(e=(e=(e=e.replace(d,"")).replace(f,"")).replace(d,"")).replace(p,"")}catch(e){}var r;try{r=c(e),n&&(r=e)}catch(e){r=t||""}var i,a=r.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),o=r.replace(/(&#(9|10);)*/gi,""),s=/<pre[^>]*>.*?<\/pre[^>]*>/gi,l=0,u=0;for(r="";null!==(i=s.exec(o))&&l<a.length;)r+=o.substring(u,i.index)+a[l],u=i.index+i[0].length,l++;return r+o.substring(u)}}]).factory("taToolExecuteAction",["$q","$log",function(a,o){return function(e){void 0!==e&&(this.$editor=function(){return e});var t,n=a.defer(),r=n.promise,i=this.$editor();try{t=this.action(n,i.startAction()),r.finally(function(){i.endAction.call(i)})}catch(e){o.error(e)}(t||void 0===t)&&n.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(M,A,N){var O=function(e,t){var n,r,i=e.find("li");for(r=i.length-1;0<=r;r--)n=angular.element("<"+t+">"+i[r].innerHTML+"</"+t+">"),e.after(n);e.remove(),M.setSelectionToElementEnd(n[0])},I=function(e,t,n,r,i){var a,o,s,l,u,c=e.find("li");for(o=0;o<c.length;o++)if(c[o].outerHTML===t[0].outerHTML){0<(u=o)&&(s=c[o-1]),o+1<c.length&&(l=c[o+1]);break}var d="";if(r?d+="<"+i+">"+t[0].innerHTML+"</"+i+">":(d+="<"+A(n)+">",d+="<li>"+t[0].innerHTML+"</li>",d+="</"+A(n)+">"),a=angular.element(d),!s)return t.remove(),e.after(angular.element(e[0].outerHTML)),e.after(a),e.remove(),void M.setSelectionToElementEnd(a[0]);if(l){e.parent();var f="",p=e[0].nodeName.toLowerCase();for(f+="<"+p+">",o=0;o<u;o++)f+="<li>"+c[o].innerHTML+"</li>";f+="</"+p+">";var h="";for(h+="<"+p+">",o=u+1;o<c.length;o++)h+="<li>"+c[o].innerHTML+"</li>";h+="</"+p+">",e.after(angular.element(h)),e.after(a),e.after(angular.element(f)),e.remove(),M.setSelectionToElementEnd(a[0])}else t.remove(),e.after(a),M.setSelectionToElementEnd(a[0])},o=function(e){/(<br(|\/)>)$/i.test(e.innerHTML.trim())?M.setSelectionBeforeElement(angular.element(e).find("br")[0]):M.setSelectionToElementEnd(e)},_=function(e,t){var n=angular.element("<"+t+">"+e[0].innerHTML+"</"+t+">");e.after(n),e.remove(),o(n.find("li")[0])},P=function(e,t,n){for(var r="",i=0;i<e.length;i++)r+="<"+A("li")+">"+e[i].innerHTML+"</"+A("li")+">";var a=angular.element("<"+n+">"+r+"</"+n+">");t.after(a),t.remove(),o(a.find("li")[0])},H=function(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];r.tagName&&r.tagName.match(BLOCKELEMENTS)&&H(r,t)}if(null===e.parentNode)return e;if("<br>"===t)return e;var i=angular.element(t);return i[0].innerHTML=e.innerHTML,e.parentNode.insertBefore(i[0],e),e.parentNode.removeChild(e),i};return function(k,R){return k=A(k),function(e,t,n,r){var i,a,o,s,l,u,c,d,f=angular.element("<"+k+">");try{var p,h;M.getSelection&&(d=M.getSelection()),void 0!==(c=M.getSelectionElement()).tagName&&("div"===c.tagName.toLowerCase()&&/taTextElement.+/.test(c.id)&&d&&d.start&&1===d.start.offset&&1===d.end.offset?(p=c.innerHTML,/<br>/i.test(p)&&(p=p.replace(/<br>/i,"&#8203;")),/<br\/>/i.test(p)&&(p=p.replace(/<br\/>/i,"&#8203;")),/<span>(<span>)+/i.test(p)&&(p=__.replace(/<span>(<span>)+/i,"<span>")),/<\/span>(<\/span>)+/i.test(p)&&(p=__.replace(/<\/span>(<\/span>)+/i,"</span>")),/<span><\/span>/i.test(p)&&(p=p.replace(/<span><\/span>/i,"")),h="<div>"+p+"</div>",c.innerHTML=h,M.setSelectionToElementEnd(c.childNodes[0]),c=M.getSelectionElement()):"span"===c.tagName.toLowerCase()&&d&&d.start&&1===d.start.offset&&1===d.end.offset?(p=c.innerHTML,/<br>/i.test(p)&&(p=p.replace(/<br>/i,"&#8203;")),/<br\/>/i.test(p)&&(p=p.replace(/<br\/>/i,"&#8203;")),/<span>(<span>)+/i.test(p)&&(p=__.replace(/<span>(<span>)+/i,"<span>")),/<\/span>(<\/span>)+/i.test(p)&&(p=__.replace(/<\/span>(<\/span>)+/i,"</span>")),/<span><\/span>/i.test(p)&&(p=p.replace(/<span><\/span>/i,"")),h="<div>"+p+"</div>",c.innerHTML=h,M.setSelectionToElementEnd(c.childNodes[0]),c=M.getSelectionElement()):"p"===c.tagName.toLowerCase()&&d&&d.start&&1===d.start.offset&&1===d.end.offset?(p=c.innerHTML,/<br>/i.test(p)&&(p=p.replace(/<br>/i,"&#8203;"),c.innerHTML=p)):"li"===c.tagName.toLowerCase()&&d&&d.start&&d.start.offset===d.end.offset&&(p=c.innerHTML,/<br>/i.test(p)&&(p=p.replace(/<br>/i,""),c.innerHTML=p)))}catch(e){}if(c){var g=angular.element(c),m=c&&c.tagName&&c.tagName.toLowerCase()||"";if("insertorderedlist"===e.toLowerCase()||"insertunorderedlist"===e.toLowerCase()){var v=A("insertorderedlist"===e.toLowerCase()?"ol":"ul"),y=M.getOnlySelectedElements();if(1<y.length&&("ol"===m||"ul"===m))return function(e,t,n,r,i){var a,o,s,l,u,c=e.find("li"),d=[];for(o=0;o<c.length;o++)for(s=0;s<t.length;s++)c[o].isEqualNode(t[s])&&(d[s]=o);0<d[0]&&(l=c[d[0]-1]),d[t.length-1]+1<c.length&&(u=c[d[t.length-1]+1]);var f="";if(r)for(s=0;s<t.length;s++)f+="<"+i+">"+t[s].innerHTML+"</"+i+">",t[s].remove();else{for(f+="<"+A(n)+">",s=0;s<t.length;s++)f+=t[s].outerHTML,t[s].remove();f+="</"+A(n)+">"}if(a=angular.element(f),!l)return e.after(angular.element(e[0].outerHTML)),e.after(a),e.remove(),void M.setSelectionToElementEnd(a[0]);if(!u)return e.after(a),void M.setSelectionToElementEnd(a[0]);var p="",h=e[0].nodeName.toLowerCase();for(p+="<"+h+">",o=0;o<d[0];o++)p+="<li>"+c[o].innerHTML+"</li>";p+="</"+h+">";var g="";for(g+="<"+h+">",o=d[t.length-1]+1;o<c.length;o++)g+="<li>"+c[o].innerHTML+"</li>";g+="</"+h+">",e.after(angular.element(g)),e.after(a),e.after(angular.element(p)),e.remove(),M.setSelectionToElementEnd(a[0])}(g,y,v,v===m,k);if(m===v)return g[0].childNodes.length!==y.length&&1===y.length?(g=angular.element(y[0]),I(g.parent(),g,v,!0,k)):O(g,k);if("li"===m&&g.parent()[0].tagName.toLowerCase()===v&&1===g.parent().children().length)return O(g.parent(),k);if("li"===m&&g.parent()[0].tagName.toLowerCase()!==v&&1===g.parent().children().length)return _(g.parent(),v);if(m.match(BLOCKELEMENTS)&&!g.hasClass("ta-bind")){if(y.length&&g[0].childNodes.length!==y.length&&1===y.length)return g=angular.element(y[0]),I(g.parent(),g,v,v===m,k);if("ol"===m||"ul"===m)return _(g,v);var b=!1;return angular.forEach(g.children(),function(e){e.tagName.match(BLOCKELEMENTS)&&(b=!0)}),P(b?g.children():[angular.element("<div>"+c.innerHTML+"</div>")[0]],g,v)}if(m.match(BLOCKELEMENTS)){if(0===(s=M.getOnlySelectedElements()).length)a=angular.element("<"+v+"><li>"+c.innerHTML+"</li></"+v+">"),g.html(""),g.append(a);else{if(1===s.length&&("ol"===s[0].tagName.toLowerCase()||"ul"===s[0].tagName.toLowerCase()))return s[0].tagName.toLowerCase()===v?O(angular.element(s[0]),k):_(angular.element(s[0]),v);o="";var $=[];for(i=0;i<s.length;i++)if(3!==s[i].nodeType){var w=angular.element(s[i]);if("li"===s[i].tagName.toLowerCase())continue;"ol"===s[i].tagName.toLowerCase()||"ul"===s[i].tagName.toLowerCase()?o+=w[0].innerHTML:"span"!==s[i].tagName.toLowerCase()||"ol"!==s[i].childNodes[0].tagName.toLowerCase()&&"ul"!==s[i].childNodes[0].tagName.toLowerCase()?o+="<"+A("li")+">"+w[0].innerHTML+"</"+A("li")+">":o+=w[0].childNodes[0].innerHTML,$.unshift(w)}a=angular.element("<"+v+">"+o+"</"+v+">"),$.pop().replaceWith(a),angular.forEach($,function(e){e.remove()})}return void M.setSelectionToElementEnd(a[0])}}else{if("formatblock"===e.toLowerCase()){for("default"===(u=n.toLowerCase().replace(/[<>]/gi,"")).trim()&&(n="<"+(u=k)+">"),a="li"===m?g.parent():g;!a[0].tagName||!a[0].tagName.match(BLOCKELEMENTS)&&!a.parent().attr("contenteditable");)m=((a=a.parent())[0].tagName||"").toLowerCase();if(m===u){s=a.children();var S=!1;for(i=0;i<s.length;i++)S=S||s[i].tagName.match(BLOCKELEMENTS);a=S?(a.after(s),l=a.next(),a.remove(),l):(f.append(a[0].childNodes),a.after(f),a.remove(),f)}else if(a.parent()[0].tagName.toLowerCase()!==u||a.parent().hasClass("ta-bind"))if(m.match(LISTELEMENTS))a.wrap(n);else{for(0===(s=M.getOnlySelectedElements()).length&&(s=[a[0]]),i=0;i<s.length;i++)if(3===s[i].nodeType||!s[i].tagName.match(BLOCKELEMENTS))for(;3===s[i].nodeType||!s[i].tagName||!s[i].tagName.match(BLOCKELEMENTS);)s[i]=s[i].parentNode;if(1<(s=s.filter(function(e,t,n){return n.indexOf(e)===t})).length&&(s=s.filter(function(e,t,n){return!("div"===e.nodeName.toLowerCase()&&/^taTextElement/.test(e.id))})),angular.element(s[0]).hasClass("ta-bind"))(a=angular.element(n))[0].innerHTML=s[0].innerHTML,s[0].innerHTML=a[0].outerHTML;else if("blockquote"===u){for(o="",i=0;i<s.length;i++)o+=s[i].outerHTML;for((a=angular.element(n))[0].innerHTML=o,s[0].parentNode.insertBefore(a[0],s[0]),i=s.length-1;0<=i;i--)s[i].parentNode&&s[i].parentNode.removeChild(s[i])}else if("pre"===u&&M.getStateShiftKey()){for(o="",i=0;i<s.length;i++)o+=s[i].outerHTML;for((a=angular.element(n))[0].innerHTML=o,s[0].parentNode.insertBefore(a[0],s[0]),i=s.length-1;0<=i;i--)s[i].parentNode&&s[i].parentNode.removeChild(s[i])}else for(i=0;i<s.length;i++){var x=H(s[i],n);s[i]===a[0]&&(a=angular.element(x))}}else{var C=a.parent(),E=C.contents();for(i=0;i<E.length;i++)C.parent().hasClass("ta-bind")&&3===E[i].nodeType&&((f=angular.element("<"+k+">"))[0].innerHTML=E[i].outerHTML,E[i]=f[0]),C.parent()[0].insertBefore(E[i],C[0]);C.remove()}return M.setSelectionToElementEnd(a[0]),void a[0].focus()}if("createlink"===e.toLowerCase()){if("a"===m)return void(M.getSelectionElement().href=n);var T='<a href="'+n+'" target="'+(r.a.target?r.a.target:"")+'">';if(M.getSelection().collapsed)M.insertHtml(T+n+"</a>",R);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var D=angular.element(T+"</a>")[0];rangy.getSelection().getRangeAt(0).surroundContents(D)}return}if("inserthtml"===e.toLowerCase())return void M.insertHtml(n,R)}try{N[0].execCommand(e,t,n)}catch(e){}}}}}]).service("taSelection",["$document","taDOM","$log",function(e,v,t){var n,y=e[0],r=function(e,t){return e.tagName&&e.tagName.match(/^br$/i)&&0===t&&!e.previousSibling?{element:e.parentNode,offset:0}:{element:e,offset:t}},b={getSelection:function(){var e;try{e=rangy.getSelection().getRangeAt(0)}catch(e){return}var t=e.commonAncestorContainer,n={start:r(e.startContainer,e.startOffset),end:r(e.endContainer,e.endOffset),collapsed:e.collapsed};return 3===t.nodeType&&("div"===t.parentNode.nodeName.toLowerCase()&&/^taTextElement/.test(t.parentNode.id)||(t=t.parentNode)),"div"===t.nodeName.toLowerCase()&&/^taTextElement/.test(t.id)?(n.start.element=t.childNodes[n.start.offset],n.end.element=t.childNodes[n.end.offset],n.container=t):t.parentNode===n.start.element||t.parentNode===n.end.element?n.container=t.parentNode:n.container=t,n},updateLeftArrowKey:function(e){var t=rangy.getSelection().getRangeAt(0);if(t&&t.collapsed){var n=b.getFlattenedDom(t);if(!n.findIndex)return;var r,i,a=t.startContainer,o=n.findIndex(function(e,t){return e.node===a||-1!==e.parents.indexOf(a)});if(n.forEach(function(e,t){e.parents.forEach(function(e,t){})}),o+1<n.length&&(r=n[o+1].node),r&&r.textContent&&/^\ufeff([^\ufeff]*)$/.exec(r.textContent))return;if(0<o&&(i=n[o-1].node),0===t.startOffset&&i&&/^\ufeff([^\ufeff]*)$/.exec(i.textContent))return void b.setSelectionToElementEnd(i)}},updateRightArrowKey:function(e){},getFlattenedDom:function(e){var t=e.commonAncestorContainer.parentNode;if(!t)return e.commonAncestorContainer.childNodes;var i=Array.prototype.slice.call(t.childNodes),n=i.indexOf(e.startContainer);return n+1<i.length&&0<n||t.parentNode&&(t=t.parentNode),i=[],function n(r){r.node.childNodes.length?Array.prototype.slice.call(r.node.childNodes).forEach(function(e){var t=r.parents.slice();t.slice(-1)[0]!==r.node&&t.push(r.node),n({parents:t,node:e})}):i.push({parents:r.parents,node:r.node})}({parents:[t],node:t}),i},getOnlySelectedElements:function(){var e=rangy.getSelection().getRangeAt(0),t=e.commonAncestorContainer;return t=3===t.nodeType?t.parentNode:t,e.getNodes([1],function(e){return e.parentNode===t})},getAllSelectedElements:function(){var e=rangy.getSelection().getRangeAt(0),t=e.commonAncestorContainer;t=3===t.nodeType?t.parentNode:t;var n=e.getNodes([1],function(e){return e.parentNode===t}),r=t.innerHTML;if((r=r.replace(/<span id=.selectionBoundary[^>]+>\ufeff?<\/span>/gi,""))===e.toHtml()&&("div"!==t.nodeName.toLowerCase()||!/^taTextElement/.test(t.id))){for(var i=[],a=n.length;a--;i.unshift(n[a]));(n=i).push(t)}return n},getSelectionElement:function(){return b.getSelection()?b.getSelection().container:void 0},setSelection:function(e,t,n,r){var i=rangy.createRange();i.setStart(e,n),i.setEnd(t,r),rangy.getSelection().setSingleRange(i)},setSelectionBeforeElement:function(e){var t=rangy.createRange();t.selectNode(e),t.collapse(!0),rangy.getSelection().setSingleRange(t)},setSelectionAfterElement:function(e){var t=rangy.createRange();t.selectNode(e),t.collapse(!1),rangy.getSelection().setSingleRange(t)},setSelectionToElementStart:function(e){var t=rangy.createRange();t.selectNodeContents(e),t.collapse(!0),rangy.getSelection().setSingleRange(t)},setSelectionToElementEnd:function(e){var t=rangy.createRange();t.selectNodeContents(e),t.collapse(!1),e.childNodes&&e.childNodes[e.childNodes.length-1]&&"br"===e.childNodes[e.childNodes.length-1].nodeName&&(t.startOffset=t.endOffset=t.startOffset-1),rangy.getSelection().setSingleRange(t)},setStateShiftKey:function(e){n=e},getStateShiftKey:function(){return n},insertHtml:function(e,t){var n,r,i,a,o,s,l,u=angular.element("<div>"+e+"</div>"),c=rangy.getSelection().getRangeAt(0),d=y.createDocumentFragment(),f=u[0].childNodes,p=!0;if(0<f.length){for(a=[],i=0;i<f.length;i++){var h=f[i];"p"===h.nodeName.toLowerCase()&&""===h.innerHTML.trim()||(p=p&&!BLOCKELEMENTS.test(h.nodeName),a.push(h))}for(var g=0;g<a.length;g++)s=d.appendChild(a[g]);!p&&c.collapsed&&/^(|<br(|\/)>)$/i.test(c.startContainer.innerHTML)&&c.selectNode(c.startContainer)}else p=!0,s=d=y.createTextNode(e);if(p)c.deleteContents();else if(c.collapsed&&c.startContainer!==t)if(c.startContainer.innerHTML&&c.startContainer.innerHTML.match(/^<[^>]*>$/i))n=c.startContainer,1===c.startOffset?(c.setStartAfter(n),c.setEndAfter(n)):(c.setStartBefore(n),c.setEndBefore(n));else{if(3===c.startContainer.nodeType&&c.startContainer.parentNode!==t)for(r=(n=c.startContainer.parentNode).cloneNode(),v.splitNodes(n.childNodes,n,r,c.startContainer,c.startOffset);!VALIDELEMENTS.test(n.nodeName);){angular.element(n).after(r);var m=r;r=(n=n.parentNode).cloneNode(),v.splitNodes(n.childNodes,n,r,m)}else r=(n=c.startContainer).cloneNode(),v.splitNodes(n.childNodes,n,r,void 0,void 0,c.startOffset);if(angular.element(n).after(r),c.setStartAfter(n),c.setEndAfter(n),/^(|<br(|\/)>)$/i.test(n.innerHTML.trim())&&(c.setStartBefore(n),c.setEndBefore(n),angular.element(n).remove()),/^(|<br(|\/)>)$/i.test(r.innerHTML.trim())&&angular.element(r).remove(),"li"===n.nodeName.toLowerCase()){for(l=y.createDocumentFragment(),o=0;o<d.childNodes.length;o++)u=angular.element("<li>"),v.transferChildNodes(d.childNodes[o],u[0]),v.transferNodeAttributes(d.childNodes[o],u[0]),l.appendChild(u[0]);d=l,s&&(s=(s=d.childNodes[d.childNodes.length-1]).childNodes[s.childNodes.length-1])}}else c.deleteContents();c.insertNode(d),s&&b.setSelectionToElementEnd(s)}};return b}]).service("taDOM",function(){var u={getByAttribute:function(e,t){var n=[],r=e.children();return r.length&&angular.forEach(r,function(e){n=n.concat(u.getByAttribute(angular.element(e),t))}),void 0!==e.attr(t)&&n.push(e),n},transferChildNodes:function(e,t){for(t.innerHTML="";0<e.childNodes.length;)t.appendChild(e.childNodes[0]);return t},splitNodes:function(e,t,n,r,i,a){if(!r&&isNaN(a))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var o=document.createDocumentFragment(),s=document.createDocumentFragment(),l=0;0<e.length&&(isNaN(a)||a!==l)&&e[0]!==r;)o.appendChild(e[0]),l++;for(!isNaN(i)&&0<=i&&e[0]&&(o.appendChild(document.createTextNode(e[0].nodeValue.substring(0,i))),e[0].nodeValue=e[0].nodeValue.substring(i));0<e.length;)s.appendChild(e[0]);u.transferChildNodes(o,t),u.transferChildNodes(s,n)},transferNodeAttributes:function(e,t){for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].name,e.attributes[n].value);return t}};return u}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i=parseInt(e.$eval(n.taMaxText));if(isNaN(i))throw"Max text must be an integer";n.$observe("taMaxText",function(e){if(i=parseInt(e),isNaN(i))throw"Max text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMaxText=function(e){var t=angular.element("<div/>");return t.html(e),t.text().length<=i}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i=parseInt(e.$eval(n.taMinText));if(isNaN(i))throw"Min text must be an integer";n.$observe("taMinText",function(e){if(i=parseInt(e),isNaN(i))throw"Min text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMinText=function(e){var t=angular.element("<div/>");return t.html(e),!t.text().length||t.text().length>=i}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){return function(e){return!e||""===stripHtmlToText(e)&&!/<img[^>]+>/.test(e)}}]).directive("taButton",[function(){return{link:function(e,t,n){t.attr("unselectable","on"),t.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(U,B,j,V,e,W,q,G,Y,K,X,t,Z){return{priority:2,require:["ngModel","?ngModelOptions"],link:function($,w,u,e){var l,S,c,x=e[0],d=e[1]||{},r=void 0!==w.attr("contenteditable")&&w.attr("contenteditable"),t=r||"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase(),f=!1,n=!1,i=!1,C=u.taUnsafeSanitizer||Y.disableSanitizer,a=u.taKeepStyles||Y.keepStyles,p=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,h=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,g=[{specialKey:"UndoKey",forbiddenModifiers:12,mustHaveModifiers:[3],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:4,mustHaveModifiers:[3,8],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:12,mustHaveModifiers:[3],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:15,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:7,mustHaveModifiers:[8],keyCode:9}];void 0===u.taDefaultWrap&&(u.taDefaultWrap="p"),""===u.taDefaultWrap?(c="",void 0===_browserDetect.ie||(11<=_browserDetect.ie||_browserDetect.ie)):(c=void 0===_browserDetect.ie||11<=_browserDetect.ie?"br"===u.taDefaultWrap.toLowerCase()?"<BR><BR>":"<"+u.taDefaultWrap+"><br></"+u.taDefaultWrap+">":_browserDetect.ie<=8?"<"+u.taDefaultWrap.toUpperCase()+"></"+u.taDefaultWrap.toUpperCase()+">":"<"+u.taDefaultWrap+"></"+u.taDefaultWrap+">",void 0===_browserDetect.ie||11<=_browserDetect.ie?"br"===u.taDefaultWrap.toLowerCase()||(u.taDefaultWrap,u.taDefaultWrap):_browserDetect.ie<=8?(u.taDefaultWrap.toUpperCase(),u.taDefaultWrap.toUpperCase()):(u.taDefaultWrap,u.taDefaultWrap)),d.$options||(d.$options={});var m,o=function(e){if(K(e))return e;var t=angular.element("<div>"+e+"</div>");if(0===t.children().length)e="<"+u.taDefaultWrap+">"+e+"</"+u.taDefaultWrap+">";else{var n,r=t[0].childNodes,i=!1;for(n=0;n<r.length&&!(i=r[n].nodeName.toLowerCase().match(BLOCKELEMENTS));n++);if(i)for(e="",n=0;n<r.length;n++){var a=r[n],o=a.nodeName.toLowerCase();if("#comment"===o)e+="\x3c!--"+a.nodeValue+"--\x3e";else if("#text"===o){var s=a.textContent;s.trim()?e+="<"+u.taDefaultWrap+">"+s+"</"+u.taDefaultWrap+">":e+=s}else if(o.match(BLOCKELEMENTS))e+=a.outerHTML;else{var l=a.outerHTML||a.nodeValue;""!==l.trim()?e+="<"+u.taDefaultWrap+">"+l+"</"+u.taDefaultWrap+">":e+=l}}else e="<"+u.taDefaultWrap+">"+e+"</"+u.taDefaultWrap+">"}return e};u.taPaste&&(S=X(u.taPaste)),w.addClass("ta-bind"),$["$undoManager"+(u.id||"")]=x.$undoManager={_stack:[],_index:0,_max:1e3,push:function(e){return null==e||void 0!==this.current()&&null!==this.current()&&e===this.current()||(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(e),m&&B.cancel(m),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1),e},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(e){if(!(e<0||e>this._stack.length-1))return this._index=e,this.current()},current:function(){return this._stack[this._index]}};var s,E=function(){if(r)return w[0].innerHTML;if(t)return w.val();throw"textAngular Error: attempting to update non-editable taBind"},v=function(e){return $.$emit("ta-element-select",this),e.preventDefault(),!1},y=$["reApplyOnSelectorHandlers"+(u.id||"")]=function(){f||angular.forEach(q,function(e){w.find(e).off("click",v).on("click",v)})},b=function(e,t,n){i=n||!1,null==t&&(t=r),null==e&&(e=E()),K(e)?(""!==x.$viewValue&&x.$setViewValue(""),t&&""!==x.$undoManager.current()&&x.$undoManager.push("")):(y(),x.$viewValue!==e&&(x.$setViewValue(e),t&&x.$undoManager.push(e))),x.$render()},T=function(e){w[0].innerHTML=e},D=$["$undoTaBind"+(u.id||"")]=function(){if(!f&&r){var e=x.$undoManager.undo();null!=e&&(T(e),b(e,!1),s&&B.cancel(s),s=B(function(){w[0].focus(),W.setSelectionToElementEnd(w[0])},1))}},k=$["$redoTaBind"+(u.id||"")]=function(){if(!f&&r){var e=x.$undoManager.redo();null!=e&&(T(e),b(e,!1),s&&B.cancel(s),s=B(function(){w[0].focus(),W.setSelectionToElementEnd(w[0])},1))}};$["updateTaBind"+(u.id||"")]=function(){f||b(void 0,void 0,!0)};var R=function(e){return x.$oldViewValue=U(V(e,a),x.$oldViewValue,C)};if(w.attr("required")&&(x.$validators.required=function(e,t){return!K(e||t)}),x.$parsers.push(R),x.$parsers.unshift(o),x.$formatters.push(R),x.$formatters.unshift(o),x.$formatters.unshift(function(e){return x.$undoManager.push(e||"")}),t)if($.events={},r){var M,A,N=!1,O=function(e){var t=void 0!==e&&e.match(/content=["']*OneNote.File/i);if(e&&e.trim().length){if(e.match(/class=["']*Mso(Normal|List)/i)||e.match(/content=["']*Word.Document/i)||e.match(/content=["']*OneNote.File/i)){var n=e.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);n=(n=n?n[1]:e).replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var r=angular.element("<div>"+n+"</div>"),i=angular.element("<div></div>"),a={element:null,lastIndent:[],lastLi:null,isUl:!1};a.lastIndent.peek=function(){var e=this.length;if(0<e)return this[e-1]};for(var o=function(e){a.isUl=e,a.element=angular.element(e?"<ul>":"<ol>"),a.lastIndent=[],a.lastIndent.peek=function(){var e=this.length;if(0<e)return this[e-1]},a.lastLevelMatch=null},s=0;s<=r[0].childNodes.length;s++)if(r[0].childNodes[s]&&"#text"!==r[0].childNodes[s].nodeName){var l=r[0].childNodes[s].tagName.toLowerCase();if("p"===l||"ul"===l||"h1"===l||"h2"===l||"h3"===l||"h4"===l||"h5"===l||"h6"===l||"table"===l){var u=angular.element(r[0].childNodes[s]),c=(u.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(c){if(u[0].childNodes.length<2||u[0].childNodes[1].childNodes.length<1)continue;var d="bullet"===c[1].toLowerCase()||"number"!==c[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(u[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(u[0].childNodes[1].childNodes[0].innerHTML)),f=(u.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),p=parseFloat(f?f[1]:0),h=(u.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(h&&h[2]&&(p=parseInt(h[2])),h&&(!a.lastLevelMatch||h[1]!==a.lastLevelMatch[1])||!c[3]||"first"===c[3].toLowerCase()||null===a.lastIndent.peek()||a.isUl!==d&&a.lastIndent.peek()===p)o(d),i.append(a.element);else if(null!=a.lastIndent.peek()&&a.lastIndent.peek()<p)a.element=angular.element(d?"<ul>":"<ol>"),a.lastLi.append(a.element);else if(null!=a.lastIndent.peek()&&a.lastIndent.peek()>p){for(;null!=a.lastIndent.peek()&&a.lastIndent.peek()>p;)if("li"!==a.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(a.element.parent()[0].tagName.toLowerCase()))break;a.element=a.element.parent(),a.lastIndent.pop()}else a.element=a.element.parent();a.isUl="ul"===a.element[0].tagName.toLowerCase(),d!==a.isUl&&(o(d),i.append(a.element))}a.lastLevelMatch=h,p!==a.lastIndent.peek()&&a.lastIndent.push(p),a.lastLi=angular.element("<li>"),a.element.append(a.lastLi),a.lastLi.html(u.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),u.remove()}else o(!1),i.append(u)}}var g=function(e){for(var t=(e=angular.element(e))[0].childNodes.length-1;0<=t;t--)e.after(e[0].childNodes[t]);e.remove()};angular.forEach(i.find("span"),function(e){e.removeAttribute("lang"),e.attributes.length<=0&&g(e)}),angular.forEach(i.find("font"),g),e=i.html(),t&&(e=i.html()||r.html()),e=e.replace(/\n/g," ")}else{if((e=e.replace(/<(|\/)meta[^>]*?>/gi,"")).match(/<[^>]*?(ta-bind)[^>]*?>/)){if(e.match(/<[^>]*?(text-angular)[^>]*?>/)){var m=angular.element("<div>"+e+"</div>");m.find("textarea").remove();for(var v=0;v<binds.length;v++){for(var y=binds[v][0].parentNode.parentNode,b=0;b<binds[v][0].childNodes.length;b++)y.parentNode.insertBefore(binds[v][0].childNodes[b],y);y.parentNode.removeChild(y)}e=m.html().replace('<br class="Apple-interchange-newline">',"")}}else e.match(/^<span/)&&(e.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(e=e.replace(/<(|\/)span[^>]*?>/gi,"")));e=e.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(e)&&!1===/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(e)&&(e=e.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),e=e.replace(/^[ |\u00A0]+/gm,function(e){for(var t="",n=0;n<e.length;n++)t+="&nbsp;";return t}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),S&&(e=S($,{$html:e})||e),e=e.replace(/<span style=("|')([^<]*?)vertical-align\s*:\s*super;?([^>]*?)("|')>([^<]+?)<\/span>/g,"<sup style='$2$3'>$5</sup>"),e=U(e,"",C),W.insertHtml(e,w[0]),B(function(){x.$setViewValue(E()),N=!1,w.removeClass("processing-paste")},0)}else N=!1,w.removeClass("processing-paste")};if(w.on("paste",$.events.paste=function(e,t){if(t&&angular.extend(e,t),f||N)return e.stopPropagation(),e.preventDefault(),!1;var n;N=!0,w.addClass("processing-paste");var r=(e.originalEvent||e).clipboardData;if(!r&&window.clipboardData&&window.clipboardData.getData)return n=window.clipboardData.getData("Text"),O(n),e.stopPropagation(),e.preventDefault(),!1;if(r&&r.getData&&0<r.types.length){for(var i="",a=0;a<r.types.length;a++)i+=" "+r.types[a];return/text\/html/i.test(i)?n=r.getData("text/html"):/text\/plain/i.test(i)&&(n=r.getData("text/plain")),O(n),e.stopPropagation(),e.preventDefault(),!1}var o=rangy.saveSelection(),s=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');j.find("body").append(s),s[0].focus(),B(function(){rangy.restoreSelection(o),O(s[0].innerHTML),w[0].focus(),s.remove()},0)}),w.on("cut",$.events.cut=function(e){f?e.preventDefault():B(function(){x.$setViewValue(E())},0)}),w.on("keydown",$.events.keydown=function(t,e){var n,r,i;if(e&&angular.extend(t,e),16===t.keyCode?W.setStateShiftKey(!0):W.setStateShiftKey(!1),t.specialKey=(n=t,g.forEach(function(e){if(e.keyCode===n.keyCode){var t=(n.metaKey?2:0)+(n.ctrlKey?1:0)+(n.shiftKey?8:0)+(n.altKey?4:0);if(e.forbiddenModifiers&t)return;e.mustHaveModifiers.every(function(e){return t&e})&&(r=e.specialKey)}}),r),Y.keyMappings.forEach(function(e){t.specialKey===e.commandKeyCode&&(t.specialKey=void 0),e.testForKey(t)&&(i=e.commandKeyCode),"UndoKey"!==e.commandKeyCode&&"RedoKey"!==e.commandKeyCode||e.enablePropagation||t.preventDefault()}),void 0!==i&&(t.specialKey=i),void 0===t.specialKey||"UndoKey"===t.specialKey&&"RedoKey"===t.specialKey||(t.preventDefault(),Z.sendKeyCommand($,t)),!(f||("UndoKey"===t.specialKey&&(D(),t.preventDefault()),"RedoKey"===t.specialKey&&(k(),t.preventDefault()),13!==t.keyCode||t.shiftKey||t.ctrlKey||t.metaKey||t.altKey))){var a,o=W.getSelectionElement();if(!o.nodeName.match(VALIDELEMENTS))return;var s=angular.element(c);if(function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}(["blockquote","ul","ol"],o.parentNode.tagName.toLowerCase())){if(/^<br(|\/)>$/i.test(o.innerHTML.trim())&&!o.nextSibling){var l=(a=angular.element(o)).parent();l.after(s),a.remove(),0===l.children().length&&l.remove(),W.setSelectionToElementStart(s[0]),t.preventDefault()}/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(o.innerHTML.trim())&&((a=angular.element(o)).after(s),a.remove(),W.setSelectionToElementStart(s[0]),t.preventDefault())}}}),w.on("keyup",$.events.keyup=function(e,t){if(t&&angular.extend(e,t),W.setStateShiftKey(!1),9!==e.keyCode){if(37!==e.keyCode||e.shiftKey||W.updateLeftArrowKey(w),39!==e.keyCode||e.shiftKey||W.updateRightArrowKey(w),m&&B.cancel(m),!f&&!p.test(e.keyCode))if(13===e.keyCode&&(e.ctrlKey||e.metaKey||e.altKey));else{if(""!==c&&"<BR><BR>"!==c&&13===e.keyCode&&!e.ctrlKey&&!e.metaKey&&!e.altKey){for(var n=W.getSelectionElement();!n.nodeName.match(VALIDELEMENTS)&&n!==w[0];)n=n.parentNode;if(e.shiftKey){var r=n.tagName.toLowerCase();if((r===u.taDefaultWrap||"li"===r||"pre"===r||"div"===r)&&!/.+<br><br>/.test(n.innerHTML.trim())){var i=n.previousSibling;i&&(i.innerHTML=i.innerHTML+"<br><br>",angular.element(n).remove(),W.setSelectionToElementEnd(i))}}else if(n.tagName.toLowerCase()!==u.taDefaultWrap&&"li"!==n.nodeName.toLowerCase()&&(""===n.innerHTML.trim()||"<br>"===n.innerHTML.trim())){var a=angular.element(c);angular.element(n).replaceWith(a),W.setSelectionToElementStart(a[0])}}var o=E();""===c||""!==o.trim()&&"<br>"!==o.trim()?"<"!==o.substring(0,1)&&u.taDefaultWrap:(T(c),W.setSelectionToElementStart(w.children()[0]));var s=l!==e.keyCode&&h.test(e.keyCode);M&&B.cancel(M),M=B(function(){b(o,s,!0)},d.$options.debounce||400),s||(m=B(function(){x.$undoManager.push(o)},250)),l=e.keyCode}}else W.getSelection().start.element===w[0]&&w.children().length&&W.setSelectionToElementStart(w.children()[0])}),w.on("input",function(){E()!==x.$viewValue&&(A&&B.cancel(A),A=B(function(){var e=rangy.saveSelection(),t=E();t!==x.$viewValue&&b(t,!0),0!==x.$viewValue.length&&rangy.restoreSelection(e)},1e3))}),w.on("blur",$.events.blur=function(){n=!1,f?(i=!0,x.$render()):b(void 0,void 0,!0)}),u.placeholder&&(8<_browserDetect.ie||void 0===_browserDetect.ie)){var I;if(!u.id)throw"textAngular Error: An unique ID is required for placeholders to work";I=addCSSRule("#"+u.id+".placeholder-text:before",'content: "'+u.placeholder+'"'),$.$on("$destroy",function(){removeCSSRule(I)})}w.on("focus",$.events.focus=function(){n=!0,w.removeClass("placeholder-text"),y()}),w.on("mouseup",$.events.mouseup=function(){var e=W.getSelection();e&&e.start.element===w[0]&&w.children().length&&W.setSelectionToElementStart(w.children()[0])}),w.on("mousedown",$.events.mousedown=function(e,t){t&&angular.extend(e,t),e.stopPropagation()})}else{w.on("change blur",$.events.change=$.events.blur=function(){f||x.$setViewValue(E())}),w.on("keydown",$.events.keydown=function(e,t){if(t&&angular.extend(e,t),9===e.keyCode){var n=this.selectionStart,r=this.selectionEnd,i=w.val();if(e.shiftKey){var a=i.lastIndexOf("\n",n),o=i.lastIndexOf("\t",n);-1!==o&&a<=o&&(w.val(i.substring(0,o)+i.substring(o+1)),this.selectionStart=this.selectionEnd=n-1)}else w.val(i.substring(0,n)+"\t"+i.substring(r)),this.selectionStart=this.selectionEnd=n+1;e.preventDefault()}});var _=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},P=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,r,e[r])},H=function(e,r){var i="",t=e.childNodes;return i+=_("\t",++r-1)+e.outerHTML.substring(0,4),P(t,function(e,t){var n=t.nodeName.toLowerCase();"#comment"!==n?"#text"!==n?t.outerHTML&&(i+="ul"===n||"ol"===n?"\n"+H(t,r):"\n"+_("\t",r)+t.outerHTML):i+=t.textContent:i+="\x3c!--"+t.nodeValue+"--\x3e"}),i+="\n"+_("\t",r-1)+e.outerHTML.substring(e.outerHTML.lastIndexOf("<"))};x.$formatters.unshift(function(r){var e=angular.element("<div>"+r+"</div>")[0].childNodes;return 0<e.length&&(r="",P(e,function(e,t){var n=t.nodeName.toLowerCase();"#comment"!==n?"#text"!==n?t.outerHTML&&(0<r.length&&(r+="\n"),r+="ul"===n||"ol"===n?""+H(t,0):""+t.outerHTML):r+=t.textContent:r+="\x3c!--"+t.nodeValue+"--\x3e"})),r})}var L,F=function(e,t){var n;(t&&angular.extend(e,t),dropFired||f)||(dropFired=!0,n=e.originalEvent?e.originalEvent.dataTransfer:e.dataTransfer,$.$emit("ta-drop-event",this,e,n),B(function(){b(void 0,void 0,!(dropFired=!1))},100))},z=!1;x.$render=function(){if(!z){z=!0;var e=x.$viewValue||"";i||(r&&n&&(w.removeClass("placeholder-text"),L&&B.cancel(L),L=B(function(){n||(w[0].focus(),W.setSelectionToElementEnd(w.children()[w.children().length-1])),L=void 0},1)),r?(u.placeholder,T(""===e?c:e),f?w.off("drop",F):(y(),w.on("drop",F))):"textarea"!==w[0].tagName.toLowerCase()&&"input"!==w[0].tagName.toLowerCase()?T(G(e)):w.val(e)),r&&u.placeholder&&(""===e?n?w.removeClass("placeholder-text"):w.addClass("placeholder-text"):w.removeClass("placeholder-text")),z=i=!1}},u.taReadonly&&((f=$.$eval(u.taReadonly))?(w.addClass("ta-readonly"),"textarea"!==w[0].tagName.toLowerCase()&&"input"!==w[0].tagName.toLowerCase()||w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable")):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):r&&w.attr("contenteditable","true")),$.$watch(u.taReadonly,function(e,t){t!==e&&(e?(w.addClass("ta-readonly"),"textarea"!==w[0].tagName.toLowerCase()&&"input"!==w[0].tagName.toLowerCase()||w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable"),angular.forEach(q,function(e){w.find(e).on("click",v)}),w.off("drop",F)):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):r&&w.attr("contenteditable","true"),angular.forEach(q,function(e){w.find(e).off("click",v)}),w.on("drop",F)),f=e)})),r&&!f&&(angular.forEach(q,function(e){w.find(e).on("click",v)}),w.on("drop",F))}}}]);var dropFired=!1,textAngular=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);function validElementString(e){try{return 0!==angular.element(e).length}catch(e){return!1}}textAngular.config([function(){angular.forEach(taTools,function(e,t){delete taTools[t]})}]),textAngular.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$document","$animate","$log","$q","$parse",function(S,x,C,E,T,D,k,R,M,A,N){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(c,t,d,n){var e,r,i,a,o,s,l,u,f,p,h,g,m=d.serial?d.serial:Math.floor(1e16*Math.random());c._name=d.name?d.name:"textAngularEditor"+m;var v=function(e,t,n){x(function(){e.one(t,n)},100)};if(f=T(d.taDefaultWrap),angular.extend(c,angular.copy(C),{wrapSelection:function(e,t,n){"undo"===e.toLowerCase()?c["$undoTaBindtaTextElement"+m]():"redo"===e.toLowerCase()?c["$redoTaBindtaTextElement"+m]():(f(e,!1,t,c.defaultTagAttributes),n&&c["reApplyOnSelectorHandlerstaTextElement"+m](),c.displayElements.text[0].focus())},showHtml:c.$eval(d.taShowHtml)||!1}),d.taFocussedClass&&(c.classes.focussed=d.taFocussedClass),d.taTextEditorClass&&(c.classes.textEditor=d.taTextEditorClass),d.taHtmlEditorClass&&(c.classes.htmlEditor=d.taHtmlEditorClass),d.taDefaultTagAttributes)try{angular.extend(c.defaultTagAttributes,angular.fromJson(d.taDefaultTagAttributes))}catch(e){M.error(e)}d.taTextEditorSetup&&(c.setup.textEditorSetup=c.$parent.$eval(d.taTextEditorSetup)),d.taHtmlEditorSetup&&(c.setup.htmlEditorSetup=c.$parent.$eval(d.taHtmlEditorSetup)),d.taFileDrop?c.fileDropHandler=c.$parent.$eval(d.taFileDrop):c.fileDropHandler=c.defaultFileDropHandler,l=t[0].innerHTML,t[0].innerHTML="",c.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},c.displayElements.popover.append(c.displayElements.popoverArrow),c.displayElements.popover.append(c.displayElements.popoverContainer),c.displayElements.scrollWindow.append(c.displayElements.popover),c.displayElements.popover.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1}),c.handlePopoverEvents=function(){"block"===c.displayElements.popover.css("display")&&(g&&x.cancel(g),g=x(function(){c.reflowPopover(c.resizeElement),c.reflowResizeOverlay(c.resizeElement)},100))},angular.element(window).on("resize",c.handlePopoverEvents),angular.element(window).on("scroll",c.handlePopoverEvents);c.getScrollTop=function(e,t){var n=e.scrollTop;return void 0===n&&(n=0),t&&function(e){var t,n={vertical:!1,horizontal:!1};try{if(null===(t=window.getComputedStyle(e)))return n}catch(e){return n}var r=t["overflow-y"],i=t["overflow-x"];return{vertical:("scroll"===r||"auto"===r)&&e.scrollHeight>e.clientHeight,horizontal:("scroll"===i||"auto"===i)&&e.scrollWidth>e.clientWidth}}(e).vertical&&(e.removeEventListener("scroll",c._scrollListener,!1),e.addEventListener("scroll",c._scrollListener,!1)),0!==n?{node:e.nodeName,top:n}:e.parentNode?c.getScrollTop(e.parentNode,t):{node:"<none>",top:0}},c.showPopover=function(e){c.getScrollTop(c.displayElements.scrollWindow[0],!0),c.displayElements.popover.css("display","block"),x(function(){c.displayElements.resize.overlay.css("display","block")}),c.resizeElement=e,c.reflowPopover(e),R.addClass(c.displayElements.popover,"in"),v(k.find("body"),"click keyup",function(){c.hidePopover()})},c._scrollListener=function(e,t){c.handlePopoverEvents()},c.reflowPopover=function(e){var t=c.getScrollTop(c.displayElements.scrollWindow[0],!1);e[0].offsetTop-t.top<51?(c.displayElements.popover.css("top",e[0].offsetTop+e[0].offsetHeight+c.displayElements.scrollWindow[0].scrollTop+"px"),c.displayElements.popover.removeClass("top").addClass("bottom")):(c.displayElements.popover.css("top",e[0].offsetTop-54+c.displayElements.scrollWindow[0].scrollTop+"px"),c.displayElements.popover.removeClass("bottom").addClass("top"));var n=c.displayElements.text[0].offsetWidth-c.displayElements.popover[0].offsetWidth,r=e[0].offsetLeft+e[0].offsetWidth/2-c.displayElements.popover[0].offsetWidth/2,i=Math.max(0,Math.min(n,r)),a=Math.min(r,Math.max(0,r-n))-11;i+=window.scrollX,a-=window.scrollX,c.displayElements.popover.css("left",i+"px"),c.displayElements.popoverArrow.css("margin-left",a+"px")},c.hidePopover=function(){c.displayElements.popover.css("display","none"),c.displayElements.popoverContainer.attr("style",""),c.displayElements.popoverContainer.attr("class","popover-content"),c.displayElements.popover.removeClass("in"),c.displayElements.resize.overlay.css("display","none")},c.displayElements.resize.overlay.append(c.displayElements.resize.background),angular.forEach(c.displayElements.resize.anchors,function(e){c.displayElements.resize.overlay.append(e)}),c.displayElements.resize.overlay.append(c.displayElements.resize.info),c.displayElements.scrollWindow.append(c.displayElements.resize.overlay),c.displayElements.resize.background.on("click",function(e){c.displayElements.text[0].focus()}),c.reflowResizeOverlay=function(e){e=angular.element(e)[0],c.displayElements.resize.overlay.css({display:"block",left:e.offsetLeft-5+"px",top:e.offsetTop-5+"px",width:e.offsetWidth+10+"px",height:e.offsetHeight+10+"px"}),c.displayElements.resize.info.text(e.offsetWidth+" x "+e.offsetHeight)},c.showResizeOverlay=function(u){var n=k.find("body");p=function(e){var s={width:parseInt(u.attr("width")),height:parseInt(u.attr("height")),x:e.clientX,y:e.clientY};(void 0===s.width||isNaN(s.width))&&(s.width=u[0].offsetWidth),(void 0===s.height||isNaN(s.height))&&(s.height=u[0].offsetHeight),c.hidePopover();var l=s.height/s.width,t=function(e){var t={x:Math.max(0,s.width+(e.clientX-s.x)),y:Math.max(0,s.height+(e.clientY-s.y))},n=void 0!==d.taResizeForceAspectRatio,r=d.taResizeMaintainAspectRatio;if(n||r&&!e.shiftKey){var i=t.y/t.x;t.x=i<l?t.x:t.y/l,t.y=i<l?t.x*l:t.y}var a=angular.element(u);function o(e){return Math.round(Math.max(0,e))}a.css("height",o(t.y)+"px"),a.css("width",o(t.x)+"px"),c.reflowResizeOverlay(u)};n.on("mousemove",t),v(n,"mouseup",function(e){e.preventDefault(),e.stopPropagation(),n.off("mousemove",t),c.$apply(function(){c.hidePopover(),c.updateTaBindtaTextElement()},100)}),e.stopPropagation(),e.preventDefault()},c.displayElements.resize.anchors[3].off("mousedown"),c.displayElements.resize.anchors[3].on("mousedown",p),c.reflowResizeOverlay(u),v(n,"click",function(){c.hideResizeOverlay()})},c.hideResizeOverlay=function(){c.displayElements.resize.anchors[3].off("mousedown",p),c.displayElements.resize.overlay.css("display","none")},c.setup.htmlEditorSetup(c.displayElements.html),c.setup.textEditorSetup(c.displayElements.text),c.displayElements.html.attr({id:"taHtmlElement"+m,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":t.attr("ng-model-options")}),c.displayElements.text.attr({id:"taTextElement"+m,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":t.attr("ng-model-options")}),c.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),d.taDefaultWrap&&c.displayElements.text.attr("ta-default-wrap",d.taDefaultWrap),d.taUnsafeSanitizer&&(c.displayElements.text.attr("ta-unsafe-sanitizer",d.taUnsafeSanitizer),c.displayElements.html.attr("ta-unsafe-sanitizer",d.taUnsafeSanitizer)),d.taKeepStyles&&(c.displayElements.text.attr("ta-keep-styles",d.taKeepStyles),c.displayElements.html.attr("ta-keep-styles",d.taKeepStyles)),c.displayElements.scrollWindow.append(c.displayElements.text),t.append(c.displayElements.scrollWindow),t.append(c.displayElements.html),c.displayElements.forminput.attr("name",c._name),t.append(c.displayElements.forminput),d.tabindex&&(t.removeAttr("tabindex"),c.displayElements.text.attr("tabindex",d.tabindex),c.displayElements.html.attr("tabindex",d.tabindex)),d.placeholder&&(c.displayElements.text.attr("placeholder",d.placeholder),c.displayElements.html.attr("placeholder",d.placeholder)),d.taDisabled&&(c.displayElements.text.attr("ta-readonly","disabled"),c.displayElements.html.attr("ta-readonly","disabled"),c.disabled=c.$parent.$eval(d.taDisabled),c.$parent.$watch(d.taDisabled,function(e){c.disabled=e,c.disabled?t.addClass(c.classes.disabled):t.removeClass(c.classes.disabled)})),d.taPaste&&(c._pasteHandler=function(e){return N(d.taPaste)(c.$parent,{$html:e})},c.displayElements.text.attr("ta-paste","_pasteHandler($html)")),S(c.displayElements.scrollWindow)(c),S(c.displayElements.html)(c),c.updateTaBindtaTextElement=c["updateTaBindtaTextElement"+m],c.updateTaBindtaHtmlElement=c["updateTaBindtaHtmlElement"+m],t.addClass("ta-root"),c.displayElements.scrollWindow.addClass("ta-text ta-editor "+c.classes.textEditor),c.displayElements.html.addClass("ta-html ta-editor "+c.classes.htmlEditor);var y=function(e,t){t!==k[0].queryCommandState(e)&&k[0].execCommand(e,!1,null)},b=c._actionRunning=!1;if(c.startAction=function(){var e,t,n,r;return c._actionRunning=!0,e=k[0].queryCommandState("bold"),t=k[0].queryCommandState("italic"),n=k[0].queryCommandState("underline"),r=k[0].queryCommandState("strikeThrough"),b=rangy.saveSelection(),y("bold",e),y("italic",t),y("underline",n),y("strikeThrough",r),function(){b&&rangy.restoreSelection(b)}},c.endAction=function(){c._actionRunning=!1,b&&(c.showHtml?c.displayElements.html[0].focus():c.displayElements.text[0].focus(),rangy.removeMarkers(b)),b=!1,c.updateSelectedStyles(),c.showHtml||c["updateTaBindtaTextElement"+m]()},o=function(e){c.focussed=!0,t.addClass(c.classes.focussed),u.focus(),t.triggerHandler("focus"),c.updateSelectedStyles&&!c._bUpdateSelectedStyles&&x(function(){c.updateSelectedStyles()},0)},c.displayElements.html.on("focus",o),c.displayElements.text.on("focus",o),s=function(e){return c._actionRunning||k[0].activeElement===c.displayElements.html[0]||k[0].activeElement===c.displayElements.text[0]||(t.removeClass(c.classes.focussed),u.unfocus(),x(function(){c._bUpdateSelectedStyles=!1,t.triggerHandler("blur"),c.focussed=!1},0)),e.preventDefault(),!1},c.displayElements.html.on("blur",s),c.displayElements.text.on("blur",s),c.displayElements.text.on("paste",function(e){t.triggerHandler("paste",e)}),c.queryFormatBlockState=function(e){return!c.showHtml&&e.toLowerCase()===k[0].queryCommandValue("formatBlock").toLowerCase()},c.queryCommandState=function(e){return c.showHtml?"":k[0].queryCommandState(e)},c.switchView=function(){c.showHtml=!c.showHtml,R.enabled(!1,c.displayElements.html),R.enabled(!1,c.displayElements.text),c.showHtml?x(function(){return R.enabled(!0,c.displayElements.html),R.enabled(!0,c.displayElements.text),c.displayElements.html[0].focus()},100):x(function(){return R.enabled(!0,c.displayElements.html),R.enabled(!0,c.displayElements.text),c.displayElements.text[0].focus()},100)},d.ngModel){var $=!0;n.$render=function(){if($){$=!1;var e=c.$parent.$eval(d.ngModel);null==e&&l&&""!==l&&n.$setViewValue(l)}c.displayElements.forminput.val(n.$viewValue),c.html=n.$viewValue||""},t.attr("required")&&(n.$validators.required=function(e,t){var n=e||t;return!(!n||""===n.trim())})}else c.displayElements.forminput.val(l),c.html=l;if(c.$watch("html",function(e,t){e!==t&&(d.ngModel&&n.$viewValue!==e&&n.$setViewValue(e),c.displayElements.forminput.val(e))}),d.taTargetToolbars)u=D.registerEditor(c._name,c,d.taTargetToolbars.split(","));else{var w=angular.element('<div text-angular-toolbar name="textAngularToolbar'+m+'">');d.taToolbar&&w.attr("ta-toolbar",d.taToolbar),d.taToolbarClass&&w.attr("ta-toolbar-class",d.taToolbarClass),d.taToolbarGroupClass&&w.attr("ta-toolbar-group-class",d.taToolbarGroupClass),d.taToolbarButtonClass&&w.attr("ta-toolbar-button-class",d.taToolbarButtonClass),d.taToolbarActiveButtonClass&&w.attr("ta-toolbar-active-button-class",d.taToolbarActiveButtonClass),d.taFocussedClass&&w.attr("ta-focussed-class",d.taFocussedClass),t.prepend(w),S(w)(c.$parent),u=D.registerEditor(c._name,c,["textAngularToolbar"+m])}c.$on("$destroy",function(){D.unregisterEditor(c._name),angular.element(window).off("blur"),angular.element(window).off("resize",c.handlePopoverEvents),angular.element(window).off("scroll",c.handlePopoverEvents)}),c.$on("ta-element-select",function(e,t){u.triggerElementSelect(e,t)&&c["reApplyOnSelectorHandlerstaTextElement"+m]()}),c.$on("ta-drop-event",function(e,t,n,r){r&&r.files&&0<r.files.length?(c.displayElements.text[0].focus(),E.setSelectionToElementEnd(n.target),angular.forEach(r.files,function(e){try{A.when(c.fileDropHandler(e,c.wrapSelection)||c.fileDropHandler!==c.defaultFileDropHandler&&A.when(c.defaultFileDropHandler(e,c.wrapSelection))).then(function(){c["updateTaBindtaTextElement"+m]()})}catch(e){M.error(e)}}),n.preventDefault(),n.stopPropagation()):x(function(){c["updateTaBindtaTextElement"+m]()},0)}),c._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){c._bUpdateSelectedStyles=!1,c.focussed=!1}),c.updateSelectedStyles=function(){var e;h&&x.cancel(h),void 0!==(e=E.getSelectionElement())&&e.parentNode!==c.displayElements.text[0]?u.updateSelectedStyles(angular.element(e)):u.updateSelectedStyles(),c._bUpdateSelectedStyles&&(h=x(c.updateSelectedStyles,200))},e=function(){c.focussed?c._bUpdateSelectedStyles||(c._bUpdateSelectedStyles=!0,c.$apply(function(){c.updateSelectedStyles()})):c._bUpdateSelectedStyles=!1},c.displayElements.html.on("keydown",e),c.displayElements.text.on("keydown",e),r=function(){c._bUpdateSelectedStyles=!1},c.displayElements.html.on("keyup",r),c.displayElements.text.on("keyup",r),i=function(e,t){if(E.getSelection){var n=E.getSelection();E.getSelectionElement()&&"a"===E.getSelectionElement().nodeName.toLowerCase()&&(3===n.start.element.nodeType&&n.start.element.textContent.length===n.end.offset&&E.setSelectionAfterElement(E.getSelectionElement()),3===n.start.element.nodeType&&0===n.start.offset&&E.setSelectionBeforeElement(E.getSelectionElement()))}t&&angular.extend(e,t),c.$apply(function(){if(u.sendKeyCommand(e))return c._bUpdateSelectedStyles||c.updateSelectedStyles(),e.preventDefault(),!1})},c.displayElements.html.on("keypress",i),c.displayElements.text.on("keypress",i),a=function(){c._bUpdateSelectedStyles=!1,x(function(){c.updateSelectedStyles()},0)},c.displayElements.html.on("mouseup",a),c.displayElements.text.on("mouseup",a)}}}]),textAngular.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool","$interval","$rootScope","$log",function(a,p,o,e,t,n){var r,s={},h={},i=0,l=function(t){angular.forEach(h,function(e){e.editorFunctions.updateSelectedStyles(t)})};t.$on("destroy",function(){r&&(e.cancel(r),r=void 0)});var u=function(){50<Math.abs(Date.now()-i)&&(i=Date.now(),r=e(function(){l(),r=void 0},50,1))};return{registerEditor:function(d,f,e){if(!d||""===d)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(h[d])throw'textAngular Error: An Editor with name "'+d+'" already exists';return h[d]={scope:f,toolbars:e,toolbarScopes:[],_registerToolbarScope:function(e){0<=this.toolbars.indexOf(e.name)&&this.toolbarScopes.push(e)},editorFunctions:{disable:function(){angular.forEach(h[d].toolbarScopes,function(e){e.disabled=!0})},enable:function(){angular.forEach(h[d].toolbarScopes,function(e){e.disabled=!1})},focus:function(){angular.forEach(h[d].toolbarScopes,function(e){e._parent=f,e.disabled=!1,e.focussed=!0}),f.focussed=!0},unfocus:function(){angular.forEach(h[d].toolbarScopes,function(e){e.disabled=!0,e.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(n){angular.forEach(h[d].toolbarScopes,function(t){angular.forEach(t.tools,function(e){e.activeState&&(t._parent=f,e.active=e.activeState(n))})})},sendKeyCommand:function(r){var i=!1;return(r.ctrlKey||r.metaKey||r.specialKey)&&angular.forEach(p,function(e,t){if(e.commandKeyCode&&(e.commandKeyCode===r.which||e.commandKeyCode===r.specialKey))for(var n=0;n<h[d].toolbarScopes.length;n++)if(void 0!==h[d].toolbarScopes[n].tools[t]){a.call(h[d].toolbarScopes[n].tools[t],f),i=!0;break}}),i},triggerElementSelect:function(e,n){var r=function(e,t){for(var n=!0,r=0;r<t.length;r++)n=n&&e.attr(t[r]);return n},i=[],a={},t=!1;n=angular.element(n);var o=!1;if(angular.forEach(p,function(e,t){e.onElementSelect&&e.onElementSelect.element&&e.onElementSelect.element.toLowerCase()===n[0].tagName.toLowerCase()&&(!e.onElementSelect.filter||e.onElementSelect.filter(n))&&(o=o||angular.isArray(e.onElementSelect.onlyWithAttrs)&&r(n,e.onElementSelect.onlyWithAttrs),e.onElementSelect.onlyWithAttrs&&!r(n,e.onElementSelect.onlyWithAttrs)||(a[t]=e))}),o?(angular.forEach(a,function(e,t){e.onElementSelect.onlyWithAttrs&&r(n,e.onElementSelect.onlyWithAttrs)&&i.push({name:t,tool:e})}),i.sort(function(e,t){return t.tool.onElementSelect.onlyWithAttrs.length-e.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(a,function(e,t){i.push({name:t,tool:e})}),0<i.length)for(var s=0;s<i.length;s++){for(var l=i[s].tool,u=i[s].name,c=0;c<h[d].toolbarScopes.length;c++)if(void 0!==h[d].toolbarScopes[c].tools[u]){l.onElementSelect.action.call(h[d].toolbarScopes[c].tools[u],e,n,f),t=!0;break}if(t)break}return t}}},angular.forEach(e,function(e){s[e]&&h[d].toolbarScopes.push(s[e])}),u(),h[d].editorFunctions},retrieveEditor:function(e){return h[e]},unregisterEditor:function(e){delete h[e],u()},registerToolbar:function(t){if(!t)throw"textAngular Error: A toolbar requires a scope";if(!t.name||""===t.name)throw"textAngular Error: A toolbar requires a name";if(s[t.name])throw'textAngular Error: A toolbar with name "'+t.name+'" already exists';s[t.name]=t,angular.forEach(h,function(e){e._registerToolbarScope(t)}),u()},retrieveToolbar:function(e){return s[e]},retrieveToolbarsViaEditor:function(e){var t=[],n=this;return angular.forEach(this.retrieveEditor(e).toolbars,function(e){t.push(n.retrieveToolbar(e))}),t},unregisterToolbar:function(e){delete s[e],u()},updateToolsDisplay:function(e){var n=this;angular.forEach(e,function(e,t){n.updateToolDisplay(t,e)})},resetToolsDisplay:function(){var n=this;angular.forEach(p,function(e,t){n.resetToolDisplay(t)}),u()},updateToolDisplay:function(n,r){var i=this;angular.forEach(s,function(e,t){i.updateToolbarToolDisplay(t,n,r)}),u()},resetToolDisplay:function(n){var r=this;angular.forEach(s,function(e,t){r.resetToolbarToolDisplay(t,n)}),u()},updateToolbarToolDisplay:function(e,t,n){if(!s[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';s[e].updateToolDisplay(t,n)},resetToolbarToolDisplay:function(e,t){if(!s[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';s[e].updateToolDisplay(t,p[t],!0)},removeTool:function(i){delete p[i],angular.forEach(s,function(e){delete e.tools[i];for(var t=0;t<e.toolbar.length;t++){for(var n,r=0;r<e.toolbar[t].length;r++){if(e.toolbar[t][r]===i){n={group:t,index:r};break}if(void 0!==n)break}void 0!==n&&(e.toolbar[n.group].slice(n.index,1),e._$element.children().eq(n.group).children().eq(n.index).remove())}}),u()},addTool:function(t,n,r,i){o(t,n),angular.forEach(s,function(e){e.addTool(t,n,r,i)}),u()},addToolToToolbar:function(e,t,n,r,i){o(e,t),s[n].addTool(e,t,r,i),u()},refreshEditor:function(e){if(!h[e])throw'textAngular Error: No Editor with name "'+e+'" exists';h[e].scope.updateTaBindtaTextElement(),h[e].scope.$$phase||h[e].scope.$digest(),u()},sendKeyCommand:function(e,t){var n=h[e._name];if(n&&n.editorFunctions.sendKeyCommand(t))return e._bUpdateSelectedStyles||e.updateSelectedStyles(),t.preventDefault(),!1},updateStyles:l,getVersion:function(){return textAngularVersion},getToolbarScopes:function(){var t=[];return angular.forEach(h,function(e){t=t.concat(e.toolbarScopes)}),t}}}]),textAngular.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(u,t,n,c,r,i){return{scope:{name:"@"},restrict:"EA",link:function(a,o,e){if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";angular.extend(a,angular.copy(n)),e.taToolbar&&(a.toolbar=a.$parent.$eval(e.taToolbar)),e.taToolbarClass&&(a.classes.toolbar=e.taToolbarClass),e.taToolbarGroupClass&&(a.classes.toolbarGroup=e.taToolbarGroupClass),e.taToolbarButtonClass&&(a.classes.toolbarButton=e.taToolbarButtonClass),e.taToolbarActiveButtonClass&&(a.classes.toolbarButtonActive=e.taToolbarActiveButtonClass),e.taFocussedClass&&(a.classes.focussed=e.taFocussedClass),a.disabled=!0,a.focussed=!1,(a._$element=o)[0].innerHTML="",o.addClass("ta-toolbar "+a.classes.toolbar),a.$watch("focussed",function(){a.focussed?o.addClass(a.classes.focussed):o.removeClass(a.classes.focussed)});var s=function(e,t){var n;if(n=e&&e.display?angular.element(e.display):angular.element("<button type='button'>"),e&&e.class?n.addClass(e.class):n.addClass(a.classes.toolbarButton),n.attr("name",t.name),n.attr("ta-button","ta-button"),n.attr("ng-disabled","isDisabled()"),n.attr("tabindex","-1"),n.attr("ng-click","executeAction()"),n.attr("ng-class","displayActiveToolClass(active)"),e&&e.tooltiptext&&n.attr("title",e.tooltiptext),e&&!e.display&&!t._display&&(n[0].innerHTML="",e.buttontext&&(n[0].innerHTML=e.buttontext),e.iconclass)){var r=angular.element("<i>"),i=n[0].innerHTML;r.addClass(e.iconclass),n[0].innerHTML="",n.append(r),i&&""!==i&&n.append("&nbsp;"+i)}return t._lastToolDefinition=angular.copy(e),u(n)(t)};a.tools={},a._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var l={$window:i,$editor:function(){return a._parent},isDisabled:function(){return("html"!==this.name||!a._parent.startAction)&&("function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled)},displayActiveToolClass:function(e){return e?a.classes.toolbarButtonActive:""},executeAction:r};angular.forEach(a.toolbar,function(e){var t=angular.element("<div>");t.addClass(a.classes.toolbarGroup),angular.forEach(e,function(e){a.tools[e]=angular.extend(a.$new(!0),c[e],l,{name:e}),a.tools[e].$element=s(c[e],a.tools[e]),t.append(a.tools[e].$element)}),o.append(t)}),a.updateToolDisplay=function(e,t,n){var r=a.tools[e];if(r){if(r._lastToolDefinition&&!n&&(t=angular.extend({},r._lastToolDefinition,t)),null===t.buttontext&&null===t.iconclass&&null===t.display)throw'textAngular Error: Tool Definition for updating "'+e+'" does not have a valid display/iconclass/buttontext value';null===t.buttontext&&delete t.buttontext,null===t.iconclass&&delete t.iconclass,null===t.display&&delete t.display;var i=s(t,r);r.$element.replaceWith(i),r.$element=i}},a.addTool=function(e,t,n,r){var i;a.tools[e]=angular.extend(a.$new(!0),c[e],l,{name:e}),a.tools[e].$element=s(c[e],a.tools[e]),void 0===n&&(n=a.toolbar.length-1),i=angular.element(o.children()[n]),void 0===r?(i.append(a.tools[e].$element),a.toolbar[n][a.toolbar[n].length-1]=e):(i.children().eq(r).after(a.tools[e].$element),a.toolbar[n][r]=e)},t.registerToolbar(a),a.$on("$destroy",function(){t.unregisterToolbar(a.name)})}}}]),textAngular.directive("textAngularVersion",["textAngularManager",function(e){var r=e.getVersion();return{restrict:"EA",link:function(e,t,n){t.html(r)}}}]),function(e,p,t){"use strict";var c=p.$$minErr("$sanitize");var d=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,f=/^<\/\s*([\w:-]+)[^>]*>/,h=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,g=/^</,m=/^<\//,v=/<!--(.*?)-->/g,y=/(^<!--.*?-->)/,b=/<!DOCTYPE([^>]*?)>/i,$=/<!\[CDATA\[(.*?)]]>/g,n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r=/([^\#-~| |!])/g,w=/^(\s+)/,S=R("area,br,col,hr,img,wbr,input"),i=R("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),a=R("rp,rt"),x=p.extend({},a,i),C=p.extend({},i,R("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),E=p.extend({},a,R("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),o=R("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),T=R("script,style"),s=p.extend({},S,C,E,x,o),D=R("background,cite,href,longdesc,src,usemap,xlink:href"),l=R("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),u=R("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),k=p.extend({},D,u,l);function R(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}var M=document.createElement("pre"),A=/^(\s*)([\s\S]*?)(\s*)$/;function N(e){if(!e)return"";var t=A.exec(e),n=t[1],r=t[3],i=t[2];return i&&(M.innerHTML=i.replace(/</g,"&lt;"),i="textContent"in M?M.textContent:M.innerText),n+i+r}function O(e){return e.replace(/&/g,"&amp;").replace(n,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(r,function(e){var t=e.charCodeAt(0);return t<=159||173==t||1536<=t&&t<=1540||1807==t||6068==t||6069==t||8204<=t&&t<=8207||8232<=t&&t<=8239||8288<=t&&t<=8303||65279==t||65520<=t&&t<=65535?"&#"+t+";":e}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var I=String.prototype.trim?function(e){return p.isString(e)?e.trim():e}:function(e){return p.isString(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e};function _(e,d){var t=!1,f=p.bind(e,e.push);return{start:function(u,c,e){u=p.lowercase(u),!t&&T[u]&&(t=u),t||!0!==s[u]||(f("<"),f(u),p.forEach(c,function(e,t){var n,r,i,a,o,s=p.lowercase(t),l="img"===u&&"src"===s||"background"===s;("style"===s&&""!==(a="",o=e.split(";"),p.forEach(o,function(e){var t=e.split(":");if(2==t.length){var n=I(p.lowercase(t[0]));e=I(p.lowercase(t[1])),(("color"===n||"background-color"===n)&&(e.match(/^rgb\([0-9%,\. ]*\)$/i)||e.match(/^rgba\([0-9%,\. ]*\)$/i)||e.match(/^hsl\([0-9%,\. ]*\)$/i)||e.match(/^hsla\([0-9%,\. ]*\)$/i)||e.match(/^#[0-9a-f]{3,6}$/i)||e.match(/^[a-z]*$/i))||"text-align"===n&&("left"===e||"right"===e||"center"===e||"justify"===e)||"text-decoration"===n&&("underline"===e||"line-through"===e)||"font-weight"===n&&"bold"===e||"font-style"===n&&"italic"===e||"float"===n&&("left"===e||"right"===e||"none"===e)||"vertical-align"===n&&("baseline"===e||"sub"===e||"super"===e||"test-top"===e||"text-bottom"===e||"middle"===e||"top"===e||"bottom"===e||e.match(/[0-9]*(px|em)/)||e.match(/[0-9]+?%/))||"font-size"===n&&("xx-small"===e||"x-small"===e||"small"===e||"medium"===e||"large"===e||"x-large"===e||"xx-large"===e||"larger"===e||"smaller"===e||e.match(/[0-9]*\.?[0-9]*(px|em|rem|mm|q|cm|in|pt|pc|%)/))||("width"===n||"height"===n)&&e.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===n&&e.match(/^ltr|rtl|initial|inherit$/))&&(a+=n+": "+e+";")}}),e=a)||(n=c,r=s,i=e,"img"===u&&n["ta-insert-video"]&&("ta-insert-video"===r||"allowfullscreen"===r||"frameborder"===r||"contenteditable"===r&&"false"===i))||!0===k[s]&&(!0!==D[s]||d(e,l)))&&(f(" "),f(t),f('="'),f(O(e)),f('"'))}),f(e?"/>":">"))},comment:function(e){f(e)},whitespace:function(e){f(O(e))},end:function(e){e=p.lowercase(e),t||!0!==s[e]||(f("</"),f(e),f(">")),e==t&&(t=!1)},chars:function(e){t||f(O(e))}}}p.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(n){return function(e){void 0!==arguments[1]&&(arguments[1].version="taSanitize");var t=[];return function(e,i){"string"!=typeof e&&(e=null==e?"":""+e);var t,n,r,a,s=[],o=e;for(s.last=function(){return s[s.length-1]};e;){if(n=!(a=""),s.last()&&T[s.last()]?(e=e.replace(new RegExp("([^]*)<\\s*\\/\\s*"+s.last()+"[^>]*>","i"),function(e,t){return t=t.replace(v,"$1").replace($,"$1"),i.chars&&i.chars(N(t)),""}),u("",s.last())):(w.test(e)?(r=e.match(w))&&(r[0],i.whitespace&&i.whitespace(r[0]),e=e.replace(r[0],""),n=!1):y.test(e)?(r=e.match(y))&&(i.comment&&i.comment(r[1]),e=e.replace(r[0],""),n=!1):b.test(e)?(r=e.match(b))&&(e=e.replace(r[0],""),n=!1):m.test(e)?(r=e.match(f))&&(e=e.substring(r[0].length),r[0].replace(f,u),n=!1):g.test(e)&&((r=e.match(d))?(r[4]&&(e=e.substring(r[0].length),r[0].replace(d,l)),n=!1):(a+="<",e=e.substring(1))),n&&(t=e.indexOf("<"),a+=t<0?e:e.substring(0,t),e=t<0?"":e.substring(t),i.chars&&i.chars(N(a)))),e==o)throw c("badparse","The sanitizer was unable to parse the following block of html: {0}",e);o=e}function l(e,t,n,r){if(t=p.lowercase(t),C[t])for(;s.last()&&E[s.last()];)u("",s.last());x[t]&&s.last()==t&&u("",t),(r=S[t]||!!r)||s.push(t);var o={};n.replace(h,function(e,t,n,r,i){var a=n||r||i||"";o[t]=N(a)}),i.start&&i.start(t,o,r)}function u(e,t){var n,r=0;if(t=p.lowercase(t))for(r=s.length-1;0<=r&&s[r]!=t;r--);if(0<=r){for(n=s.length-1;r<=n;n--)i.end&&i.end(s[n]);s.length=r}}u()}(e,_(t,function(e,t){return!/^unsafe/.test(n(e,t))})),t.join("")}}]}),p.module("ngSanitize").filter("linky",["$sanitize",function(u){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,d=/^mailto:/;return function(e,n){if(!e)return e;for(var t,r,i,a=e,o=[];t=a.match(c);)r=t[0],t[2]||t[4]||(r=(t[3]?"http://":"mailto:")+r),i=t.index,s(a.substr(0,i)),l(r,t[0].replace(d,"")),a=a.substring(i+t[0].length);return s(a),u(o.join(""));function s(e){var t,n;e&&o.push((t=e,_(n=[],p.noop).chars(t),n.join("")))}function l(e,t){o.push("<a "),p.isDefined(n)&&o.push('target="',n,'" '),o.push('href="',e.replace(/"/g,"&quot;"),'">'),s(t),o.push("</a>")}}}])}(window,window.angular);var taTools={};function registerTextAngularTool(e,t){if(!e||""===e||taTools.hasOwnProperty(e))throw"textAngular Error: A unique name is required for a Tool Definition";if(t.display&&(""===t.display||!validElementString(t.display))||!t.display&&!t.buttontext&&!t.iconclass)throw'textAngular Error: Tool Definition for "'+e+'" does not have a valid display/iconclass/buttontext value';taTools[e]=t}angular.module("textAngularSetup",[]).constant("taRegisterTool",registerTextAngularTool).value("taTools",taTools).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(e){},htmlEditorSetup:function(e){}},defaultFileDropHandler:function(e,t){var n=new FileReader;return"image"===e.type.substring(0,5)&&(n.onload=function(){""!==n.result&&t("insertImage",n.result,!0)},n.readAsDataURL(e),!0)}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(e){var t=angular.element("<iframe></iframe>"),n=e.prop("attributes");angular.forEach(n,function(e){t.attr(e.name,e.value)}),t.attr("src",t.attr("ta-insert-video")),e.replaceWith(t)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(u,c){return{imgOnSelectAction:function(e,t,n){var r=function(){n.updateTaBindtaTextElement(),n.hidePopover()};e.preventDefault(),n.displayElements.popover.css("width","375px");var i=n.displayElements.popoverContainer;i.empty();var a=angular.element('<div class="btn-group" style="padding-right: 6px;">'),o=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');o.on("click",function(e){e.preventDefault(),t.css({width:"100%",height:""}),r()});var s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');s.on("click",function(e){e.preventDefault(),t.css({width:"50%",height:""}),r()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');l.on("click",function(e){e.preventDefault(),t.css({width:"25%",height:""}),r()});var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');u.on("click",function(e){e.preventDefault(),t.css({width:"",height:""}),r()}),a.append(o),a.append(s),a.append(l),a.append(u),i.append(a),a=angular.element('<div class="btn-group" style="padding-right: 6px;">');var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');c.on("click",function(e){e.preventDefault(),t.css("float","left"),t.css("cssFloat","left"),t.css("styleFloat","left"),r()});var d=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');d.on("click",function(e){e.preventDefault(),t.css("float","right"),t.css("cssFloat","right"),t.css("styleFloat","right"),r()});var f=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');f.on("click",function(e){e.preventDefault(),t.css("float",""),t.css("cssFloat",""),t.css("styleFloat",""),r()}),a.append(c),a.append(f),a.append(d),i.append(a),a=angular.element('<div class="btn-group">');var p=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');p.on("click",function(e){e.preventDefault(),t.remove(),r()}),a.append(p),i.append(a),n.showPopover(t),n.showResizeOverlay(t)},aOnSelectAction:function(e,n,r){e.preventDefault(),r.displayElements.popover.css("width","436px");var t=r.displayElements.popoverContainer;t.empty(),t.css("line-height","28px");var i=angular.element('<a href="'+n.attr("href")+'" target="_blank">'+n.attr("href")+"</a>");i.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),t.append(i);var a=angular.element('<div class="btn-group pull-right">'),o=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');o.on("click",function(e){e.preventDefault();var t=u.prompt(c.insertLink.dialogPrompt,n.attr("href"));t&&""!==t&&"http://"!==t&&(n.attr("href",t),r.updateTaBindtaTextElement()),r.hidePopover()}),a.append(o);var s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');s.on("click",function(e){e.preventDefault(),n.replaceWith(n.contents()),r.updateTaBindtaTextElement(),r.hidePopover()}),a.append(s);var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+c.editLink.targetToggle.buttontext+"</button>");"_blank"===n.attr("target")&&l.addClass("active"),l.on("click",function(e){e.preventDefault(),n.attr("target","_blank"===n.attr("target")?"":"_blank"),l.toggleClass("active"),r.updateTaBindtaTextElement()}),a.append(l),t.append(a),r.showPopover(n)},extractYoutubeVideoId:function(e){var t=e.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i);return t&&t[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions","$log",function(n,r,i,s,a,e,t,o){var l={};if(e("",l),!0===t.forceTextAngularSanitize&&"taSanitize"!==l.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");n("html",{iconclass:"fa fa-code",tooltiptext:i.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var u=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(e){var t;n(e.toLowerCase(),{buttontext:e.toUpperCase(),tooltiptext:i.heading.tooltip+e.charAt(1),action:u,activeState:(t=e.toLowerCase(),function(){return this.$editor().queryFormatBlockState(t)})})}),n("p",{buttontext:"P",tooltiptext:i.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),n("pre",{buttontext:"pre",tooltiptext:i.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),n("ul",{iconclass:"fa fa-list-ul",tooltiptext:i.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),n("ol",{iconclass:"fa fa-list-ol",tooltiptext:i.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),n("quote",{iconclass:"fa fa-quote-right",tooltiptext:i.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),n("undo",{iconclass:"fa fa-undo",tooltiptext:i.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),n("redo",{iconclass:"fa fa-repeat",tooltiptext:i.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),n("bold",{iconclass:"fa fa-bold",tooltiptext:i.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),n("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:i.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;if(e)try{t="left"===e.css("text-align")||"left"===e.attr("align")||"right"!==e.css("text-align")&&"center"!==e.css("text-align")&&"justify"!==e.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")}catch(e){t=!1}return t=t||this.$editor().queryCommandState("justifyLeft")}}),n("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:i.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;if(e)try{t="right"===e.css("text-align")}catch(e){t=!1}return t=t||this.$editor().queryCommandState("justifyRight")}}),n("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:i.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(e){var t=!1;if(e)try{t="justify"===e.css("text-align")}catch(e){t=!1}return t=t||this.$editor().queryCommandState("justifyFull")}}),n("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:i.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;if(e)try{t="center"===e.css("text-align")}catch(e){t=!1}return t=t||this.$editor().queryCommandState("justifyCenter")}}),n("indent",{iconclass:"fa fa-indent",tooltiptext:i.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),n("outdent",{iconclass:"fa fa-outdent",tooltiptext:i.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),n("italics",{iconclass:"fa fa-italic",tooltiptext:i.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),n("underline",{iconclass:"fa fa-underline",tooltiptext:i.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),n("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:i.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),n("clear",{iconclass:"fa fa-ban",tooltiptext:i.clear.tooltip,action:function(e,t){var n;this.$editor().wrapSelection("removeFormat",null);var r=angular.element(s.getSelectionElement());n=s.getAllSelectedElements();var i=function(e,t){e=angular.element(e);var n=t;return t||(n=e),angular.forEach(e.children(),function(e){if("ul"===e.tagName.toLowerCase()||"ol"===e.tagName.toLowerCase())n=i(e,n);else{var t=angular.element("<p></p>");t.html(angular.element(e).html()),n.after(t),n=t}}),e.remove(),n};angular.forEach(n,function(e){"ul"!==e.nodeName.toLowerCase()&&"ol"!==e.nodeName.toLowerCase()||i(e)}),angular.forEach(r.find("ul"),i),angular.forEach(r.find("ol"),i);var a=this.$editor(),o=function(e){(e=angular.element(e))[0]!==a.displayElements.text[0]&&e.removeAttr("class"),angular.forEach(e.children(),o)};angular.forEach(r,o),r[0]&&"li"!==r[0].tagName.toLowerCase()&&"ol"!==r[0].tagName.toLowerCase()&&"ul"!==r[0].tagName.toLowerCase()&&"true"!==r[0].getAttribute("contenteditable")&&this.$editor().wrapSelection("formatBlock","default"),t()}});var c=function(e){return-1!==e.toLowerCase().indexOf("javascript")};n("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:i.insertImage.tooltip,action:function(){var e;if((e=r.prompt(i.insertImage.dialogPrompt,"http://"))&&""!==e&&"http://"!==e&&!c(e)){s.getSelectionElement().tagName&&"a"===s.getSelectionElement().tagName.toLowerCase()&&s.setSelectionAfterElement(s.getSelectionElement());var t='<img src="'+e+'">';return this.$editor().wrapSelection("insertHTML",t,!0)}},onElementSelect:{element:"img",action:a.imgOnSelectAction}}),n("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:i.insertVideo.tooltip,action:function(){var e;if(e=r.prompt(i.insertVideo.dialogPrompt,"https://"),!c(e)&&e&&""!==e&&"https://"!==e&&(videoId=a.extractYoutubeVideoId(e),videoId)){var t="https://www.youtube.com/embed/"+videoId,n='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+t+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return s.getSelectionElement().tagName&&"a"===s.getSelectionElement().tagName.toLowerCase()&&s.setSelectionAfterElement(s.getSelectionElement()),this.$editor().wrapSelection("insertHTML",n,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:a.imgOnSelectAction}}),n("insertLink",{tooltiptext:i.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var e;if((e=s.getSelectionElement().tagName&&"a"===s.getSelectionElement().tagName.toLowerCase()?r.prompt(i.insertLink.dialogPrompt,s.getSelectionElement().href):r.prompt(i.insertLink.dialogPrompt,"http://"))&&""!==e&&"http://"!==e&&!c(e))return this.$editor().wrapSelection("createLink",e,!0)},activeState:function(e){return!!e&&"A"===e[0].tagName},onElementSelect:{element:"a",action:a.aOnSelectAction}}),n("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var e=this.$editor().displayElements.text[0].innerHTML||"",t=0;return""!==e.replace(/\s*<[^>]*?>\s*/g,"")&&""!==e.trim()&&(t=e.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=t,this.$editor().wordcount=t,!1}}),n("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=(e[0].innerText||e[0].textContent).replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=t,this.$editor().charcount=t,!1}})}]),function(){var e=angular.module("uiCropper",[]);e.factory("cropAreaCircle",["cropArea",function(t){var e=function(){t.apply(this,arguments),this._boxResizeBaseSize=25,this._boxResizeNormalRatio=1,this._boxResizeHoverRatio=1.2,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._boxResizeNormalSize=this._boxResizeBaseSize*this._boxResizeNormalRatio,this._boxResizeHoverSize=this._boxResizeBaseSize*this._boxResizeHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._boxResizeIsHover=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!1,this._areaIsDragging=!1};return(e.prototype=new t).getType=function(){return"circle"},e.prototype._calcCirclePerimeterCoords=function(e){var t=this._size.w/2,n=e*(Math.PI/180);return[this.getCenterPoint().x+t*Math.cos(n),this.getCenterPoint().y+t*Math.sin(n)]},e.prototype._calcResizeIconCenterCoords=function(){return this._calcCirclePerimeterCoords(-45)},e.prototype._isCoordWithinArea=function(e){return Math.sqrt((e[0]-this.getCenterPoint().x)*(e[0]-this.getCenterPoint().x)+(e[1]-this.getCenterPoint().y)*(e[1]-this.getCenterPoint().y))<this._size.w/2},e.prototype._isCoordWithinBoxResize=function(e){var t=this._calcResizeIconCenterCoords(),n=this._boxResizeHoverSize/2;return e[0]>t[0]-n&&e[0]<t[0]+n&&e[1]>t[1]-n&&e[1]<t[1]+n},e.prototype._drawArea=function(e,t,n){e.arc(t.x,t.y,n.w/2,0,2*Math.PI)},e.prototype.draw=function(){t.prototype.draw.apply(this,arguments);var e=this.getCenterPoint();this._cropCanvas.drawIconMove([e.x,e.y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio),this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(),this._boxResizeBaseSize,this._boxResizeIsHover?this._boxResizeHoverRatio:this._boxResizeNormalRatio)},e.prototype.processMouseMove=function(e,t){var n="default",r=!1;if(this._boxResizeIsHover=!1,this._areaIsHover=!1,this._areaIsDragging)this.setCenterPointOnMove({x:e-this._posDragStartX,y:t-this._posDragStartY}),n="move",r=this._areaIsHover=!0,this._events.trigger("area-move");else if(this._boxResizeIsDragging){var i,a,o;n="nesw-resize",a=e-this._posResizeStartX,i=(o=this._posResizeStartY-t)<a?this._posResizeStartSize.w+2*o:this._posResizeStartSize.w+2*a;var s=(this.getCenterPoint(),{}),l={};s.x=this.getCenterPoint().x-.5*i,l.x=this.getCenterPoint().x+.5*i,s.y=this.getCenterPoint().y-.5*i,l.y=this.getCenterPoint().y+.5*i,this.CircleOnMove(s,l),r=this._boxResizeIsHover=!0,this._events.trigger("area-resize")}else this._isCoordWithinBoxResize([e,t])?(n="nesw-resize",this._areaIsHover=!1,r=this._boxResizeIsHover=!0):this._isCoordWithinArea([e,t])&&(n="move",r=this._areaIsHover=!0);return angular.element(this._ctx.canvas).css({cursor:n}),r},e.prototype.processMouseDown=function(e,t){if(this._isCoordWithinBoxResize([e,t]))this._areaIsDragging=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!0,this._boxResizeIsHover=!0,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start");else if(this._isCoordWithinArea([e,t])){this._areaIsDragging=!0,this._areaIsHover=!0,this._boxResizeIsDragging=!1,this._boxResizeIsHover=!1;var n=this.getCenterPoint();this._posDragStartX=e-n.x,this._posDragStartY=t-n.y,this._events.trigger("area-move-start")}},e.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._boxResizeIsDragging&&(this._boxResizeIsDragging=!1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._boxResizeIsHover=!1,this._posDragStartX=0,this._posDragStartY=0},e}]),e.factory("cropAreaRectangle",["cropArea",function(a){var e=function(){a.apply(this,arguments),this._resizeCtrlBaseRadius=15,this._resizeCtrlNormalRatio=.6,this._resizeCtrlHoverRatio=.7,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize={w:0,h:0},this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1};return(e.prototype=new a).getType=function(){return"rectangle"},e.prototype._calcRectangleCorners=function(){var e=this.getSize(),t=this.getSouthEastBound();return[[e.x,e.y],[t.x,e.y],[e.x,t.y],[t.x,t.y]]},e.prototype._calcRectangleDimensions=function(){var e=this.getSize(),t=this.getSouthEastBound();return{left:e.x,top:e.y,right:t.x,bottom:t.y}},e.prototype._isCoordWithinArea=function(e){var t=this._calcRectangleDimensions();return e[0]>=t.left&&e[0]<=t.right&&e[1]>=t.top&&e[1]<=t.bottom},e.prototype._isCoordWithinResizeCtrl=function(e){for(var t=this._calcRectangleCorners(),n=-1,r=0,i=t.length;r<i;r++){var a=t[r];if(e[0]>a[0]-this._resizeCtrlHoverRadius&&e[0]<a[0]+this._resizeCtrlHoverRadius&&e[1]>a[1]-this._resizeCtrlHoverRadius&&e[1]<a[1]+this._resizeCtrlHoverRadius){n=r;break}}return n},e.prototype._drawArea=function(e,t,n){e.rect(n.x,n.y,n.w,n.h)},e.prototype.draw=function(){a.prototype.draw.apply(this,arguments);var e=this.getCenterPoint();this._cropCanvas.drawIconMove([e.x,e.y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var t=this._calcRectangleCorners(),n=0,r=t.length;n<r;n++){var i=t[n];this._cropCanvas.drawIconResizeBoxBase(i,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===n?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}},e.prototype.processMouseMove=function(e,t){var n="default",r=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this.setCenterPointOnMove({x:e-this._posDragStartX,y:t-this._posDragStartY}),n="move",r=this._areaIsHover=!0,this._events.trigger("area-move");else if(-1<this._resizeCtrlIsDragging){var i=this.getSize(),a=this.getSouthEastBound(),o=e;switch(this._resizeCtrlIsDragging){case 0:this._aspect&&(o=a.x-(a.y-t)*this._aspect),this.setSizeByCorners({x:o,y:t},{x:a.x,y:a.y}),n="nwse-resize";break;case 1:this._aspect&&(o=i.x+(a.y-t)*this._aspect),this.setSizeByCorners({x:i.x,y:t},{x:o,y:a.y}),n="nesw-resize";break;case 2:this._aspect&&(o=a.x-(t-i.y)*this._aspect),this.setSizeByCorners({x:o,y:i.y},{x:a.x,y:t}),n="nesw-resize";break;case 3:this._aspect&&(o=i.x+(t-i.y)*this._aspect),this.setSizeByCorners({x:i.x,y:i.y},{x:o,y:t}),n="nwse-resize"}this._resizeCtrlIsHover=this._resizeCtrlIsDragging,r=!0,this._events.trigger("area-resize")}else{var s=this._isCoordWithinResizeCtrl([e,t]);if(-1<s){switch(s){case 0:n="nwse-resize";break;case 1:case 2:n="nesw-resize";break;case 3:n="nwse-resize"}this._areaIsHover=!1,this._resizeCtrlIsHover=s,r=!0}else this._isCoordWithinArea([e,t])&&(n="move",r=this._areaIsHover=!0)}return angular.element(this._ctx.canvas).css({cursor:n}),r},e.prototype.processMouseDown=function(e,t){var n=this._isCoordWithinResizeCtrl([e,t]);if(-1<n)this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=n,this._resizeCtrlIsHover=n,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start");else if(this._isCoordWithinArea([e,t])){this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1;var r=this.getCenterPoint();this._posDragStartX=e-r.x,this._posDragStartY=t-r.y,this._events.trigger("area-move-start")}},e.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),-1<this._resizeCtrlIsDragging&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},e}]),e.factory("cropAreaSquare",["cropArea",function(a){var e=function(){a.apply(this,arguments),this._resizeCtrlBaseRadius=15,this._resizeCtrlNormalRatio=.6,this._resizeCtrlHoverRatio=.7,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1};return(e.prototype=new a).getType=function(){return"square"},e.prototype._calcSquareCorners=function(){var e=this.getSize(),t=this.getSouthEastBound();return[[e.x,e.y],[t.x,e.y],[e.x,t.y],[t.x,t.y]]},e.prototype._calcSquareDimensions=function(){var e=this.getSize(),t=this.getSouthEastBound();return{left:e.x,top:e.y,right:t.x,bottom:t.y}},e.prototype._isCoordWithinArea=function(e){var t=this._calcSquareDimensions();return e[0]>=t.left&&e[0]<=t.right&&e[1]>=t.top&&e[1]<=t.bottom},e.prototype._isCoordWithinResizeCtrl=function(e){for(var t=this._calcSquareCorners(),n=-1,r=0,i=t.length;r<i;r++){var a=t[r];if(e[0]>a[0]-this._resizeCtrlHoverRadius&&e[0]<a[0]+this._resizeCtrlHoverRadius&&e[1]>a[1]-this._resizeCtrlHoverRadius&&e[1]<a[1]+this._resizeCtrlHoverRadius){n=r;break}}return n},e.prototype._drawArea=function(e,t,n){e.rect(n.x,n.y,n.w,n.h)},e.prototype.draw=function(){a.prototype.draw.apply(this,arguments);var e=this.getCenterPoint();this._cropCanvas.drawIconMove([e.x,e.y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var t=this._calcSquareCorners(),n=0,r=t.length;n<r;n++){var i=t[n];this._cropCanvas.drawIconResizeBoxBase(i,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===n?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}},e.prototype._clampPoint=function(e,t){var n=this._ctx.canvas.width;return e<0&&(t-=Math.abs(e),e=0),t<0&&(e-=Math.abs(t),t=0),n<e&&(t-=n-e,e=n),n<t&&(e-=n-t,t=n),{x:e,y:t}},e.prototype.processMouseMove=function(e,t){var n="default",r=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this.setCenterPointOnMove({x:e-this._posDragStartX,y:t-this._posDragStartY}),n="move",r=this._areaIsHover=!0,this._events.trigger("area-move");else if(-1<this._resizeCtrlIsDragging){var i,a;switch(this._resizeCtrlIsDragging){case 0:a=i=-1,n="nwse-resize";break;case 1:a=-(i=1),n="nesw-resize";break;case 2:i=-1,a=1,n="nesw-resize";break;case 3:a=i=1,n="nwse-resize"}var o,s=(e-this._posResizeStartX)*i,l=(t-this._posResizeStartY)*a;o=l<s?this._posResizeStartSize.w+l:this._posResizeStartSize.w+s;var u=Math.max(this._minSize.w,o),c={},d={},f={},p={},h=this.getSize(),g=this.getSouthEastBound();switch(this._resizeCtrlIsDragging){case 0:c.x=g.x-u,c.y=g.y-u,c=this._clampPoint(c.x,c.y),this.setSizeByCorners(c,{x:g.x,y:g.y}),n="nwse-resize";break;case 1:p.x=h.x+u,p.y=g.y-u,p=this._clampPoint(p.x,p.y),this.setSizeByCorners({x:h.x,y:p.y},{x:p.x,y:g.y}),n="nesw-resize";break;case 2:f.x=g.x-u,f.y=h.y+u,f=this._clampPoint(f.x,f.y),this.setSizeByCorners({x:f.x,y:h.y},{x:g.x,y:f.y}),n="nesw-resize";break;case 3:d.x=h.x+u,d.y=h.y+u,d=this._clampPoint(d.x,d.y),this.setSizeByCorners({x:h.x,y:h.y},d),n="nwse-resize"}this._resizeCtrlIsHover=this._resizeCtrlIsDragging,r=!0,this._events.trigger("area-resize")}else{var m=this._isCoordWithinResizeCtrl([e,t]);if(-1<m){switch(m){case 0:n="nwse-resize";break;case 1:case 2:n="nesw-resize";break;case 3:n="nwse-resize"}this._areaIsHover=!1,this._resizeCtrlIsHover=m,r=!0}else this._isCoordWithinArea([e,t])&&(n="move",r=this._areaIsHover=!0)}return angular.element(this._ctx.canvas).css({cursor:n}),r},e.prototype.processMouseDown=function(e,t){var n=this._isCoordWithinResizeCtrl([e,t]);if(-1<n)this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=n,this._resizeCtrlIsHover=n,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start");else if(this._isCoordWithinArea([e,t])){this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1;var r=this.getCenterPoint();this._posDragStartX=e-r.x,this._posDragStartY=t-r.y,this._events.trigger("area-move-start")}},e.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),-1<this._resizeCtrlIsDragging&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},e}]),e.factory("cropArea",["cropCanvas",function(n){var e=function(e,t){this._ctx=e,this._events=t,this._minSize={x:0,y:0,w:80,h:80},this._initSize=void 0,this._initCoords=void 0,this._allowCropResizeOnCorners=!1,this._forceAspectRatio=!1,this._aspect=null,this._cropCanvas=new n(e),this._image=new Image,this._size={x:0,y:0,w:150,h:150}};return e.prototype.setAllowCropResizeOnCorners=function(e){this._allowCropResizeOnCorners=e},e.prototype.getImage=function(){return this._image},e.prototype.setImage=function(e){this._image=e},e.prototype.setForceAspectRatio=function(e){this._forceAspectRatio=e},e.prototype.setAspect=function(e){this._aspect=e},e.prototype.getAspect=function(){return this._aspect},e.prototype.getCanvasSize=function(){return{w:this._ctx.canvas.width,h:this._ctx.canvas.height}},e.prototype.getSize=function(){return this._size},e.prototype.setSize=function(e){e=this._processSize(e),this._size=this._preventBoundaryCollision(e)},e.prototype.setSizeOnMove=function(e){e=this._processSize(e),this._size=this._allowCropResizeOnCorners?this._preventBoundaryCollision(e):this._allowMouseOutsideCanvas(e)},e.prototype.CircleOnMove=function(e,t){var n={x:e.x,y:e.y,w:t.x-e.x,h:t.y-e.y},r=this._ctx.canvas.height,i=this._ctx.canvas.width;(n.w>i||n.h>r)&&(i<r?(n.w=i,n.h=i):(n.w=r,n.h=r)),n.x+n.w>i&&(n.x=i-n.w),n.y+n.h>r&&(n.y=r-n.h),n.x<0&&(n.x=0),n.y<0&&(n.y=0),this._minSize.w>n.w&&(n.w=this._minSize.w,n.x=this._size.x),this._minSize.h>n.h&&(n.h=this._minSize.h,n.y=this._size.y),this._size=n},e.prototype.setSizeByCorners=function(e,t){var n={x:e.x,y:e.y,w:t.x-e.x,h:t.y-e.y};this.setSize(n)},e.prototype.getSouthEastBound=function(){return this._southEastBound(this.getSize())},e.prototype.setMinSize=function(e){this._minSize=this._processSize(e),this.setSize(this._minSize)},e.prototype.getMinSize=function(){return this._minSize},e.prototype.getCenterPoint=function(){var e=this.getSize();return{x:e.x+e.w/2,y:e.y+e.h/2}},e.prototype.setCenterPoint=function(e){var t=this.getSize();this.setSize({x:e.x-t.w/2,y:e.y-t.h/2,w:t.w,h:t.h})},e.prototype.setCenterPointOnMove=function(e){var t=this.getSize();this.setSizeOnMove({x:e.x-t.w/2,y:e.y-t.h/2,w:t.w,h:t.h})},e.prototype.setInitSize=function(e){this._initSize=this._processSize(e),this.setSize(this._initSize)},e.prototype.getInitSize=function(){return this._initSize},e.prototype.setInitCoords=function(e){e.h=this.getSize().h,e.w=this.getSize().w,this._initCoords=this._processSize(e),this.setSize(this._initCoords)},e.prototype.getInitCoords=function(){return this._initCoords},e.prototype.getType=function(){return"circle"},e.prototype._allowMouseOutsideCanvas=function(e){var t=this._ctx.canvas.height,n=this._ctx.canvas.width,r={w:e.w,h:e.h};return r.x=e.x<0?0:e.x+e.w>n?n-e.w:e.x,r.y=e.y<0?0:e.y+e.h>t?t-e.h:e.y,r},e.prototype._preventBoundaryCollision=function(e){var t=this._ctx.canvas.height,n=this._ctx.canvas.width,r={x:e.x,y:e.y},i=this._southEastBound(e);r.x<0&&(r.x=0),r.y<0&&(r.y=0),i.x>n&&(i.x=n),i.y>t&&(i.y=t);var a=this._forceAspectRatio?e.w:i.x-r.x,o=this._forceAspectRatio?e.h:i.y-r.y;t<o&&(o=t),this._aspect&&(a=o*this._aspect,r.x+a>n&&(o=(a=n-r.x)/this._aspect,this._minSize.w>a&&(a=this._minSize.w),this._minSize.h>o&&(o=this._minSize.h),r.x=n-a),r.y+o>t&&(r.y=t-o)),this._forceAspectRatio&&(a=o,r.x+a>n&&((a=n-r.x)<this._minSize.w&&(a=this._minSize.w),o=a));var s={x:r.x,y:r.y,w:a,h:o};return s.w<this._minSize.w&&!this._forceAspectRatio&&(s.w=this._minSize.w,(i=this._southEastBound(s)).x>n&&(i.x=n,r.x=Math.max(i.x-n,i.x-this._minSize.w),s={x:r.x,y:r.y,w:i.x-r.x,h:i.y-r.y})),s.h<this._minSize.h&&!this._forceAspectRatio&&(s.h=this._minSize.h,(i=this._southEastBound(s)).y>t&&(i.y=t,r.y=Math.max(i.y-t,i.y-this._minSize.h),s={x:r.x,y:r.y,w:i.x-r.x,h:i.y-r.y})),this._forceAspectRatio&&((i=this._southEastBound(s)).y>t&&(s.y=t-s.h),i.x>n&&(s.x=n-s.w)),s},e.prototype._dontDragOutside=function(){var e=this._ctx.canvas.height,t=this._ctx.canvas.width;this._width>t&&(this._width=t),this._height>e&&(this._height=e),this._x<this._width/2&&(this._x=this._width/2),this._x>t-this._width/2&&(this._x=t-this._width/2),this._y<this._height/2&&(this._y=this._height/2),this._y>e-this._height/2&&(this._y=e-this._height/2)},e.prototype._drawArea=function(){},e.prototype._processSize=function(e){"number"==typeof e&&(e={w:e,h:e});var t=e.w;return this._aspect&&(t=e.h*this._aspect),{x:void 0===e.x?this.getSize().x:e.x,y:void 0===e.y?this.getSize().y:e.y,w:t||this._minSize.w,h:e.h||this._minSize.h}},e.prototype._southEastBound=function(e){return{x:e.x+e.w,y:e.y+e.h}},e.prototype.draw=function(){this._cropCanvas.drawCropArea(this._image,this.getCenterPoint(),this._size,this._drawArea)},e.prototype.processMouseMove=function(){},e.prototype.processMouseDown=function(){},e.prototype.processMouseUp=function(){},e}]),e.factory("cropCanvas",[function(){var i=[[-.5,-2],[-3,-4.5],[-.5,-7],[-7,-7],[-7,-.5],[-4.5,-3],[-2,-.5]],a=[[.5,-2],[3,-4.5],[.5,-7],[7,-7],[7,-.5],[4.5,-3],[2,-.5]],o=[[-.5,2],[-3,4.5],[-.5,7],[-7,7],[-7,.5],[-4.5,3],[-2,.5]],u=[[.5,2],[3,4.5],[.5,7],[7,7],[7,.5],[4.5,3],[2,.5]],n=[[-1.5,-2.5],[-1.5,-6],[-5,-6],[0,-11],[5,-6],[1.5,-6],[1.5,-2.5]],c=[[-2.5,-1.5],[-6,-1.5],[-6,-5],[-11,0],[-6,5],[-6,1.5],[-2.5,1.5]],d=[[-1.5,2.5],[-1.5,6],[-5,6],[0,11],[5,6],[1.5,6],[1.5,2.5]],f=[[2.5,-1.5],[6,-1.5],[6,-5],[11,0],[6,5],[6,1.5],[2.5,1.5]],p="#fff",h="#bababa",g="#444",m="#fff",v="#bababa",y="#444",b="#fff",$=1;return function(l){var s=function(e,t,n){return[n*e[0]+t[0],n*e[1]+t[1]]},r=function(e,t,n,r){l.save(),l.fillStyle=t,l.beginPath();var i,a=s(e[0],n,r);for(var o in l.moveTo(a[0],a[1]),e)0<o&&(i=s(e[o],n,r),l.lineTo(i[0],i[1]));l.lineTo(a[0],a[1]),l.fill(),l.closePath(),l.restore()};this.drawIconMove=function(e,t){r(n,b,e,t),r(c,b,e,t),r(d,b,e,t),r(f,b,e,t)},this.drawIconResizeCircle=function(e,t,n){var r=t*n;l.save(),l.strokeStyle=v,l.lineWidth=$,l.fillStyle=y,l.beginPath(),l.arc(e[0],e[1],r,0,2*Math.PI),l.fill(),l.stroke(),l.closePath(),l.restore()},this.drawIconResizeBoxBase=function(e,t,n){var r=t*n;l.save(),l.strokeStyle=h,l.lineWidth=$,l.fillStyle=g,l.fillRect(e[0]-r/2,e[1]-r/2,r,r),l.strokeRect(e[0]-r/2,e[1]-r/2,r,r),l.restore()},this.drawIconResizeBoxNESW=function(e,t,n){this.drawIconResizeBoxBase(e,t,n),r(a,m,e,n),r(o,m,e,n)},this.drawIconResizeBoxNWSE=function(e,t,n){this.drawIconResizeBoxBase(e,t,n),r(i,m,e,n),r(u,m,e,n)},this.drawCropArea=function(e,t,n,r){var i=Math.abs(e.width/l.canvas.width),a=Math.abs(e.height/l.canvas.height),o=Math.abs(t.x-n.w/2),s=Math.abs(t.y-n.h/2);l.save(),l.strokeStyle=p,l.lineWidth=$,l.setLineDash([5,5]),l.beginPath(),r(l,t,n),l.stroke(),l.clip(),0<n.w&&l.drawImage(e,o*i,s*a,Math.abs(n.w*i),Math.abs(n.h*a),o,s,Math.abs(n.w),Math.abs(n.h)),l.beginPath(),r(l,t,n),l.stroke(),l.clip(),l.restore()}}}]),e.service("cropEXIF",[function(){function i(e){return!!e.exifdata}function n(r,i){function t(e){var t=l(e),n=function(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!==t.getUint8(0)||216!==t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n=2,r=e.byteLength;n<r;){if(l=n,56===(s=t).getUint8(l)&&66===s.getUint8(l+1)&&73===s.getUint8(l+2)&&77===s.getUint8(l+3)&&4===s.getUint8(l+4)&&4===s.getUint8(l+5)){var i=t.getUint8(n+7);i%2!=0&&(i+=1),0===i&&(i=4);var a=n+8+i,o=t.getUint16(n+6+i);return u(e,a,o)}n++}var s,l}(e);r.exifdata=t||{},r.iptcdata=n||{},i&&i.call(r)}var e,n,a,o=new FileReader;if(r.src){if(/^data\:/i.test(r.src))t(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,i=new ArrayBuffer(r),a=new Uint8Array(i),o=0;o<r;o++)a[o]=n.charCodeAt(o);return i}(r.src));else/^blob\:/i.test(r.src)&&(o.onload=function(e){t(e.target.result)},e=r.src,n=function(e){o.readAsArrayBuffer(e)},(a=new XMLHttpRequest).open("GET",e,!0),a.responseType="blob",a.onload=function(){(200===this.status||0===this.status)&&n(this.response)},a.send());var s=new XMLHttpRequest;s.onload=function(){if(200!==this.status&&0!==this.status)throw"Could not load image";t(s.response),s=null},s.responseType="arraybuffer",s.open("GET",r.src,!0);try{s.send(null)}catch(e){}}else window.FileReader&&(r instanceof window.Blob||r instanceof window.File)&&(o.onload=function(e){f&&console.log("Got file of length "+e.target.result.byteLength),t(e.target.result)},o.readAsArrayBuffer(r))}function l(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!==t.getUint8(0)||216!==t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n,r=2,i=e.byteLength;r<i;){if(255!==t.getUint8(r))return f&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),f&&console.log(n),225===n)return f&&console.log("Found 0xFFE1 marker"),a(t,r+4,t.getUint16(r+2));r+=2+t.getUint16(r+2)}}function u(e,t,n){for(var r,i,a,o,s=new DataView(e),l={},u=t;u<t+n;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&((o=s.getUint8(u+2))in y&&((a=s.getInt16(u+3))+5,i=y[o],r=h(s,u+5,a),l.hasOwnProperty(i)?l[i]instanceof Array?l[i].push(r):l[i]=[l[i],r]:l[i]=r)),u++;return l}function c(e,t,n,r,i){var a,o,s,l=e.getUint16(n,!i),u={};for(s=0;s<l;s++)a=n+12*s+2,!(o=r[e.getUint16(a,!i)])&&f&&console.log("Unknown tag: "+e.getUint16(a,!i)),u[o]=d(e,a,t,n,i);return u}function d(e,t,n,r,i){var a,o,s,l,u,c,d=e.getUint16(t+2,!i),f=e.getUint32(t+4,!i),p=e.getUint32(t+8,!i)+n;switch(d){case 1:case 7:if(1===f)return e.getUint8(t+8,!i);for(a=4<f?p:t+8,o=[],l=0;l<f;l++)o[l]=e.getUint8(a+l);return o;case 2:return h(e,a=4<f?p:t+8,f-1);case 3:if(1===f)return e.getUint16(t+8,!i);for(a=2<f?p:t+8,o=[],l=0;l<f;l++)o[l]=e.getUint16(a+2*l,!i);return o;case 4:if(1===f)return e.getUint32(t+8,!i);for(o=[],l=0;l<f;l++)o[l]=e.getUint32(p+4*l,!i);return o;case 5:if(1===f)return(s=(u=e.getUint32(p,!i))/(c=e.getUint32(p+4,!i))).numerator=u,s.denominator=c,s;for(o=[],l=0;l<f;l++)u=e.getUint32(p+8*l,!i),c=e.getUint32(p+4+8*l,!i),o[l]=u/c,o[l].numerator=u,o[l].denominator=c;return o;case 9:if(1===f)return e.getInt32(t+8,!i);for(o=[],l=0;l<f;l++)o[l]=e.getInt32(p+4*l,!i);return o;case 10:if(1===f)return e.getInt32(p,!i)/e.getInt32(p+4,!i);for(o=[],l=0;l<f;l++)o[l]=e.getInt32(p+8*l,!i)/e.getInt32(p+4+8*l,!i);return o}}function h(e,t,n){for(var r="",i=t;i<t+n;i++)r+=String.fromCharCode(e.getUint8(i));return r}function a(e,t){if("Exif"!==h(e,t,4))return f&&console.log("Not valid EXIF data! "+h(e,t,4)),!1;var n,r,i,a,o,s=t+6;if(18761===e.getUint16(s))n=!1;else{if(19789!==e.getUint16(s))return f&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!==e.getUint16(s+2,!n))return f&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var l=e.getUint32(s+4,!n);if(l<8)return f&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if((r=c(e,s,s+l,g,n)).ExifIFDPointer)for(i in a=c(e,s,s+r.ExifIFDPointer,p,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[i]=v[i][a[i]];break;case"ExifVersion":case"FlashpixVersion":a[i]=String.fromCharCode(a[i][0],a[i][1],a[i][2],a[i][3]);break;case"ComponentsConfiguration":a[i]=v.Components[a[i][0]]+v.Components[a[i][1]]+v.Components[a[i][2]]+v.Components[a[i][3]]}r[i]=a[i]}if(r.GPSInfoIFDPointer)for(i in o=c(e,s,s+r.GPSInfoIFDPointer,m,n)){switch(i){case"GPSVersionID":o[i]=o[i][0]+"."+o[i][1]+"."+o[i][2]+"."+o[i][3]}r[i]=o[i]}return r}var f=!1,p=this.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},g=this.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},m=this.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},v=this.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},y={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};this.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(i(e)?t&&t.call(e):n(e,t),!0)},this.getTag=function(e,t){return i(e)?e.exifdata[t]:void 0},this.getAllTags=function(e){if(!i(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},this.pretty=function(e){if(!i(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&(r+="object"==typeof n[t]?n[t]instanceof Number?t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":t+" : ["+n[t].length+" values]\r\n":t+" : "+n[t]+"\r\n");return r},this.readFromBinaryFile=function(e){return l(e)}}]),e.factory("cropHost",["$document","$q","cropAreaCircle","cropAreaSquare","cropAreaRectangle","cropEXIF",function(E,T,D,k,R,M){var A=function(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,a=window.pageXOffset||r.scrollLeft||n.scrollLeft,o=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0,l=t.top+i-o,u=t.left+a-s;return{top:Math.round(l),left:Math.round(u)}};return function(d,e,f){function p(){h.clearRect(0,0,h.canvas.width,h.canvas.height),null!==g&&(h.drawImage(g,0,0,h.canvas.width,h.canvas.height),h.save(),h.fillStyle="rgba(0, 0, 0, 0.65)",h.fillRect(0,0,h.canvas.width,h.canvas.height),h.restore(),m.draw())}var h=null,g=null,m=null,l=null,u=null,c=this,v=[100,100],y=[300,300],b=null,n=[],r={w:200,h:200},i=null,$="image/png",w=null,S=!1;this.setInitMax=function(e){l=e},this.setAllowCropResizeOnCorners=function(e){m.setAllowCropResizeOnCorners(e)};var x=function(){if(null!==g){m.setImage(g);var e=[g.width,g.height],t=g.width/g.height,n=e;n[0]>y[0]?(n[0]=y[0],n[1]=n[0]/t):n[0]<v[0]&&(n[0]=v[0],n[1]=n[0]/t),"fixed-height"===b&&n[1]>y[1]?(n[1]=y[1],n[0]=n[1]*t):n[1]<v[1]&&(n[1]=v[1],n[0]=n[1]*t),d.prop("width",n[0]).prop("height",n[1]),"fixed-height"===b&&d.css({"margin-left":-n[0]/2+"px","margin-top":-n[1]/2+"px"});var r=h.canvas.width,i=h.canvas.height,a=c.getAreaType();if("circle"===a||"square"===a)i<r&&(r=i),i=r;else if("rectangle"===a&&u){var o=m.getAspect();o<r/i?r=o*i:i=o*r}if(l?m.setSize({w:r,h:i}):void 0!==m.getInitSize()?m.setSize({w:Math.min(m.getInitSize().w,r/2),h:Math.min(m.getInitSize().h,i/2)}):m.setSize({w:Math.min(200,r/2),h:Math.min(200,i/2)}),m.getInitCoords())if(c.areaInitIsRelativeToImage){var s=g.width/n[0];m.setSize({w:m.getInitSize().w/s,h:m.getInitSize().h/s,x:m.getInitCoords().x/s,y:m.getInitCoords().y/s})}else m.setSize({w:m.getSize().w,h:m.getSize().h,x:m.getInitCoords().x,y:m.getInitCoords().y});else m.setCenterPoint({x:h.canvas.width/2,y:h.canvas.height/2})}else d.prop("width",0).prop("height",0).css({"margin-top":0});p()},a=function(e){return angular.isDefined(e.changedTouches)?e.changedTouches:e.originalEvent.changedTouches},t=function(e){if(null!==g){var t,n,r=A(h.canvas);n="touchmove"===e.type?(t=a(e)[0].pageX,a(e)[0].pageY):(t=e.pageX,e.pageY),m.processMouseMove(t-r.left,n-r.top),p()}},o=function(e){if(e.preventDefault(),e.stopPropagation(),null!==g){var t,n,r=A(h.canvas);n="touchstart"===e.type?(t=a(e)[0].pageX,a(e)[0].pageY):(t=e.pageX,e.pageY),m.processMouseDown(t-r.left,n-r.top),p()}},s=function(e){if(null!==g){var t,n,r=A(h.canvas);n="touchend"===e.type?(t=a(e)[0].pageX,a(e)[0].pageY):(t=e.pageX,e.pageY),m.processMouseUp(t-r.left,n-r.top),p()}},C=function(e){var t,n,r=e,i=m.getCenterPoint(),a={dataURI:null,imageData:null};if(t=(n=angular.element("<canvas></canvas>")[0]).getContext("2d"),n.width=r.w,n.height=r.h,null!==g){var o=(i.x-m.getSize().w/2)*(g.width/h.canvas.width),s=(i.y-m.getSize().h/2)*(g.height/h.canvas.height),l=m.getSize().w*(g.width/h.canvas.width),u=m.getSize().h*(g.height/h.canvas.height);if(S)t.drawImage(g,o,s,l,u,0,0,r.w,r.h);else{var c,d,f=l/u;1<f?c=(d=r.w)/f:d=(c=r.h)*f,t.drawImage(g,o,s,l,u,0,0,Math.round(d),Math.round(c))}a.dataURI=null!==w?n.toDataURL($,w):n.toDataURL($)}return a};this.getResultImage=function(){if(0===n.length)return C(this.getResultImageSize());for(var e=[],t=0;t<n.length;t++)e.push({dataURI:C(n[t]).dataURI,w:n[t].w,h:n[t].h});return e},this.getResultImageDataBlob=function(){var e,t,n=m.getCenterPoint(),r=this.getResultImageSize(),i=T.defer();if(e=(t=angular.element("<canvas></canvas>")[0]).getContext("2d"),t.width=r.w,t.height=r.h,null!==g){var a=(n.x-m.getSize().w/2)*(g.width/h.canvas.width),o=(n.y-m.getSize().h/2)*(g.height/h.canvas.height),s=m.getSize().w*(g.width/h.canvas.width),l=m.getSize().h*(g.height/h.canvas.height);if(S)e.drawImage(g,a,o,s,l,0,0,r.w,r.h);else{var u,c,d=s/l;1<d?u=(c=r.w)/d:c=(u=r.h)*d,e.drawImage(g,a,o,s,l,0,0,Math.round(c),Math.round(u))}}return null!==w?t.toBlob(function(e){i.resolve(e)},$,w):t.toBlob(function(e){i.resolve(e)},$),i.promise},this.getAreaCoords=function(){return m.getSize()},this.getArea=function(){return m},this.setNewImageSource=function(e){if(g=null,x(),e){var d=new Image;d.onload=function(){f.trigger("load-done"),M.getData(d,function(){var e=M.getTag(d,"Orientation");if(-1<[3,6,8].indexOf(e)){var t=document.createElement("canvas"),n=t.getContext("2d"),r=d.width,i=d.height,a=0,o=0,s=0,l=0,u=0;switch(l=r,u=i,e){case 3:a=-d.width,o=-d.height,s=180;break;case 6:r=d.height,i=d.width,o=-d.height,l=i,u=r,s=90;break;case 8:r=d.height,i=d.width,a=-d.width,l=i,u=r,s=270}if(1e3<r||1e3<i){var c=0;1e3<r?(c=1e3/r,r=1e3,i*=c):1e3<i&&(c=1e3/i,i=1e3,r*=c),o*=c,a*=c,l*=c,u*=c}t.width=r,t.height=i,n.rotate(s*Math.PI/180),n.drawImage(d,a,o,l,u),(g=new Image).onload=function(){x(),f.trigger("image-updated")},g.src=t.toDataURL($)}else g=d,f.trigger("image-updated");x()})},d.onerror=function(){f.trigger("load-error")},f.trigger("load-start"),e instanceof window.Blob?d.src=URL.createObjectURL(e):(("http"===e.substring(0,4).toLowerCase()||"//"===e.substring(0,2))&&(d.crossOrigin="anonymous"),d.src=e)}},this.setMaxDimensions=function(e,t){if(y=[e,t],null!==g){var n=h.canvas.width,r=h.canvas.height,i=[g.width,g.height],a=g.width/g.height,o=i;o[0]>y[0]?(o[0]=y[0],o[1]=o[0]/a):o[0]<v[0]&&(o[0]=v[0],o[1]=o[0]/a),"fixed-height"===b&&o[1]>y[1]?(o[1]=y[1],o[0]=o[1]*a):o[1]<v[1]&&(o[1]=v[1],o[0]=o[1]*a),d.prop("width",o[0]).prop("height",o[1]),"fixed-height"===b&&d.css({"margin-left":-o[0]/2+"px","margin-top":-o[1]/2+"px"});var s=h.canvas.width/n,l=h.canvas.height/r,u=Math.min(s,l),c=m.getCenterPoint();m.setSize({w:m.getSize().w*u,h:m.getSize().h*u}),m.setCenterPoint({x:c.x*s,y:c.y*l})}else d.prop("width",0).prop("height",0).css({"margin-top":0});p()},this.setAreaMinSize=function(e){angular.isUndefined(e)||(e="number"==typeof e||"string"==typeof e?{w:parseInt(parseInt(e),10),h:parseInt(parseInt(e),10)}:{w:parseInt(e.w,10),h:parseInt(e.h,10)},isNaN(e.w)||isNaN(e.h)||(m.setMinSize(e),p()))},this.setAreaMinRelativeSize=function(e){if(null!==g&&!angular.isUndefined(e)){var t=m.getCanvasSize();e="number"==typeof e||"string"==typeof e?(i={w:e,h:e},{w:t.w/(g.width/parseInt(parseInt(e),10)),h:t.h/(g.height/parseInt(parseInt(e),10))}):(i=e,{w:t.w/(g.width/parseInt(parseInt(e.w),10)),h:t.h/(g.height/parseInt(parseInt(e.h),10))}),isNaN(e.w)||isNaN(e.h)||(m.setMinSize(e),p())}},this.setAreaInitSize=function(e){angular.isUndefined(e)||(e="number"==typeof e||"string"==typeof e?{w:parseInt(parseInt(e),10),h:parseInt(parseInt(e),10)}:{w:parseInt(e.w,10),h:parseInt(e.h,10)},isNaN(e.w)||isNaN(e.h)||(m.setInitSize(e),p()))},this.setAreaInitCoords=function(e){angular.isUndefined(e)||(e={x:parseInt(e.x,10),y:parseInt(e.y,10)},isNaN(e.x)||isNaN(e.y)||(m.setInitCoords(e),p()))},this.setMaxCanvasDimensions=function(e){if(!angular.isUndefined(e)){var t;t="number"==typeof e||"string"==typeof e?[parseInt(parseInt(e),10),parseInt(parseInt(e),10)]:[parseInt(e.w,10),parseInt(e.h,10)],!isNaN(t[0])&&0<t[0]&&t[0]>v[0]&&!isNaN(t[1])&&0<t[1]&&t[1]>v[1]&&(y=t)}},this.setMinCanvasDimensions=function(e){if(!angular.isUndefined(e)){var t;t="number"==typeof e||"string"==typeof e?[parseInt(parseInt(e),10),parseInt(parseInt(e),10)]:[parseInt(e.w,10),parseInt(e.h,10)],!isNaN(t[0])&&0<=t[0]&&!isNaN(t[1])&&0<=t[1]&&(v=t)}},this.setScalemode=function(e){b=e},this.getScalemode=function(){return b},this.getResultImageSize=function(){if("selection"===r)return m.getSize();if("max"!==r)return r;var e=1;g&&h&&h.canvas&&(e=g.width/h.canvas.width);var t={w:e*m.getSize().w,h:e*m.getSize().h};return i&&(t.w<i.w&&(t.w=i.w),t.h<i.h&&(t.h=i.h)),t},this.setResultImageSize=function(e){if(angular.isArray(e))return n=e.slice(),void(e={w:parseInt(e[0].w,10),h:parseInt(e[0].h,10)});if(!angular.isUndefined(e)){if(angular.isString(e))return void(r=e);angular.isNumber(e)&&(e={w:e=parseInt(e,10),h:e}),e={w:parseInt(e.w,10),h:parseInt(e.h,10)},isNaN(e.w)||isNaN(e.h)||(r=e,p())}},this.setResultImageFormat=function(e){$=e},this.setResultImageQuality=function(e){e=parseFloat(e),!isNaN(e)&&0<=e&&e<=1&&(w=e)},this.getAreaType=function(){return m.getType()},this.setAreaType=function(e){var t=m.getCenterPoint(),n=m.getSize(),r=m.getMinSize(),i=t.x,a=t.y,o=D;"square"===e?o=k:"rectangle"===e&&(o=R),(m=new o(h,f)).setMinSize(r),m.setSize(n),"square"===e||"circle"===e?(S=!0,m.setForceAspectRatio(!0)):(S=!1,m.setForceAspectRatio(!1)),m.setCenterPoint({x:i,y:a}),null!==g&&m.setImage(g),p()},this.getDominantColor=function(e){var t=new Image,n=new ColorThief,r=null,i=T.defer();return t.src=e,t.onload=function(){r=n.getColor(t),i.resolve(r)},i.promise},this.getPalette=function(e){var t=new Image,n=new ColorThief,r=null,i=T.defer();return t.src=e,t.onload=function(){r=n.getPalette(t,colorPaletteLength),i.resolve(r)},i.promise},this.setPaletteColorLength=function(e){colorPaletteLength=e},this.setAspect=function(e){u=!0,m.setAspect(e);var t=m.getMinSize();t.w=t.h*e,m.setMinSize(t);var n=m.getSize();n.w=n.h*e,m.setSize(n)},h=d[0].getContext("2d"),m=new D(h,f),E.on("mousemove",t),d.on("mousedown",o),E.on("mouseup",s),E.on("touchmove",t),d.on("touchstart",o),E.on("touchend",s),this.destroy=function(){E.off("mousemove",t),d.off("mousedown",o),E.off("mouseup",s),E.off("touchmove",t),d.off("touchstart",o),E.off("touchend",s),d.remove()}}}]),e.factory("cropPubSub",[function(){return function(){var n={};this.on=function(e,t){return e.split(" ").forEach(function(e){n[e]||(n[e]=[]),n[e].push(t)}),this},this.trigger=function(e,t){return angular.forEach(n[e],function(e){e.call(null,t)}),this}}}]),e.directive("uiCropper",["$timeout","cropHost","cropPubSub",function(u,c,t){return{restrict:"E",scope:{image:"=",resultImage:"=",resultArrayImage:"=?",resultBlob:"=?",urlBlob:"=?",chargement:"=?",cropject:"=?",maxCanvasDimensions:"=?",minCanvasDimensions:"=?",canvasScalemode:"@?",changeOnFly:"=?",liveView:"=?",initMaxArea:"=?",areaCoords:"=?",areaType:"@",areaMinSize:"=?",areaInitSize:"=?",areaInitCoords:"=?",areaInitIsRelativeToImage:"=?",areaMinRelativeSize:"=?",resultImageSize:"=?",resultImageFormat:"=?",resultImageQuality:"=?",aspectRatio:"=?",allowCropResizeOnCorners:"=?",dominantColor:"=?",paletteColor:"=?",paletteColorLength:"=?",onChange:"&",onLoadBegin:"&",onLoadDone:"&",onLoadError:"&"},template:"<canvas></canvas>",controller:["$scope",function(e){e.events=new t}],link:function(n,r){n.liveView&&"boolean"==typeof n.liveView.block?n.liveView.render=function(e){t(n,!0,e)}:n.liveView={block:!1};var e=n.events,o=new c(r.find("canvas"),{},e);n.canvasScalemode?o.setScalemode(n.canvasScalemode):o.setScalemode("fixed-height"),r.addClass(o.getScalemode());var s,t=function(t,e,n){if(""!==t.image&&(!t.liveView.block||e)){var r,i=o.getResultImage();angular.isArray(i)?(r=i[0].dataURI,t.resultArrayImage=i):r=i.dataURI;var a=window.URL||window.webkitURL;s!==r&&(s=r,t.resultImage=r,t.liveView.callback&&t.liveView.callback(r),n&&n(r),o.getResultImageDataBlob().then(function(e){t.resultBlob=e,t.urlBlob=a.createObjectURL(e)}),t.resultImage&&(o.getDominantColor(t.resultImage).then(function(e){t.dominantColor=e}),o.getPalette(t.resultImage).then(function(e){t.paletteColor=e})),l(t),t.onChange({$dataURI:t.resultImage}))}},l=function(e){e.areaCoords=o.getAreaCoords()},i=function(e){var t=o.getAreaCoords(),n=o.getArea().getImage().width/o.getArea().getCanvasSize().w,r=o.getArea().getImage().height/o.getArea().getCanvasSize().h;e.cropject={canvasSize:o.getArea().getCanvasSize(),areaCoords:t,cropWidth:t.w,cropHeight:t.h,cropTop:t.y,cropLeft:t.x,cropImageWidth:Math.round(t.w*n),cropImageHeight:Math.round(t.h*r),cropImageTop:Math.round(t.y*r),cropImageLeft:Math.round(t.x*n)}},a=function(t){return function(){u(function(){n.$apply(function(e){t(e)})})}};n.chargement||(n.chargement=function(){switch(window.navigator.userLanguage||window.navigator.language){case"nl":case"nl_NL":return"Aan het laden";case"fr":case"fr-FR":return"Chargement";case"es":case"es-ES":return"Cargando";case"ca":case"ca-ES":return"Crrega";case"de":case"de-DE":return"Laden";default:return"Loading"}}());e.on("load-start",a(function(e){e.onLoadBegin({})})).on("load-done",a(function(e){var t=r.children();angular.forEach(t,function(e){angular.element(e).hasClass("loading")&&angular.element(e).remove()}),i(e),e.onLoadDone({})})).on("load-error",a(function(e){e.onLoadError({})})).on("area-move area-resize",a(function(e){e.changeOnFly&&t(e),i(e)})).on("image-updated",a(function(e){o.setAreaMinRelativeSize(e.areaMinRelativeSize)})).on("area-move-end area-resize-end image-updated",a(function(e){t(e),i(e)})),n.$watch("image",function(e){e&&r.append('<div class="loading"><span>'+n.chargement+"...</span></div>"),n.timeout&&u.cancel(n.timeout),n.timeout=u(function(){n.timeout=null,o.setInitMax(n.initMaxArea),o.setNewImageSource(n.image)},100)}),n.$watch("areaType",function(){o.setAreaType(n.areaType),t(n)}),n.$watch("areaMinSize",function(){o.setAreaMinSize(n.areaMinSize),t(n)}),n.$watch("areaMinRelativeSize",function(){""!==n.image&&(o.setAreaMinRelativeSize(n.areaMinRelativeSize),t(n))}),n.$watch("areaInitSize",function(){o.setAreaInitSize(n.areaInitSize),t(n)}),n.$watch("areaInitCoords",function(){o.setAreaInitCoords(n.areaInitCoords),o.areaInitIsRelativeToImage=n.areaInitIsRelativeToImage,t(n)}),n.$watch("maxCanvasDimensions",function(){o.setMaxCanvasDimensions(n.maxCanvasDimensions)}),n.$watch("minCanvasDimensions",function(){o.setMinCanvasDimensions(n.minCanvasDimensions)}),n.$watch("resultImageFormat",function(){o.setResultImageFormat(n.resultImageFormat),t(n)}),n.$watch("resultImageQuality",function(){o.setResultImageQuality(n.resultImageQuality),t(n)}),n.$watch("resultImageSize",function(){o.setResultImageSize(n.resultImageSize),t(n)}),n.$watch("paletteColorLength",function(){o.setPaletteColorLength(n.paletteColorLength)}),n.$watch("aspectRatio",function(){"string"==typeof n.aspectRatio&&""!==n.aspectRatio&&(n.aspectRatio=parseInt(n.aspectRatio)),n.aspectRatio&&o.setAspect(n.aspectRatio)}),n.$watch("allowCropResizeOnCorners",function(){n.allowCropResizeOnCorners&&o.setAllowCropResizeOnCorners(n.allowCropResizeOnCorners)}),n.$watch(function(){return"fixed-height"===o.getScalemode()?[r[0].clientWidth,r[0].clientHeight]:"full-width"===o.getScalemode()?r[0].clientWidth:void 0},function(e){"fixed-height"===o.getScalemode()&&0<e[0]&&0<e[1]&&(o.setMaxDimensions(e[0],e[1]),t(n)),"full-width"===o.getScalemode()&&0<e&&o.setMaxDimensions(e)},!0),n.$on("$destroy",function(){o.destroy()})}}}])}(),function(e){"use strict";var c,d=e.Uint8Array,t=e.HTMLCanvasElement,n=t&&t.prototype,l=/\s*;\s*base64\s*(?:;|$)/i,u="toDataURL";d&&(c=new d([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),t&&!n.toBlob&&(n.toBlob=function(e,t){if(t||(t="image/png"),this.mozGetAsFile)e(this.mozGetAsFile("canvas",t));else if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(t))e(this.msToBlob());else{var n,r=Array.prototype.slice.call(arguments,1),i=this[u].apply(this,r),a=i.indexOf(","),o=i.substring(a+1),s=l.test(i.substring(0,a));Blob.fake?((n=new Blob).encoding=s?"base64":"URI",n.data=o,n.size=o.length):d&&(n=s?new Blob([function(e){for(var t,n,r=e.length,i=new d(r/4*3|0),a=0,o=0,s=[0,0],l=0,u=0;r--;)n=e.charCodeAt(a++),255!==(t=c[n-43])&&void 0!==t&&(s[1]=s[0],s[0]=n,u=u<<6|t,4==++l&&(i[o++]=u>>>16,61!==s[1]&&(i[o++]=u>>>8),61!==s[0]&&(i[o++]=u),l=0));return i}(o)],{type:t}):new Blob([decodeURIComponent(o)],{type:t})),void 0!==e&&e(n)}},n.toBlobHD=n.toDataURLHD?function(){u="toDataURLHD";var e=this.toBlob();return u="toDataURL",e}:n.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(){var h=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};h.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},h.prototype.update=function(e){this.context.putImageData(e,0,0)},h.prototype.getPixelCount=function(){return this.width*this.height},h.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},h.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var e=function(){};if(e.prototype.getColor=function(e,t){return this.getPalette(e,5,t)[0]},e.prototype.getPalette=function(e,t,n){void 0===t&&(t=10),(void 0===n||n<1)&&(n=10);for(var r,i,a,o,s=new h(e),l=s.getImageData().data,u=s.getPixelCount(),c=[],d=0;d<u;d+=n)i=l[(r=4*d)+0],a=l[r+1],o=l[r+2],125<=l[r+3]&&(250<i&&250<a&&250<o||c.push([i,a,o]));var f=g.quantize(c,t),p=f?f.palette():null;return s.removeCanvas(),p},!A)var A={map:function(e,n){var r={};return n?e.map(function(e,t){return r.index=t,n.call(r,e)}):e.slice()},naturalOrder:function(e,t){return e<t?-1:t<e?1:0},sum:function(e,r){var i={};return e.reduce(r?function(e,t,n){return i.index=n,e+r.call(i,t)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?A.map(e,t):e)}};var g=function(){function C(e,t,n){return(e<<2*R)+(t<<R)+n}function E(e){function t(){n.sort(e),r=!0}var n=[],r=!1;return{push:function(e){n.push(e),r=!1},peek:function(e){return r||t(),void 0===e&&(e=n.length-1),n[e]},pop:function(){return r||t(),n.pop()},size:function(){return n.length},map:function(e){return n.map(e)},debug:function(){return r||t(),n}}}function T(e,t,n,r,i,a,o){this.r1=e,this.r2=t,this.g1=n,this.g2=r,this.b1=i,this.b2=a,this.histo=o}function D(){this.vboxes=new E(function(e,t){return A.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function k(e,u){function t(e){var t,n,r,i,a,o=e+"1",s=e+"2",l=0;for(c=u[o];c<=u[s];c++)if(f[c]>d/2){for(r=u.copy(),i=u.copy(),a=(t=c-u[o])<=(n=u[s]-c)?Math.min(u[s]-1,~~(c+n/2)):Math.max(u[o],~~(c-1-t/2));!f[a];)a++;for(l=p[a];!l&&f[a-1];)l=p[--a];return r[s]=a,i[o]=r[s]+1,[r,i]}}if(u.count()){var n=u.r2-u.r1+1,r=u.g2-u.g1+1,i=u.b2-u.b1+1,a=A.max([n,r,i]);if(1==u.count())return[u.copy()];var c,o,s,l,d=0,f=[],p=[];if(a==n)for(c=u.r1;c<=u.r2;c++){for(l=0,o=u.g1;o<=u.g2;o++)for(s=u.b1;s<=u.b2;s++)l+=e[C(c,o,s)]||0;d+=l,f[c]=d}else if(a==r)for(c=u.g1;c<=u.g2;c++){for(l=0,o=u.r1;o<=u.r2;o++)for(s=u.b1;s<=u.b2;s++)l+=e[C(o,c,s)]||0;d+=l,f[c]=d}else for(c=u.b1;c<=u.b2;c++){for(l=0,o=u.r1;o<=u.r2;o++)for(s=u.g1;s<=u.g2;s++)l+=e[C(o,s,c)]||0;d+=l,f[c]=d}return f.forEach(function(e,t){p[t]=d-e}),t(a==n?"r":a==r?"g":"b")}}var R=5,M=8-R;return T.prototype={volume:function(e){return(!this._volume||e)&&(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(e){var t=this,n=t.histo;if(!t._count_set||e){var r,i,a,o=0;for(r=t.r1;r<=t.r2;r++)for(i=t.g1;i<=t.g2;i++)for(a=t.b1;a<=t.b2;a++)index=C(r,i,a),o+=n[index]||0;t._count=o,t._count_set=!0}return t._count},copy:function(){return new T(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(e){var t=this,n=t.histo;if(!t._avg||e){var r,i,a,o,s=0,l=1<<8-R,u=0,c=0,d=0;for(i=t.r1;i<=t.r2;i++)for(a=t.g1;a<=t.g2;a++)for(o=t.b1;o<=t.b2;o++)s+=r=n[C(i,a,o)]||0,u+=r*(i+.5)*l,c+=r*(a+.5)*l,d+=r*(o+.5)*l;t._avg=s?[~~(u/s),~~(c/s),~~(d/s)]:[~~(l*(t.r1+t.r2+1)/2),~~(l*(t.g1+t.g2+1)/2),~~(l*(t.b1+t.b2+1)/2)]}return t._avg},contains:function(e){var t=e[0]>>M;return gval=e[1]>>M,bval=e[2]>>M,t>=this.r1&&t<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}},D.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,r,i=this.vboxes,a=0;a<i.size();a++)((n=Math.sqrt(Math.pow(e[0]-i.peek(a).color[0],2)+Math.pow(e[1]-i.peek(a).color[1],2)+Math.pow(e[2]-i.peek(a).color[2],2)))<t||void 0===t)&&(t=n,r=i.peek(a).color);return r},forcebw:function(){var e=this.vboxes;e.sort(function(e,t){return A.naturalOrder(A.sum(e.color),A.sum(t.color))});var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,r=e[n].color;251<r[0]&&251<r[1]&&251<r[2]&&(e[n].color=[255,255,255])}},{quantize:function(e,t){function n(e,t){for(var n,r=1,i=0;i<1e3;)if((n=e.pop()).count()){var a=k(u,n),o=a[0],s=a[1];if(!o)return;if(e.push(o),s&&(e.push(s),r++),t<=r)return;if(1e3<i++)return}else e.push(n),i++}if(!e.length||t<2||256<t)return!1;var r,i,a,o,s,l,u=(r=e,l=new Array(1<<3*R),r.forEach(function(e){a=e[0]>>M,o=e[1]>>M,s=e[2]>>M,i=C(a,o,s),l[i]=(l[i]||0)+1}),l);u.forEach(function(){});var c,d,f,p,h,g,m,v,y,b,$=(c=u,y=m=h=1e6,b=v=g=0,e.forEach(function(e){d=e[0]>>M,f=e[1]>>M,p=e[2]>>M,d<h?h=d:g<d&&(g=d),f<m?m=f:v<f&&(v=f),p<y?y=p:b<p&&(b=p)}),new T(h,g,m,v,y,b,c)),w=new E(function(e,t){return A.naturalOrder(e.count(),t.count())});w.push($),n(w,.75*t);for(var S=new E(function(e,t){return A.naturalOrder(e.count()*e.volume(),t.count()*t.volume())});w.size();)S.push(w.pop());n(S,t-S.size());for(var x=new D;S.size();)x.push(S.pop());return x}}}();"function"==typeof define&&define.amd?define([],function(){return e}):"object"==typeof exports?module.exports=e:this.ColorThief=e}.call(this),function(){function i(e){return!!e.exifdata}function r(r,i){function t(e){var t=l(e),n=function(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n=2,r=e.byteLength;n<r;){if(l=n,56===(s=t).getUint8(l)&&66===s.getUint8(l+1)&&73===s.getUint8(l+2)&&77===s.getUint8(l+3)&&4===s.getUint8(l+4)&&4===s.getUint8(l+5)){var i=t.getUint8(n+7);i%2!=0&&(i+=1),0===i&&(i=4);var a=n+8+i,o=t.getUint16(n+6+i);return u(e,a,o)}n++}var s,l}(e);r.exifdata=t||{},r.iptcdata=n||{},i&&i.call(r)}if(r.src)if(/^data\:/i.test(r.src)){t(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,i=new ArrayBuffer(r),a=new Uint8Array(i),o=0;o<r;o++)a[o]=n.charCodeAt(o);return i}(r.src))}else if(/^blob\:/i.test(r.src)){(n=new FileReader).onload=function(e){t(e.target.result)},a=r.src,o=function(e){n.readAsArrayBuffer(e)},(s=new XMLHttpRequest).open("GET",a,!0),s.responseType="blob",s.onload=function(){(200==this.status||0===this.status)&&o(this.response)},s.send()}else{var e=new XMLHttpRequest;e.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";t(e.response),e=null},e.open("GET",r.src,!0),e.responseType="arraybuffer",e.send(null)}else if(window.FileReader&&(r instanceof window.Blob||r instanceof window.File)){var n;(n=new FileReader).onload=function(e){f&&console.log("Got file of length "+e.target.result.byteLength),t(e.target.result)},n.readAsArrayBuffer(r)}var a,o,s}function l(e){var t=new DataView(e);if(f&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return f&&console.log("Not a valid JPEG"),!1;for(var n,r=2,i=e.byteLength;r<i;){if(255!=t.getUint8(r))return f&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),f&&console.log(n),225==n)return f&&console.log("Found 0xFFE1 marker"),a(t,r+4,t.getUint16(r+2));r+=2+t.getUint16(r+2)}}function u(e,t,n){for(var r,i,a,o,s=new DataView(e),l={},u=t;u<t+n;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&((o=s.getUint8(u+2))in y&&((a=s.getInt16(u+3))+5,i=y[o],r=h(s,u+5,a),l.hasOwnProperty(i)?l[i]instanceof Array?l[i].push(r):l[i]=[l[i],r]:l[i]=r)),u++;return l}function c(e,t,n,r,i){var a,o,s,l=e.getUint16(n,!i),u={};for(s=0;s<l;s++)a=n+12*s+2,!(o=r[e.getUint16(a,!i)])&&f&&console.log("Unknown tag: "+e.getUint16(a,!i)),u[o]=d(e,a,t,n,i);return u}function d(e,t,n,r,i){var a,o,s,l,u,c,d=e.getUint16(t+2,!i),f=e.getUint32(t+4,!i),p=e.getUint32(t+8,!i)+n;switch(d){case 1:case 7:if(1==f)return e.getUint8(t+8,!i);for(a=4<f?p:t+8,o=[],l=0;l<f;l++)o[l]=e.getUint8(a+l);return o;case 2:return h(e,a=4<f?p:t+8,f-1);case 3:if(1==f)return e.getUint16(t+8,!i);for(a=2<f?p:t+8,o=[],l=0;l<f;l++)o[l]=e.getUint16(a+2*l,!i);return o;case 4:if(1==f)return e.getUint32(t+8,!i);for(o=[],l=0;l<f;l++)o[l]=e.getUint32(p+4*l,!i);return o;case 5:if(1==f)return u=e.getUint32(p,!i),c=e.getUint32(p+4,!i),(s=new Number(u/c)).numerator=u,s.denominator=c,s;for(o=[],l=0;l<f;l++)u=e.getUint32(p+8*l,!i),c=e.getUint32(p+4+8*l,!i),o[l]=new Number(u/c),o[l].numerator=u,o[l].denominator=c;return o;case 9:if(1==f)return e.getInt32(t+8,!i);for(o=[],l=0;l<f;l++)o[l]=e.getInt32(p+4*l,!i);return o;case 10:if(1==f)return e.getInt32(p,!i)/e.getInt32(p+4,!i);for(o=[],l=0;l<f;l++)o[l]=e.getInt32(p+8*l,!i)/e.getInt32(p+4+8*l,!i);return o}}function h(e,t,r){var i="";for(n=t;t+r>n;n++)i+=String.fromCharCode(e.getUint8(n));return i}function a(e,t){if("Exif"!=h(e,t,4))return f&&console.log("Not valid EXIF data! "+h(e,t,4)),!1;var n,r,i,a,o,s=t+6;if(18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return f&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(s+2,!n))return f&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var l=e.getUint32(s+4,!n);if(l<8)return f&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if((r=c(e,s,s+l,g,n)).ExifIFDPointer)for(i in a=c(e,s,s+r.ExifIFDPointer,p,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[i]=v[i][a[i]];break;case"ExifVersion":case"FlashpixVersion":a[i]=String.fromCharCode(a[i][0],a[i][1],a[i][2],a[i][3]);break;case"ComponentsConfiguration":a[i]=v.Components[a[i][0]]+v.Components[a[i][1]]+v.Components[a[i][2]]+v.Components[a[i][3]]}r[i]=a[i]}if(r.GPSInfoIFDPointer)for(i in o=c(e,s,s+r.GPSInfoIFDPointer,m,n)){switch(i){case"GPSVersionID":o[i]=o[i][0]+"."+o[i][1]+"."+o[i][2]+"."+o[i][3]}r[i]=o[i]}return r}var f=!1,t=function(e){return e instanceof t?e:this instanceof t?void(this.EXIFwrapped=e):new t(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.EXIF=t):this.EXIF=t;var p=t.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},g=t.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},m=t.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},v=t.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},y={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};t.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(i(e)?t&&t.call(e):r(e,t),!0)},t.getTag=function(e,t){return i(e)?e.exifdata[t]:void 0},t.getAllTags=function(e){if(!i(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},t.pretty=function(e){if(!i(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&(r+="object"==typeof n[t]?n[t]instanceof Number?t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":t+" : ["+n[t].length+" values]\r\n":t+" : "+n[t]+"\r\n");return r},t.readFromBinaryFile=function(e){return l(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return t})}.call(this),function(){function y(e,t,n,r){var i=e.naturalWidth,a=e.naturalHeight;if(i+a!==!1){var o=n.width,s=n.height,l=t.getContext("2d");l.save(),function(e,t,n,r,i){switch(i){case 5:case 6:case 7:case 8:e.width=r,e.height=n;break;default:e.width=n,e.height=r}switch(i){case 2:t.translate(n,0),t.scale(-1,1);break;case 3:t.translate(n,r),t.rotate(Math.PI);break;case 4:t.translate(0,r),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-r);break;case 7:t.rotate(.5*Math.PI),t.translate(n,-r),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-n,0)}}(t,l,o,s,n.orientation),function(e){var t=e.naturalWidth;if(1048576<t*e.naturalHeight){var n=document.createElement("canvas");n.width=n.height=1;var r=n.getContext("2d");return r.drawImage(e,1-t,0),0===r.getImageData(0,0,1,1).data[3]}return!1}(e)&&(i/=2,a/=2);var u=document.createElement("canvas");u.width=u.height=1024;for(var c=u.getContext("2d"),d=r?function(e,t,n){var r=document.createElement("canvas");r.width=1,r.height=n;var i=r.getContext("2d");i.drawImage(e,0,0);for(var a=i.getImageData(0,0,1,n).data,o=0,s=n,l=n;o<l;)0===a[4*(l-1)+3]?s=l:o=l,l=s+o>>1;var u=l/n;return 0===u?1:u}(e,0,a):1,f=Math.ceil(1024*o/i),p=Math.ceil(1024*s/a/d),h=0,g=0;h<a;){for(var m=0,v=0;m<i;)c.clearRect(0,0,1024,1024),c.drawImage(e,-m,-h),l.drawImage(u,0,0,1024,1024,v,g,f,p),m+=1024,v+=f;h+=1024,g+=p}l.restore(),u=c=null}}function e(e){if(window.Blob&&e instanceof Blob){if(!b)throw Error("No createObjectURL function found to create blob url");var t=new Image;t.src=b.createObjectURL(e),this.blob=e,e=t}if(!e.naturalWidth&&!e.naturalHeight){var r=this;e.onload=e.onerror=function(){var e=r.imageLoadListeners;if(e){r.imageLoadListeners=null;for(var t=0,n=e.length;t<n;t++)e[t]()}},this.imageLoadListeners=[]}this.srcImage=e}var b=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;e.prototype.render=function(e,t,n){if(this.imageLoadListeners){var r=this;this.imageLoadListeners.push(function(){r.render(e,t,n)})}else{t=t||{};var i=this.srcImage.naturalWidth,a=this.srcImage.naturalHeight,o=t.width,s=t.height,l=t.maxWidth,u=t.maxHeight,c=!this.blob||"image/jpeg"===this.blob.type;o&&!s?s=a*o/i<<0:s&&!o?o=i*s/a<<0:(o=i,s=a),l&&l<o&&(s=a*(o=l)/i<<0),u&&u<s&&(o=i*(s=u)/a<<0);var d={width:o,height:s};for(var f in t)d[f]=t[f];var p,h,g,m,v=e.tagName.toLowerCase();"img"===v?e.src=(p=this.srcImage,h=d,g=c,m=document.createElement("canvas"),y(p,m,h,g),m.toDataURL("image/jpeg",h.quality||.8)):"canvas"===v&&y(this.srcImage,e,d,c),"function"==typeof this.onrender&&this.onrender(e),n&&n(),this.blob&&(this.blob=null,b.revokeObjectURL(this.srcImage.src))}},"function"==typeof define&&define.amd?define([],function(){return e}):"object"==typeof exports?module.exports=e:this.MegaPixImage=e}(),angular.module("ngLocale",[],["$provide",function(e){var n="one",r="other";e.value("$locale",{DATETIME_FORMATS:{AMPMS:["a. m.","p. m."],DAY:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],ERANAMES:["antes de Cristo","despus de Cristo"],ERAS:["a. C.","d. C."],FIRSTDAYOFWEEK:0,MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],SHORTMONTH:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],STANDALONEMONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d MMM y H:mm:ss",mediumDate:"d MMM y",mediumTime:"H:mm:ss",short:"d/M/yy H:mm",shortDate:"d/M/yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"es",localeID:"es",pluralCat:function(e,t){return 1==e?n:r}})}]);
//# sourceMappingURL=vendor-43d69eabf3.js.map
